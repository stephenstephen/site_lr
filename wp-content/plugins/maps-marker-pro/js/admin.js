!function(i){var n={};function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=i,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=45)}([function(t,e,i){
/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e="1.7.1";function l(t){var e,i,n,r;for(i=1,n=arguments.length;i<n;i++){r=arguments[i];for(e in r){t[e]=r[e]}}return t}var o=Object.create||function(){function e(){}return function(t){e.prototype=t;return new e}}();function s(t,e){var i=Array.prototype.slice;if(t.bind){return t.bind.apply(t,i.call(arguments,1))}var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var i=0;function c(t){t._leaflet_id=t._leaflet_id||++i;return t._leaflet_id}function n(t,e,i){var n,r,o,a;a=function(){n=false;if(r){o.apply(i,r);r=false}};o=function(){if(n){r=arguments}else{t.apply(i,arguments);setTimeout(a,e);n=true}};return o}function r(t,e,i){var n=e[1],r=e[0],o=n-r;return t===n&&i?t:((t-r)%o+o)%o+r}function u(){return false}function a(t,e){var i=Math.pow(10,e===undefined?6:e);return Math.round(t*i)/i}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return h(t).split(/\s+/)}function d(t,e){if(!Object.prototype.hasOwnProperty.call(t,"options")){t.options=t.options?o(t.options):{}}for(var i in e){t.options[i]=e[i]}return t.options}function f(t,e,i){var n=[];for(var r in t){n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]))}return(!e||e.indexOf("?")===-1?"?":"&")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,n){return t.replace(m,function(t,e){var i=n[e];if(i===undefined){throw new Error("No value provided for variable "+t)}else if(typeof i==="function"){i=i(n)}return i})}var v=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function _(t,e){for(var i=0;i<t.length;i++){if(t[i]===e){return i}}return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,i=Math.max(0,16-(e-x));x=e+i;return window.setTimeout(t,i)}var k=window.requestAnimationFrame||b("RequestAnimationFrame")||w,C=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,i){if(i&&k===w){t.call(e)}else{return k.call(window,s(t,e))}}function S(t){if(t){C.call(window,t)}}var T={extend:l,create:o,bind:s,lastId:i,stamp:c,throttle:n,wrapNum:r,falseFn:u,formatNum:a,trim:h,splitWords:p,setOptions:d,getParamString:f,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:k,cancelFn:C,requestAnimFrame:M,cancelAnimFrame:S};function P(){}function D(t){if(typeof L==="undefined"||!L||!L.Mixin){return}t=v(t)?t:[t];for(var e=0;e<t.length;e++){if(t[e]===L.Mixin.Events){console.warn("Deprecated include of L.Mixin.Events: "+"this property will be removed in future releases, "+"please inherit from L.Evented instead.",(new Error).stack)}}}P.extend=function(t){var e=function(){if(this.initialize){this.initialize.apply(this,arguments)}this.callInitHooks()};var i=e.__super__=this.prototype;var n=o(i);n.constructor=e;e.prototype=n;for(var r in this){if(Object.prototype.hasOwnProperty.call(this,r)&&r!=="prototype"&&r!=="__super__"){e[r]=this[r]}}if(t.statics){l(e,t.statics);delete t.statics}if(t.includes){D(t.includes);l.apply(null,[n].concat(t.includes));delete t.includes}if(n.options){t.options=l(o(n.options),t.options)}l(n,t);n._initHooks=[];n.callInitHooks=function(){if(this._initHooksCalled){return}if(i.callInitHooks){i.callInitHooks.call(this)}this._initHooksCalled=true;for(var t=0,e=n._initHooks.length;t<e;t++){n._initHooks[t].call(this)}};return e},P.include=function(t){l(this.prototype,t);return this},P.mergeOptions=function(t){l(this.prototype.options,t);return this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1);var i=typeof t==="function"?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i);return this};var A={on:function(t,e,i){if(typeof t==="object"){for(var n in t){this._on(n,t[n],e)}}else{t=p(t);for(var r=0,o=t.length;r<o;r++){this._on(t[r],e,i)}}return this},off:function(t,e,i){if(!t){delete this._events}else if(typeof t==="object"){for(var n in t){this._off(n,t[n],e)}}else{t=p(t);for(var r=0,o=t.length;r<o;r++){this._off(t[r],e,i)}}return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];if(!n){n=[];this._events[t]=n}if(i===this){i=undefined}var r={fn:e,ctx:i},o=n;for(var a=0,s=o.length;a<s;a++){if(o[a].fn===e&&o[a].ctx===i){return}}o.push(r)},_off:function(t,e,i){var n,r,o;if(!this._events){return}n=this._events[t];if(!n){return}if(!e){for(r=0,o=n.length;r<o;r++){n[r].fn=u}delete this._events[t];return}if(i===this){i=undefined}if(n){for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx!==i){continue}if(a.fn===e){a.fn=u;if(this._firingCount){this._events[t]=n=n.slice()}n.splice(r,1);return}}}},fire:function(t,e,i){if(!this.listens(t,i)){return this}var n=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o];s.fn.call(s.ctx||this,n)}this._firingCount--}}if(i){this._propagateEvent(n)}return this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length){return true}if(e){for(var n in this._eventParents){if(this._eventParents[n].listens(t,e)){return true}}}return false},once:function(t,e,i){if(typeof t==="object"){for(var n in t){this.once(n,t[n],e)}return this}var r=s(function(){this.off(t,e,i).off(t,r,i)},this);return this.on(t,e,i).on(t,r,i)},addEventParent:function(t){this._eventParents=this._eventParents||{};this._eventParents[c(t)]=t;return this},removeEventParent:function(t){if(this._eventParents){delete this._eventParents[c(t)]}return this},_propagateEvent:function(t){for(var e in this._eventParents){this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),true)}}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var E=P.extend(A);function O(t,e,i){this.x=i?Math.round(t):t;this.y=i?Math.round(e):e}var I=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function B(t,e,i){if(t instanceof O){return t}if(v(t)){return new O(t[0],t[1])}if(t===undefined||t===null){return t}if(typeof t==="object"&&"x"in t&&"y"in t){return new O(t.x,t.y)}return new O(t,e,i)}function z(t,e){if(!t){return}var i=e?[t,e]:t;for(var n=0,r=i.length;n<r;n++){this.extend(i[n])}}function R(t,e){if(!t||t instanceof z){return t}return new z(t,e)}function F(t,e){if(!t){return}var i=e?[t,e]:t;for(var n=0,r=i.length;n<r;n++){this.extend(i[n])}}function j(t,e){if(t instanceof F){return t}return new F(t,e)}function N(t,e,i){if(isNaN(t)||isNaN(e)){throw new Error("Invalid LatLng object: ("+t+", "+e+")")}this.lat=+t;this.lng=+e;if(i!==undefined){this.alt=+i}}function U(t,e,i){if(t instanceof N){return t}if(v(t)&&typeof t[0]!=="object"){if(t.length===3){return new N(t[0],t[1],t[2])}if(t.length===2){return new N(t[0],t[1])}return null}if(t===undefined||t===null){return t}if(typeof t==="object"&&"lat"in t){return new N(t.lat,"lng"in t?t.lng:t.lon,t.alt)}if(e===undefined){return null}return new N(t,e,i)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(B(t))},_add:function(t){this.x+=t.x;this.y+=t.y;return this},subtract:function(t){return this.clone()._subtract(B(t))},_subtract:function(t){this.x-=t.x;this.y-=t.y;return this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){this.x/=t;this.y/=t;return this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){this.x*=t;this.y*=t;return this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},trunc:function(){return this.clone()._trunc()},_trunc:function(){this.x=I(this.x);this.y=I(this.y);return this},distanceTo:function(t){t=B(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){t=B(t);return t.x===this.x&&t.y===this.y},contains:function(t){t=B(t);return Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},z.prototype={extend:function(t){t=B(t);if(!this.min&&!this.max){this.min=t.clone();this.max=t.clone()}else{this.min.x=Math.min(t.x,this.min.x);this.max.x=Math.max(t.x,this.max.x);this.min.y=Math.min(t.y,this.min.y);this.max.y=Math.max(t.y,this.max.y)}return this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;if(typeof t[0]==="number"||t instanceof O){t=B(t)}else{t=R(t)}if(t instanceof z){e=t.min;i=t.max}else{e=i=t}return e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>=e.x&&n.x<=i.x,a=r.y>=e.y&&n.y<=i.y;return o&&a},overlaps:function(t){t=R(t);var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>e.x&&n.x<i.x,a=r.y>e.y&&n.y<i.y;return o&&a},isValid:function(){return!!(this.min&&this.max)}},F.prototype={extend:function(t){var e=this._southWest,i=this._northEast,n,r;if(t instanceof N){n=t;r=t}else if(t instanceof F){n=t._southWest;r=t._northEast;if(!n||!r){return this}}else{return t?this.extend(U(t)||j(t)):this}if(!e&&!i){this._southWest=new N(n.lat,n.lng);this._northEast=new N(r.lat,r.lng)}else{e.lat=Math.min(n.lat,e.lat);e.lng=Math.min(n.lng,e.lng);i.lat=Math.max(r.lat,i.lat);i.lng=Math.max(r.lng,i.lng)}return this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new F(new N(e.lat-n,e.lng-r),new N(i.lat+n,i.lng+r))},getCenter:function(){return new N((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new N(this.getNorth(),this.getWest())},getSouthEast:function(){return new N(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){if(typeof t[0]==="number"||t instanceof N||"lat"in t){t=U(t)}else{t=j(t)}var e=this._southWest,i=this._northEast,n,r;if(t instanceof F){n=t.getSouthWest();r=t.getNorthEast()}else{n=r=t}return n.lat>=e.lat&&r.lat<=i.lat&&n.lng>=e.lng&&r.lng<=i.lng},intersects:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&n.lat<=i.lat,a=r.lng>=e.lng&&n.lng<=i.lng;return o&&a},overlaps:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&n.lat<i.lat,a=r.lng>e.lng&&n.lng<i.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){if(!t){return false}t=j(t);return this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)},isValid:function(){return!!(this._southWest&&this._northEast)}},N.prototype={equals:function(t,e){if(!t){return false}t=U(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===undefined?1e-9:e)},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return G.distance(this,U(t))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new N(this.lat,this.lng,this.alt)}};var H={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite){return null}var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),r=this.transformation.transform(e.max,i);return new z(n,r)},infinite:false,wrapLatLng:function(t){var e=this.wrapLng?r(t.lng,this.wrapLng,true):t.lng,i=this.wrapLat?r(t.lat,this.wrapLat,true):t.lat,n=t.alt;return new N(i,e,n)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,r=e.lng-i.lng;if(n===0&&r===0){return t}var o=t.getSouthWest(),a=t.getNorthEast(),s=new N(o.lat-n,o.lng-r),l=new N(a.lat-n,a.lng-r);return new F(s,l)}},G=l({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=o*o+Math.cos(n)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),Z=6378137,W={R:Z,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=Math.sin(n*e);return new O(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new N((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Z*Math.PI;return new z([-t,-t],[t,t])}()};function V(t,e,i,n){if(v(t)){this._a=t[0];this._b=t[1];this._c=t[2];this._d=t[3];return}this._a=t;this._b=e;this._c=i;this._d=n}function q(t,e,i,n){return new V(t,e,i,n)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){e=e||1;t.x=e*(this._a*t.x+this._b);t.y=e*(this._c*t.y+this._d);return t},untransform:function(t,e){e=e||1;return new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var $=l({},G,{code:"EPSG:3857",projection:W,transformation:function(){var t=.5/(Math.PI*W.R);return q(t,.5,-t,.5)}()}),K=l({},$,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var i="",n,r,o,a,s,l;for(n=0,o=t.length;n<o;n++){s=t[n];for(r=0,a=s.length;r<a;r++){l=s[r];i+=(r?"L":"M")+l.x+" "+l.y}i+=e?Pt?"z":"x":""}return i||"M0 0"}var X=document.documentElement.style,Q="ActiveXObject"in window,tt=Q&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=At("webkit"),nt=At("android"),rt=At("android 2")||At("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=nt&&At("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=!et&&At("chrome"),ct=At("gecko")&&!it&&!st&&!Q,ut=!lt&&At("safari"),ht=At("phantom"),pt="OTransition"in X,dt=navigator.platform.indexOf("Win")===0,ft=Q&&"transition"in X,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,gt="MozPerspective"in X,vt=!window.L_DISABLE_3D&&(ft||mt||gt)&&!pt&&!ht,_t=typeof orientation!=="undefined"||At("mobile"),yt=_t&&it,bt=_t&&mt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!!(window.PointerEvent||xt),kt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Lt=_t&&st,Ct=_t&&ct,Mt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,St=function(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("testPassiveEventSupport",u,e);window.removeEventListener("testPassiveEventSupport",u,e)}catch(t){}return t}(),Tt=function(){return!!document.createElement("canvas").getContext}(),Pt=!!(document.createElementNS&&Y("svg").createSVGRect),Dt=!Pt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;e.style.behavior="url(#default#VML)";return e&&typeof e.adj==="object"}catch(t){return false}}();function At(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Et={ie:Q,ielt9:tt,edge:et,webkit:it,android:nt,android23:rt,androidStock:at,opera:st,chrome:lt,gecko:ct,safari:ut,phantom:ht,opera12:pt,win:dt,ie3d:ft,webkit3d:mt,gecko3d:gt,any3d:vt,mobile:_t,mobileWebkit:yt,mobileWebkit3d:bt,msPointer:xt,pointer:wt,touch:kt,mobileOpera:Lt,mobileGecko:Ct,retina:Mt,passiveEvents:St,canvas:Tt,svg:Pt,vml:Dt},Ot=xt?"MSPointerDown":"pointerdown",It=xt?"MSPointerMove":"pointermove",Bt=xt?"MSPointerUp":"pointerup",zt=xt?"MSPointerCancel":"pointercancel",Rt={},Ft=false;function jt(t,e,i,n){if(e==="touchstart"){Ut(t,i,n)}else if(e==="touchmove"){Vt(t,i,n)}else if(e==="touchend"){qt(t,i,n)}return this}function Nt(t,e,i){var n=t["_leaflet_"+e+i];if(e==="touchstart"){t.removeEventListener(Ot,n,false)}else if(e==="touchmove"){t.removeEventListener(It,n,false)}else if(e==="touchend"){t.removeEventListener(Bt,n,false);t.removeEventListener(zt,n,false)}return this}function Ut(t,e,i){var n=s(function(t){if(t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH){Ge(t)}Wt(t,e)});t["_leaflet_touchstart"+i]=n;t.addEventListener(Ot,n,false);if(!Ft){document.addEventListener(Ot,Ht,true);document.addEventListener(It,Gt,true);document.addEventListener(Bt,Zt,true);document.addEventListener(zt,Zt,true);Ft=true}}function Ht(t){Rt[t.pointerId]=t}function Gt(t){if(Rt[t.pointerId]){Rt[t.pointerId]=t}}function Zt(t){delete Rt[t.pointerId]}function Wt(t,e){t.touches=[];for(var i in Rt){t.touches.push(Rt[i])}t.changedTouches=[t];e(t)}function Vt(t,e,i){var n=function(t){if(t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&t.buttons===0){return}Wt(t,e)};t["_leaflet_touchmove"+i]=n;t.addEventListener(It,n,false)}function qt(t,e,i){var n=function(t){Wt(t,e)};t["_leaflet_touchend"+i]=n;t.addEventListener(Bt,n,false);t.addEventListener(zt,n,false)}var $t=xt?"MSPointerDown":wt?"pointerdown":"touchstart",Kt=xt?"MSPointerUp":wt?"pointerup":"touchend",Yt="_leaflet_";function Jt(t,r,e){var o,a,s=false,n=250;function i(t){if(wt){if(!t.isPrimary){return}if(t.pointerType==="mouse"){return}}else if(t.touches.length>1){return}var e=Date.now(),i=e-(o||e);a=t.touches?t.touches[0]:t;s=i>0&&i<=n;o=e}function l(t){if(s&&!a.cancelBubble){if(wt){if(t.pointerType==="mouse"){return}var e={},i,n;for(n in a){i=a[n];e[n]=i&&i.bind?i.bind(a):i}a=e}a.type="dblclick";a.button=0;r(a);o=null}}t[Yt+$t+e]=i;t[Yt+Kt+e]=l;t[Yt+"dblclick"+e]=r;t.addEventListener($t,i,St?{passive:false}:false);t.addEventListener(Kt,l,St?{passive:false}:false);t.addEventListener("dblclick",r,false);return this}function Xt(t,e){var i=t[Yt+$t+e],n=t[Yt+Kt+e],r=t[Yt+"dblclick"+e];t.removeEventListener($t,i,St?{passive:false}:false);t.removeEventListener(Kt,n,St?{passive:false}:false);t.removeEventListener("dblclick",r,false);return this}var Qt=xe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),te=xe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ee=te==="webkitTransition"||te==="OTransition"?te+"End":"transitionend",ie,ne,re,oe,ae;function se(t){return typeof t==="string"?document.getElementById(t):t}function le(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return i==="auto"?null:i}function ce(t,e,i){var n=document.createElement(t);n.className=e||"";if(i){i.appendChild(n)}return n}function ue(t){var e=t.parentNode;if(e){e.removeChild(t)}}function he(t){while(t.firstChild){t.removeChild(t.firstChild)}}function pe(t){var e=t.parentNode;if(e&&e.lastChild!==t){e.appendChild(t)}}function de(t){var e=t.parentNode;if(e&&e.firstChild!==t){e.insertBefore(t,e.firstChild)}}function fe(t,e){if(t.classList!==undefined){return t.classList.contains(e)}var i=_e(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function me(t,e){if(t.classList!==undefined){var i=p(e);for(var n=0,r=i.length;n<r;n++){t.classList.add(i[n])}}else if(!fe(t,e)){var o=_e(t);ve(t,(o?o+" ":"")+e)}}function ge(t,e){if(t.classList!==undefined){t.classList.remove(e)}else{ve(t,h((" "+_e(t)+" ").replace(" "+e+" "," ")))}}function ve(t,e){if(t.className.baseVal===undefined){t.className=e}else{t.className.baseVal=e}}function _e(t){if(t.correspondingElement){t=t.correspondingElement}return t.className.baseVal===undefined?t.className:t.className.baseVal}function ye(t,e){if("opacity"in t.style){t.style.opacity=e}else if("filter"in t.style){be(t,e)}}function be(t,e){var i=false,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(e===1){return}}e=Math.round(e*100);if(i){i.Enabled=e!==100;i.Opacity=e}else{t.style.filter+=" progid:"+n+"(opacity="+e+")"}}function xe(t){var e=document.documentElement.style;for(var i=0;i<t.length;i++){if(t[i]in e){return t[i]}}return false}function we(t,e,i){var n=e||new O(0,0);t.style[Qt]=(ft?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function ke(t,e){t._leaflet_pos=e;if(vt){we(t,e)}else{t.style.left=e.x+"px";t.style.top=e.y+"px"}}function Le(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document){ie=function(){Oe(window,"selectstart",Ge)};ne=function(){Be(window,"selectstart",Ge)}}else{var Ce=xe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ie=function(){if(Ce){var t=document.documentElement.style;re=t[Ce];t[Ce]="none"}};ne=function(){if(Ce){document.documentElement.style[Ce]=re;re=undefined}}}function Me(){Oe(window,"dragstart",Ge)}function Se(){Be(window,"dragstart",Ge)}function Te(t){while(t.tabIndex===-1){t=t.parentNode}if(!t.style){return}Pe();oe=t;ae=t.style.outline;t.style.outline="none";Oe(window,"keydown",Pe)}function Pe(){if(!oe){return}oe.style.outline=ae;oe=undefined;ae=undefined;Be(window,"keydown",Pe)}function De(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ae(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ee={TRANSFORM:Qt,TRANSITION:te,TRANSITION_END:ee,get:se,getStyle:le,create:ce,remove:ue,empty:he,toFront:pe,toBack:de,hasClass:fe,addClass:me,removeClass:ge,setClass:ve,getClass:_e,setOpacity:ye,testProp:xe,setTransform:we,setPosition:ke,getPosition:Le,disableTextSelection:ie,enableTextSelection:ne,disableImageDrag:Me,enableImageDrag:Se,preventOutline:Te,restoreOutline:Pe,getSizedParentNode:De,getScale:Ae};function Oe(t,e,i,n){if(typeof e==="object"){for(var r in e){Fe(t,r,e[r],i)}}else{e=p(e);for(var o=0,a=e.length;o<a;o++){Fe(t,e[o],i,n)}}return this}var Ie="_leaflet_events";function Be(t,e,i,n){if(typeof e==="object"){for(var r in e){je(t,r,e[r],i)}}else if(e){e=p(e);for(var o=0,a=e.length;o<a;o++){je(t,e[o],i,n)}}else{for(var s in t[Ie]){je(t,s,t[Ie][s])}delete t[Ie]}return this}function ze(){if(wt){return!(et||ut)}}var Re={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fe(e,t,i,n){var r=t+c(i)+(n?"_"+c(n):"");if(e[Ie]&&e[Ie][r]){return this}var o=function(t){return i.call(n||e,t||window.event)};var a=o;if(wt&&t.indexOf("touch")===0){jt(e,t,o,r)}else if(kt&&t==="dblclick"&&!ze()){Jt(e,o,r)}else if("addEventListener"in e){if(t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"){e.addEventListener(Re[t]||t,o,St?{passive:false}:false)}else if(t==="mouseenter"||t==="mouseleave"){o=function(t){t=t||window.event;if(Je(e,t)){a(t)}};e.addEventListener(Re[t],o,false)}else{e.addEventListener(t,a,false)}}else if("attachEvent"in e){e.attachEvent("on"+t,o)}e[Ie]=e[Ie]||{};e[Ie][r]=o}function je(t,e,i,n){var r=e+c(i)+(n?"_"+c(n):""),o=t[Ie]&&t[Ie][r];if(!o){return this}if(wt&&e.indexOf("touch")===0){Nt(t,e,r)}else if(kt&&e==="dblclick"&&!ze()){Xt(t,r)}else if("removeEventListener"in t){t.removeEventListener(Re[e]||e,o,false)}else if("detachEvent"in t){t.detachEvent("on"+e,o)}t[Ie][r]=null}function Ne(t){if(t.stopPropagation){t.stopPropagation()}else if(t.originalEvent){t.originalEvent._stopped=true}else{t.cancelBubble=true}Ye(t);return this}function Ue(t){Fe(t,"wheel",Ne);return this}function He(t){Oe(t,"mousedown touchstart dblclick",Ne);Fe(t,"click",Ke);return this}function Ge(t){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}return this}function Ze(t){Ge(t);Ne(t);return this}function We(t,e){if(!e){return new O(t.clientX,t.clientY)}var i=Ae(e),n=i.boundingClientRect;return new O((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ve=dt&&lt?2*window.devicePixelRatio:ct?window.devicePixelRatio:1;function qe(t){return et?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Ve:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}var $e={};function Ke(t){$e[t.type]=true}function Ye(t){var e=$e[t.type];$e[t.type]=false;return e}function Je(t,e){var i=e.relatedTarget;if(!i){return true}try{while(i&&i!==t){i=i.parentNode}}catch(t){return false}return i!==t}var Xe={on:Oe,off:Be,stopPropagation:Ne,disableScrollPropagation:Ue,disableClickPropagation:He,preventDefault:Ge,stop:Ze,getMousePosition:We,getWheelDelta:qe,fakeStop:Ke,skipped:Ye,isExternalTarget:Je,addListener:Oe,removeListener:Be},Qe=E.extend({run:function(t,e,i,n){this.stop();this._el=t;this._inProgress=true;this._duration=i||.25;this._easeOutPower=1/Math.max(n||.5,.2);this._startPos=Le(t);this._offset=e.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step(true);this._complete()},_animate:function(){this._animId=M(this._animate,this);this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;if(e<i){this._runFrame(this._easeOut(e/i),t)}else{this._runFrame(1);this._complete()}},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));if(e){i._round()}ke(this._el,i);this.fire("step")},_complete:function(){S(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ti=E.extend({options:{crs:$,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:true,zoomAnimationThreshold:4,fadeAnimation:true,markerZoomAnimation:true,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:true},initialize:function(t,e){e=d(this,e);this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=true;this._initContainer(t);this._initLayout();this._onResize=s(this._onResize,this);this._initEvents();if(e.maxBounds){this.setMaxBounds(e.maxBounds)}if(e.zoom!==undefined){this._zoom=this._limitZoom(e.zoom)}if(e.center&&e.zoom!==undefined){this.setView(U(e.center),e.zoom,{reset:true})}this.callInitHooks();this._zoomAnimated=te&&vt&&!Lt&&this.options.zoomAnimation;if(this._zoomAnimated){this._createAnimProxy();Oe(this._proxy,ee,this._catchTransitionEnd,this)}this._addLayers(this.options.layers)},setView:function(t,e,i){e=e===undefined?this._zoom:this._limitZoom(e);t=this._limitCenter(U(t),e,this.options.maxBounds);i=i||{};this._stop();if(this._loaded&&!i.reset&&i!==true){if(i.animate!==undefined){i.zoom=l({animate:i.animate},i.zoom);i.pan=l({animate:i.animate,duration:i.duration},i.pan)}var n=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(n){clearTimeout(this._sizeTimer);return this}}this._resetView(t,e);return this},setZoom:function(t,e){if(!this._loaded){this._zoom=t;return this}return this.setView(this.getCenter(),t,{zoom:e})},zoomIn:function(t,e){t=t||(vt?this.options.zoomDelta:1);return this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){t=t||(vt?this.options.zoomDelta:1);return this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),o=t instanceof O?t:this.latLngToContainerPoint(t),a=o.subtract(r).multiplyBy(1-1/n),s=this.containerPointToLatLng(r.add(a));return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{};t=t.getBounds?t.getBounds():j(t);var i=B(e.paddingTopLeft||e.padding||[0,0]),n=B(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,false,i.add(n));r=typeof e.maxZoom==="number"?Math.min(e.maxZoom,r):r;if(r===Infinity){return{center:t.getCenter(),zoom:r}}var o=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r),l=this.unproject(a.add(s).divideBy(2).add(o),r);return{center:l,zoom:r}},fitBounds:function(t,e){t=j(t);if(!t.isValid()){throw new Error("Bounds are not valid.")}var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){t=B(t).round();e=e||{};if(!t.x&&!t.y){return this.fire("moveend")}if(e.animate!==true&&!this.getSize().contains(t)){this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom());return this}if(!this._panAnim){this._panAnim=new Qe;this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(!e.noMoveStart){this.fire("movestart")}if(e.animate!==false){me(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else{this._rawPanBy(t);this.fire("move").fire("moveend")}return this},flyTo:function(i,n,t){t=t||{};if(t.animate===false||!vt){return this.setView(i,n,t)}this._stop();var r=this.project(this.getCenter()),o=this.project(i),e=this.getSize(),a=this._zoom;i=U(i);n=n===undefined?a:n;var l=Math.max(e.x,e.y),c=l*this.getZoomScale(a,n),u=o.distanceTo(r)||1,s=1.42,h=s*s;function p(t){var e=t?-1:1,i=t?c:l,n=c*c-l*l+e*h*h*u*u,r=2*i*h*u,o=n/r,a=Math.sqrt(o*o+1)-o;var s=a<1e-9?-18:Math.log(a);return s}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return d(t)/f(t)}var g=p(0);function v(t){return l*(f(g)/f(g+s*t))}function _(t){return l*(f(g)*m(g+s*t)-d(g))/h}function y(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),x=(p(1)-g)/s,w=t.duration?1e3*t.duration:1e3*x*.8;function k(){var t=(Date.now()-b)/w,e=y(t)*x;if(t<=1){this._flyToFrame=M(k,this);this._move(this.unproject(r.add(o.subtract(r).multiplyBy(_(e)/u)),a),this.getScaleZoom(l/v(e),a),{flyTo:true})}else{this._move(i,n)._moveEnd(true)}}this._moveStart(true,t.noMoveStart);k.call(this);return this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){t=j(t);if(!t.isValid()){this.options.maxBounds=null;return this.off("moveend",this._panInsideMaxBounds)}else if(this.options.maxBounds){this.off("moveend",this._panInsideMaxBounds)}this.options.maxBounds=t;if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var e=this.options.minZoom;this.options.minZoom=t;if(this._loaded&&e!==t){this.fire("zoomlevelschange");if(this.getZoom()<this.options.minZoom){return this.setZoom(t)}}return this},setMaxZoom:function(t){var e=this.options.maxZoom;this.options.maxZoom=t;if(this._loaded&&e!==t){this.fire("zoomlevelschange");if(this.getZoom()>this.options.maxZoom){return this.setZoom(t)}}return this},panInsideBounds:function(t,e){this._enforcingBounds=true;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,j(t));if(!i.equals(n)){this.panTo(n,e)}this._enforcingBounds=false;return this},panInside:function(t,e){e=e||{};var i=B(e.paddingTopLeft||e.padding||[0,0]),n=B(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),c=R([s.min.add(i),s.max.subtract(n)]);if(!c.contains(a)){this._enforcingBounds=true;var u=o.subtract(a),h=B(a.x+u.x,a.y+u.y);if(a.x<c.min.x||a.x>c.max.x){h.x=o.x-u.x;if(u.x>0){h.x+=l.x-i.x}else{h.x-=l.x-n.x}}if(a.y<c.min.y||a.y>c.max.y){h.y=o.y-u.y;if(u.y>0){h.y+=l.y-i.y}else{h.y-=l.y-n.y}}this.panTo(this.unproject(h),e);this._enforcingBounds=false}return this},invalidateSize:function(t){if(!this._loaded){return this}t=l({animate:false,pan:true},t===true?{animate:true}:t);var e=this.getSize();this._sizeChanged=true;this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),r=i.divideBy(2).round(),o=n.subtract(r);if(!o.x&&!o.y){return this}if(t.animate&&t.pan){this.panBy(o)}else{if(t.pan){this._rawPanBy(o)}this.fire("move");if(t.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:e,newSize:i})},stop:function(){this.setZoom(this._limitZoom(this._zoom));if(!this.options.zoomSnap){this.fire("viewreset")}return this._stop()},locate:function(t){t=this._locateOptions=l({timeout:1e4,watch:false},t);if(!("geolocation"in navigator)){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var e=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);if(t.watch){this._locationWatchId=navigator.geolocation.watchPosition(e,i,t)}else{navigator.geolocation.getCurrentPosition(e,i,t)}return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new N(e,i),r=n.toBounds(t.coords.accuracy*2),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(r);this.setView(n,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:n,bounds:r,timestamp:t.timestamp};for(var l in t.coords){if(typeof t.coords[l]==="number"){s[l]=t.coords[l]}}this.fire("locationfound",s)},addHandler:function(t,e){if(!e){return this}var i=this[t]=new e(this);this._handlers.push(i);if(this.options[t]){i.enable()}return this},remove:function(){this._initEvents(true);this.off("moveend",this._panInsideMaxBounds);if(this._containerId!==this._container._leaflet_id){throw new Error("Map container is being reused by another instance")}try{delete this._container._leaflet_id;delete this._containerId}catch(t){this._container._leaflet_id=undefined;this._containerId=undefined}if(this._locationWatchId!==undefined){this.stopLocate()}this._stop();ue(this._mapPane);if(this._clearControlPos){this._clearControlPos()}if(this._resizeRequest){S(this._resizeRequest);this._resizeRequest=null}this._clearHandlers();if(this._loaded){this.fire("unload")}var t;for(t in this._layers){this._layers[t].remove()}for(t in this._panes){ue(this._panes[t])}this._layers=[];this._panes=[];delete this._mapPane;delete this._renderer;return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=ce("div",i,e||this._mapPane);if(t){this._panes[t]=n}return n},getCenter:function(){this._checkIfLoaded();if(this._lastCenter&&!this._moved()){return this._lastCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new F(e,i)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=j(t);i=B(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),c=R(this.project(s,n),this.project(a,n)).getSize(),u=vt?this.options.zoomSnap:1,h=l.x/c.x,p=l.y/c.y,d=e?Math.max(h,p):Math.min(h,p);n=this.getScaleZoom(d,n);if(u){n=Math.round(n/(u/100))*(u/100);n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u}return Math.max(r,Math.min(o,n))},getSize:function(){if(!this._size||this._sizeChanged){this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new z(i,i.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===undefined?this.getZoom():t)},getPane:function(t){return typeof t==="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;e=e===undefined?this._zoom:e;return i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===undefined?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?Infinity:n},project:function(t,e){e=e===undefined?this._zoom:e;return this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){e=e===undefined?this._zoom:e;return this.options.crs.pointToLatLng(B(t),e)},layerPointToLatLng:function(t){var e=B(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(U(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return B(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return B(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(B(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return We(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=se(t);if(!e){throw new Error("Map container not found.")}else if(e._leaflet_id){throw new Error("Map container is already initialized.")}Oe(e,"scroll",this._onScroll,this);this._containerId=c(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt;me(t,"leaflet-container"+(kt?" leaflet-touch":"")+(Mt?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=le(t,"position");if(e!=="absolute"&&e!=="relative"&&e!=="fixed"){t.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var t=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);ke(this._mapPane,new O(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");this.createPane("popupPane");if(!this.options.markerZoomAnimation){me(t.markerPane,"leaflet-zoom-hide");me(t.shadowPane,"leaflet-zoom-hide")}},_resetView:function(t,e){ke(this._mapPane,new O(0,0));var i=!this._loaded;this._loaded=true;e=this._limitZoom(e);this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,false)._move(t,e)._moveEnd(n);this.fire("viewreset");if(i){this.fire("load")}},_moveStart:function(t,e){if(t){this.fire("zoomstart")}if(!e){this.fire("movestart")}return this},_move:function(t,e,i){if(e===undefined){e=this._zoom}var n=this._zoom!==e;this._zoom=e;this._lastCenter=t;this._pixelOrigin=this._getNewPixelOrigin(t);if(n||i&&i.pinch){this.fire("zoom",i)}return this.fire("move",i)},_moveEnd:function(t){if(t){this.fire("zoomend")}return this.fire("moveend")},_stop:function(){S(this._flyToFrame);if(this._panAnim){this._panAnim.stop()}return this},_rawPanBy:function(t){ke(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds){this.panInsideBounds(this.options.maxBounds)}},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(t){this._targets={};this._targets[c(this._container)]=this;var e=t?Be:Oe;e(this._container,"click dblclick mousedown mouseup "+"mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this);if(this.options.trackResize){e(window,"resize",this._onResize,this)}if(vt&&this.options.transform3DLimit){(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)}},_onResize:function(){S(this._resizeRequest);this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:true})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();if(Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit){this._resetView(this.getCenter(),this.getZoom())}},_findEventTargets:function(t,e){var i=[],n,r=e==="mouseout"||e==="mouseover",o=t.target||t.srcElement,a=false;while(o){n=this._targets[c(o)];if(n&&(e==="click"||e==="preclick")&&!t._simulated&&this._draggableMoved(n)){a=true;break}if(n&&n.listens(e,true)){if(r&&!Je(o,t)){break}i.push(n);if(r){break}}if(o===this._container){break}o=o.parentNode}if(!i.length&&!a&&!r&&Je(o,t)){i=[this]}return i},_handleDOMEvent:function(t){if(!this._loaded||Ye(t)){return}var e=t.type;if(e==="mousedown"||e==="keypress"||e==="keyup"||e==="keydown"){Te(t.target||t.srcElement)}this._fireDOMEvent(t,e)},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var n=l({},t);n.type="preclick";this._fireDOMEvent(n,n.type,i)}if(t._stopped){return}i=(i||[]).concat(this._findEventTargets(t,e));if(!i.length){return}var r=i[0];if(e==="contextmenu"&&r.listens(e,true)){Ge(t)}var o={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var a=r.getLatLng&&(!r._radius||r._radius<=10);o.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t);o.layerPoint=this.containerPointToLayerPoint(o.containerPoint);o.latlng=a?r.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var s=0;s<i.length;s++){i[s].fire(e,o,true);if(o.originalEvent._stopped||i[s].options.bubblingMouseEvents===false&&_(this._mouseEvents,e)!==-1){return}}},_draggableMoved:function(t){t=t.dragging&&t.dragging.enabled()?t:this;return t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++){this._handlers[t].disable()}},whenReady:function(t,e){if(this._loaded){t.call(e||this,{target:this})}else{this.on("load",t,e)}return this},_getMapPanePos:function(){return Le(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==undefined?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return R([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i){return t}var n=this.project(t,e),r=this.getSize().divideBy(2),o=new z(n.subtract(r),n.add(r)),a=this._getBoundsOffset(o,i,e);if(a.round().equals([0,0])){return t}return this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e){return t}var i=this.getPixelBounds(),n=new z(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=R(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),r=n.min.subtract(t.min),o=n.max.subtract(t.max),a=this._rebound(r.x,-o.x),s=this._rebound(r.y,-o.y);return new O(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;if(n){t=Math.round(t/n)*n}return Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ge(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();if((e&&e.animate)!==true&&!this.getSize().contains(i)){return false}this.panBy(i,e);return true},_createAnimProxy:function(){var t=this._proxy=ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t);this.on("zoomanim",function(t){var e=Qt,i=this._proxy.style[e];we(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1));if(i===this._proxy.style[e]&&this._animatingZoom){this._onZoomTransitionEnd()}},this);this.on("load moveend",this._animMoveEnd,this);this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ue(this._proxy);this.off("load moveend",this._animMoveEnd,this);delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();we(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){if(this._animatingZoom&&t.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom){return true}i=i||{};if(!this._zoomAnimated||i.animate===false||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold){return false}var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n);if(i.animate!==true&&!this.getSize().contains(r)){return false}M(function(){this._moveStart(true,false)._animateZoom(t,e,true)},this);return true},_animateZoom:function(t,e,i,n){if(!this._mapPane){return}if(i){this._animatingZoom=true;this._animateToCenter=t;this._animateToZoom=e;me(this._mapPane,"leaflet-zoom-anim")}this.fire("zoomanim",{center:t,zoom:e,noUpdate:n});setTimeout(s(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return}if(this._mapPane){ge(this._mapPane,"leaflet-zoom-anim")}this._animatingZoom=false;this._move(this._animateToCenter,this._animateToZoom);M(function(){this._moveEnd(true)},this)}});function ei(t,e){return new ti(t,e)}var ii=P.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;if(e){e.removeControl(this)}this.options.position=t;if(e){e.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(t){this.remove();this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];me(e,"leaflet-control");if(i.indexOf("bottom")!==-1){n.insertBefore(e,n.firstChild)}else{n.appendChild(e)}this._map.on("unload",this.remove,this);return this},remove:function(){if(!this._map){return this}ue(this._container);if(this.onRemove){this.onRemove(this._map)}this._map.off("unload",this.remove,this);this._map=null;return this},_refocusOnMap:function(t){if(this._map&&t&&t.screenX>0&&t.screenY>0){this._map.getContainer().focus()}}}),ni=function(t){return new ii(t)};ti.include({addControl:function(t){t.addTo(this);return this},removeControl:function(t){t.remove();return this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",o=this._controlContainer=ce("div",r+"control-container",this._container);function t(t,e){var i=r+t+" "+r+e;n[t+e]=ce("div",i,o)}t("top","left");t("top","right");t("bottom","left");t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners){ue(this._controlCorners[t])}ue(this._controlContainer);delete this._controlCorners;delete this._controlContainer}});var ri=ii.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false,sortLayers:false,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){d(this,i);this._layerControlInputs=[];this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var n in t){this._addLayer(t[n],n)}for(n in e){this._addLayer(e[n],n,true)}},onAdd:function(t){this._initLayout();this._update();this._map=t;t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++){this._layers[e].layer.on("add remove",this._onLayerChange,this)}return this._container},addTo:function(t){ii.prototype.addTo.call(this,t);return this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++){this._layers[t].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(t,e){this._addLayer(t,e);return this._map?this._update():this},addOverlay:function(t,e){this._addLayer(t,e,true);return this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c(t));if(e){this._layers.splice(this._layers.indexOf(e),1)}return this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded");this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);if(t<this._section.clientHeight){me(this._section,"leaflet-control-layers-scrollbar");this._section.style.height=t+"px"}else{ge(this._section,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){ge(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ce("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",true);He(e);Ue(e);var n=this._section=ce("section",t+"-list");if(i){this._map.on("click",this.collapse,this);if(!nt){Oe(e,{mouseenter:this.expand,mouseleave:this.collapse},this)}}var r=this._layersLink=ce("a",t+"-toggle",e);r.href="#";r.title="Layers";if(kt){Oe(r,"click",Ze);Oe(r,"click",this.expand,this)}else{Oe(r,"focus",this.expand,this)}if(!i){this.expand()}this._baseLayersList=ce("div",t+"-base",n);this._separator=ce("div",t+"-separator",n);this._overlaysList=ce("div",t+"-overlays",n);e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++){if(this._layers[e]&&c(this._layers[e].layer)===t){return this._layers[e]}}},_addLayer:function(t,e,i){if(this._map){t.on("add remove",this._onLayerChange,this)}this._layers.push({layer:t,name:e,overlay:i});if(this.options.sortLayers){this._layers.sort(s(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this))}if(this.options.autoZIndex&&t.setZIndex){this._lastZIndex++;t.setZIndex(this._lastZIndex)}this._expandIfNotCollapsed()},_update:function(){if(!this._container){return this}he(this._baseLayersList);he(this._overlaysList);this._layerControlInputs=[];var t,e,i,n,r=0;for(i=0;i<this._layers.length;i++){n=this._layers[i];this._addItem(n);e=e||n.overlay;t=t||!n.overlay;r+=!n.overlay?1:0}if(this.options.hideSingleBase){t=t&&r>1;this._baseLayersList.style.display=t?"":"none"}this._separator.style.display=e&&t?"":"none";return this},_onLayerChange:function(t){if(!this._handlingClick){this._update()}var e=this._getLayer(c(t.target));var i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;if(i){this._map.fire(i,e)}},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>";var n=document.createElement("div");n.innerHTML=i;return n.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),n;if(t.overlay){n=document.createElement("input");n.type="checkbox";n.className="leaflet-control-layers-selector";n.defaultChecked=i}else{n=this._createRadioElement("leaflet-base-layers_"+c(this),i)}this._layerControlInputs.push(n);n.layerId=c(t.layer);Oe(n,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");e.appendChild(o);o.appendChild(n);o.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;a.appendChild(e);this._checkDisabledLayers();return e},_onInputClick:function(){var t=this._layerControlInputs,e,i;var n=[],r=[];this._handlingClick=true;for(var o=t.length-1;o>=0;o--){e=t[o];i=this._getLayer(e.layerId).layer;if(e.checked){n.push(i)}else if(!e.checked){r.push(i)}}for(o=0;o<r.length;o++){if(this._map.hasLayer(r[o])){this._map.removeLayer(r[o])}}for(o=0;o<n.length;o++){if(!this._map.hasLayer(n[o])){this._map.addLayer(n[o])}}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var t=this._layerControlInputs,e,i,n=this._map.getZoom();for(var r=t.length-1;r>=0;r--){e=t[r];i=this._getLayer(e.layerId).layer;e.disabled=i.options.minZoom!==undefined&&n<i.options.minZoom||i.options.maxZoom!==undefined&&n>i.options.maxZoom}},_expandIfNotCollapsed:function(){if(this._map&&!this.options.collapsed){this.expand()}return this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),oi=function(t,e,i){return new ri(t,e,i)},ai=ii.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ce("div",e+" leaflet-bar"),n=this.options;this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn);this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut);this._updateDisabled();t.on("zoomend zoomlevelschange",this._updateDisabled,this);return i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){this._disabled=true;this._updateDisabled();return this},enable:function(){this._disabled=false;this._updateDisabled();return this},_zoomIn:function(t){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom()){this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))}},_zoomOut:function(t){if(!this._disabled&&this._map._zoom>this._map.getMinZoom()){this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))}},_createButton:function(t,e,i,n,r){var o=ce("a",i,n);o.innerHTML=t;o.href="#";o.title=e;o.setAttribute("role","button");o.setAttribute("aria-label",e);He(o);Oe(o,"click",Ze);Oe(o,"click",r,this);Oe(o,"click",this._refocusOnMap,this);return o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ge(this._zoomInButton,e);ge(this._zoomOutButton,e);if(this._disabled||t._zoom===t.getMinZoom()){me(this._zoomOutButton,e)}if(this._disabled||t._zoom===t.getMaxZoom()){me(this._zoomInButton,e)}}});ti.mergeOptions({zoomControl:true}),ti.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new ai;this.addControl(this.zoomControl)}});var si=function(t){return new ai(t)},li=ii.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true},onAdd:function(t){var e="leaflet-control-scale",i=ce("div",e),n=this.options;this._addScales(n,e+"-line",i);t.on(n.updateWhenIdle?"moveend":"move",this._update,this);t.whenReady(this._update,this);return i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){if(t.metric){this._mScale=ce("div",e,i)}if(t.imperial){this._iScale=ce("div",e,i)}},_update:function(){var t=this._map,e=t.getSize().y/2;var i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){if(this.options.metric&&t){this._updateMetric(t)}if(this.options.imperial&&t){this._updateImperial(t)}},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,n,r;if(e>5280){i=e/5280;n=this._getRoundNum(i);this._updateScale(this._iScale,n+" mi",n/i)}else{r=this._getRoundNum(e);this._updateScale(this._iScale,r+" ft",r/e)}},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px";t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1;return e*i}}),ci=function(t){return new li(t)},ui=ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t);this._attributions={}},onAdd:function(t){t.attributionControl=this;this._container=ce("div","leaflet-control-attribution");He(this._container);for(var e in t._layers){if(t._layers[e].getAttribution){this.addAttribution(t._layers[e].getAttribution())}}this._update();return this._container},setPrefix:function(t){this.options.prefix=t;this._update();return this},addAttribution:function(t){if(!t){return this}if(!this._attributions[t]){this._attributions[t]=0}this._attributions[t]++;this._update();return this},removeAttribution:function(t){if(!t){return this}if(this._attributions[t]){this._attributions[t]--;this._update()}return this},_update:function(){if(!this._map){return}var t=[];for(var e in this._attributions){if(this._attributions[e]){t.push(e)}}var i=[];if(this.options.prefix){i.push(this.options.prefix)}if(t.length){i.push(t.join(", "))}this._container.innerHTML=i.join(" | ")}});ti.mergeOptions({attributionControl:true}),ti.addInitHook(function(){if(this.options.attributionControl){(new ui).addTo(this)}});var hi=function(t){return new ui(t)};ii.Layers=ri,ii.Zoom=ai,ii.Scale=li,ii.Attribution=ui,ni.layers=oi,ni.zoom=si,ni.scale=ci,ni.attribution=hi;var pi=P.extend({initialize:function(t){this._map=t},enable:function(){if(this._enabled){return this}this._enabled=true;this.addHooks();return this},disable:function(){if(!this._enabled){return this}this._enabled=false;this.removeHooks();return this},enabled:function(){return!!this._enabled}});pi.addTo=function(t,e){t.addHandler(e,this);return this};var di={Events:A},fi=kt?"touchstart mousedown":"mousedown",mi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},gi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},vi=E.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n);this._element=t;this._dragStartTarget=e||t;this._preventOutline=i},enable:function(){if(this._enabled){return}Oe(this._dragStartTarget,fi,this._onDown,this);this._enabled=true},disable:function(){if(!this._enabled){return}if(vi._dragging===this){this.finishDrag()}Be(this._dragStartTarget,fi,this._onDown,this);this._enabled=false;this._moved=false},_onDown:function(t){if(t._simulated||!this._enabled){return}this._moved=false;if(fe(this._element,"leaflet-zoom-anim")){return}if(vi._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches){return}vi._dragging=this;if(this._preventOutline){Te(this._element)}Me();ie();if(this._moving){return}this.fire("down");var e=t.touches?t.touches[0]:t,i=De(this._element);this._startPoint=new O(e.clientX,e.clientY);this._parentScale=Ae(i);Oe(document,gi[t.type],this._onMove,this);Oe(document,mi[t.type],this._onUp,this)},_onMove:function(t){if(t._simulated||!this._enabled){return}if(t.touches&&t.touches.length>1){this._moved=true;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new O(e.clientX,e.clientY)._subtract(this._startPoint);if(!i.x&&!i.y){return}if(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance){return}i.x/=this._parentScale.x;i.y/=this._parentScale.y;Ge(t);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=Le(this._element).subtract(i);me(document.body,"leaflet-dragging");this._lastTarget=t.target||t.srcElement;if(window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance){this._lastTarget=this._lastTarget.correspondingUseElement}me(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(i);this._moving=true;S(this._animRequest);this._lastEvent=t;this._animRequest=M(this._updatePosition,this,true)},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t);ke(this._element,this._newPos);this.fire("drag",t)},_onUp:function(t){if(t._simulated||!this._enabled){return}this.finishDrag()},finishDrag:function(){ge(document.body,"leaflet-dragging");if(this._lastTarget){ge(this._lastTarget,"leaflet-drag-target");this._lastTarget=null}for(var t in gi){Be(document,gi[t],this._onMove,this);Be(document,mi[t],this._onUp,this)}Se();ne();if(this._moved&&this._moving){S(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false;vi._dragging=false}}),_i;function yi(t,e){if(!e||!t.length){return t.slice()}var i=e*e;t=Li(t,i);t=wi(t,i);return t}function bi(t,e,i){return Math.sqrt(Pi(t,e,i,true))}function xi(t,e,i){return Pi(t,e,i)}function wi(t,e){var i=t.length,n=typeof Uint8Array!==undefined+""?Uint8Array:Array,r=new n(i);r[0]=r[i-1]=1;ki(t,r,e,0,i-1);var o,a=[];for(o=0;o<i;o++){if(r[o]){a.push(t[o])}}return a}function ki(t,e,i,n,r){var o=0,a,s,l;for(s=n+1;s<=r-1;s++){l=Pi(t[s],t[n],t[r],true);if(l>o){a=s;o=l}}if(o>i){e[a]=1;ki(t,e,i,n,a);ki(t,e,i,a,r)}}function Li(t,e){var i=[t[0]];for(var n=1,r=0,o=t.length;n<o;n++){if(Ti(t[n],t[r])>e){i.push(t[n]);r=n}}if(r<o-1){i.push(t[o-1])}return i}function Ci(t,e,i,n,r){var o=n?_i:Si(t,i),a=Si(e,i),s,l,c;_i=a;while(true){if(!(o|a)){return[t,e]}if(o&a){return false}s=o||a;l=Mi(t,e,s,i,r);c=Si(l,i);if(s===o){t=l;o=c}else{e=l;a=c}}}function Mi(t,e,i,n,r){var o=e.x-t.x,a=e.y-t.y,s=n.min,l=n.max,c,u;if(i&8){c=t.x+o*(l.y-t.y)/a;u=l.y}else if(i&4){c=t.x+o*(s.y-t.y)/a;u=s.y}else if(i&2){c=l.x;u=t.y+a*(l.x-t.x)/o}else if(i&1){c=s.x;u=t.y+a*(s.x-t.x)/o}return new O(c,u,r)}function Si(t,e){var i=0;if(t.x<e.min.x){i|=1}else if(t.x>e.max.x){i|=2}if(t.y<e.min.y){i|=4}else if(t.y>e.max.y){i|=8}return i}function Ti(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Pi(t,e,i,n){var r=e.x,o=e.y,a=i.x-r,s=i.y-o,l=a*a+s*s,c;if(l>0){c=((t.x-r)*a+(t.y-o)*s)/l;if(c>1){r=i.x;o=i.y}else if(c>0){r+=a*c;o+=s*c}}a=t.x-r;s=t.y-o;return n?a*a+s*s:new O(r,o)}function Di(t){return!v(t[0])||typeof t[0][0]!=="object"&&typeof t[0][0]!=="undefined"}function Ai(t){console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead.");return Di(t)}var Ei={simplify:yi,pointToSegmentDistance:bi,closestPointOnSegment:xi,clipSegment:Ci,_getEdgeIntersection:Mi,_getBitCode:Si,_sqClosestPointOnSegment:Pi,isFlat:Di,_flat:Ai};function Oi(t,e,i){var n,r=[1,4,2,8],o,a,s,l,c,u,h,p;for(o=0,u=t.length;o<u;o++){t[o]._code=Si(t[o],e)}for(s=0;s<4;s++){h=r[s];n=[];for(o=0,u=t.length,a=u-1;o<u;a=o++){l=t[o];c=t[a];if(!(l._code&h)){if(c._code&h){p=Mi(c,l,h,e,i);p._code=Si(p,e);n.push(p)}n.push(l)}else if(!(c._code&h)){p=Mi(c,l,h,e,i);p._code=Si(p,e);n.push(p)}}t=n}return t}var Ii={clipPolygon:Oi},Bi={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new N(t.y,t.x)},bounds:new z([-180,-90],[180,90])},zi={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=o*Math.sin(n);var s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),o/2);n=-i*Math.log(Math.max(s,1e-10));return new O(t.lng*e*i,n)},unproject:function(t){var e=180/Math.PI,i=this.R,n=this.R_MINOR/i,r=Math.sqrt(1-n*n),o=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(o);for(var s=0,l=.1,c;s<15&&Math.abs(l)>1e-7;s++){c=r*Math.sin(a);c=Math.pow((1-c)/(1+c),r/2);l=Math.PI/2-2*Math.atan(o*c)-a;a+=l}return new N(a*e,t.x*e/i)}},Ri={LonLat:Bi,Mercator:zi,SphericalMercator:W},Fi=l({},G,{code:"EPSG:3395",projection:zi,transformation:function(){var t=.5/(Math.PI*zi.R);return q(t,.5,-t,.5)}()}),ji=l({},G,{code:"EPSG:4326",projection:Bi,transformation:q(1/180,1,-1/180,.5)}),Ni=l({},H,{projection:Bi,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:true});H.Earth=G,H.EPSG3395=Fi,H.EPSG3857=$,H.EPSG900913=K,H.EPSG4326=ji,H.Simple=Ni;var Ui=E.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:true},addTo:function(t){t.addLayer(this);return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){if(t){t.removeLayer(this)}return this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){this._map._targets[c(t)]=this;return this},removeInteractiveTarget:function(t){delete this._map._targets[c(t)];return this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(!e.hasLayer(this)){return}this._map=e;this._zoomAnimated=e._zoomAnimated;if(this.getEvents){var i=this.getEvents();e.on(i,this);this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e);if(this.getAttribution&&e.attributionControl){e.attributionControl.addAttribution(this.getAttribution())}this.fire("add");e.fire("layeradd",{layer:this})}});ti.include({addLayer:function(t){if(!t._layerAdd){throw new Error("The provided object is not a Layer.")}var e=c(t);if(this._layers[e]){return this}this._layers[e]=t;t._mapToAdd=this;if(t.beforeAdd){t.beforeAdd(this)}this.whenReady(t._layerAdd,t);return this},removeLayer:function(t){var e=c(t);if(!this._layers[e]){return this}if(this._loaded){t.onRemove(this)}if(t.getAttribution&&this.attributionControl){this.attributionControl.removeAttribution(t.getAttribution())}delete this._layers[e];if(this._loaded){this.fire("layerremove",{layer:t});t.fire("remove")}t._map=t._mapToAdd=null;return this},hasLayer:function(t){return!!t&&c(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers){t.call(e,this._layers[i])}return this},_addLayers:function(t){t=t?v(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++){this.addLayer(t[e])}},_addZoomLimit:function(t){if(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom)){this._zoomBoundLayers[c(t)]=t;this._updateZoomLevels()}},_removeZoomLimit:function(t){var e=c(t);if(this._zoomBoundLayers[e]){delete this._zoomBoundLayers[e];this._updateZoomLevels()}},_updateZoomLevels:function(){var t=Infinity,e=-Infinity,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;t=r.minZoom===undefined?t:Math.min(t,r.minZoom);e=r.maxZoom===undefined?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-Infinity?undefined:e;this._layersMinZoom=t===Infinity?undefined:t;if(i!==this._getZoomSpan()){this.fire("zoomlevelschange")}if(this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom){this.setZoom(this._layersMaxZoom)}if(this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom){this.setZoom(this._layersMinZoom)}}});var Hi=Ui.extend({initialize:function(t,e){d(this,e);this._layers={};var i,n;if(t){for(i=0,n=t.length;i<n;i++){this.addLayer(t[i])}}},addLayer:function(t){var e=this.getLayerId(t);this._layers[e]=t;if(this._map){this._map.addLayer(t)}return this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);if(this._map&&this._layers[e]){this._map.removeLayer(this._layers[e])}delete this._layers[e];return this},hasLayer:function(t){if(!t){return false}var e=typeof t==="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers){n=this._layers[i];if(n[t]){n[t].apply(n,e)}}return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers){t.call(e,this._layers[i])}return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];this.eachLayer(t.push,t);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c(t)}}),Gi=function(t,e){return new Hi(t,e)},Zi=Hi.extend({addLayer:function(t){if(this.hasLayer(t)){return this}t.addEventParent(this);Hi.prototype.addLayer.call(this,t);return this.fire("layeradd",{layer:t})},removeLayer:function(t){if(!this.hasLayer(t)){return this}if(t in this._layers){t=this._layers[t]}t.removeEventParent(this);Hi.prototype.removeLayer.call(this,t);return this.fire("layerremove",{layer:t})},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Wi=function(t,e){return new Zi(t,e)},Vi=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var n=this._createImg(i,e&&e.tagName==="IMG"?e:null);this._setIconStyles(n,t);return n},_setIconStyles:function(t,e){var i=this.options;var n=i[e+"Size"];if(typeof n==="number"){n=[n,n]}var r=B(n),o=B(e==="shadow"&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,true));t.className="leaflet-marker-"+e+" "+(i.className||"");if(o){t.style.marginLeft=-o.x+"px";t.style.marginTop=-o.y+"px"}if(r){t.style.width=r.x+"px";t.style.height=r.y+"px"}},_createImg:function(t,e){e=e||document.createElement("img");e.src=t;return e},_getIconUrl:function(t){return Mt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function qi(t){return new Vi(t)}var $i=Vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){if(!$i.imagePath){$i.imagePath=this._detectIconPath()}return(this.options.imagePath||$i.imagePath)+Vi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ce("div","leaflet-default-icon-path",document.body);var e=le(t,"background-image")||le(t,"backgroundImage");document.body.removeChild(t);if(e===null||e.indexOf("url")!==0){e=""}else{e=e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}return e}}),Ki=pi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;if(!this._draggable){this._draggable=new vi(t,t,true)}this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable();me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable();if(this._marker._icon){ge(this._marker._icon,"leaflet-marker-draggable")}},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=Le(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin();var l=R(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var c=B((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:false});this._draggable._newPos._add(c);this._draggable._startPos._add(c);ke(e._icon,this._draggable._newPos);this._onDrag(t);this._panRequest=M(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup&&this._marker.closePopup();this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){if(this._marker.options.autoPan){S(this._panRequest);this._panRequest=M(this._adjustPan.bind(this,t))}},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Le(e._icon),r=e._map.layerPointToLatLng(n);if(i){ke(i,n)}e._latlng=r;t.latlng=r;t.oldLatLng=this._oldLatLng;e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest);delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",t)}}),Yi=Ui.extend({options:{icon:new $i,interactive:true,keyboard:true,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:false,draggable:false,autoPan:false,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e);this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation;if(this._zoomAnimated){t.on("zoomanim",this._animateZoom,this)}this._initIcon();this.update()},onRemove:function(t){if(this.dragging&&this.dragging.enabled()){this.options.draggable=true;this.dragging.removeHooks()}delete this.dragging;if(this._zoomAnimated){t.off("zoomanim",this._animateZoom,this)}this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;this._latlng=U(t);this.update();return this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){this.options.zIndexOffset=t;return this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){this.options.icon=t;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup,this._popup.options)}return this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");var i=t.icon.createIcon(this._icon),n=false;if(i!==this._icon){if(this._icon){this._removeIcon()}n=true;if(t.title){i.title=t.title}if(i.tagName==="IMG"){i.alt=t.alt||""}}me(i,e);if(t.keyboard){i.tabIndex="0"}this._icon=i;if(t.riseOnHover){this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex})}var r=t.icon.createShadow(this._shadow),o=false;if(r!==this._shadow){this._removeShadow();o=true}if(r){me(r,e);r.alt=""}this._shadow=r;if(t.opacity<1){this._updateOpacity()}if(n){this.getPane().appendChild(this._icon)}this._initInteraction();if(r&&o){this.getPane(t.shadowPane).appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex})}ue(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){ue(this._shadow)}this._shadow=null},_setPos:function(t){if(this._icon){ke(this._icon,t)}if(this._shadow){ke(this._shadow,t)}this._zIndex=t.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(t){if(this._icon){this._icon.style.zIndex=this._zIndex+t}},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(!this.options.interactive){return}me(this._icon,"leaflet-interactive");this.addInteractiveTarget(this._icon);if(Ki){var t=this.options.draggable;if(this.dragging){t=this.dragging.enabled();this.dragging.disable()}this.dragging=new Ki(this);if(t){this.dragging.enable()}}},setOpacity:function(t){this.options.opacity=t;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){var t=this.options.opacity;if(this._icon){ye(this._icon,t)}if(this._shadow){ye(this._shadow,t)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ji(t,e){return new Yi(t,e)}var Xi=Ui.extend({options:{stroke:true,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:false,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:true,bubblingMouseEvents:true},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){if(this._map){this._renderer._updatePath(this)}return this},setStyle:function(t){d(this,t);if(this._renderer){this._renderer._updateStyle(this);if(this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")){this._updateBounds()}}return this},bringToFront:function(){if(this._renderer){this._renderer._bringToFront(this)}return this},bringToBack:function(){if(this._renderer){this._renderer._bringToBack(this)}return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Qi=Xi.extend({options:{fill:true,radius:10},initialize:function(t,e){d(this,e);this._latlng=U(t);this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;this._latlng=U(t);this.redraw();return this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){this.options.radius=this._radius=t;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;Xi.prototype.setStyle.call(this,t);this.setRadius(e);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new z(this._point.subtract(n),this._point.add(n))},_update:function(){if(this._map){this._updatePath()}},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tn(t,e){return new Qi(t,e)}var en=Qi.extend({initialize:function(t,e,i){if(typeof e==="number"){e=l({},i,{radius:e})}d(this,e);this._latlng=U(t);if(isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(t){this._mRadius=t;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Xi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===G.distance){var r=Math.PI/180,o=this._mRadius/G.R/r,a=i.project([e+o,t]),s=i.project([e-o,t]),l=a.add(s).divideBy(2),c=i.unproject(l).lat,u=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(c*r))/(Math.cos(e*r)*Math.cos(c*r)))/r;if(isNaN(u)||u===0){u=o/Math.cos(Math.PI/180*e)}this._point=l.subtract(i.getPixelOrigin());this._radius=isNaN(u)?0:l.x-i.project([c,t-u]).x;this._radiusY=l.y-a.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng);this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}});function nn(t,e,i){return new en(t,e,i)}var rn=Xi.extend({options:{smoothFactor:1,noClip:false},initialize:function(t,e){d(this,e);this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){this._setLatLngs(t);return this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){var e=Infinity,i=null,n=Pi,r,o;for(var a=0,s=this._parts.length;a<s;a++){var l=this._parts[a];for(var c=1,u=l.length;c<u;c++){r=l[c-1];o=l[c];var h=n(t,r,o,true);if(h<e){e=h;i=n(t,r,o)}}}if(i){i.distance=Math.sqrt(e)}return i},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var t,e,i,n,r,o,a,s=this._rings[0],l=s.length;if(!l){return null}for(t=0,e=0;t<l-1;t++){e+=s[t].distanceTo(s[t+1])/2}if(e===0){return this._map.layerPointToLatLng(s[0])}for(t=0,n=0;t<l-1;t++){r=s[t];o=s[t+1];i=r.distanceTo(o);n+=i;if(n>e){a=(n-e)/i;return this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(t,e){e=e||this._defaultShape();t=U(t);e.push(t);this._bounds.extend(t);return this.redraw()},_setLatLngs:function(t){this._bounds=new F;this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Di(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){var e=[],i=Di(t);for(var n=0,r=t.length;n<r;n++){if(i){e[n]=U(t[n]);this._bounds.extend(e[n])}else{e[n]=this._convertLatLngs(t[n])}}return e},_project:function(){var t=new z;this._rings=[];this._projectLatlngs(this._latlngs,this._rings,t);if(this._bounds.isValid()&&t.isValid()){this._rawPxBounds=t;this._updateBounds()}},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new z([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n=t[0]instanceof N,r=t.length,o,a;if(n){a=[];for(o=0;o<r;o++){a[o]=this._map.latLngToLayerPoint(t[o]);i.extend(a[o])}e.push(a)}else{for(o=0;o<r;o++){this._projectLatlngs(t[o],e,i)}}},_clipPoints:function(){var t=this._renderer._bounds;this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(t)){return}if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,n,r,o,a,s,l;for(i=0,r=0,o=this._rings.length;i<o;i++){l=this._rings[i];for(n=0,a=l.length;n<a-1;n++){s=Ci(l[n],l[n+1],t,n,true);if(!s){continue}e[r]=e[r]||[];e[r].push(s[0]);if(s[1]!==l[n+1]||n===a-2){e[r].push(s[1]);r++}}}},_simplifyPoints:function(){var t=this._parts,e=this.options.smoothFactor;for(var i=0,n=t.length;i<n;i++){t[i]=yi(t[i],e)}},_update:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t)){return false}for(i=0,o=this._parts.length;i<o;i++){s=this._parts[i];for(n=0,a=s.length,r=a-1;n<a;r=n++){if(!e&&n===0){continue}if(bi(t,s[r],s[n])<=l){return true}}}return false}});function on(t,e){return new rn(t,e)}rn._flat=Ai;var an=rn.extend({options:{fill:true},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var t,e,i,n,r,o,a,s,l,c=this._rings[0],u=c.length;if(!u){return null}o=a=s=0;for(t=0,e=u-1;t<u;e=t++){i=c[t];n=c[e];r=i.y*n.x-n.y*i.x;a+=(i.x+n.x)*r;s+=(i.y+n.y)*r;o+=r*3}if(o===0){l=c[0]}else{l=[a/o,s/o]}return this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=rn.prototype._convertLatLngs.call(this,t),i=e.length;if(i>=2&&e[0]instanceof N&&e[0].equals(e[i-1])){e.pop()}return e},_setLatLngs:function(t){rn.prototype._setLatLngs.call(this,t);if(Di(this._latlngs)){this._latlngs=[this._latlngs]}},_defaultShape:function(){return Di(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new O(e,e);t=new z(t.min.subtract(i),t.max.add(i));this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(t)){return}if(this.options.noClip){this._parts=this._rings;return}for(var n=0,r=this._rings.length,o;n<r;n++){o=Oi(this._rings[n],t,true);if(o.length){this._parts.push(o)}}},_updatePath:function(){this._renderer._updatePoly(this,true)},_containsPoint:function(t){var e=false,i,n,r,o,a,s,l,c;if(!this._pxBounds||!this._pxBounds.contains(t)){return false}for(o=0,l=this._parts.length;o<l;o++){i=this._parts[o];for(a=0,c=i.length,s=c-1;a<c;s=a++){n=i[a];r=i[s];if(n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x){e=!e}}}return e||rn.prototype._containsPoint.call(this,t,true)}});function sn(t,e){return new an(t,e)}var ln=Zi.extend({initialize:function(t,e){d(this,e);this._layers={};if(t){this.addData(t)}},addData:function(t){var e=v(t)?t:t.features,i,n,r;if(e){for(i=0,n=e.length;i<n;i++){r=e[i];if(r.geometries||r.geometry||r.features||r.coordinates){this.addData(r)}}return this}var o=this.options;if(o.filter&&!o.filter(t)){return this}var a=cn(t,o);if(!a){return this}a.feature=gn(t);a.defaultOptions=a.options;this.resetStyle(a);if(o.onEachFeature){o.onEachFeature(t,a)}return this.addLayer(a)},resetStyle:function(t){if(t===undefined){return this.eachLayer(this.resetStyle,this)}t.options=l({},t.defaultOptions);this._setLayerStyle(t,this.options.style);return this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){if(t.setStyle){if(typeof e==="function"){e=e(t.feature)}t.setStyle(e)}}});function cn(t,e){var i=t.type==="Feature"?t.geometry:t,n=i?i.coordinates:null,r=[],o=e&&e.pointToLayer,a=e&&e.coordsToLatLng||hn,s,l,c,u;if(!n&&!i){return null}switch(i.type){case"Point":s=a(n);return un(o,t,s,e);case"MultiPoint":for(c=0,u=n.length;c<u;c++){s=a(n[c]);r.push(un(o,t,s,e))}return new Zi(r);case"LineString":case"MultiLineString":l=pn(n,i.type==="LineString"?0:1,a);return new rn(l,e);case"Polygon":case"MultiPolygon":l=pn(n,i.type==="Polygon"?1:2,a);return new an(l,e);case"GeometryCollection":for(c=0,u=i.geometries.length;c<u;c++){var h=cn({geometry:i.geometries[c],type:"Feature",properties:t.properties},e);if(h){r.push(h)}}return new Zi(r);default:throw new Error("Invalid GeoJSON object.")}}function un(t,e,i,n){return t?t(e,i):new Yi(i,n&&n.markersInheritOptions&&n)}function hn(t){return new N(t[1],t[0],t[2])}function pn(t,e,i){var n=[];for(var r=0,o=t.length,a;r<o;r++){a=e?pn(t[r],e-1,i):(i||hn)(t[r]);n.push(a)}return n}function dn(t,e){e=typeof e==="number"?e:6;return t.alt!==undefined?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function fn(t,e,i,n){var r=[];for(var o=0,a=t.length;o<a;o++){r.push(e?fn(t[o],e-1,i,n):dn(t[o],n))}if(!e&&i){r.push(r[0])}return r}function mn(t,e){return t.feature?l({},t.feature,{geometry:e}):gn(e)}function gn(t){if(t.type==="Feature"||t.type==="FeatureCollection"){return t}return{type:"Feature",properties:{},geometry:t}}var vn={toGeoJSON:function(t){return mn(this,{type:"Point",coordinates:dn(this.getLatLng(),t)})}};function _n(t,e){return new ln(t,e)}Yi.include(vn),en.include(vn),Qi.include(vn),rn.include({toGeoJSON:function(t){var e=!Di(this._latlngs);var i=fn(this._latlngs,e?1:0,false,t);return mn(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),an.include({toGeoJSON:function(t){var e=!Di(this._latlngs),i=e&&!Di(this._latlngs[0]);var n=fn(this._latlngs,i?2:e?1:0,true,t);if(!e){n=[n]}return mn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Hi.include({toMultiPoint:function(e){var i=[];this.eachLayer(function(t){i.push(t.toGeoJSON(e).geometry.coordinates)});return mn(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(n){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint"){return this.toMultiPoint(n)}var r=t==="GeometryCollection",o=[];this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(n);if(r){o.push(e.geometry)}else{var i=gn(e);if(i.type==="FeatureCollection"){o.push.apply(o,i.features)}else{o.push(i)}}}});if(r){return mn(this,{geometries:o,type:"GeometryCollection"})}return{type:"FeatureCollection",features:o}}});var yn=_n,bn=Ui.extend({options:{opacity:1,alt:"",interactive:false,crossOrigin:false,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t;this._bounds=j(e);d(this,i)},onAdd:function(){if(!this._image){this._initImage();if(this.options.opacity<1){this._updateOpacity()}}if(this.options.interactive){me(this._image,"leaflet-interactive");this.addInteractiveTarget(this._image)}this.getPane().appendChild(this._image);this._reset()},onRemove:function(){ue(this._image);if(this.options.interactive){this.removeInteractiveTarget(this._image)}},setOpacity:function(t){this.options.opacity=t;if(this._image){this._updateOpacity()}return this},setStyle:function(t){if(t.opacity){this.setOpacity(t.opacity)}return this},bringToFront:function(){if(this._map){pe(this._image)}return this},bringToBack:function(){if(this._map){de(this._image)}return this},setUrl:function(t){this._url=t;if(this._image){this._image.src=t}return this},setBounds:function(t){this._bounds=j(t);if(this._map){this._reset()}return this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};if(this._zoomAnimated){t.zoomanim=this._animateZoom}return t},setZIndex:function(t){this.options.zIndex=t;this._updateZIndex();return this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG";var e=this._image=t?this._url:ce("img");me(e,"leaflet-image-layer");if(this._zoomAnimated){me(e,"leaflet-zoom-animated")}if(this.options.className){me(e,this.options.className)}e.onselectstart=u;e.onmousemove=u;e.onload=s(this.fire,this,"load");e.onerror=s(this._overlayOnError,this,"error");if(this.options.crossOrigin||this.options.crossOrigin===""){e.crossOrigin=this.options.crossOrigin===true?"":this.options.crossOrigin}if(this.options.zIndex){this._updateZIndex()}if(t){this._url=e.src;return}e.src=this._url;e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;we(this._image,i,e)},_reset:function(){var t=this._image,e=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ke(t,e.min);t.style.width=i.x+"px";t.style.height=i.y+"px"},_updateOpacity:function(){ye(this._image,this.options.opacity)},_updateZIndex:function(){if(this._image&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._image.style.zIndex=this.options.zIndex}},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;if(t&&this._url!==t){this._url=t;this._image.src=t}}}),xn=function(t,e,i){return new bn(t,e,i)},wn=bn.extend({options:{autoplay:true,loop:true,keepAspectRatio:true,muted:false},_initImage:function(){var t=this._url.tagName==="VIDEO";var e=this._image=t?this._url:ce("video");me(e,"leaflet-image-layer");if(this._zoomAnimated){me(e,"leaflet-zoom-animated")}if(this.options.className){me(e,this.options.className)}e.onselectstart=u;e.onmousemove=u;e.onloadeddata=s(this.fire,this,"load");if(t){var i=e.getElementsByTagName("source");var n=[];for(var r=0;r<i.length;r++){n.push(i[r].src)}this._url=i.length>0?n:[e.src];return}if(!v(this._url)){this._url=[this._url]}if(!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")){e.style["objectFit"]="fill"}e.autoplay=!!this.options.autoplay;e.loop=!!this.options.loop;e.muted=!!this.options.muted;for(var o=0;o<this._url.length;o++){var a=ce("source");a.src=this._url[o];e.appendChild(a)}}});function kn(t,e,i){return new wn(t,e,i)}var Ln=bn.extend({_initImage:function(){var t=this._image=this._url;me(t,"leaflet-image-layer");if(this._zoomAnimated){me(t,"leaflet-zoom-animated")}if(this.options.className){me(t,this.options.className)}t.onselectstart=u;t.onmousemove=u}});function Cn(t,e,i){return new Ln(t,e,i)}var Mn=Ui.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t);this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated;if(!this._container){this._initLayout()}if(t._fadeAnimated){ye(this._container,0)}clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();if(t._fadeAnimated){ye(this._container,1)}this.bringToFront()},onRemove:function(t){if(t._fadeAnimated){ye(this._container,0);this._removeTimeout=setTimeout(s(ue,undefined,this._container),200)}else{ue(this._container)}},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=U(t);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(t){this._content=t;this.update();return this},getElement:function(){return this._container},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated){t.zoomanim=this._animateZoom}return t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map){pe(this._container)}return this},bringToBack:function(){if(this._map){de(this._container)}return this},_prepareOpen:function(t,e,i){if(!(e instanceof Ui)){i=e;e=t}if(e instanceof Zi){for(var n in t._layers){e=t._layers[n];break}}if(!i){if(e.getCenter){i=e.getCenter()}else if(e.getLatLng){i=e.getLatLng()}else{throw new Error("Unable to get source layer LatLng.")}}this._source=e;this.update();return i},_updateContent:function(){if(!this._content){return}var t=this._contentNode;var e=typeof this._content==="function"?this._content(this._source||this):this._content;if(typeof e==="string"){t.innerHTML=e}else{while(t.hasChildNodes()){t.removeChild(t.firstChild)}t.appendChild(e)}this.fire("contentupdate")},_updatePosition:function(){if(!this._map){return}var t=this._map.latLngToLayerPoint(this._latlng),e=B(this.options.offset),i=this._getAnchor();if(this._zoomAnimated){ke(this._container,t.add(i))}else{e=e.add(t).add(i)}var n=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px";this._container.style.left=r+"px"},_getAnchor:function(){return[0,0]}}),Sn=Mn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:true,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:false,closeButton:true,autoClose:true,closeOnEscapeKey:true,className:""},openOn:function(t){t.openPopup(this);return this},onAdd:function(t){Mn.prototype.onAdd.call(this,t);t.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this},true);if(!(this._source instanceof Xi)){this._source.on("preclick",Ne)}}},onRemove:function(t){Mn.prototype.onRemove.call(this,t);t.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this},true);if(!(this._source instanceof Xi)){this._source.off("preclick",Ne)}}},getEvents:function(){var t=Mn.prototype.getEvents.call(this);if(this.options.closeOnClick!==undefined?this.options.closeOnClick:this._map.options.closePopupOnClick){t.preclick=this._close}if(this.options.keepInView){t.moveend=this._adjustPan}return t},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var t="leaflet-popup",e=this._container=ce("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");var i=this._wrapper=ce("div",t+"-content-wrapper",e);this._contentNode=ce("div",t+"-content",i);He(e);Ue(this._contentNode);Oe(e,"contextmenu",Ne);this._tipContainer=ce("div",t+"-tip-container",e);this._tip=ce("div",t+"-tip",this._tipContainer);if(this.options.closeButton){var n=this._closeButton=ce("a",t+"-close-button",e);n.href="#close";n.innerHTML="&#215;";Oe(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="";e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth);e.width=i+1+"px";e.whiteSpace="";e.height="";var n=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";if(r&&n>r){e.height=r+"px";me(t,o)}else{ge(t,o)}this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ke(this._container,e.add(i))},_adjustPan:function(){if(!this.options.autoPan){return}if(this._map._panAnim){this._map._panAnim.stop()}var t=this._map,e=parseInt(le(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,r=new O(this._containerLeft,-i-this._containerBottom);r._add(Le(this._container));var o=t.layerPointToContainerPoint(r),a=B(this.options.autoPanPadding),s=B(this.options.autoPanPaddingTopLeft||a),l=B(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),u=0,h=0;if(o.x+n+l.x>c.x){u=o.x+n-c.x+l.x}if(o.x-u-s.x<0){u=o.x-s.x}if(o.y+i+l.y>c.y){h=o.y+i-c.y+l.y}if(o.y-h-s.y<0){h=o.y-s.y}if(u||h){t.fire("autopanstart").panBy([u,h])}},_onCloseButtonClick:function(t){this._close();Ze(t)},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tn=function(t,e){return new Sn(t,e)};ti.mergeOptions({closePopupOnClick:true}),ti.include({openPopup:function(t,e,i){if(!(t instanceof Sn)){t=new Sn(i).setContent(t)}if(e){t.setLatLng(e)}if(this.hasLayer(t)){return this}if(this._popup&&this._popup.options.autoClose){this.closePopup()}this._popup=t;return this.addLayer(t)},closePopup:function(t){if(!t||t===this._popup){t=this._popup;this._popup=null}if(t){this.removeLayer(t)}return this}}),Ui.include({bindPopup:function(t,e){if(t instanceof Sn){d(t,e);this._popup=t;t._source=this}else{if(!this._popup||e){this._popup=new Sn(e,this)}this._popup.setContent(t)}if(!this._popupHandlersAdded){this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=false;this._popup=null}return this},openPopup:function(t,e){if(this._popup&&this._map){e=this._popup._prepareOpen(this,t,e);this._map.openPopup(this._popup,e)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(t){if(this._popup){if(this._popup._map){this.closePopup()}else{this.openPopup(t)}}return this},isPopupOpen:function(){return this._popup?this._popup.isOpen():false},setPopupContent:function(t){if(this._popup){this._popup.setContent(t)}return this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(!this._popup){return}if(!this._map){return}Ze(t);if(e instanceof Xi){this.openPopup(t.layer||t.target,t.latlng);return}if(this._map.hasLayer(this._popup)&&this._popup._source===e){this.closePopup()}else{this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){if(t.originalEvent.keyCode===13){this._openPopup(t)}}});var Pn=Mn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:false,sticky:false,interactive:false,opacity:.9},onAdd:function(t){Mn.prototype.onAdd.call(this,t);this.setOpacity(this.options.opacity);t.fire("tooltipopen",{tooltip:this});if(this._source){this._source.fire("tooltipopen",{tooltip:this},true)}},onRemove:function(t){Mn.prototype.onRemove.call(this,t);t.fire("tooltipclose",{tooltip:this});if(this._source){this._source.fire("tooltipclose",{tooltip:this},true)}},getEvents:function(){var t=Mn.prototype.getEvents.call(this);if(kt&&!this.options.permanent){t.preclick=this._close}return t},_close:function(){if(this._map){this._map.closeTooltip(this)}},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ce("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,r=this._container,o=n.latLngToContainerPoint(n.getCenter()),a=n.layerPointToContainerPoint(t),s=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=B(this.options.offset),h=this._getAnchor();if(s==="top"){e=l/2;i=c}else if(s==="bottom"){e=l/2;i=0}else if(s==="center"){e=l/2;i=c/2}else if(s==="right"){e=0;i=c/2}else if(s==="left"){e=l;i=c/2}else if(a.x<o.x){s="right";e=0;i=c/2}else{s="left";e=l+(u.x+h.x)*2;i=c/2}t=t.subtract(B(e,i,true)).add(u).add(h);ge(r,"leaflet-tooltip-right");ge(r,"leaflet-tooltip-left");ge(r,"leaflet-tooltip-top");ge(r,"leaflet-tooltip-bottom");me(r,"leaflet-tooltip-"+s);ke(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t;if(this._container){ye(this._container,t)}},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Dn=function(t,e){return new Pn(t,e)};ti.include({openTooltip:function(t,e,i){if(!(t instanceof Pn)){t=new Pn(i).setContent(t)}if(e){t.setLatLng(e)}if(this.hasLayer(t)){return this}return this.addLayer(t)},closeTooltip:function(t){if(t){this.removeLayer(t)}return this}}),Ui.include({bindTooltip:function(t,e){if(t instanceof Pn){d(t,e);this._tooltip=t;t._source=this}else{if(!this._tooltip||e){this._tooltip=new Pn(e,this)}this._tooltip.setContent(t)}this._initTooltipInteractions();if(this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)){this.openTooltip()}return this},unbindTooltip:function(){if(this._tooltip){this._initTooltipInteractions(true);this.closeTooltip();this._tooltip=null}return this},_initTooltipInteractions:function(t){if(!t&&this._tooltipHandlersAdded){return}var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent){i.mouseover=this._openTooltip;i.mouseout=this.closeTooltip;if(this._tooltip.options.sticky){i.mousemove=this._moveTooltip}if(kt){i.click=this._openTooltip}}else{i.add=this._openTooltip}this[e](i);this._tooltipHandlersAdded=!t},openTooltip:function(t,e){if(this._tooltip&&this._map){e=this._tooltip._prepareOpen(this,t,e);this._map.openTooltip(this._tooltip,e);if(this._tooltip.options.interactive&&this._tooltip._container){me(this._tooltip._container,"leaflet-clickable");this.addInteractiveTarget(this._tooltip._container)}}return this},closeTooltip:function(){if(this._tooltip){this._tooltip._close();if(this._tooltip.options.interactive&&this._tooltip._container){ge(this._tooltip._container,"leaflet-clickable");this.removeInteractiveTarget(this._tooltip._container)}}return this},toggleTooltip:function(t){if(this._tooltip){if(this._tooltip._map){this.closeTooltip()}else{this.openTooltip(t)}}return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){if(this._tooltip){this._tooltip.setContent(t)}return this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;if(!this._tooltip||!this._map){return}this.openTooltip(e,this._tooltip.options.sticky?t.latlng:undefined)},_moveTooltip:function(t){var e=t.latlng,i,n;if(this._tooltip.options.sticky&&t.originalEvent){i=this._map.mouseEventToContainerPoint(t.originalEvent);n=this._map.containerPointToLayerPoint(i);e=this._map.layerPointToLatLng(n)}this._tooltip.setLatLng(e)}});var An=Vi.extend({options:{iconSize:[12,12],html:false,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element){he(e);e.appendChild(i.html)}else{e.innerHTML=i.html!==false?i.html:""}if(i.bgPos){var n=B(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}this._setIconStyles(e,"icon");return e},createShadow:function(){return null}});function En(t){return new An(t)}Vi.Default=$i;var On=Ui.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:true,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,maxNativeZoom:undefined,minNativeZoom:undefined,noWrap:false,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles();ue(this._container);t._removeZoomLimit(this);this._container=null;this._tileZoom=undefined},bringToFront:function(){if(this._map){pe(this._container);this._setAutoZIndex(Math.max)}return this},bringToBack:function(){if(this._map){de(this._container);this._setAutoZIndex(Math.min)}return this},getContainer:function(){return this._container},setOpacity:function(t){this.options.opacity=t;this._updateOpacity();return this},setZIndex:function(t){this.options.zIndex=t;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove){this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)}t.move=this._onMove}if(this._zoomAnimated){t.zoomanim=this._animateZoom}return t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(t){var e=this.getPane().children,i=-t(-Infinity,Infinity);for(var n=0,r=e.length,o;n<r;n++){o=e[n].style.zIndex;if(e[n]!==this._container&&o){i=t(i,+o)}}if(isFinite(i)){this.options.zIndex=i+t(-1,1);this._updateZIndex()}},_updateOpacity:function(){if(!this._map){return}if(tt){return}ye(this._container,this.options.opacity);var t=+new Date,e=false,i=false;for(var n in this._tiles){var r=this._tiles[n];if(!r.current||!r.loaded){continue}var o=Math.min(1,(t-r.loaded)/200);ye(r.el,o);if(o<1){e=true}else{if(r.active){i=true}else{this._onOpaqueTile(r)}r.active=true}}if(i&&!this._noPrune){this._pruneTiles()}if(e){S(this._fadeFrame);this._fadeFrame=M(this._updateOpacity,this)}},_onOpaqueTile:u,_initContainer:function(){if(this._container){return}this._container=ce("div","leaflet-layer "+(this.options.className||""));this._updateZIndex();if(this.options.opacity<1){this._updateOpacity()}this.getPane().appendChild(this._container)},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===undefined){return undefined}for(var i in this._levels){i=Number(i);if(this._levels[i].el.children.length||i===t){this._levels[i].el.style.zIndex=e-Math.abs(t-i);this._onUpdateLevel(i)}else{ue(this._levels[i].el);this._removeTilesAtZoom(i);this._onRemoveLevel(i);delete this._levels[i]}}var n=this._levels[t],r=this._map;if(!n){n=this._levels[t]={};n.el=ce("div","leaflet-tile-container leaflet-zoom-animated",this._container);n.el.style.zIndex=e;n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round();n.zoom=t;this._setZoomTransform(n,r.getCenter(),r.getZoom());u(n.el.offsetWidth);this._onCreateLevel(n)}this._level=n;return n},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(!this._map){return}var t,e;var i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles){e=this._tiles[t];e.retain=e.current}for(t in this._tiles){e=this._tiles[t];if(e.current&&!e.active){var n=e.coords;if(!this._retainParent(n.x,n.y,n.z,n.z-5)){this._retainChildren(n.x,n.y,n.z,n.z+2)}}}for(t in this._tiles){if(!this._tiles[t].retain){this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles){if(this._tiles[e].coords.z!==t){continue}this._removeTile(e)}},_removeAllTiles:function(){for(var t in this._tiles){this._removeTile(t)}},_invalidateAll:function(){for(var t in this._levels){ue(this._levels[t].el);this._onRemoveLevel(Number(t));delete this._levels[t]}this._removeAllTiles();this._tileZoom=undefined},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),o=Math.floor(e/2),a=i-1,s=new O(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];if(c&&c.active){c.retain=true;return true}else if(c&&c.loaded){c.retain=true}if(a>n){return this._retainParent(r,o,a,n)}return false},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++){for(var o=2*e;o<2*e+2;o++){var a=new O(r,o);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];if(l&&l.active){l.retain=true;continue}else if(l&&l.loaded){l.retain=true}if(i+1<n){this._retainChildren(r,o,i+1,n)}}}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,true,t.noUpdate)},_clampZoom:function(t){var e=this.options;if(undefined!==e.minNativeZoom&&t<e.minNativeZoom){return e.minNativeZoom}if(undefined!==e.maxNativeZoom&&e.maxNativeZoom<t){return e.maxNativeZoom}return t},_setView:function(t,e,i,n){var r=Math.round(e);if(this.options.maxZoom!==undefined&&r>this.options.maxZoom||this.options.minZoom!==undefined&&r<this.options.minZoom){r=undefined}else{r=this._clampZoom(r)}var o=this.options.updateWhenZooming&&r!==this._tileZoom;if(!n||o){this._tileZoom=r;if(this._abortLoading){this._abortLoading()}this._updateLevels();this._resetGrid();if(r!==undefined){this._update(t)}if(!i){this._pruneTiles()}this._noPrune=!!i}this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels){this._setZoomTransform(this._levels[i],t,e)}},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),r=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();if(vt){we(t.el,r,n)}else{ke(t.el,r)}},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom;var r=this._map.getPixelWorldBounds(this._tileZoom);if(r){this._globalTileRange=this._pxBoundsToTileRange(r)}this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)];this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom){return}this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(n*2);return new z(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(!e){return}var i=this._clampZoom(e.getZoom());if(t===undefined){t=e.getCenter()}if(this._tileZoom===undefined){return}var n=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(n),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new z(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y))){throw new Error("Attempted to load an infinite number of tiles")}for(var c in this._tiles){var u=this._tiles[c].coords;if(u.z!==this._tileZoom||!l.contains(new O(u.x,u.y))){this._tiles[c].current=false}}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var h=r.min.y;h<=r.max.y;h++){for(var p=r.min.x;p<=r.max.x;p++){var d=new O(p,h);d.z=this._tileZoom;if(!this._isValidTile(d)){continue}var f=this._tiles[this._tileCoordsToKey(d)];if(f){f.current=true}else{a.push(d)}}}a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)});if(a.length!==0){if(!this._loading){this._loading=true;this.fire("loading")}var m=document.createDocumentFragment();for(p=0;p<a.length;p++){this._addTile(a[p],m)}this._level.el.appendChild(m)}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y)){return false}}if(!this.options.bounds){return true}var n=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),r=n.add(i),o=e.unproject(n,t.z),a=e.unproject(r,t.z);return[o,a]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new F(e[0],e[1]);if(!this.options.noWrap){i=this._map.wrapLatLngBounds(i)}return i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new O(+e[0],+e[1]);i.z=+e[2];return i},_removeTile:function(t){var e=this._tiles[t];if(!e){return}ue(e.el);delete this._tiles[t];this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)})},_initTile:function(t){me(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px";t.style.height=e.y+"px";t.onselectstart=u;t.onmousemove=u;if(tt&&this.options.opacity<1){ye(t,this.options.opacity)}if(nt&&!rt){t.style.WebkitBackfaceVisibility="hidden"}},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t);var r=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(r);if(this.createTile.length<2){M(s(this._tileReady,this,t,null,r))}ke(r,i);this._tiles[n]={el:r,coords:t,current:true};e.appendChild(r);this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,i){if(e){this.fire("tileerror",{error:e,tile:i,coords:t})}var n=this._tileCoordsToKey(t);i=this._tiles[n];if(!i){return}i.loaded=+new Date;if(this._map._fadeAnimated){ye(i.el,0);S(this._fadeFrame);this._fadeFrame=M(this._updateOpacity,this)}else{i.active=true;this._pruneTiles()}if(!e){me(i.el,"leaflet-tile-loaded");this.fire("tileload",{tile:i.el,coords:t})}if(this._noTilesToLoad()){this._loading=false;this.fire("load");if(tt||!this._map._fadeAnimated){M(this._pruneTiles,this)}else{setTimeout(s(this._pruneTiles,this),250)}}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?r(t.x,this._wrapX):t.x,this._wrapY?r(t.y,this._wrapY):t.y);e.z=t.z;return e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new z(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles){if(!this._tiles[t].loaded){return false}}return true}});function In(t){return new On(t)}var Bn=On.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:false,zoomReverse:false,detectRetina:false,crossOrigin:false},initialize:function(t,e){this._url=t;e=d(this,e);if(e.detectRetina&&Mt&&e.maxZoom>0){e.tileSize=Math.floor(e.tileSize/2);if(!e.zoomReverse){e.zoomOffset++;e.maxZoom--}else{e.zoomOffset--;e.minZoom++}e.minZoom=Math.max(0,e.minZoom)}if(typeof e.subdomains==="string"){e.subdomains=e.subdomains.split("")}if(!nt){this.on("tileunload",this._onTileRemove)}},setUrl:function(t,e){if(this._url===t&&e===undefined){e=true}this._url=t;if(!e){this.redraw()}return this},createTile:function(t,e){var i=document.createElement("img");Oe(i,"load",s(this._tileOnLoad,this,e,i));Oe(i,"error",s(this._tileOnError,this,e,i));if(this.options.crossOrigin||this.options.crossOrigin===""){i.crossOrigin=this.options.crossOrigin===true?"":this.options.crossOrigin}i.alt="";i.setAttribute("role","presentation");i.src=this.getTileUrl(t);return i},getTileUrl:function(t){var e={r:Mt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;if(this.options.tms){e["y"]=i}e["-y"]=i}return g(this._url,l(e,this.options))},_tileOnLoad:function(t,e){if(tt){setTimeout(s(t,this,null,e),0)}else{t(null,e)}},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;if(n&&e.getAttribute("src")!==n){e.src=n}t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;if(i){t=e-t}return t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles){if(this._tiles[t].coords.z!==this._tileZoom){e=this._tiles[t].el;e.onload=u;e.onerror=u;if(!e.complete){e.src=y;ue(e);delete this._tiles[t]}}}},_removeTile:function(t){var e=this._tiles[t];if(!e){return}if(!at){e.el.setAttribute("src",y)}return On.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!this._map||i&&i.getAttribute("src")===y){return}return On.prototype._tileReady.call(this,t,e,i)}});function zn(t,e){return new Bn(t,e)}var Rn=Bn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:false,version:"1.1.1"},options:{crs:null,uppercase:false},initialize:function(t,e){this._url=t;var i=l({},this.defaultWmsParams);for(var n in e){if(!(n in this.options)){i[n]=e[n]}}e=d(this,e);var r=e.detectRetina&&Mt?2:1;var o=this.getTileSize();i.width=o.x*r;i.height=o.y*r;this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code;Bn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=R(i.project(e[0]),i.project(e[1])),r=n.min,o=n.max,a=(this._wmsVersion>=1.3&&this._crs===ji?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=Bn.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){l(this.wmsParams,t);if(!e){this.redraw()}return this}});function Fn(t,e){return new Rn(t,e)}Bn.WMS=Rn,zn.wms=Fn;var jn=Ui.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t);c(this);this._layers=this._layers||{}},onAdd:function(){if(!this._container){this._initContainer();if(this._zoomAnimated){me(this._container,"leaflet-zoom-animated")}}this.getPane().appendChild(this._container);this._update();this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this);this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};if(this._zoomAnimated){t.zoomanim=this._onAnimZoom}return t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Le(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(o),l=r.multiplyBy(-i).add(n).add(r).subtract(s);if(vt){we(this._container,l,i)}else{ke(this._container,l)}},_reset:function(){this._update();this._updateTransform(this._center,this._zoom);for(var t in this._layers){this._layers[t]._reset()}},_onZoomEnd:function(){for(var t in this._layers){this._layers[t]._project()}},_updatePaths:function(){for(var t in this._layers){this._layers[t]._update()}},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new z(i,i.add(e.multiplyBy(1+t*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}}),Nn=jn.extend({getEvents:function(){var t=jn.prototype.getEvents.call(this);t.viewprereset=this._onViewPreReset;return t},_onViewPreReset:function(){this._postponeUpdatePaths=true},onAdd:function(){jn.prototype.onAdd.call(this);this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Oe(t,"mousemove",this._onMouseMove,this);Oe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this);Oe(t,"mouseout",this._handleMouseOut,this);this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest);delete this._ctx;ue(this._container);Be(this._container);delete this._container},_updatePaths:function(){if(this._postponeUpdatePaths){return}var t;this._redrawBounds=null;for(var e in this._layers){t=this._layers[e];t._update()}this._redraw()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}jn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Mt?2:1;ke(e,t.min);e.width=n*i.x;e.height=n*i.y;e.style.width=i.x+"px";e.style.height=i.y+"px";if(Mt){this._ctx.scale(2,2)}this._ctx.translate(-t.min.x,-t.min.y);this.fire("update")},_reset:function(){jn.prototype._reset.call(this);if(this._postponeUpdatePaths){this._postponeUpdatePaths=false;this._updatePaths()}},_initPath:function(t){this._updateDashArray(t);this._layers[c(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};if(this._drawLast){this._drawLast.next=e}this._drawLast=e;this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order;var i=e.next;var n=e.prev;if(i){i.prev=n}else{this._drawLast=n}if(n){n.next=i}else{this._drawFirst=i}delete t._order;delete this._layers[c(t)];this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t);t._project();t._update();this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t);this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray==="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],n,r;for(r=0;r<e.length;r++){n=Number(e[r]);if(isNaN(n)){return}i.push(n)}t.options._dashArray=i}else{t.options._dashArray=t.options.dashArray}},_requestRedraw:function(t){if(!this._map){return}this._extendRedrawBounds(t);this._redrawRequest=this._redrawRequest||M(this._redraw,this)},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z;this._redrawBounds.extend(t._pxBounds.min.subtract([e,e]));this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null;if(this._redrawBounds){this._redrawBounds.min._floor();this._redrawBounds.max._ceil()}this._clear();this._draw();this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else{this._ctx.save();this._ctx.setTransform(1,0,0,1,0,0);this._ctx.clearRect(0,0,this._container.width,this._container.height);this._ctx.restore()}},_draw:function(){var t,e=this._redrawBounds;this._ctx.save();if(e){var i=e.getSize();this._ctx.beginPath();this._ctx.rect(e.min.x,e.min.y,i.x,i.y);this._ctx.clip()}this._drawing=true;for(var n=this._drawFirst;n;n=n.next){t=n.layer;if(!e||t._pxBounds&&t._pxBounds.intersects(e)){t._updatePath()}}this._drawing=false;this._ctx.restore()},_updatePoly:function(t,e){if(!this._drawing){return}var i,n,r,o,a=t._parts,s=a.length,l=this._ctx;if(!s){return}l.beginPath();for(i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++){o=a[i][n];l[n?"lineTo":"moveTo"](o.x,o.y)}if(e){l.closePath()}}this._fillStroke(l,t)},_updateCircle:function(t){if(!this._drawing||t._empty()){return}var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||n)/n;if(r!==1){i.save();i.scale(1,r)}i.beginPath();i.arc(e.x,e.y/r,n,0,Math.PI*2,false);if(r!==1){i.restore()}this._fillStroke(i,t)},_fillStroke:function(t,e){var i=e.options;if(i.fill){t.globalAlpha=i.fillOpacity;t.fillStyle=i.fillColor||i.color;t.fill(i.fillRule||"evenodd")}if(i.stroke&&i.weight!==0){if(t.setLineDash){t.setLineDash(e.options&&e.options._dashArray||[])}t.globalAlpha=i.opacity;t.lineWidth=i.weight;t.strokeStyle=i.color;t.lineCap=i.lineCap;t.lineJoin=i.lineJoin;t.stroke()}},_onClick:function(t){var e=this._map.mouseEventToLayerPoint(t),i,n;for(var r=this._drawFirst;r;r=r.next){i=r.layer;if(i.options.interactive&&i._containsPoint(e)){if(!(t.type==="click"||t.type!=="preclick")||!this._map._draggableMoved(i)){n=i}}}if(n){Ke(t);this._fireEvent([n],t)}},_onMouseMove:function(t){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom){return}var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)},_handleMouseOut:function(t){var e=this._hoveredLayer;if(e){ge(this._container,"leaflet-interactive");this._fireEvent([e],t,"mouseout");this._hoveredLayer=null;this._mouseHoverThrottled=false}},_handleMouseHover:function(t,e){if(this._mouseHoverThrottled){return}var i,n;for(var r=this._drawFirst;r;r=r.next){i=r.layer;if(i.options.interactive&&i._containsPoint(e)){n=i}}if(n!==this._hoveredLayer){this._handleMouseOut(t);if(n){me(this._container,"leaflet-interactive");this._fireEvent([n],t,"mouseover");this._hoveredLayer=n}}if(this._hoveredLayer){this._fireEvent([this._hoveredLayer],t)}this._mouseHoverThrottled=true;setTimeout(s(function(){this._mouseHoverThrottled=false},this),32)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(!e){return}var i=e.next;var n=e.prev;if(i){i.prev=n}else{return}if(n){n.next=i}else if(i){this._drawFirst=i}e.prev=this._drawLast;this._drawLast.next=e;e.next=null;this._drawLast=e;this._requestRedraw(t)},_bringToBack:function(t){var e=t._order;if(!e){return}var i=e.next;var n=e.prev;if(n){n.next=i}else{return}if(i){i.prev=n}else if(n){this._drawLast=n}e.prev=null;e.next=this._drawFirst;this._drawFirst.prev=e;this._drawFirst=e;this._requestRedraw(t)}});function Un(t){return Tt?new Nn(t):null}var Hn=function(){try{document.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Gn={_initContainer:function(){this._container=ce("div","leaflet-vml-container")},_update:function(){if(this._map._animatingZoom){return}jn.prototype._update.call(this);this.fire("update")},_initPath:function(t){var e=t._container=Hn("shape");me(e,"leaflet-vml-shape "+(this.options.className||""));e.coordsize="1 1";t._path=Hn("path");e.appendChild(t._path);this._updateStyle(t);this._layers[c(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e);if(t.options.interactive){t.addInteractiveTarget(e)}},_removePath:function(t){var e=t._container;ue(e);t.removeInteractiveTarget(e);delete this._layers[c(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container;r.stroked=!!n.stroke;r.filled=!!n.fill;if(n.stroke){if(!e){e=t._stroke=Hn("stroke")}r.appendChild(e);e.weight=n.weight+"px";e.color=n.color;e.opacity=n.opacity;if(n.dashArray){e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," ")}else{e.dashStyle=""}e.endcap=n.lineCap.replace("butt","flat");e.joinstyle=n.lineJoin}else if(e){r.removeChild(e);t._stroke=null}if(n.fill){if(!i){i=t._fill=Hn("fill")}r.appendChild(i);i.color=n.fillColor||n.color;i.opacity=n.fillOpacity}else if(i){r.removeChild(i);t._fill=null}},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){de(t._container)}},Zn=Dt?Hn:Y,Wn=jn.extend({getEvents:function(){var t=jn.prototype.getEvents.call(this);t.zoomstart=this._onZoomStart;return t},_initContainer:function(){this._container=Zn("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=Zn("g");this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ue(this._container);Be(this._container);delete this._container;delete this._rootGroup;delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}jn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;if(!this._svgSize||!this._svgSize.equals(e)){this._svgSize=e;i.setAttribute("width",e.x);i.setAttribute("height",e.y)}ke(i,t.min);i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" "));this.fire("update")},_initPath:function(t){var e=t._path=Zn("path");if(t.options.className){me(e,t.options.className)}if(t.options.interactive){me(e,"leaflet-interactive")}this._updateStyle(t);this._layers[c(t)]=t},_addPath:function(t){if(!this._rootGroup){this._initContainer()}this._rootGroup.appendChild(t._path);t.addInteractiveTarget(t._path)},_removePath:function(t){ue(t._path);t.removeInteractiveTarget(t._path);delete this._layers[c(t)]},_updatePath:function(t){t._project();t._update()},_updateStyle:function(t){var e=t._path,i=t.options;if(!e){return}if(i.stroke){e.setAttribute("stroke",i.color);e.setAttribute("stroke-opacity",i.opacity);e.setAttribute("stroke-width",i.weight);e.setAttribute("stroke-linecap",i.lineCap);e.setAttribute("stroke-linejoin",i.lineJoin);if(i.dashArray){e.setAttribute("stroke-dasharray",i.dashArray)}else{e.removeAttribute("stroke-dasharray")}if(i.dashOffset){e.setAttribute("stroke-dashoffset",i.dashOffset)}else{e.removeAttribute("stroke-dashoffset")}}else{e.setAttribute("stroke","none")}if(i.fill){e.setAttribute("fill",i.fillColor||i.color);e.setAttribute("fill-opacity",i.fillOpacity);e.setAttribute("fill-rule",i.fillRule||"evenodd")}else{e.setAttribute("fill","none")}},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n=Math.max(Math.round(t._radiusY),1)||i,r="a"+i+","+n+" 0 1,0 ";var o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+r+i*2+",0 "+r+-i*2+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){de(t._path)}});if(Dt){Wn.include(Gn)}function Vn(t){return Pt||Dt?new Wn(t):null}ti.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;if(!e){e=this._renderer=this._createRenderer()}if(!this.hasLayer(e)){this.addLayer(e)}return e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===undefined){return false}var e=this._paneRenderers[t];if(e===undefined){e=this._createRenderer({pane:t});this._paneRenderers[t]=e}return e},_createRenderer:function(t){return this.options.preferCanvas&&Un(t)||Vn(t)}});var qn=an.extend({initialize:function(t,e){an.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){t=j(t);return[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function $n(t,e){return new qn(t,e)}Wn.create=Zn,Wn.pointsToPath=J,ln.geometryToLayer=cn,ln.coordsToLatLng=hn,ln.coordsToLatLngs=pn,ln.latLngToCoords=dn,ln.latLngsToCoords=fn,ln.getFeature=mn,ln.asFeature=gn,ti.mergeOptions({boxZoom:true});var Kn=pi.extend({initialize:function(t){this._map=t;this._container=t._container;this._pane=t._panes.overlayPane;this._resetStateTimeout=0;t.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ue(this._pane);delete this._pane},_resetState:function(){this._resetStateTimeout=0;this._moved=false},_clearDeferredResetState:function(){if(this._resetStateTimeout!==0){clearTimeout(this._resetStateTimeout);this._resetStateTimeout=0}},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1){return false}this._clearDeferredResetState();this._resetState();ie();Me();this._startPoint=this._map.mouseEventToContainerPoint(t);Oe(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){if(!this._moved){this._moved=true;this._box=ce("div","leaflet-zoom-box",this._container);me(this._container,"leaflet-crosshair");this._map.fire("boxzoomstart")}this._point=this._map.mouseEventToContainerPoint(t);var e=new z(this._point,this._startPoint),i=e.getSize();ke(this._box,e.min);this._box.style.width=i.x+"px";this._box.style.height=i.y+"px"},_finish:function(){if(this._moved){ue(this._box);ge(this._container,"leaflet-crosshair")}ne();Se();Be(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(t.which!==1&&t.button!==1){return}this._finish();if(!this._moved){return}this._clearDeferredResetState();this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})},_onKeyDown:function(t){if(t.keyCode===27){this._finish()}}});ti.addInitHook("addHandler","boxZoom",Kn),ti.mergeOptions({doubleClickZoom:true});var Yn=pi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,r=t.originalEvent.shiftKey?i-n:i+n;if(e.options.doubleClickZoom==="center"){e.setZoom(r)}else{e.setZoomAround(t.containerPoint,r)}}});ti.addInitHook("addHandler","doubleClickZoom",Yn),ti.mergeOptions({dragging:true,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:false,maxBoundsViscosity:0});var Jn=pi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new vi(t._mapPane,t._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);if(t.options.worldCopyJump){this._draggable.on("predrag",this._onPreDragWrap,this);t.on("zoomend",this._onZoomEnd,this);t.whenReady(this._onZoomEnd,this)}}me(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){ge(this._map._container,"leaflet-grab");ge(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;t._stop();if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}t.fire("movestart").fire("dragstart");if(t.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i);this._times.push(e);this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){while(this._positions.length>1&&t-this._times[0]>50){this._positions.shift();this._times.shift()}},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit){return}var t=this._draggable._newPos.subtract(this._draggable._startPos);var e=this._offsetLimit;if(t.x<e.min.x){t.x=this._viscousLimit(t.x,e.min.x)}if(t.y<e.min.y){t.y=this._viscousLimit(t.y,e.min.y)}if(t.x>e.max.x){t.x=this._viscousLimit(t.x,e.max.x)}if(t.y>e.max.y){t.y=this._viscousLimit(t.y,e.max.y)}this._draggable._newPos=this._draggable._startPos.add(t)},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,a=Math.abs(r+i)<Math.abs(o+i)?r:o;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;e.fire("dragend",t);if(n){e.fire("moveend")}else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=r.multiplyBy(a/o),l=s.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),h=c/(i.inertiaDeceleration*a),p=u.multiplyBy(-h/2).round();if(!p.x&&!p.y){e.fire("moveend")}else{p=e._limitOffset(p,e.options.maxBounds);M(function(){e.panBy(p,{duration:h,easeLinearity:a,noMoveStart:true,animate:true})})}}}});ti.addInitHook("addHandler","dragging",Jn),ti.mergeOptions({keyboard:true,keyboardPanDelta:80});var Xn=pi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t;this._setPanDelta(t.options.keyboardPanDelta);this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;if(t.tabIndex<=0){t.tabIndex="0"}Oe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused){return}var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus();window.scrollTo(n,i)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,n,r;for(n=0,r=i.left.length;n<r;n++){e[i.left[n]]=[-1*t,0]}for(n=0,r=i.right.length;n<r;n++){e[i.right[n]]=[t,0]}for(n=0,r=i.down.length;n<r;n++){e[i.down[n]]=[0,t]}for(n=0,r=i.up.length;n<r;n++){e[i.up[n]]=[0,-1*t]}},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,n,r;for(n=0,r=i.zoomIn.length;n<r;n++){e[i.zoomIn[n]]=t}for(n=0,r=i.zoomOut.length;n<r;n++){e[i.zoomOut[n]]=-t}},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(t.altKey||t.ctrlKey||t.metaKey){return}var e=t.keyCode,i=this._map,n;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress){n=this._panKeys[e];if(t.shiftKey){n=B(n).multiplyBy(3)}i.panBy(n);if(i.options.maxBounds){i.panInsideBounds(i.options.maxBounds)}}}else if(e in this._zoomKeys){i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e])}else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey){i.closePopup()}else{return}Ze(t)}});ti.addInitHook("addHandler","keyboard",Xn),ti.mergeOptions({scrollWheelZoom:true,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Qn=pi.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qe(t);var i=this._map.options.wheelDebounceTime;this._delta+=e;this._lastMousePos=this._map.mouseEventToContainerPoint(t);if(!this._startTime){this._startTime=+new Date}var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(s(this._performZoom,this),n);Ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(r/i)*i:r,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0;this._startTime=null;if(!a){return}if(t.options.scrollWheelZoom==="center"){t.setZoom(e+a)}else{t.setZoomAround(this._lastMousePos,e+a)}}});ti.addInitHook("addHandler","scrollWheelZoom",Qn),ti.mergeOptions({tap:true,tapTolerance:15});var tr=pi.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(!t.touches){return}Ge(t);this._fireClick=true;if(t.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return}var e=t.touches[0],i=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY);if(i.tagName&&i.tagName.toLowerCase()==="a"){me(i,"leaflet-active")}this._holdTimeout=setTimeout(s(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",e)}},this),1e3);this._simulateEvent("mousedown",e);Oe(document,{touchmove:this._onMove,touchend:this._onUp},this)},_onUp:function(t){clearTimeout(this._holdTimeout);Be(document,{touchmove:this._onMove,touchend:this._onUp},this);if(this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;if(i&&i.tagName&&i.tagName.toLowerCase()==="a"){ge(i,"leaflet-active")}this._simulateEvent("mouseup",e);if(this._isTapValid()){this._simulateEvent("click",e)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY);this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=true;e.target._simulatedClick=true;i.initMouseEvent(t,true,true,window,1,e.screenX,e.screenY,e.clientX,e.clientY,false,false,false,false,0,null);e.target.dispatchEvent(i)}});if(kt&&(!wt||ut)){ti.addInitHook("addHandler","tap",tr)}ti.mergeOptions({touchZoom:kt&&!rt,bounceAtZoomLimits:true});var er=pi.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom");Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ge(this._map._container,"leaflet-touch-zoom");Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming){return}var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2);this._startLatLng=e.containerPointToLatLng(this._centerPoint);if(e.options.touchZoom!=="center"){this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))}this._startDist=i.distanceTo(n);this._startZoom=e.getZoom();this._moved=false;this._zooming=true;e._stop();Oe(document,"touchmove",this._onTouchMove,this);Oe(document,"touchend",this._onTouchEnd,this);Ge(t)},_onTouchMove:function(t){if(!t.touches||t.touches.length!==2||!this._zooming){return}var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),r=i.distanceTo(n)/this._startDist;this._zoom=e.getScaleZoom(r,this._startZoom);if(!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)){this._zoom=e._limitZoom(this._zoom)}if(e.options.touchZoom==="center"){this._center=this._startLatLng;if(r===1){return}}else{var o=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(r===1&&o.x===0&&o.y===0){return}this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}if(!this._moved){e._moveStart(true,false);this._moved=true}S(this._animRequest);var a=s(e._move,e,this._center,this._zoom,{pinch:true,round:false});this._animRequest=M(a,this,true);Ge(t)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}this._zooming=false;S(this._animRequest);Be(document,"touchmove",this._onTouchMove,this);Be(document,"touchend",this._onTouchEnd,this);if(this._map.options.zoomAnimation){this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),true,this._map.options.zoomSnap)}else{this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}});ti.addInitHook("addHandler","touchZoom",er),ti.BoxZoom=Kn,ti.DoubleClickZoom=Yn,ti.Drag=Jn,ti.Keyboard=Xn,ti.ScrollWheelZoom=Qn,ti.Tap=tr,ti.TouchZoom=er,t.version=e,t.Control=ii,t.control=ni,t.Browser=Et,t.Evented=E,t.Mixin=di,t.Util=T,t.Class=P,t.Handler=pi,t.extend=l,t.bind=s,t.stamp=c,t.setOptions=d,t.DomEvent=Xe,t.DomUtil=Ee,t.PosAnimation=Qe,t.Draggable=vi,t.LineUtil=Ei,t.PolyUtil=Ii,t.Point=O,t.point=B,t.Bounds=z,t.bounds=R,t.Transformation=V,t.transformation=q,t.Projection=Ri,t.LatLng=N,t.latLng=U,t.LatLngBounds=F,t.latLngBounds=j,t.CRS=H,t.GeoJSON=ln,t.geoJSON=_n,t.geoJson=yn,t.Layer=Ui,t.LayerGroup=Hi,t.layerGroup=Gi,t.FeatureGroup=Zi,t.featureGroup=Wi,t.ImageOverlay=bn,t.imageOverlay=xn,t.VideoOverlay=wn,t.videoOverlay=kn,t.SVGOverlay=Ln,t.svgOverlay=Cn,t.DivOverlay=Mn,t.Popup=Sn,t.popup=Tn,t.Tooltip=Pn,t.tooltip=Dn,t.Icon=Vi,t.icon=qi,t.DivIcon=An,t.divIcon=En,t.Marker=Yi,t.marker=Ji,t.TileLayer=Bn,t.tileLayer=zn,t.GridLayer=On,t.gridLayer=In,t.SVG=Wn,t.svg=Vn,t.Renderer=jn,t.Canvas=Nn,t.canvas=Un,t.Path=Xi,t.CircleMarker=Qi,t.circleMarker=tn,t.Circle=en,t.circle=nn,t.Polyline=rn,t.polyline=on,t.Polygon=an,t.polygon=sn,t.Rectangle=qn,t.rectangle=$n,t.Map=ti,t.map=ei;var ir=window.L;t.noConflict=function(){window.L=ir;return this},window.L=t}(e)},function(t,e,i){"use strict";i.d(e,"b",function(){return H}),i.d(e,"a",function(){return st}),i.d(e,"c",function(){return lt});i(3);var n=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,r=""===document.documentElement.style.pointerEvents,s={cors:n,pointerEvents:r},o={attributionWidthOffset:55},v=i(0),a=0;function l(t){var e,i,n,r="";for(var o in t.f=t.f||"json",t){t.hasOwnProperty(o)&&(e=t[o],i=Object.prototype.toString.call(e),r.length&&(r+="&"),n="[object Array]"===i?"[object Object]"===Object.prototype.toString.call(e[0])?JSON.stringify(e):e.join(","):"[object Object]"===i?JSON.stringify(e):"[object Date]"===i?e.valueOf():e,r+=encodeURIComponent(o)+"="+encodeURIComponent(n))}return r}function c(n,r){var o=new window.XMLHttpRequest;return o.onerror=function(t){o.onreadystatechange=v.Util.falseFn,n.call(r,{error:{code:500,message:"XMLHttpRequest error"}},null)},o.onreadystatechange=function(){var e,i;if(4===o.readyState){try{e=JSON.parse(o.responseText)}catch(t){e=null,i={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!i&&e.error&&(i=e.error,e=null),o.onerror=v.Util.falseFn,n.call(r,i,e)}},o.ontimeout=function(){this.onerror()},o}function u(t,e,i,n){var r=c(i,n);return r.open("GET",t+"?"+l(e),!0),null!=n&&void 0!==n.options&&(r.timeout=n.options.timeout),r.send(null),r}function h(t,e,i,n){var r=l(e),o=c(i,n),a=(t+"?"+r).length;if(a<=2e3&&s.cors?o.open("GET",t+"?"+r):2e3<a&&s.cors&&(o.open("POST",t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout),a<=2e3&&s.cors)o.send(null);else{if(!(2e3<a&&s.cors))return a<=2e3&&!s.cors?p(t,e,i,n):void f("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");o.send(r)}return o}function p(t,e,n,r){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+a;e.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(t){var e,i;!0!==window._EsriLeafletCallbacks[o]&&("[object Object]"!==(i=Object.prototype.toString.call(t))&&"[object Array]"!==i&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),n.call(r,e,t),window._EsriLeafletCallbacks[o]=!0)};var i=v.DomUtil.create("script",null,document.body);return i.type="text/javascript",i.src=t+"?"+l(e),i.id=o,i.onerror=function(t){t&&!0!==window._EsriLeafletCallbacks[o]&&(n.call(r,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[o]=!0)},v.DomUtil.addClass(i,"esri-leaflet-jsonp"),a++,{id:o,url:i.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var d=s.cors?u:p;function f(){console&&console.warn&&console.warn.apply(console,arguments)}d.CORS=u,d.JSONP=p;function g(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(function(t,e,i,n){var r=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),o=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),a=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!=a){var s=r/a,l=o/a;if(0<=s&&s<=1&&0<=l&&l<=1)return!0}return!1}(t[i],t[i+1],e[n],e[n+1]))return!0;return!1}function _(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t}function y(t){for(var e,i=0,n=0,r=t.length,o=t[n];n<r-1;n++)i+=((e=t[n+1])[0]-o[0])*(e[1]+o[1]),o=e;return 0<=i}function m(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function b(t){for(var e,i,n=[],r=[],o=0;o<t.length;o++){var a,s=_(t[o].slice(0));s.length<4||(y(s)?(a=[s.slice().reverse()],n.push(a)):r.push(s.slice().reverse()))}for(var l,c,u,h,p=[];r.length;){i=r.pop();for(var d=!1,f=n.length-1;0<=f;f--)if(e=n[f][0],h=u=void 0,u=g(l=e,c=i),h=function(t,e){for(var i=!1,n=-1,r=t.length,o=r-1;++n<r;o=n)(t[n][1]<=e[1]&&e[1]<t[o][1]||t[o][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[o][0]-t[n][0])*(e[1]-t[n][1])/(t[o][1]-t[n][1])+t[n][0]&&(i=!i);return i}(l,c[0]),!(u||!h)){n[f].push(i),d=!0;break}d||p.push(i)}for(;p.length;){i=p.pop();var m=!1;for(f=n.length-1;0<=f;f--)if(e=n[f][0],g(e,i)){n[f].push(i),m=!0;break}m||n.push([i.reverse()])}return 1===n.length?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}function x(t){var e=[],i=t.slice(0),n=_(i.shift().slice(0));if(4<=n.length){y(n)||n.reverse(),e.push(n);for(var r=0;r<i.length;r++){var o=_(i[r].slice(0));4<=o.length&&(y(o)&&o.reverse(),e.push(o))}}return e}var w={request:h,get:d,post:function(t,e,i,n){var r=c(i,n);return r.open("POST",t),null!=n&&void 0!==n.options&&(r.timeout=n.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(l(e)),r}},k=function t(e,i){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var r=0;r<e.features.length;r++)n.features.push(t(e.features[r],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=b(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?m(e.attributes):null,e.attributes))try{n.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<i.length;n++){var r=i[n];if(r in t&&("string"==typeof t[r]||"number"==typeof t[r]))return t[r]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},L=function t(e,i){i=i||"OBJECTID";var n,r={wkid:4326},o={};switch(e.type){case"Point":o.x=e.coordinates[0],o.y=e.coordinates[1],o.spatialReference=r;break;case"MultiPoint":o.points=e.coordinates.slice(0),o.spatialReference=r;break;case"LineString":o.paths=[e.coordinates.slice(0)],o.spatialReference=r;break;case"MultiLineString":o.paths=e.coordinates.slice(0),o.spatialReference=r;break;case"Polygon":o.rings=x(e.coordinates.slice(0)),o.spatialReference=r;break;case"MultiPolygon":o.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=x(t[i]),r=n.length-1;0<=r;r--){var o=n[r].slice(0);e.push(o)}return e}(e.coordinates.slice(0)),o.spatialReference=r;break;case"Feature":e.geometry&&(o.geometry=t(e.geometry,i)),o.attributes=e.properties?m(e.properties):{},e.id&&(o.attributes[i]=e.id);break;case"FeatureCollection":for(o=[],n=0;n<e.features.length;n++)o.push(t(e.features[n],i));break;case"GeometryCollection":for(o=[],n=0;n<e.geometries.length;n++)o.push(t(e.geometries[n],i))}return o};function C(t,e){return L(t,e)}function M(t,e){return k(t,e)}function S(t){if("NaN"===t.xmin||"NaN"===t.ymin||"NaN"===t.xmax||"NaN"===t.ymax)return null;var e=Object(v.latLng)(t.ymin,t.xmin),i=Object(v.latLng)(t.ymax,t.xmax);return Object(v.latLngBounds)(e,i)}function T(t){return{xmin:(t=Object(v.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var P=/^(OBJECTID|FID|OID|ID)$/i;function D(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(P)){e=t.fields[i].name;break}}return e}function A(t){for(var e in t.attributes)if(e.match(P))return e}function E(t,e){var i=t.features||t.results,n=i.length,r=e||D(t),o={type:"FeatureCollection",features:[]};if(n)for(var a=i.length-1;0<=a;a--){var s=M(i[a],r||A(i[a]));o.features.push(s)}return o}function O(t){return"/"!==(t=v.Util.trim(t))[t.length-1]&&(t+="/"),t}function I(t){var e;return-1!==t.url.indexOf("?")&&(t.requestParams=t.requestParams||{},e=t.url.substring(t.url.indexOf("?")+1),t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')),t.url=O(t.url.split("?")[0]),t}function B(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function z(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function R(t){return t.getSize().x-o.attributionWidthOffset+"px"}function F(e){var t,i;e.attributionControl&&!e.attributionControl._esriAttributionAdded&&(e.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>'),(t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t),v.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),(i=document.createElement("style")).type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+R(e)+";}",document.getElementsByTagName("head")[0].appendChild(i),v.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution"),e.on("resize",function(t){e.attributionControl._container.style.maxWidth=R(t.target)}),e.attributionControl._esriAttributionAdded=!0)}function j(t){var e={geometry:null,geometryType:null};return t instanceof v.LatLngBounds?(e.geometry=T(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof v.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof v.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=C(t),e.geometryType=z(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=C(t),e.geometryType=z(t.type),e):void f("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function N(t,l){s.cors&&h(t,{},v.Util.bind(function(t,e){if(!t){l._esriAttributions=[];for(var i=0;i<e.contributors.length;i++)for(var n=e.contributors[i],r=0;r<n.coverageAreas.length;r++){var o=n.coverageAreas[r],a=Object(v.latLng)(o.bbox[0],o.bbox[1]),s=Object(v.latLng)(o.bbox[2],o.bbox[3]);l._esriAttributions.push({attribution:n.attribution,score:o.score,bounds:Object(v.latLngBounds)(a,s),minZoom:o.zoomMin,maxZoom:o.zoomMax})}l._esriAttributions.sort(function(t,e){return e.score-t.score}),U({target:l})}},this))}function U(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var n=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(n&&i){for(var r="",o=e.getBounds(),a=Object(v.latLngBounds)(o.getSouthWest().wrap(),o.getNorthEast().wrap()),s=e.getZoom(),l=0;l<i.length;l++){var c=i[l],u=c.attribution;!r.match(u)&&c.bounds.intersects(a)&&s>=c.minZoom&&s<=c.maxZoom&&(r+=", "+u)}r=r.substr(2),n.innerHTML=r,n.style.maxWidth=R(e),e.fire("attributionupdated",{attribution:r})}}}var H={warn:f,cleanUrl:O,getUrlParams:I,isArcgisOnline:B,geojsonTypeToArcGIS:z,responseToFeatureCollection:E,geojsonToArcGIS:C,arcgisToGeoJSON:M,boundsToExtent:T,extentToBounds:S,calcAttributionWidth:R,setEsriAttribution:F,_setGeometry:j,_getAttributionData:N,_updateMapAttribution:U,_findIdAttributeFromFeature:A,_findIdAttributeFromResponse:D},G=v.Class.extend({options:{proxy:!1,useCors:n},generateSetter:function(e,t){return v.Util.bind(function(t){return this.params[e]=t,this},t)},initialize:function(t){if(t.request&&t.options?(this._service=t,v.Util.setOptions(this,t.options)):(v.Util.setOptions(this,t),this.options.url=O(t.url)),this.params=v.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&v.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,n,r){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?w[t](o,i,n,r):w.get.JSONP(o,i,n,r)}});var Z=G.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=Object(v.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSr=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(i,n){return this._cleanParams(),this.options.isModern||B(this.options.url)?(this.params.f="geojson",this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e,e)},this)):this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e&&E(e),e)},this)},count:function(i,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.count,e)},t)},ids:function(i,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.objectIds,e)},t)},bounds:function(i,n){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(t,e){e&&e.extent&&S(e.extent)?i.call(n,t,S(e.extent),e):(t={message:"Invalid Bounds"},i.call(n,t,null,e))},n)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=Object(v.point)(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&f("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSr=4326;var e=j(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var W=function(t){return new Z(t)},V=G.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&E(e),e)},n)}});var q=function(t){return new V(t)},$=G.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var K=$.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=T(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=Object(v.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(r,o){return this.request(function(t,e){if(t)r.call(o,t,void 0,e);else{var i=E(e);e.results=e.results.reverse();for(var n=0;n<i.features.length;n++){i.features[n].layerId=e.results[n].layerId}r.call(o,void 0,i,e)}})},_setGeometryParams:function(t){var e=j(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var Y=function(t){return new K(t)},J=$.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=Object(v.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&this._responseToGeoJSON(e),e)},this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,n=t.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(r.pixel.properties.values=t.properties.Values),i&&i.features&&(r.catalogItems=E(i),n&&n.length===r.catalogItems.features.length))for(var o=n.length-1;0<=o;o--)r.catalogItems.features[o].properties.catalogItemVisibility=n[o];return r}});var X=function(t){return new J(t)},Q=v.Evented.extend({options:{proxy:!1,useCors:n,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,v.Util.setOptions(this,t),this.options.url=O(this.options.url)},get:function(t,e,i,n){return this._request("get",t,e,i,n)},post:function(t,e,i,n){return this._request("post",t,e,i,n)},request:function(t,e,i,n){return this._request("request",t,e,i,n)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,n,r){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var o=this._createServiceCallback(t,e,i,n,r);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&v.Util.extend(i,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?w[t](a,i,o,r):w.get.JSONP(a,i,o,r)}this._requestQueue.push([t,e,i,n,r])},_createServiceCallback:function(i,n,r,o,a){return v.Util.bind(function(t,e){!t||499!==t.code&&498!==t.code||(this._authenticating=!0,this._requestQueue.push([i,n,r,o,a]),this.fire("authenticationrequired",{authenticate:v.Util.bind(this.authenticate,this)},!0),t.authenticate=v.Util.bind(this.authenticate,this)),o.call(a,t,e),t?this.fire("requesterror",{url:this.options.url+n,params:r,message:t.message,code:t.code,method:i},!0):this.fire("requestsuccess",{url:this.options.url+n,params:r,response:e,method:i},!0),this.fire("requestend",{url:this.options.url+n,params:r,method:i},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;0<=t;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var tt=Q.extend({identify:function(){return Y(this)},find:function(){return q(this)},query:function(){return W(this)}});var et=function(t){return new tt(t)},it=Q.extend({query:function(){return W(this)},identify:function(){return X(this)}});var nt=function(t){return new it(t)},rt=Q.extend({options:{idAttribute:"OBJECTID"},query:function(){return W(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,n,r){for(var e=t.features?t.features:[t],i=e.length-1;0<=i;i--)delete e[i].id;return t=C(t),t=1<e.length?t:[t],this.post("addFeatures",{features:t},function(t,e){var i=e&&e.addResults?1<e.addResults.length?e.addResults:e.addResults[0]:void 0;n&&n.call(r,t||e.addResults[0].error,i)},r)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,r){var e=t.features?t.features:[t];return t=C(t,this.options.idAttribute),t=1<e.length?t:[t],this.post("updateFeatures",{features:t},function(t,e){var i=e&&e.updateResults?1<e.updateResults.length?e.updateResults:e.updateResults[0]:void 0;n&&n.call(r,t||e.updateResults[0].error,i)},r)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,n,r){return this.post("deleteFeatures",{objectIds:t},function(t,e){var i=e&&e.deleteResults?1<e.deleteResults.length?e.deleteResults:e.deleteResults[0]:void 0;n&&n.call(r,t||e.deleteResults[0].error,i)},r)}});var ot=function(t){return new rt(t)},at="https:"!==window.location.protocol?"http:":"https:",st=v.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:at+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:at+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:at+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:at+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:at+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!st.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=st.TILES[t]}var n=v.Util.extend(i.options,e);v.Util.setOptions(this,n),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),v.TileLayer.prototype.initialize.call(this,i.urlTemplate,n)},onAdd:function(t){F(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&N((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",U),v.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){t.off("moveend",U),v.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){var t;this._map.getPane(this.options.pane)||((t=this._map.createPane(this.options.pane)).style.pointerEvents="none",t.style.zIndex=500)},getAttribution:function(){var t;return this.options.attribution&&(t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>"),t}});function lt(t,e){return new st(t,e)}var ct=v.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=I(t=v.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&0<Object.keys(t.requestParams).length?v.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=et(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),v.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return v.Util.template(this.tileUrl,v.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return v.DomEvent.on(i,"load",v.Util.bind(this._tileOnLoad,this,e,i)),v.DomEvent.on(i,"error",v.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",function(){i.src=this.getTileUrl(t)},this),i},onAdd:function(c){F(c),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){var i=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&c.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,c.attributionControl.addAttribution(this.getAttribution())),c.options.crs!==v.CRS.EPSG3857||102100!==i&&3857!==i)c.options.crs&&c.options.crs.code&&-1<c.options.crs.code.indexOf(i)||f("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var n=e.tileInfo.lods,r=ct.MercatorZoomLevels,o=0;o<n.length;o++){var a=n[o];for(var s in r){var l=r[s];if(this._withinPercentage(a.resolution,l,this.options.zoomOffsetAllowance)){this._lodMap[s]=a.level;break}}}this.fire("lodmap")}}},this),v.TileLayer.prototype.onAdd.call(this,c)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var ut=v.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,v.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===v.CRS.EPSG3857?v.ImageOverlay.prototype._reset.call(this):v.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),ht=v.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:n,attribution:null,interactive:!1,alt:""},onAdd:function(i){F(i),this.options.zIndex&&(this.options.position=null),this._update=v.Util.throttle(this._update,this.options.updateInterval,this),i.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?i.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&i.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,i.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Object(v.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._currentImage._image&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,n,e){if(this._map){if(e&&(t="data:"+e+";base64,"+t),!t)return;var r=new ut(t,n,{opacity:0,crossOrigin:this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),o=function(t){var e,i;r.off("error",o,this),this._map&&(e=t.target,i=this._currentImage,e._bounds.equals(n)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),i&&this._map&&this._map.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):this._map.removeLayer(e)),this.fire("load",{bounds:n})};r.once("error",function(){this._map.removeLayer(r),this.fire("error"),r.off("load",o,this)},this),r.once("load",o,this)}},_update:function(){var t,e,i;this._map&&(t=this._map.getZoom(),e=this._map.getBounds(),this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(t>this.options.maxZoom||t<this.options.minZoom?this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null):(i=this._buildExportParams(),v.Util.extend(i,this.options.requestParams),i?(this._requestExport(i,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null))))},_renderPopup:function(t,e,i,n){var r;t=Object(v.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)&&((r=this._popupFunction(e,i,n))&&this._popup.setLatLng(t).setContent(r).openOn(this._map))},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),n=this._map.options.crs.project(i),r=this._map.options.crs.project(e),o=Object(v.bounds)(n,r);return[o.getBottomLeft().x,o.getBottomLeft().y,o.getTopRight().x,o.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),n=this._map.unproject(t.getTopRight()),r=this._map.latLngToLayerPoint(n).y,o=this._map.latLngToLayerPoint(i).y;return(0<r||o<e.y)&&(e.y=o-r),e.x+","+e.y}});ht.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=I(t),this.service=nt(t),this.service.addEventParent(this),v.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return v.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return v.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(n){var t=v.Util.bind(function(t,e,i){t||setTimeout(v.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=this.identify().at(n.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),0!==this.options.noData&&!this.options.noData||(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,i){var e;"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),this._renderImage(e.href,i))},this):(t.f="image",e=this.options.url+"exportImage"+v.Util.getParamString(t),this.options.proxy&&(e=this.options.proxy+"?"+e),this._renderImage(e,i))}});ht.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=I(t),this.service=et(t),this.service.addEventParent(this),v.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(n){var t=v.Util.bind(function(t,e,i){t||setTimeout(v.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=this.options.popup?this.options.popup.on(this._map).at(n.latlng):this.identify().on(this._map).at(n.latlng);if(e.params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var i in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(i)&&e.layerDef(i,this.options.layerDefs[i]);e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,i){var e;"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&e.href&&(e.href+="?token="+this.options.token),this.options.proxy&&e.href&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,i):this._renderImage(e.imageData,i,e.contentType))},this):(t.f="image",e=this.options.url+"export"+v.Util.getParamString(t),this.options.proxy&&(e=this.options.proxy+"?"+e),this._renderImage(e,i))}});var pt=v.Layer.extend({options:{cellSize:512,updateWhenIdle:v.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){v.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof v.Point?t:new v.Point(t,t)},_pruneCells:function(){if(this._map){var t,e,i;for(t in this._cells)(i=this._cells[t]).retain=i.current;for(t in this._cells){(i=this._cells[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2))}for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),o=Math.floor(e/2),a=i-1,s=new v.Point(+r,+o);s.z=+a;var l=this._cellCoordsToKey(s),c=this._cells[l];return c&&c.active?c.retain=!0:(c&&c.loaded&&(c.retain=!0),n<a&&this._retainParent(r,o,a,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new v.Point(r,o);a.z=i+1;var s=this._cellCoordsToKey(a),l=this._cells[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);e||this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_setView:function(t,e,i,n){var r=Math.round(e);n||(this._cellZoom=r,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),n=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._cellZoom),r=e.project(t,this._cellZoom).floor(),o=e.getSize().divideBy(2*n);return new v.Bounds(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var n=this._getCelldPixelBounds(t),r=this._pxBoundsToCellRange(n),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new v.Bounds(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var c in this._cells){var u=this._cells[c].coords;u.z===this._cellZoom&&l.contains(new v.Point(u.x,u.y))||(this._cells[c].current=!1)}if(1<Math.abs(i-this._cellZoom))this._setView(t,i);else{for(var h=r.min.y;h<=r.max.y;h++)for(var p=r.min.x;p<=r.max.x;p++){var d,f=new v.Point(p,h);f.z=this._cellZoom,this._isValidCell(f)&&((d=this._cells[this._cellCoordsToKey(f)])?d.current=!0:a.push(f))}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length)for(this._loading||(this._loading=!0),p=0;p<a.length;p++){var m=this._cellCoordsToKey(a[p]),g=this._keyToCellCoords(m);this._activeCells[g]?this._reuseCell(a[p]):this._createCell(a[p])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._cellCoordsToBounds(t);return Object(v.toLatLngBounds)(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),n=t.scaleBy(i),r=n.add(i);return[e.unproject(n,t.z),e.unproject(r,t.z)]},_cellCoordsToBounds:function(t){var e=this._cellCoordsToNwSe(t),i=new v.LatLngBounds(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),i=new v.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeCell:function(t){var e,i,n,r=this._cells[t];r&&(e=this._keyToCellCoords(t),i=this._wrapCoords(e),n=this._cellCoordsToBounds(this._wrapCoords(e)),r.current=!1,delete this._cells[t],this._activeCells[t]=r,this.cellLeave(n,i,t),this.fire("cellleave",{key:t,coords:i,bounds:n}))},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(n,i,e),this.fire("cellenter",{key:e,coords:i,bounds:n})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(n,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:n}),this._cells[e]={coords:t,current:!0},v.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){var n=this._cellCoordsToKey(t);(i=this._cells[n])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new v.Point(this._wrapX?v.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?v.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new v.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function dt(t){this.values=[].concat(t||[])}dt.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},dt.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,n=0,r=this.values.length-1;n<=r;)if(e=(n+r)/2|0,+(i=this.values[Math.round(e)]).value<+t)n=1+e;else{if(!(+i.value>+t))return e;r=e-1}return Math.abs(~r)},dt.prototype.between=function(t,e){var i=this.getIndex(t),n=this.getIndex(e);if(0===i&&0===n)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[n+1]&&this.values[n+1].value===e;)n++;return this.values[n]&&this.values[n].value===e&&this.values[n+1]&&n++,this.values.slice(i,n)},dt.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},dt.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},dt.prototype.sort=function(){return this.values.sort(function(t,e){return e.value-t.value}).reverse(),this.dirty=!1,this};var ft=dt,mt=pt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(t){if(pt.prototype.initialize.call(this,t),t=I(t),t=v.Util.setOptions(this,t),this.service=ot(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&f("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new ft,this._endTimeIndex=new ft):this.options.timeField&&(this._timeIndex=new ft),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(r){return F(r),this.service.metadata(function(t,e){var i,n;t||(i=e.supportedQueryFormats,(n=!1)===this.service.options.isModern&&(n=!0),!n&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&r.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,r.attributionControl.addAttribution(this.getAttribution())))},this),r.on("zoomend",this._handleZoomChange,this),pt.prototype.onAdd.call(this,r)},onRemove:function(t){return t.off("zoomend",this._handleZoomChange,this),pt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(n,r,o){this._activeRequests++;var a=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:n},!0),this._buildQuery(n).run(function(t,e,i){i&&i.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===a&&(!t&&e&&e.features.length&&v.Util.requestAnimFrame(v.Util.bind(function(){this._addFeatures(e.features,r),this._postProcessFeatures(n)},this)),t||!e||e.features.length||this._postProcessFeatures(n),t&&this._postProcessFeatures(n),o&&o.call(this,t,e))},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var i;e&&(i=this._cacheKey(e),this._cache[i]=this._cache[i]||[]);for(var n=t.length-1;0<=n;n--){var r=t[n].id;-1===this._currentSnapshot.indexOf(r)&&this._currentSnapshot.push(r),void 0!==i&&-1===this._cache[i].indexOf(r)&&this._cache[i].push(r)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t){var e=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return e.params.resultType="tile",this.options.requestParams&&v.Util.extend(e.params,this.options.requestParams),this.options.simplifyFactor&&e.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&e.between(this.options.from,this.options.to),e},setWhere:function(n,r,o){this.options.where=n&&n.length?n:"1=1";for(var a=[],s=[],l=0,c=null,t=v.Util.bind(function(t,e){if(t&&(c=t),e)for(var i=e.features.length-1;0<=i;i--)s.push(e.features[i].id);--l<=0&&this._visibleZoom()&&n===this.options.where&&(this._currentSnapshot=s,v.Util.requestAnimFrame(v.Util.bind(function(){this.removeLayers(a),this.addLayers(s),r&&r.call(o,c)},this)))},this),e=this._currentSnapshot.length-1;0<=e;e--)a.push(this._currentSnapshot[e]);for(var i in this._cache={},this._cells){l++;var u=this._keyToCellCoords(i),h=this._cellCoordsToBounds(u);this._requestFeatures(h,u,t)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,i,n,r){var o=this.options.from,a=this.options.to,s=0,l=null,t=v.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(o,a,e,i),s--,n&&s<=0&&n.call(r,l)},this);if(this.options.from=e,this.options.to=i,this._filterExistingFeatures(o,a,e,i),"server"===this.options.timeFilterMode)for(var c in this._cells){s++;var u=this._keyToCellCoords(c),h=this._cellCoordsToBounds(u);this._requestFeatures(h,u,t)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,n){var r=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,o=this._getFeaturesInTimeRange(i,n);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);0<=s&&r.splice(s,1)}v.Util.requestAnimFrame(v.Util.bind(function(){this.removeLayers(r),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(t,e){var i=[];if(this.options.timeField.start&&this.options.timeField.end)var n=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e),o=n.concat(r);else{if(!this._timeIndex)return f("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];o=this._timeIndex.between(t,e)}for(var a=o.length-1;0<=a;a--)i.push(o[a].id);return i},_buildTimeIndexes:function(t){var e;if(this.options.timeField.start&&this.options.timeField.end){for(var i=[],n=[],r=t.length-1;0<=r;r--)e=t[r],i.push({id:e.id,value:new Date(e.properties[this.options.timeField.start])}),n.push({id:e.id,value:new Date(e.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(n)}else{var o=[];for(r=t.length-1;0<=r;r--)e=t[r],o.push({id:e.id,value:new Date(e.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var n=+t.properties[this.options.timeField];return e<=n&&n<=i}if(this.options.timeField.start&&this.options.timeField.end){var r=+t.properties[this.options.timeField.start],o=+t.properties[this.options.timeField.end];return e<=r&&r<=i||e<=o&&o<=i||r<=e&&i<=o}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,i=this._cacheKey(e);this._cache[i]&&this.addLayers(this._cache[i])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(i){this._metadata?i(void 0,this._metadata):this.metadata(v.Util.bind(function(t,e){this._metadata=e,i(t,this._metadata)},this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(e,o,a){this._getMetadata(v.Util.bind(function(t,n){var r;t?o&&o.call(this,t,null):(r=e.features?e.features:[e],this.service.addFeatures(e,v.Util.bind(function(t,e){if(!t){for(var i=r.length-1;0<=i;i--)r[i].properties[n.objectIdField]=1<r.length?e[i].objectId:e.objectId,r[i].id=1<r.length?e[i].objectId:e.objectId;this._addFeatures(r)}o&&o.call(a,t,e)},this)))},this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,r){var o=t.features?t.features:[t];this.service.updateFeatures(t,function(t,e){if(!t){for(var i=o.length-1;0<=i;i--)this.removeLayers([o[i].id],!0);this._addFeatures(o)}n&&n.call(r,t,e)},this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,r,o){return this.service.deleteFeatures(t,function(t,e){var i=e.length?e:[e];if(!t&&0<i.length)for(var n=i.length-1;0<=n;n--)this.removeLayers([i[n].objectId],!0);r&&r.call(o,t,e)},this)}});mt.extend({options:{cacheLayers:!0},initialize:function(t){mt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return mt.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=v.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var i=[],n=this.options.coordsToLatLng||v.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=v.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=v.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,n),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=v.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,n),t.setLatLngs(i);break;case"MultiPolygon":i=v.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,n),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;0<=e;e--){var i,n=t[e],r=this._layers[n.id];!this._visibleZoom()||!r||this._map.hasLayer(r)||this.options.timeField&&!this._featureWithinTimeRange(n)||(this._map.addLayer(r),this.fire("addfeature",{feature:r.feature},!0)),r&&0<this.options.simplifyFactor&&(r.setLatLngs||r.setLatLng)&&this._updateLayer(r,n),r||((i=this.createNewLayer(n))?(i.feature=n,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(i)):f("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;0<=i;i--){var n=t[i],r=this._layers[n];r&&(this.fire("removefeature",{feature:r.feature,permanent:e},!0),this._map.removeLayer(r)),r&&e&&delete this._layers[n]}},cellEnter:function(t,n){this._visibleZoom()&&!this._zooming&&this._map&&v.Util.requestAnimFrame(v.Util.bind(function(){var t=this._cacheKey(n),e=this._cellCoordsToKey(n),i=this._cache[t];this._activeCells[e]&&i&&this.addLayers(i)},this))},cellLeave:function(t,s){this._zooming||v.Util.requestAnimFrame(v.Util.bind(function(){if(this._map){var t=this._cacheKey(s),e=this._cellCoordsToKey(s),i=this._cache[t],n=this._map.getBounds();if(!this._activeCells[e]&&i){for(var r=!0,o=0;o<i.length;o++){var a=this._layers[i[o]];a&&a.getBounds&&n.intersects(a.getBounds())&&(r=!1)}r&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||v.Path.prototype.options;return e&&(v.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var i=this._layers[t];return"function"==typeof e&&(e=e(i.feature)),i.setStyle&&i.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i=this._map.getBounds();for(var n in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[n].feature.id)&&("function"==typeof this._layers[n].getLatLng&&i.contains(this._layers[n].getLatLng())||"function"==typeof this._layers[n].getBounds&&i.intersects(this._layers[n].getBounds()))&&t.call(e,this._layers[n])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e,i,n=this._layers[t],r=n.feature;n&&n.setIcon&&this.options.pointToLayer&&this.options.pointToLayer&&(e=this.options.pointToLayer(r,Object(v.latLng)(r.geometry.coordinates[1],r.geometry.coordinates[0])).options.icon,n.setIcon(e)),n&&n.setStyle&&this.options.pointToLayer&&(i=this.options.pointToLayer(r,Object(v.latLng)(r.geometry.coordinates[1],r.geometry.coordinates[0])).options,this.setFeatureStyle(r.id,i)),n&&n.setStyle&&this.options.style&&this.resetStyle(r.id)}})},function(t,e,i){
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
t.exports=function(n){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){return t&&t["default"]||t}n=n&&n.hasOwnProperty("default")?n["default"]:n;var u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},c=t(function(t){var s={};for(var e in u){if(u.hasOwnProperty(e)){s[u[e]]=e}}var l=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in l){if(l.hasOwnProperty(i)){if(!("channels"in l[i])){throw new Error("missing channels property: "+i)}if(!("labels"in l[i])){throw new Error("missing channel labels property: "+i)}if(l[i].labels.length!==l[i].channels){throw new Error("channel and label counts mismatch: "+i)}var n=l[i].channels;var r=l[i].labels;delete l[i].channels;delete l[i].labels;Object.defineProperty(l[i],"channels",{value:n});Object.defineProperty(l[i],"labels",{value:r})}}l.rgb.hsl=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var r=Math.min(e,i,n);var o=Math.max(e,i,n);var a=o-r;var s;var l;var c;if(o===r){s=0}else if(e===o){s=(i-n)/a}else if(i===o){s=2+(n-e)/a}else if(n===o){s=4+(e-i)/a}s=Math.min(s*60,360);if(s<0){s+=360}c=(r+o)/2;if(o===r){l=0}else if(c<=.5){l=a/(o+r)}else{l=a/(2-o-r)}return[s,l*100,c*100]};l.rgb.hsv=function(t){var e;var i;var n;var r;var o;var a=t[0]/255;var s=t[1]/255;var l=t[2]/255;var c=Math.max(a,s,l);var u=c-Math.min(a,s,l);var h=function(t){return(c-t)/6/u+1/2};if(u===0){r=o=0}else{o=u/c;e=h(a);i=h(s);n=h(l);if(a===c){r=n-i}else if(s===c){r=1/3+e-n}else if(l===c){r=2/3+i-e}if(r<0){r+=1}else if(r>1){r-=1}}return[r*360,o*100,c*100]};l.rgb.hwb=function(t){var e=t[0];var i=t[1];var n=t[2];var r=l.rgb.hsl(t)[0];var o=1/255*Math.min(e,Math.min(i,n));n=1-1/255*Math.max(e,Math.max(i,n));return[r,o*100,n*100]};l.rgb.cmyk=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var r;var o;var a;var s;s=Math.min(1-e,1-i,1-n);r=(1-e-s)/(1-s)||0;o=(1-i-s)/(1-s)||0;a=(1-n-s)/(1-s)||0;return[r*100,o*100,a*100,s*100]};function c(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}l.rgb.keyword=function(t){var e=s[t];if(e){return e}var i=Infinity;var n;for(var r in u){if(u.hasOwnProperty(r)){var o=u[r];var a=c(t,o);if(a<i){i=a;n=r}}}return n};l.keyword.rgb=function(t){return u[t]};l.rgb.xyz=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var r=e*.4124+i*.3576+n*.1805;var o=e*.2126+i*.7152+n*.0722;var a=e*.0193+i*.1192+n*.9505;return[r*100,o*100,a*100]};l.rgb.lab=function(t){var e=l.rgb.xyz(t);var i=e[0];var n=e[1];var r=e[2];var o;var a;var s;i/=95.047;n/=100;r/=108.883;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;o=116*n-16;a=500*(i-n);s=200*(n-r);return[o,a,s]};l.hsl.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var r;var o;var a;var s;var l;if(i===0){l=n*255;return[l,l,l]}if(n<.5){o=n*(1+i)}else{o=n+i-n*i}r=2*n-o;s=[0,0,0];for(var c=0;c<3;c++){a=e+1/3*-(c-1);if(a<0){a++}if(a>1){a--}if(6*a<1){l=r+(o-r)*6*a}else if(2*a<1){l=o}else if(3*a<2){l=r+(o-r)*(2/3-a)*6}else{l=r}s[c]=l*255}return s};l.hsl.hsv=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var r=i;var o=Math.max(n,.01);var a;var s;n*=2;i*=n<=1?n:2-n;r*=o<=1?o:2-o;s=(n+i)/2;a=n===0?2*r/(o+r):2*i/(n+i);return[e,a*100,s*100]};l.hsv.rgb=function(t){var e=t[0]/60;var i=t[1]/100;var n=t[2]/100;var r=Math.floor(e)%6;var o=e-Math.floor(e);var a=255*n*(1-i);var s=255*n*(1-i*o);var l=255*n*(1-i*(1-o));n*=255;switch(r){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}};l.hsv.hsl=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var r=Math.max(n,.01);var o;var a;var s;s=(2-i)*n;o=(2-i)*r;a=i*r;a/=o<=1?o:2-o;a=a||0;s/=2;return[e,a*100,s*100]};l.hwb.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var r=i+n;var o;var a;var s;var l;if(r>1){i/=r;n/=r}o=Math.floor(6*e);a=1-n;s=6*e-o;if((o&1)!==0){s=1-s}l=i+s*(a-i);var c;var u;var h;switch(o){default:case 6:case 0:c=a;u=l;h=i;break;case 1:c=l;u=a;h=i;break;case 2:c=i;u=a;h=l;break;case 3:c=i;u=l;h=a;break;case 4:c=l;u=i;h=a;break;case 5:c=a;u=i;h=l;break}return[c*255,u*255,h*255]};l.cmyk.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var r=t[3]/100;var o;var a;var s;o=1-Math.min(1,e*(1-r)+r);a=1-Math.min(1,i*(1-r)+r);s=1-Math.min(1,n*(1-r)+r);return[o*255,a*255,s*255]};l.xyz.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var r;var o;var a;r=e*3.2406+i*-1.5372+n*-.4986;o=e*-.9689+i*1.8758+n*.0415;a=e*.0557+i*-.204+n*1.057;r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*12.92;o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92;a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92;r=Math.min(Math.max(0,r),1);o=Math.min(Math.max(0,o),1);a=Math.min(Math.max(0,a),1);return[r*255,o*255,a*255]};l.xyz.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;e/=95.047;i/=100;n/=108.883;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;r=116*i-16;o=500*(e-i);a=200*(i-n);return[r,o,a]};l.lab.xyz=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;o=(e+16)/116;r=i/500+o;a=o-n/200;var s=Math.pow(o,3);var l=Math.pow(r,3);var c=Math.pow(a,3);o=s>.008856?s:(o-16/116)/7.787;r=l>.008856?l:(r-16/116)/7.787;a=c>.008856?c:(a-16/116)/7.787;r*=95.047;o*=100;a*=108.883;return[r,o,a]};l.lab.lch=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;r=Math.atan2(n,i);o=r*360/2/Math.PI;if(o<0){o+=360}a=Math.sqrt(i*i+n*n);return[e,a,o]};l.lch.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;a=n/360*2*Math.PI;r=i*Math.cos(a);o=i*Math.sin(a);return[e,r,o]};l.rgb.ansi16=function(t){var e=t[0];var i=t[1];var n=t[2];var r=1 in arguments?arguments[1]:l.rgb.hsv(t)[2];r=Math.round(r/50);if(r===0){return 30}var o=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));if(r===2){o+=60}return o};l.hsv.ansi16=function(t){return l.rgb.ansi16(l.hsv.rgb(t),t[2])};l.rgb.ansi256=function(t){var e=t[0];var i=t[1];var n=t[2];if(e===i&&i===n){if(e<8){return 16}if(e>248){return 231}return Math.round((e-8)/247*24)+232}var r=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5);return r};l.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7){if(t>50){e+=3.5}e=e/10.5*255;return[e,e,e]}var i=(~~(t>50)+1)*.5;var n=(e&1)*i*255;var r=(e>>1&1)*i*255;var o=(e>>2&1)*i*255;return[n,r,o]};l.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i;var n=Math.floor(t/36)/5*255;var r=Math.floor((i=t%36)/6)/5*255;var o=i%6/5*255;return[n,r,o]};l.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255);var i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};l.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e){return[0,0,0]}var i=e[0];if(e[0].length===3){i=i.split("").map(function(t){return t+t}).join("")}var n=parseInt(i,16);var r=n>>16&255;var o=n>>8&255;var a=n&255;return[r,o,a]};l.rgb.hcg=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var r=Math.max(Math.max(e,i),n);var o=Math.min(Math.min(e,i),n);var a=r-o;var s;var l;if(a<1){s=o/(1-a)}else{s=0}if(a<=0){l=0}else if(r===e){l=(i-n)/a%6}else if(r===i){l=2+(n-e)/a}else{l=4+(e-i)/a+4}l/=6;l%=1;return[l*360,a*100,s*100]};l.hsl.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1;var r=0;if(i<.5){n=2*e*i}else{n=2*e*(1-i)}if(n<1){r=(i-.5*n)/(1-n)}return[t[0],n*100,r*100]};l.hsv.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=e*i;var r=0;if(n<1){r=(i-n)/(1-n)}return[t[0],n*100,r*100]};l.hcg.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;if(i===0){return[n*255,n*255,n*255]}var r=[0,0,0];var o=e%1*6;var a=o%1;var s=1-a;var l=0;switch(Math.floor(o)){case 0:r[0]=1;r[1]=a;r[2]=0;break;case 1:r[0]=s;r[1]=1;r[2]=0;break;case 2:r[0]=0;r[1]=1;r[2]=a;break;case 3:r[0]=0;r[1]=s;r[2]=1;break;case 4:r[0]=a;r[1]=0;r[2]=1;break;default:r[0]=1;r[1]=0;r[2]=s}l=(1-i)*n;return[(i*r[0]+l)*255,(i*r[1]+l)*255,(i*r[2]+l)*255]};l.hcg.hsv=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);var r=0;if(n>0){r=e/n}return[t[0],r*100,n*100]};l.hcg.hsl=function(t){var e=t[1]/100;var i=t[2]/100;var n=i*(1-e)+.5*e;var r=0;if(n>0&&n<.5){r=e/(2*n)}else if(n>=.5&&n<1){r=e/(2*(1-n))}return[t[0],r*100,n*100]};l.hcg.hwb=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);return[t[0],(n-e)*100,(1-n)*100]};l.hwb.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1-i;var r=n-e;var o=0;if(r<1){o=(n-r)/(1-r)}return[t[0],r*100,o*100]};l.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};l.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};l.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};l.gray.hsl=l.gray.hsv=function(t){return[0,0,t[0]]};l.gray.hwb=function(t){return[0,100,t[0]]};l.gray.cmyk=function(t){return[0,0,0,t[0]]};l.gray.lab=function(t){return[t[0],0,0]};l.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255;var i=(e<<16)+(e<<8)+e;var n=i.toString(16).toUpperCase();return"000000".substring(n.length)+n};l.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}}),i=c.rgb,r=c.hsl,o=c.hsv,a=c.hwb,s=c.cmyk,l=c.xyz,h=c.lab,p=c.lch,d=c.hex,f=c.keyword,m=c.ansi16,g=c.ansi256,v=c.hcg,_=c.apple,y=c.gray;function b(){var t={};var e=Object.keys(c);for(var i=e.length,n=0;n<i;n++){t[e[n]]={distance:-1,parent:null}}return t}function x(t){var e=b();var i=[t];e[t].distance=0;while(i.length){var n=i.pop();var r=Object.keys(c[n]);for(var o=r.length,a=0;a<o;a++){var s=r[a];var l=e[s];if(l.distance===-1){l.distance=e[n].distance+1;l.parent=n;i.unshift(s)}}}return e}function w(e,i){return function(t){return i(e(t))}}function k(t,e){var i=[e[t].parent,t];var n=c[e[t].parent][t];var r=e[t].parent;while(e[r].parent){i.unshift(e[r].parent);n=w(c[e[r].parent][r],n);r=e[r].parent}n.conversion=i;return n}var L=function(t){var e=x(t);var i={};var n=Object.keys(e);for(var r=n.length,o=0;o<r;o++){var a=n[o];var s=e[a];if(s.parent===null){continue}i[a]=k(a,e)}return i},C={},M;function S(e){var t=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}return e(t)};if("conversion"in e){t.conversion=e.conversion}return t}function T(r){var t=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}var e=r(t);if(typeof e==="object"){for(var i=e.length,n=0;n<i;n++){e[n]=Math.round(e[n])}}return e};if("conversion"in r){t.conversion=r.conversion}return t}Object.keys(c).forEach(function(i){C[i]={};Object.defineProperty(C[i],"channels",{value:c[i].channels});Object.defineProperty(C[i],"labels",{value:c[i].labels});var n=L(i);var t=Object.keys(n);t.forEach(function(t){var e=n[t];C[i][t]=T(e);C[i][t].raw=S(e)})});var P=C,D={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},A={getRgba:E,getHsla:O,getRgb:B,getHsl:z,getHwb:I,getAlpha:R,hexString:F,rgbString:j,rgbaString:N,percentString:U,percentaString:H,hslString:G,hslaString:Z,hwbString:W,keyword:V};function E(t){if(!t){return}var e=/^#([a-fA-F0-9]{3,4})$/i,i=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/(\w+)/;var a=[0,0,0],s=1,l=t.match(e),c="";if(l){l=l[1];c=l[3];for(var u=0;u<a.length;u++){a[u]=parseInt(l[u]+l[u],16)}if(c){s=Math.round(parseInt(c+c,16)/255*100)/100}}else if(l=t.match(i)){c=l[2];l=l[1];for(var u=0;u<a.length;u++){a[u]=parseInt(l.slice(u*2,u*2+2),16)}if(c){s=Math.round(parseInt(c,16)/255*100)/100}}else if(l=t.match(n)){for(var u=0;u<a.length;u++){a[u]=parseInt(l[u+1])}s=parseFloat(l[4])}else if(l=t.match(r)){for(var u=0;u<a.length;u++){a[u]=Math.round(parseFloat(l[u+1])*2.55)}s=parseFloat(l[4])}else if(l=t.match(o)){if(l[1]=="transparent"){return[0,0,0,0]}a=D[l[1]];if(!a){return}}for(var u=0;u<a.length;u++){a[u]=q(a[u],0,255)}if(!s&&s!=0){s=1}else{s=q(s,0,1)}a[3]=s;return a}function O(t){if(!t){return}var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var r=q(parseInt(i[1]),0,360),o=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[r,o,a,s]}}function I(t){if(!t){return}var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var r=q(parseInt(i[1]),0,360),o=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[r,o,a,s]}}function B(t){var e=E(t);return e&&e.slice(0,3)}function z(t){var e=O(t);return e&&e.slice(0,3)}function R(t){var e=E(t);if(e){return e[3]}else if(e=O(t)){return e[3]}else if(e=I(t)){return e[3]}}function F(t,e){var e=e!==undefined&&t.length===3?e:t[3];return"#"+$(t[0])+$(t[1])+$(t[2])+(e>=0&&e<1?$(Math.round(e*255)):"")}function j(t,e){if(e<1||t[3]&&t[3]<1){return N(t,e)}return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function N(t,e){if(e===undefined){e=t[3]!==undefined?t[3]:1}return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function U(t,e){if(e<1||t[3]&&t[3]<1){return H(t,e)}var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+r+"%)"}function H(t,e){var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return"rgba("+i+"%, "+n+"%, "+r+"%, "+(e||t[3]||1)+")"}function G(t,e){if(e<1||t[3]&&t[3]<1){return Z(t,e)}return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function Z(t,e){if(e===undefined){e=t[3]!==undefined?t[3]:1}return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function W(t,e){if(e===undefined){e=t[3]!==undefined?t[3]:1}return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(e!==undefined&&e!==1?", "+e:"")+")"}function V(t){return K[t.slice(0,3)]}function q(t,e,i){return Math.min(Math.max(e,t),i)}function $(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var K={};for(var Y in D){K[D[Y]]=Y}var J=function(t){if(t instanceof J){return t}if(!(this instanceof J)){return new J(t)}this.valid=false;this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;if(typeof t==="string"){e=A.getRgba(t);if(e){this.setValues("rgb",e)}else if(e=A.getHsla(t)){this.setValues("hsl",e)}else if(e=A.getHwb(t)){this.setValues("hwb",e)}}else if(typeof t==="object"){e=t;if(e.r!==undefined||e.red!==undefined){this.setValues("rgb",e)}else if(e.l!==undefined||e.lightness!==undefined){this.setValues("hsl",e)}else if(e.v!==undefined||e.value!==undefined){this.setValues("hsv",e)}else if(e.w!==undefined||e.whiteness!==undefined){this.setValues("hwb",e)}else if(e.c!==undefined||e.cyan!==undefined){this.setValues("cmyk",e)}}};if(J.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;if(t.alpha!==1){return t.hwb.concat([t.alpha])}return t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){if(t===undefined){return this.values.alpha}this.setValues("alpha",t);return this},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){if(t){t%=360;t=t<0?360+t:t}return this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return A.hexString(this.values.rgb)},rgbString:function(){return A.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return A.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return A.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return A.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return A.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return A.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return A.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){var t=this.values.rgb;var e=[];for(var i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity();var i=t.luminosity();if(e>i){return(e+.05)/(i+.05)}return(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);if(e>=7.1){return"AAA"}return e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){var t=[];for(var e=0;e<3;e++){t[e]=255-this.values.rgb[e]}this.setValues("rgb",t);return this},lighten:function(t){var e=this.values.hsl;e[2]+=e[2]*t;this.setValues("hsl",e);return this},darken:function(t){var e=this.values.hsl;e[2]-=e[2]*t;this.setValues("hsl",e);return this},saturate:function(t){var e=this.values.hsl;e[1]+=e[1]*t;this.setValues("hsl",e);return this},desaturate:function(t){var e=this.values.hsl;e[1]-=e[1]*t;this.setValues("hsl",e);return this},whiten:function(t){var e=this.values.hwb;e[1]+=e[1]*t;this.setValues("hwb",e);return this},blacken:function(t){var e=this.values.hwb;e[2]+=e[2]*t;this.setValues("hwb",e);return this},greyscale:function(){var t=this.values.rgb;var e=t[0]*.3+t[1]*.59+t[2]*.11;this.setValues("rgb",[e,e,e]);return this},clearer:function(t){var e=this.values.alpha;this.setValues("alpha",e-e*t);return this},opaquer:function(t){var e=this.values.alpha;this.setValues("alpha",e+e*t);return this},rotate:function(t){var e=this.values.hsl;var i=(e[0]+t)%360;e[0]=i<0?360+i:i;this.setValues("hsl",e);return this},mix:function(t,e){var i=this;var n=t;var r=e===undefined?.5:e;var o=2*r-1;var a=i.alpha()-n.alpha();var s=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;var l=1-s;return this.rgb(s*i.red()+l*n.red(),s*i.green()+l*n.green(),s*i.blue()+l*n.blue()).alpha(i.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var t=new J;var e=this.values;var i=t.values;var n,r;for(var o in e){if(e.hasOwnProperty(o)){n=e[o];r={}.toString.call(n);if(r==="[object Array]"){i[o]=n.slice(0)}else if(r==="[object Number]"){i[o]=n}else{console.error("unexpected color value:",n)}}}return t}},J.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},J.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},J.prototype.getValues=function(t){var e=this.values;var i={};for(var n=0;n<t.length;n++){i[t.charAt(n)]=e[t][n]}if(e.alpha!==1){i.a=e.alpha}return i},J.prototype.setValues=function(t,e){var i=this.values;var n=this.spaces;var r=this.maxes;var o=1;var a;this.valid=true;if(t==="alpha"){o=e}else if(e.length){i[t]=e.slice(0,t.length);o=e[t.length]}else if(e[t.charAt(0)]!==undefined){for(a=0;a<t.length;a++){i[t][a]=e[t.charAt(a)]}o=e.a}else if(e[n[t][0]]!==undefined){var s=n[t];for(a=0;a<t.length;a++){i[t][a]=e[s[a]]}o=e.alpha}i.alpha=Math.max(0,Math.min(1,o===undefined?i.alpha:o));if(t==="alpha"){return false}var l;for(a=0;a<t.length;a++){l=Math.max(0,Math.min(r[t][a],i[t][a]));i[t][a]=Math.round(l)}for(var c in n){if(c!==t){i[c]=P[t][c](i[t])}}return true},J.prototype.setSpace=function(t,e){var i=e[0];if(i===undefined){return this.getValues(t)}if(typeof i==="number"){i=Array.prototype.slice.call(e)}this.setValues(t,i);return this},J.prototype.setChannel=function(t,e,i){var n=this.values[t];if(i===undefined){return n[e]}else if(i===n[e]){return this}n[e]=i;this.setValues(t,n);return this},typeof window!=="undefined"){window.Color=J}var X=J,Q={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return t===null||typeof t==="undefined"},isArray:function(t){if(Array.isArray&&Array.isArray(t)){return true}var e=Object.prototype.toString.call(t);if(e.substr(0,7)==="[object"&&e.substr(-6)==="Array]"){return true}return false},isObject:function(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"},isFinite:function(t){return(typeof t==="number"||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return typeof t==="undefined"?e:t},valueAtIndexOrDefault:function(t,e,i){return Q.valueOrDefault(Q.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&typeof t.call==="function"){return t.apply(i,e)}},each:function(t,e,i,n){var r,o,a;if(Q.isArray(t)){o=t.length;if(n){for(r=o-1;r>=0;r--){e.call(i,t[r],r)}}else{for(r=0;r<o;r++){e.call(i,t[r],r)}}}else if(Q.isObject(t)){a=Object.keys(t);o=a.length;for(r=0;r<o;r++){e.call(i,t[a[r]],a[r])}}},arrayEquals:function(t,e){var i,n,r,o;if(!t||!e||t.length!==e.length){return false}for(i=0,n=t.length;i<n;++i){r=t[i];o=e[i];if(r instanceof Array&&o instanceof Array){if(!Q.arrayEquals(r,o)){return false}}else if(r!==o){return false}}return true},clone:function(t){if(Q.isArray(t)){return t.map(Q.clone)}if(Q.isObject(t)){var e={};var i=Object.keys(t);var n=i.length;var r=0;for(;r<n;++r){e[i[r]]=Q.clone(t[i[r]])}return e}return t},_merger:function(t,e,i,n){var r=e[t];var o=i[t];if(Q.isObject(r)&&Q.isObject(o)){Q.merge(r,o,n)}else{e[t]=Q.clone(o)}},_mergerIf:function(t,e,i){var n=e[t];var r=i[t];if(Q.isObject(n)&&Q.isObject(r)){Q.mergeIf(n,r)}else if(!e.hasOwnProperty(t)){e[t]=Q.clone(r)}},merge:function(t,e,i){var n=Q.isArray(e)?e:[e];var r=n.length;var o,a,s,l,c;if(!Q.isObject(t)){return t}i=i||{};o=i.merger||Q._merger;for(a=0;a<r;++a){e=n[a];if(!Q.isObject(e)){continue}s=Object.keys(e);for(c=0,l=s.length;c<l;++c){o(s[c],t,e,i)}}return t},mergeIf:function(t,e){return Q.merge(t,e,{merger:Q._mergerIf})},extend:Object.assign||function(t){return Q.merge(t,[].slice.call(arguments,1),{merger:function(t,e,i){e[t]=i[t]}})},inherits:function(t){var e=this;var i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)};var n=function(){this.constructor=i};n.prototype=e.prototype;i.prototype=new n;i.extend=Q.inherits;if(t){Q.extend(i.prototype,t)}i.__super__=e.prototype;return i},_deprecated:function(t,e,i,n){if(e!==undefined){console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')}}},tt=Q;Q.callCallback=Q.callback,Q.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},Q.getValueOrDefault=Q.valueOrDefault,Q.getValueAtIndexOrDefault=Q.valueAtIndexOrDefault;var et={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){if((t/=.5)<1){return.5*t*t}return-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t=t-1)*t*t+1},easeInOutCubic:function(t){if((t/=.5)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t=t-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=.5)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t=t-1)*t*t*t*t+1},easeInOutQuint:function(t){if((t/=.5)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){if(t===0){return 0}if(t===1){return 1}if((t/=.5)<1){return.5*Math.pow(2,10*(t-1))}return.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1){return t}return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t=t-1)*t)},easeInOutCirc:function(t){if((t/=.5)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0){return 0}if(t===1){return 1}if(!i){i=.3}if(n<1){n=1;e=i/4}else{e=i/(2*Math.PI)*Math.asin(1/n)}return-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0){return 0}if(t===1){return 1}if(!i){i=.3}if(n<1){n=1;e=i/4}else{e=i/(2*Math.PI)*Math.asin(1/n)}return n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},easeInOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0){return 0}if((t/=.5)===2){return 1}if(!i){i=.45}if(n<1){n=1;e=i/4}else{e=i/(2*Math.PI)*Math.asin(1/n)}if(t<1){return-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))}return n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;if((t/=.5)<1){return.5*(t*t*(((e*=1.525)+1)*t-e))}return.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-et.easeOutBounce(1-t)},easeOutBounce:function(t){if(t<1/2.75){return 7.5625*t*t}if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}return 7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){if(t<.5){return et.easeInBounce(t*2)*.5}return et.easeOutBounce(t*2-1)*.5+.5}},it={effects:et};tt.easingEffects=et;var nt=Math.PI,rt=nt/180,ot=nt*2,at=nt/2,st=nt/4,lt=nt*2/3,ct={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,r,o){if(o){var a=Math.min(o,r/2,n/2);var s=e+a;var l=i+a;var c=e+n-a;var u=i+r-a;t.moveTo(e,l);if(s<c&&l<u){t.arc(s,l,a,-nt,-at);t.arc(c,l,a,-at,0);t.arc(c,u,a,0,at);t.arc(s,u,a,at,nt)}else if(s<c){t.moveTo(s,i);t.arc(c,l,a,-at,at);t.arc(s,l,a,at,nt+at)}else if(l<u){t.arc(s,l,a,-nt,0);t.arc(s,u,a,0,nt)}else{t.arc(s,l,a,-nt,nt)}t.closePath();t.moveTo(e,i)}else{t.rect(e,i,n,r)}},drawPoint:function(t,e,i,n,r,o){var a,s,l,c,u;var h=(o||0)*rt;if(e&&typeof e==="object"){a=e.toString();if(a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]"){t.save();t.translate(n,r);t.rotate(h);t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height);t.restore();return}}if(isNaN(i)||i<=0){return}t.beginPath();switch(e){default:t.arc(n,r,i,0,ot);t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*i,r-Math.cos(h)*i);h+=lt;t.lineTo(n+Math.sin(h)*i,r-Math.cos(h)*i);h+=lt;t.lineTo(n+Math.sin(h)*i,r-Math.cos(h)*i);t.closePath();break;case"rectRounded":u=i*.516;c=i-u;s=Math.cos(h+st)*c;l=Math.sin(h+st)*c;t.arc(n-s,r-l,u,h-nt,h-at);t.arc(n+l,r-s,u,h-at,h);t.arc(n+s,r+l,u,h,h+at);t.arc(n-l,r+s,u,h+at,h+nt);t.closePath();break;case"rect":if(!o){c=Math.SQRT1_2*i;t.rect(n-c,r-c,2*c,2*c);break}h+=st;case"rectRot":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+l,r-s);t.lineTo(n+s,r+l);t.lineTo(n-l,r+s);t.closePath();break;case"crossRot":h+=st;case"cross":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);t.moveTo(n+l,r-s);t.lineTo(n-l,r+s);break;case"star":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);t.moveTo(n+l,r-s);t.lineTo(n-l,r+s);h+=st;s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);t.moveTo(n+l,r-s);t.lineTo(n-l,r+s);break;case"line":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);break;case"dash":t.moveTo(n,r);t.lineTo(n+Math.cos(h)*i,r+Math.sin(h)*i);break}t.fill();t.stroke()},_isPointInArea:function(t,e){var i=1e-6;return t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i},clipArea:function(t,e){t.save();t.beginPath();t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top);t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var r=i.steppedLine;if(r){if(r==="middle"){var o=(e.x+i.x)/2;t.lineTo(o,n?i.y:e.y);t.lineTo(o,n?e.y:i.y)}else if(r==="after"&&!n||r!=="after"&&n){t.lineTo(e.x,i.y)}else{t.lineTo(i.x,e.y)}t.lineTo(i.x,i.y);return}if(!i.tension){t.lineTo(i.x,i.y);return}t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y)}},ut=ct;tt.clear=ct.clear,tt.drawRoundedRectangle=function(t){t.beginPath();ct.roundedRect.apply(ct,arguments)};var ht={_set:function(t,e){return tt.merge(this[t]||(this[t]={}),e)}};ht._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:true});var pt=ht,dt=tt.valueOrDefault;function ft(t){if(!t||tt.isNullOrUndef(t.size)||tt.isNullOrUndef(t.family)){return null}return(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var mt={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||i[1]==="normal"){return e*1.2}t=+i[2];switch(i[3]){case"px":return t;case"%":t/=100;break}return e*t},toPadding:function(t){var e,i,n,r;if(tt.isObject(t)){e=+t.top||0;i=+t.right||0;n=+t.bottom||0;r=+t.left||0}else{e=i=n=r=+t||0}return{top:e,right:i,bottom:n,left:r,height:e+n,width:r+i}},_parseFont:function(t){var e=pt.global;var i=dt(t.fontSize,e.defaultFontSize);var n={family:dt(t.fontFamily,e.defaultFontFamily),lineHeight:tt.options.toLineHeight(dt(t.lineHeight,e.defaultLineHeight),i),size:i,style:dt(t.fontStyle,e.defaultFontStyle),weight:null,string:""};n.string=ft(n);return n},resolve:function(t,e,i,n){var r=true;var o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];if(s===undefined){continue}if(e!==undefined&&typeof s==="function"){s=s(e);r=false}if(i!==undefined&&tt.isArray(s)){s=s[i];r=false}if(s!==undefined){if(n&&!r){n.cacheable=false}return s}}}},gt={_factorize:function(t){var e=[];var i=Math.sqrt(t);var n;for(n=1;n<i;n++){if(t%n===0){e.push(n);e.push(t/n)}}if(i===(i|0)){e.push(i)}e.sort(function(t,e){return t-e}).pop();return e},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E;var i=Math.round(e);var n=t===Math.pow(10,i);return n?i:e}},vt=gt;tt.log10=gt.log10;var _t=function(e,i){return{x:function(t){return e+e+i-t},setWidth:function(t){i=t},textAlign:function(t){if(t==="center"){return t}return t==="right"?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}},yt=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},bt,xt,wt,kt,Lt=tt,Ct,Mt=ut,St=mt,Tt=vt,Pt={getRtlAdapter:function(t,e,i){return t?_t(e,i):yt()},overrideTextDirection:function(t,e){var i,n;if(e==="ltr"||e==="rtl"){i=t.canvas.style;n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")];i.setProperty("direction",e,"important");t.prevTextDirection=n}},restoreTextDirection:function(t){var e=t.prevTextDirection;if(e!==undefined){delete t.prevTextDirection;t.canvas.style.setProperty("direction",e[0],e[1])}}};function Dt(t,e,i,n){var r=Object.keys(i);var o,a,s,l,c,u,h,p,d;for(o=0,a=r.length;o<a;++o){s=r[o];u=i[s];if(!e.hasOwnProperty(s)){e[s]=u}l=e[s];if(l===u||s[0]==="_"){continue}if(!t.hasOwnProperty(s)){t[s]=l}c=t[s];h=typeof u;if(h===typeof c){if(h==="string"){p=X(c);if(p.valid){d=X(u);if(d.valid){e[s]=d.mix(p,n).rgbString();continue}}}else if(Lt.isFinite(c)&&Lt.isFinite(u)){e[s]=c+(u-c)*n;continue}}e[s]=u}}Lt.easing=it,Lt.canvas=Mt,Lt.options=St,Lt.math=Tt,Lt.rtl=Pt;var At=function(t){Lt.extend(this,t);this.initialize.apply(this,arguments)};Lt.extend(At.prototype,{_type:undefined,initialize:function(){this.hidden=false},pivot:function(){var t=this;if(!t._view){t._view=Lt.extend({},t._model)}t._start={};return t},transition:function(t){var e=this;var i=e._model;var n=e._start;var r=e._view;if(!i||t===1){e._view=Lt.extend({},i);e._start=null;return e}if(!r){r=e._view={}}if(!n){n=e._start={}}Dt(n,r,i,t);return e},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return Lt.isNumber(this._model.x)&&Lt.isNumber(this._model.y)}}),At.extend=Lt.inherits;var Et=At,Ot=Et.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),It=Ot;Object.defineProperty(Ot.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Ot.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),pt._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:Lt.noop,onComplete:Lt.noop}});var Bt={animations:[],request:null,addAnimation:function(t,e,i,n){var r=this.animations;var o,a;e.chart=t;e.startTime=Date.now();e.duration=i;if(!n){t.animating=true}for(o=0,a=r.length;o<a;++o){if(r[o].chart===t){r[o]=e;return}}r.push(e);if(r.length===1){this.requestAnimationFrame()}},cancelAnimation:function(e){var t=Lt.findIndex(this.animations,function(t){return t.chart===e});if(t!==-1){this.animations.splice(t,1);e.animating=false}},requestAnimationFrame:function(){var t=this;if(t.request===null){t.request=Lt.requestAnimFrame.call(window,function(){t.request=null;t.startDigest()})}},startDigest:function(){var t=this;t.advance();if(t.animations.length>0){t.requestAnimationFrame()}},advance:function(){var t=this.animations;var e,i,n,r;var o=0;while(o<t.length){e=t[o];i=e.chart;n=e.numSteps;r=Math.floor((Date.now()-e.startTime)/e.duration*n)+1;e.currentStep=Math.min(r,n);Lt.callback(e.render,[i,e],i);Lt.callback(e.onAnimationProgress,[e],i);if(e.currentStep>=n){Lt.callback(e.onAnimationComplete,[e],i);i.animating=false;t.splice(o,1)}else{++o}}}},zt=Lt.options.resolve,Rt=["push","pop","shift","splice","unshift"];function Ft(r,t){if(r._chartjs){r._chartjs.listeners.push(t);return}Object.defineProperty(r,"_chartjs",{configurable:true,enumerable:false,value:{listeners:[t]}});Rt.forEach(function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1);var n=r[t];Object.defineProperty(r,t,{configurable:true,enumerable:false,value:function(){var e=Array.prototype.slice.call(arguments);var t=n.apply(this,e);Lt.each(r._chartjs.listeners,function(t){if(typeof t[i]==="function"){t[i].apply(t,e)}});return t}})})}function jt(e,t){var i=e._chartjs;if(!i){return}var n=i.listeners;var r=n.indexOf(t);if(r!==-1){n.splice(r,1)}if(n.length>0){return}Rt.forEach(function(t){delete e[t]});delete e._chartjs}var Nt=function(t,e){this.initialize(t,e)};Lt.extend(Nt.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var i=this;i.chart=t;i.index=e;i.linkScales();i.addElements();i._type=i.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this;var e=t.getMeta();var i=t.chart;var n=i.scales;var r=t.getDataset();var o=i.options.scales;if(e.xAxisID===null||!(e.xAxisID in n)||r.xAxisID){e.xAxisID=r.xAxisID||o.xAxes[0].id}if(e.yAxisID===null||!(e.yAxisID in n)||r.yAxisID){e.yAxisID=r.yAxisID||o.yAxes[0].id}},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(true)},destroy:function(){if(this._data){jt(this._data,this)}},createMetaDataset:function(){var t=this;var e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this;var i=e.dataElementType;return i&&new i({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data||[];var n=e.data;var r,o;for(r=0,o=i.length;r<o;++r){n[r]=n[r]||t.createMetaData(r)}e.dataset=e.dataset||t.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e);this.updateElement(e,t,true)},buildOrUpdateElements:function(){var t=this;var e=t.getDataset();var i=e.data||(e.data=[]);if(t._data!==i){if(t._data){jt(t._data,t)}if(i&&Object.isExtensible(i)){Ft(i,t)}t._data=i}t.resyncElements()},_configure:function(){var t=this;t._config=Lt.merge({},[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,e,i){if(t!=="_meta"&&t!=="data"){Lt._merger(t,e,i)}}})},_update:function(t){var e=this;e._configure();e._cachedDataOpts=null;e.update(t)},update:Lt.noop,transition:function(t){var e=this.getMeta();var i=e.data||[];var n=i.length;var r=0;for(;r<n;++r){i[r].transition(t)}if(e.dataset){e.dataset.transition(t)}},draw:function(){var t=this.getMeta();var e=t.data||[];var i=e.length;var n=0;if(t.dataset){t.dataset.draw()}for(;n<i;++n){e[n].draw()}},getStyle:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var r;e._configure();if(n&&t===undefined){r=e._resolveDatasetElementOptions(n||{})}else{t=t||0;r=e._resolveDataElementOptions(i.data[t]||{},t)}if(r.fill===false||r.fill===null){r.backgroundColor=r.borderColor}return r},_resolveDatasetElementOptions:function(t,e){var i=this;var n=i.chart;var r=i._config;var o=t.custom||{};var a=n.options.elements[i.datasetElementType.prototype._type]||{};var s=i._datasetElementOptions;var l={};var c,u,h,p;var d={chart:n,dataset:i.getDataset(),datasetIndex:i.index,hover:e};for(c=0,u=s.length;c<u;++c){h=s[c];p=e?"hover"+h.charAt(0).toUpperCase()+h.slice(1):h;l[h]=zt([o[p],r[p],a[p]],d)}return l},_resolveDataElementOptions:function(t,e){var i=this;var n=t&&t.custom;var r=i._cachedDataOpts;if(r&&!n){return r}var o=i.chart;var a=i._config;var s=o.options.elements[i.dataElementType.prototype._type]||{};var l=i._dataElementOptions;var c={};var u={chart:o,dataIndex:e,dataset:i.getDataset(),datasetIndex:i.index};var h={cacheable:!n};var p,d,f,m;n=n||{};if(Lt.isArray(l)){for(d=0,f=l.length;d<f;++d){m=l[d];c[m]=zt([n[m],a[m],s[m]],u,e,h)}}else{p=Object.keys(l);for(d=0,f=p.length;d<f;++d){m=p[d];c[m]=zt([n[m],a[l[m]],a[m],s[m]],u,e,h)}}if(h.cacheable){i._cachedDataOpts=Object.freeze(c)}return c},removeHoverStyle:function(t){Lt.merge(t._model,t.$previousStyle||{});delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex];var i=t._index;var n=t.custom||{};var r=t._model;var o=Lt.getHoverColor;t.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth};r.backgroundColor=zt([n.hoverBackgroundColor,e.hoverBackgroundColor,o(r.backgroundColor)],undefined,i);r.borderColor=zt([n.hoverBorderColor,e.hoverBorderColor,o(r.borderColor)],undefined,i);r.borderWidth=zt([n.hoverBorderWidth,e.hoverBorderWidth,r.borderWidth],undefined,i)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;if(t){this.removeHoverStyle(t)}},_setDatasetHoverStyle:function(){var t=this.getMeta().dataset;var e={};var i,n,r,o,a,s;if(!t){return}s=t._model;a=this._resolveDatasetElementOptions(t,true);o=Object.keys(a);for(i=0,n=o.length;i<n;++i){r=o[i];e[r]=s[r];s[r]=a[r]}t.$previousStyle=e},resyncElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data;var n=e.data.length;var r=i.length;if(r<n){e.data.splice(r,n-r)}else if(r>n){t.insertElements(n,r-n)}},insertElements:function(t,e){for(var i=0;i<e;++i){this.addElementAndReset(t+i)}},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e);this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Nt.extend=Lt.inherits;var Ut=Nt,Ht=Math.PI*2;function Gt(t,e){var i=e.startAngle;var n=e.endAngle;var r=e.pixelMargin;var o=r/e.outerRadius;var a=e.x;var s=e.y;t.beginPath();t.arc(a,s,e.outerRadius,i-o,n+o);if(e.innerRadius>r){o=r/e.innerRadius;t.arc(a,s,e.innerRadius-r,n+o,i-o,true)}else{t.arc(a,s,r,n+Math.PI/2,i-Math.PI/2)}t.closePath();t.clip()}function Zt(t,e,i,n){var r=i.endAngle;var o;if(n){i.endAngle=i.startAngle+Ht;Gt(t,i);i.endAngle=r;if(i.endAngle===i.startAngle&&i.fullCircles){i.endAngle+=Ht;i.fullCircles--}}t.beginPath();t.arc(i.x,i.y,i.innerRadius,i.startAngle+Ht,i.startAngle,true);for(o=0;o<i.fullCircles;++o){t.stroke()}t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.startAngle+Ht);for(o=0;o<i.fullCircles;++o){t.stroke()}}function Wt(t,e,i){var n=e.borderAlign==="inner";if(n){t.lineWidth=e.borderWidth*2;t.lineJoin="round"}else{t.lineWidth=e.borderWidth;t.lineJoin="bevel"}if(i.fullCircles){Zt(t,e,i,n)}if(n){Gt(t,i)}t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.endAngle);t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,true);t.closePath();t.stroke()}pt._set("global",{elements:{arc:{backgroundColor:pt.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Vt=Et.extend({_type:"arc",inLabelRange:function(t){var e=this._view;if(e){return Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)}return false},inRange:function(t,e){var i=this._view;if(i){var n=Lt.getAngleFromPoint(i,{x:t,y:e});var r=n.angle;var o=n.distance;var a=i.startAngle;var s=i.endAngle;while(s<a){s+=Ht}while(r>s){r-=Ht}while(r<a){r+=Ht}var l=r>=a&&r<=s;var c=o>=i.innerRadius&&o<=i.outerRadius;return l&&c}return false},getCenterPoint:function(){var t=this._view;var e=(t.startAngle+t.endAngle)/2;var i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view;var e=t.startAngle+(t.endAngle-t.startAngle)/2;var i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t=this._chart.ctx;var e=this._view;var i=e.borderAlign==="inner"?.33:0;var n={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-i,0),pixelMargin:i,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Ht)};var r;t.save();t.fillStyle=e.backgroundColor;t.strokeStyle=e.borderColor;if(n.fullCircles){n.endAngle=n.startAngle+Ht;t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();for(r=0;r<n.fullCircles;++r){t.fill()}n.endAngle=n.startAngle+e.circumference%Ht}t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();t.fill();if(e.borderWidth){Wt(t,e,n)}t.restore()}}),qt=Lt.valueOrDefault,$t=pt.global.defaultColor;pt._set("global",{elements:{line:{tension:.4,backgroundColor:$t,borderWidth:3,borderColor:$t,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:true,fill:true}}});var Kt=Et.extend({_type:"line",draw:function(){var t=this;var e=t._view;var i=t._chart.ctx;var n=e.spanGaps;var r=t._children.slice();var o=pt.global;var a=o.elements.line;var s=-1;var l=t._loop;var c,u,h;if(!r.length){return}if(t._loop){for(c=0;c<r.length;++c){u=Lt.previousItem(r,c);if(!r[c]._view.skip&&u._view.skip){r=r.slice(c).concat(r.slice(0,c));l=n;break}}if(l){r.push(r[0])}}i.save();i.lineCap=e.borderCapStyle||a.borderCapStyle;if(i.setLineDash){i.setLineDash(e.borderDash||a.borderDash)}i.lineDashOffset=qt(e.borderDashOffset,a.borderDashOffset);i.lineJoin=e.borderJoinStyle||a.borderJoinStyle;i.lineWidth=qt(e.borderWidth,a.borderWidth);i.strokeStyle=e.borderColor||o.defaultColor;i.beginPath();h=r[0]._view;if(!h.skip){i.moveTo(h.x,h.y);s=0}for(c=1;c<r.length;++c){h=r[c]._view;u=s===-1?Lt.previousItem(r,c):r[s];if(!h.skip){if(s!==c-1&&!n||s===-1){i.moveTo(h.x,h.y)}else{Lt.canvas.lineTo(i,u._view,h)}s=c}}if(l){i.closePath()}i.stroke();i.restore()}}),Yt=Lt.valueOrDefault,Jt=pt.global.defaultColor;function Xt(t){var e=this._view;return e?Math.abs(t-e.x)<e.radius+e.hitRadius:false}function Qt(t){var e=this._view;return e?Math.abs(t-e.y)<e.radius+e.hitRadius:false}pt._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Jt,borderColor:Jt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var te=Et.extend({_type:"point",inRange:function(t,e){var i=this._view;return i?Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2):false},inLabelRange:Xt,inXRange:Xt,inYRange:Qt,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view;var i=this._chart.ctx;var n=e.pointStyle;var r=e.rotation;var o=e.radius;var a=e.x;var s=e.y;var l=pt.global;var c=l.defaultColor;if(e.skip){return}if(t===undefined||Lt.canvas._isPointInArea(e,t)){i.strokeStyle=e.borderColor||c;i.lineWidth=Yt(e.borderWidth,l.elements.point.borderWidth);i.fillStyle=e.backgroundColor||c;Lt.canvas.drawPoint(i,n,o,a,s,r)}}}),ee=pt.global.defaultColor;function ie(t){return t&&t.width!==undefined}function ne(t){var e,i,n,r,o;if(ie(t)){o=t.width/2;e=t.x-o;i=t.x+o;n=Math.min(t.y,t.base);r=Math.max(t.y,t.base)}else{o=t.height/2;e=Math.min(t.x,t.base);i=Math.max(t.x,t.base);n=t.y-o;r=t.y+o}return{left:e,top:n,right:i,bottom:r}}function re(t,e,i){return t===e?i:t===i?e:t}function oe(t){var e=t.borderSkipped;var i={};if(!e){return i}if(t.horizontal){if(t.base>t.x){e=re(e,"left","right")}}else if(t.base<t.y){e=re(e,"bottom","top")}i[e]=true;return i}function ae(t,e,i){var n=t.borderWidth;var r=oe(t);var o,a,s,l;if(Lt.isObject(n)){o=+n.top||0;a=+n.right||0;s=+n.bottom||0;l=+n.left||0}else{o=a=s=l=+n||0}return{t:r.top||o<0?0:o>i?i:o,r:r.right||a<0?0:a>e?e:a,b:r.bottom||s<0?0:s>i?i:s,l:r.left||l<0?0:l>e?e:l}}function se(t){var e=ne(t);var i=e.right-e.left;var n=e.bottom-e.top;var r=ae(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+r.l,y:e.top+r.t,w:i-r.l-r.r,h:n-r.t-r.b}}}function le(t,e,i){var n=e===null;var r=i===null;var o=!t||n&&r?false:ne(t);return o&&(n||e>=o.left&&e<=o.right)&&(r||i>=o.top&&i<=o.bottom)}pt._set("global",{elements:{rectangle:{backgroundColor:ee,borderColor:ee,borderSkipped:"bottom",borderWidth:0}}});var ce=Et.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx;var e=this._view;var i=se(e);var n=i.outer;var r=i.inner;t.fillStyle=e.backgroundColor;t.fillRect(n.x,n.y,n.w,n.h);if(n.w===r.w&&n.h===r.h){return}t.save();t.beginPath();t.rect(n.x,n.y,n.w,n.h);t.clip();t.fillStyle=e.borderColor;t.rect(r.x,r.y,r.w,r.h);t.fill("evenodd");t.restore()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return le(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return ie(i)?le(i,t,null):le(i,null,e)},inXRange:function(t){return le(this._view,t,null)},inYRange:function(t){return le(this._view,null,t)},getCenterPoint:function(){var t=this._view;var e,i;if(ie(t)){e=t.x;i=(t.y+t.base)/2}else{e=(t.x+t.base)/2;i=t.y}return{x:e,y:i}},getArea:function(){var t=this._view;return ie(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),ue={},he,pe=Kt,de=te,fe=ce;ue.Arc=Vt,ue.Line=pe,ue.Point=de,ue.Rectangle=fe;var me=Lt._deprecated,ge=Lt.valueOrDefault;function ve(t,e){var i=t._length;var n,r,o,a;for(o=1,a=e.length;o<a;++o){i=Math.min(i,Math.abs(e[o]-e[o-1]))}for(o=0,a=t.getTicks().length;o<a;++o){r=t.getPixelForTick(o);i=o>0?Math.min(i,Math.abs(r-n)):i;n=r}return i}function _e(t,e,i){var n=i.barThickness;var r=e.stackCount;var o=e.pixels[t];var a=Lt.isNullOrUndef(n)?ve(e.scale,e.pixels):-1;var s,l;if(Lt.isNullOrUndef(n)){s=a*i.categoryPercentage;l=i.barPercentage}else{s=n*r;l=1}return{chunk:s/r,ratio:l,start:o-s/2}}function ye(t,e,i){var n=e.pixels;var r=n[t];var o=t>0?n[t-1]:null;var a=t<n.length-1?n[t+1]:null;var s=i.categoryPercentage;var l,c;if(o===null){o=r-(a===null?e.end-e.start:a-r)}if(a===null){a=r+r-o}l=r-(r-Math.min(o,a))/2*s;c=Math.abs(a-o)/2*s;return{chunk:c/e.stackCount,ratio:i.barPercentage,start:l}}pt._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:true,gridLines:{offsetGridLines:true}}],yAxes:[{type:"linear"}]}}),pt._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var be=Ut.extend({dataElementType:ue.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t=this;var e,i;Ut.prototype.initialize.apply(t,arguments);e=t.getMeta();e.stack=t.getDataset().stack;e.bar=true;i=t._getIndexScale().options;me("bar chart",i.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage");me("bar chart",i.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness");me("bar chart",i.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage");me("bar chart",t._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength");me("bar chart",i.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e=this;var i=e.getMeta().data;var n,r;e._ruler=e.getRuler();for(n=0,r=i.length;n<r;++n){e.updateElement(i[n],n,t)}},updateElement:function(t,e,i){var n=this;var r=n.getMeta();var o=n.getDataset();var a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(r.xAxisID);t._yScale=n.getScaleForId(r.yAxisID);t._datasetIndex=n.index;t._index=e;t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:o.label,label:n.chart.data.labels[e]};if(Lt.isArray(o.data[e])){t._model.borderSkipped=null}n._updateElementGeometry(t,e,i,a);t.pivot()},_updateElementGeometry:function(t,e,i,n){var r=this;var o=t._model;var a=r._getValueScale();var s=a.getBasePixel();var l=a.isHorizontal();var c=r._ruler||r.getRuler();var u=r.calculateBarValuePixels(r.index,e,n);var h=r.calculateBarIndexPixels(r.index,e,c,n);o.horizontal=l;o.base=i?s:u.base;o.x=l?i?s:u.head:h.center;o.y=l?h.center:i?s:u.head;o.height=l?h.size:undefined;o.width=l?undefined:h.size},_getStacks:function(t){var e=this;var i=e._getIndexScale();var n=i._getMatchingVisibleMetas(e._type);var r=i.options.stacked;var o=n.length;var a=[];var s,l;for(s=0;s<o;++s){l=n[s];if(r===false||a.indexOf(l.stack)===-1||r===undefined&&l.stack===undefined){a.push(l.stack)}if(l.index===t){break}}return a},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t);var n=e!==undefined?i.indexOf(e):-1;return n===-1?i.length-1:n},getRuler:function(){var t=this;var e=t._getIndexScale();var i=[];var n,r;for(n=0,r=t.getMeta().data.length;n<r;++n){i.push(e.getPixelForValue(null,n,t.index))}return{pixels:i,start:e._startPixel,end:e._endPixel,stackCount:t.getStackCount(),scale:e}},calculateBarValuePixels:function(t,e,i){var n=this;var r=n.chart;var o=n._getValueScale();var a=o.isHorizontal();var s=r.data.datasets;var l=o._getMatchingVisibleMetas(n._type);var c=o._parseValue(s[t].data[e]);var u=i.minBarLength;var h=o.options.stacked;var p=n.getMeta().stack;var d=c.start===undefined?0:c.max>=0&&c.min>=0?c.min:c.max;var f=c.start===undefined?c.end:c.max>=0&&c.min>=0?c.max-c.min:c.min-c.max;var m=l.length;var g,v,_,y,b,x,w;if(h||h===undefined&&p!==undefined){for(g=0;g<m;++g){v=l[g];if(v.index===t){break}if(v.stack===p){w=o._parseValue(s[v.index].data[e]);_=w.start===undefined?w.end:w.min>=0&&w.max>=0?w.max:w.min;if(c.min<0&&_<0||c.max>=0&&_>0){d+=_}}}}y=o.getPixelForValue(d);b=o.getPixelForValue(d+f);x=b-y;if(u!==undefined&&Math.abs(x)<u){x=u;if(f>=0&&!a||f<0&&a){b=y-u}else{b=y+u}}return{size:x,base:y,head:b,center:b+x/2}},calculateBarIndexPixels:function(t,e,i,n){var r=this;var o=n.barThickness==="flex"?ye(e,i,n):_e(e,i,n);var a=r.getStackIndex(t,r.getMeta().stack);var s=o.start+o.chunk*a+o.chunk/2;var l=Math.min(ge(n.maxBarThickness,Infinity),o.chunk*o.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var t=this;var e=t.chart;var i=t._getValueScale();var n=t.getMeta().data;var r=t.getDataset();var o=n.length;var a=0;Lt.canvas.clipArea(e.ctx,e.chartArea);for(;a<o;++a){var s=i._parseValue(r.data[a]);if(!isNaN(s.min)&&!isNaN(s.max)){n[a].draw()}}Lt.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var t=this;var e=Lt.extend({},Ut.prototype._resolveDataElementOptions.apply(t,arguments));var i=t._getIndexScale().options;var n=t._getValueScale().options;e.barPercentage=ge(i.barPercentage,e.barPercentage);e.barThickness=ge(i.barThickness,e.barThickness);e.categoryPercentage=ge(i.categoryPercentage,e.categoryPercentage);e.maxBarThickness=ge(i.maxBarThickness,e.maxBarThickness);e.minBarLength=ge(n.minBarLength,e.minBarLength);return e}}),xe=Lt.valueOrDefault,we=Lt.options.resolve;pt._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";var n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var ke=Ut.extend({dataElementType:ue.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(i){var n=this;var t=n.getMeta();var e=t.data;Lt.each(e,function(t,e){n.updateElement(t,e,i)})},updateElement:function(t,e,i){var n=this;var r=n.getMeta();var o=t.custom||{};var a=n.getScaleForId(r.xAxisID);var s=n.getScaleForId(r.yAxisID);var l=n._resolveDataElementOptions(t,e);var c=n.getDataset().data[e];var u=n.index;var h=i?a.getPixelForDecimal(.5):a.getPixelForValue(typeof c==="object"?c:NaN,e,u);var p=i?s.getBasePixel():s.getPixelForValue(c,e,u);t._xScale=a;t._yScale=s;t._options=l;t._datasetIndex=u;t._index=e;t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:o.skip||isNaN(h)||isNaN(p),x:h,y:p};t.pivot()},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Lt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=xe(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=xe(i.hoverBorderColor,n(i.borderColor));e.borderWidth=xe(i.hoverBorderWidth,i.borderWidth);e.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(t,e){var i=this;var n=i.chart;var r=i.getDataset();var o=t.custom||{};var a=r.data[e]||{};var s=Ut.prototype._resolveDataElementOptions.apply(i,arguments);var l={chart:n,dataIndex:e,dataset:r,datasetIndex:i.index};if(i._cachedDataOpts===s){s=Lt.extend({},s)}s.radius=we([o.radius,a.r,i._config.radius,n.options.elements.point.radius],l,e);return s}}),Le=Lt.valueOrDefault,Ce=Math.PI,Me=Ce*2,Se=Ce/2;pt._set("doughnut",{animation:{animateRotate:true,animateScale:false},hover:{mode:"single"},legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var r=i.labels;var o,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length){for(o=0,a=n[0].data.length;o<a;++o){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[o];if(r[o]){s.appendChild(document.createTextNode(r[o]))}}}return e.outerHTML},legend:{labels:{generateLabels:function(r){var o=r.data;if(o.labels.length&&o.datasets.length){return o.labels.map(function(t,e){var i=r.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(o.datasets[0].data[e])||i.data[e].hidden,index:e}})}return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var r,o,a;for(r=0,o=(n.data.datasets||[]).length;r<o;++r){a=n.getDatasetMeta(r);if(a.data[i]){a.data[i].hidden=!a.data[i].hidden}}n.update()}},cutoutPercentage:50,rotation:-Se,circumference:Me,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index];var n=": "+e.datasets[t.datasetIndex].data[t.index];if(Lt.isArray(i)){i=i.slice();i[0]+=n}else{i+=n}return i}}}});var Te=Ut.extend({dataElementType:ue.Arc,linkScales:Lt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){var e=0;for(var i=0;i<t;++i){if(this.chart.isDatasetVisible(i)){++e}}return e},update:function(t){var e=this;var i=e.chart;var n=i.chartArea;var r=i.options;var o=1;var a=1;var s=0;var l=0;var c=e.getMeta();var u=c.data;var h=r.cutoutPercentage/100||0;var p=r.circumference;var d=e._getRingWeight(e.index);var f,m,g,v;if(p<Me){var _=r.rotation%Me;_+=_>=Ce?-Me:_<-Ce?Me:0;var y=_+p;var b=Math.cos(_);var x=Math.sin(_);var w=Math.cos(y);var k=Math.sin(y);var L=_<=0&&y>=0||y>=Me;var C=_<=Se&&y>=Se||y>=Me+Se;var M=_===-Ce||y>=Ce;var S=_<=-Se&&y>=-Se||y>=Ce+Se;var T=M?-1:Math.min(b,b*h,w,w*h);var P=S?-1:Math.min(x,x*h,k,k*h);var D=L?1:Math.max(b,b*h,w,w*h);var A=C?1:Math.max(x,x*h,k,k*h);o=(D-T)/2;a=(A-P)/2;s=-(D+T)/2;l=-(A+P)/2}for(g=0,v=u.length;g<v;++g){u[g]._options=e._resolveDataElementOptions(u[g],g)}i.borderWidth=e.getMaxBorderWidth();f=(n.right-n.left-i.borderWidth)/o;m=(n.bottom-n.top-i.borderWidth)/a;i.outerRadius=Math.max(Math.min(f,m)/2,0);i.innerRadius=Math.max(i.outerRadius*h,0);i.radiusLength=(i.outerRadius-i.innerRadius)/(e._getVisibleDatasetWeightTotal()||1);i.offsetX=s*i.outerRadius;i.offsetY=l*i.outerRadius;c.total=e.calculateTotal();e.outerRadius=i.outerRadius-i.radiusLength*e._getRingWeightOffset(e.index);e.innerRadius=Math.max(e.outerRadius-i.radiusLength*d,0);for(g=0,v=u.length;g<v;++g){e.updateElement(u[g],g,t)}},updateElement:function(t,e,i){var n=this;var r=n.chart;var o=r.chartArea;var a=r.options;var s=a.animation;var l=(o.left+o.right)/2;var c=(o.top+o.bottom)/2;var u=a.rotation;var h=a.rotation;var p=n.getDataset();var d=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(p.data[e])*(a.circumference/Me);var f=i&&s.animateScale?0:n.innerRadius;var m=i&&s.animateScale?0:n.outerRadius;var g=t._options||{};Lt.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:l+r.offsetX,y:c+r.offsetY,startAngle:u,endAngle:h,circumference:d,outerRadius:m,innerRadius:f,label:Lt.valueAtIndexOrDefault(p.label,e,r.data.labels[e])}});var v=t._model;if(!i||!s.animateRotate){if(e===0){v.startAngle=a.rotation}else{v.startAngle=n.getMeta().data[e-1]._model.endAngle}v.endAngle=v.startAngle+v.circumference}t.pivot()},calculateTotal:function(){var i=this.getDataset();var t=this.getMeta();var n=0;var r;Lt.each(t.data,function(t,e){r=i.data[e];if(!isNaN(r)&&!t.hidden){n+=Math.abs(r)}});return n},calculateCircumference:function(t){var e=this.getMeta().total;if(e>0&&!isNaN(t)){return Me*(Math.abs(t)/e)}return 0},getMaxBorderWidth:function(t){var e=this;var i=0;var n=e.chart;var r,o,a,s,l,c,u,h;if(!t){for(r=0,o=n.data.datasets.length;r<o;++r){if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r);t=a.data;if(r!==e.index){l=a.controller}break}}}if(!t){return 0}for(r=0,o=t.length;r<o;++r){s=t[r];if(l){l._configure();c=l._resolveDataElementOptions(s,r)}else{c=s._options}if(c.borderAlign!=="inner"){u=c.borderWidth;h=c.hoverBorderWidth;i=u>i?u:i;i=h>i?h:i}}return i},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Lt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=Le(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Le(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Le(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(t){var e=0;for(var i=0;i<t;++i){if(this.chart.isDatasetVisible(i)){e+=this._getRingWeight(i)}}return e},_getRingWeight:function(t){return Math.max(Le(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});pt._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:true,gridLines:{offsetGridLines:true}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),pt._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Pe=be.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),De=Lt.valueOrDefault,Ae=Lt.options.resolve,Ee=Lt.canvas._isPointInArea;function Oe(t,e){var i=t&&t.options.ticks||{};var n=i.reverse;var r=i.min===undefined?e:0;var o=i.max===undefined?e:0;return{start:n?o:r,end:n?r:o}}function Ie(t,e,i){var n=i/2;var r=Oe(t,n);var o=Oe(e,n);return{top:o.end,right:r.end,bottom:o.start,left:r.start}}function Be(t){var e,i,n,r;if(Lt.isObject(t)){e=t.top;i=t.right;n=t.bottom;r=t.left}else{e=i=n=r=t}return{top:e,right:i,bottom:n,left:r}}pt._set("line",{showLines:true,spanGaps:false,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ze=Ut.extend({datasetElementType:ue.Line,dataElementType:ue.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var r=i.data||[];var o=e.chart.options;var a=e._config;var s=e._showLine=De(a.showLine,o.showLines);var l,c;e._xScale=e.getScaleForId(i.xAxisID);e._yScale=e.getScaleForId(i.yAxisID);if(s){if(a.tension!==undefined&&a.lineTension===undefined){a.lineTension=a.tension}n._scale=e._yScale;n._datasetIndex=e.index;n._children=r;n._model=e._resolveDatasetElementOptions(n);n.pivot()}for(l=0,c=r.length;l<c;++l){e.updateElement(r[l],l,t)}if(s&&n._model.tension!==0){e.updateBezierControlPoints()}for(l=0,c=r.length;l<c;++l){r[l].pivot()}},updateElement:function(t,e,i){var n=this;var r=n.getMeta();var o=t.custom||{};var a=n.getDataset();var s=n.index;var l=a.data[e];var c=n._xScale;var u=n._yScale;var h=r.dataset._model;var p,d;var f=n._resolveDataElementOptions(t,e);p=c.getPixelForValue(typeof l==="object"?l:NaN,e,s);d=i?u.getBasePixel():n.calculatePointY(l,e,s);t._xScale=c;t._yScale=u;t._options=f;t._datasetIndex=s;t._index=e;t._model={x:p,y:d,skip:o.skip||isNaN(p)||isNaN(d),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:De(o.tension,h?h.tension:0),steppedLine:h?h.steppedLine:false,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this;var i=e._config;var n=t.custom||{};var r=e.chart.options;var o=r.elements.line;var a=Ut.prototype._resolveDatasetElementOptions.apply(e,arguments);a.spanGaps=De(i.spanGaps,r.spanGaps);a.tension=De(i.lineTension,o.tension);a.steppedLine=Ae([n.steppedLine,i.steppedLine,o.stepped]);a.clip=Be(De(i.clip,Ie(e._xScale,e._yScale,a.borderWidth)));return a},calculatePointY:function(t,e,i){var n=this;var r=n.chart;var o=n._yScale;var a=0;var s=0;var l,c,u,h,p,d,f;if(o.options.stacked){p=+o.getRightValue(t);d=r._getSortedVisibleDatasetMetas();f=d.length;for(l=0;l<f;++l){u=d[l];if(u.index===i){break}c=r.data.datasets[u.index];if(u.type==="line"&&u.yAxisID===o.id){h=+o.getRightValue(c.data[e]);if(h<0){s+=h||0}else{a+=h||0}}}if(p<0){return o.getPixelForValue(s+p)}return o.getPixelForValue(a+p)}return o.getPixelForValue(t)},updateBezierControlPoints:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.dataset._model;var r=e.chartArea;var o=i.data||[];var a,s,l,c;if(n.spanGaps){o=o.filter(function(t){return!t._model.skip})}function u(t,e,i){return Math.max(Math.min(t,i),e)}if(n.cubicInterpolationMode==="monotone"){Lt.splineCurveMonotone(o)}else{for(a=0,s=o.length;a<s;++a){l=o[a]._model;c=Lt.splineCurve(Lt.previousItem(o,a)._model,l,Lt.nextItem(o,a)._model,n.tension);l.controlPointPreviousX=c.previous.x;l.controlPointPreviousY=c.previous.y;l.controlPointNextX=c.next.x;l.controlPointNextY=c.next.y}}if(e.options.elements.line.capBezierPoints){for(a=0,s=o.length;a<s;++a){l=o[a]._model;if(Ee(l,r)){if(a>0&&Ee(o[a-1]._model,r)){l.controlPointPreviousX=u(l.controlPointPreviousX,r.left,r.right);l.controlPointPreviousY=u(l.controlPointPreviousY,r.top,r.bottom)}if(a<o.length-1&&Ee(o[a+1]._model,r)){l.controlPointNextX=u(l.controlPointNextX,r.left,r.right);l.controlPointNextY=u(l.controlPointNextY,r.top,r.bottom)}}}}},draw:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.data||[];var r=e.chartArea;var o=e.canvas;var a=0;var s=n.length;var l;if(t._showLine){l=i.dataset._model.clip;Lt.canvas.clipArea(e.ctx,{left:l.left===false?0:r.left-l.left,right:l.right===false?o.width:r.right+l.right,top:l.top===false?0:r.top-l.top,bottom:l.bottom===false?o.height:r.bottom+l.bottom});i.dataset.draw();Lt.canvas.unclipArea(e.ctx)}for(;a<s;++a){n[a].draw(r)}},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Lt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=De(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=De(i.hoverBorderColor,n(i.borderColor));e.borderWidth=De(i.hoverBorderWidth,i.borderWidth);e.radius=De(i.hoverRadius,i.radius)}}),Re=Lt.options.resolve;pt._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:false},gridLines:{circular:true},pointLabels:{display:false},ticks:{beginAtZero:true}},animation:{animateRotate:true,animateScale:true},startAngle:-.5*Math.PI,legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var r=i.labels;var o,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length){for(o=0,a=n[0].data.length;o<a;++o){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[o];if(r[o]){s.appendChild(document.createTextNode(r[o]))}}}return e.outerHTML},legend:{labels:{generateLabels:function(r){var o=r.data;if(o.labels.length&&o.datasets.length){return o.labels.map(function(t,e){var i=r.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(o.datasets[0].data[e])||i.data[e].hidden,index:e}})}return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var r,o,a;for(r=0,o=(n.data.datasets||[]).length;r<o;++r){a=n.getDatasetMeta(r);a.data[i].hidden=!a.data[i].hidden}n.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Fe=Ut.extend({dataElementType:ue.Arc,linkScales:Lt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getDataset();var n=e.getMeta();var r=e.chart.options.startAngle||0;var o=e._starts=[];var a=e._angles=[];var s=n.data;var l,c,u;e._updateRadius();n.count=e.countVisibleElements();for(l=0,c=i.data.length;l<c;l++){o[l]=r;u=e._computeAngle(l);a[l]=u;r+=u}for(l=0,c=s.length;l<c;++l){s[l]._options=e._resolveDataElementOptions(s[l],l);e.updateElement(s[l],l,t)}},_updateRadius:function(){var t=this;var e=t.chart;var i=e.chartArea;var n=e.options;var r=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(r/2,0);e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0);e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount();t.outerRadius=e.outerRadius-e.radiusLength*t.index;t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this;var r=n.chart;var o=n.getDataset();var a=r.options;var s=a.animation;var l=r.scale;var c=r.data.labels;var u=l.xCenter;var h=l.yCenter;var p=a.startAngle;var d=t.hidden?0:l.getDistanceFromCenterForValue(o.data[e]);var f=n._starts[e];var m=f+(t.hidden?0:n._angles[e]);var g=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[e]);var v=t._options||{};Lt.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?g:d,startAngle:i&&s.animateRotate?p:f,endAngle:i&&s.animateRotate?p:m,label:Lt.valueAtIndexOrDefault(c,e,c[e])}});t.pivot()},countVisibleElements:function(){var i=this.getDataset();var t=this.getMeta();var n=0;Lt.each(t.data,function(t,e){if(!isNaN(i.data[e])&&!t.hidden){n++}});return n},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Lt.getHoverColor;var r=Lt.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=r(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=r(i.hoverBorderColor,n(i.borderColor));e.borderWidth=r(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(t){var e=this;var i=this.getMeta().count;var n=e.getDataset();var r=e.getMeta();if(isNaN(n.data[t])||r.data[t].hidden){return 0}var o={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return Re([e.chart.options.elements.arc.angle,2*Math.PI/i],o,t)}});pt._set("pie",Lt.clone(pt.doughnut)),pt._set("pie",{cutoutPercentage:0});var je=Te,Ne=Lt.valueOrDefault;pt._set("radar",{spanGaps:false,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Ue=Ut.extend({datasetElementType:ue.Line,dataElementType:ue.Point,linkScales:Lt.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var r=i.data||[];var o=e.chart.scale;var a=e._config;var s,l;if(a.tension!==undefined&&a.lineTension===undefined){a.lineTension=a.tension}n._scale=o;n._datasetIndex=e.index;n._children=r;n._loop=true;n._model=e._resolveDatasetElementOptions(n);n.pivot();for(s=0,l=r.length;s<l;++s){e.updateElement(r[s],s,t)}e.updateBezierControlPoints();for(s=0,l=r.length;s<l;++s){r[s].pivot()}},updateElement:function(t,e,i){var n=this;var r=t.custom||{};var o=n.getDataset();var a=n.chart.scale;var s=a.getPointPositionForValue(e,o.data[e]);var l=n._resolveDataElementOptions(t,e);var c=n.getMeta().dataset._model;var u=i?a.xCenter:s.x;var h=i?a.yCenter:s.y;t._scale=a;t._options=l;t._datasetIndex=n.index;t._index=e;t._model={x:u,y:h,skip:r.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ne(r.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this;var e=t._config;var i=t.chart.options;var n=Ut.prototype._resolveDatasetElementOptions.apply(t,arguments);n.spanGaps=Ne(e.spanGaps,i.spanGaps);n.tension=Ne(e.lineTension,i.elements.line.tension);return n},updateBezierControlPoints:function(){var t=this;var e=t.getMeta();var i=t.chart.chartArea;var n=e.data||[];var r,o,a,s;if(e.dataset._model.spanGaps){n=n.filter(function(t){return!t._model.skip})}function l(t,e,i){return Math.max(Math.min(t,i),e)}for(r=0,o=n.length;r<o;++r){a=n[r]._model;s=Lt.splineCurve(Lt.previousItem(n,r,true)._model,a,Lt.nextItem(n,r,true)._model,a.tension);a.controlPointPreviousX=l(s.previous.x,i.left,i.right);a.controlPointPreviousY=l(s.previous.y,i.top,i.bottom);a.controlPointNextX=l(s.next.x,i.left,i.right);a.controlPointNextY=l(s.next.y,i.top,i.bottom)}},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Lt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=Ne(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Ne(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Ne(i.hoverBorderWidth,i.borderWidth);e.radius=Ne(i.hoverRadius,i.radius)}});pt._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),pt._set("global",{datasets:{scatter:{showLine:false}}});var He,Ge={bar:be,bubble:ke,doughnut:Te,horizontalBar:Pe,line:ze,polarArea:Fe,pie:je,radar:Ue,scatter:ze};function Ze(t,e){if(t.native){return{x:t.x,y:t.y}}return Lt.getRelativePosition(t,e)}function We(t,e){var i=t._getSortedVisibleDatasetMetas();var n,r,o,a,s,l;for(r=0,a=i.length;r<a;++r){n=i[r].data;for(o=0,s=n.length;o<s;++o){l=n[o];if(!l._view.skip){e(l)}}}}function Ve(t,e){var i=[];We(t,function(t){if(t.inRange(e.x,e.y)){i.push(t)}});return i}function qe(t,n,r,o){var a=Number.POSITIVE_INFINITY;var s=[];We(t,function(t){if(r&&!t.inRange(n.x,n.y)){return}var e=t.getCenterPoint();var i=o(n,e);if(i<a){s=[t];a=i}else if(i===a){s.push(t)}});return s}function $e(t){var r=t.indexOf("x")!==-1;var o=t.indexOf("y")!==-1;return function(t,e){var i=r?Math.abs(t.x-e.x):0;var n=o?Math.abs(t.y-e.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}function Ke(t,e,i){var n=Ze(e,t);i.axis=i.axis||"x";var r=$e(i.axis);var o=i.intersect?Ve(t,n):qe(t,n,false,r);var a=[];if(!o.length){return[]}t._getSortedVisibleDatasetMetas().forEach(function(t){var e=t.data[o[0]._index];if(e&&!e._view.skip){a.push(e)}});return a}var Ye={modes:{single:function(t,e){var i=Ze(e,t);var n=[];We(t,function(t){if(t.inRange(i.x,i.y)){n.push(t);return n}});return n.slice(0,1)},label:Ke,index:Ke,dataset:function(t,e,i){var n=Ze(e,t);i.axis=i.axis||"xy";var r=$e(i.axis);var o=i.intersect?Ve(t,n):qe(t,n,false,r);if(o.length>0){o=t.getDatasetMeta(o[0]._datasetIndex).data}return o},"x-axis":function(t,e){return Ke(t,e,{intersect:false})},point:function(t,e){var i=Ze(e,t);return Ve(t,i)},nearest:function(t,e,i){var n=Ze(e,t);i.axis=i.axis||"xy";var r=$e(i.axis);return qe(t,n,i.intersect,r)},x:function(t,e,i){var n=Ze(e,t);var r=[];var o=false;We(t,function(t){if(t.inXRange(n.x)){r.push(t)}if(t.inRange(n.x,n.y)){o=true}});if(i.intersect&&!o){r=[]}return r},y:function(t,e,i){var n=Ze(e,t);var r=[];var o=false;We(t,function(t){if(t.inYRange(n.y)){r.push(t)}if(t.inRange(n.x,n.y)){o=true}});if(i.intersect&&!o){r=[]}return r}}},Je=Lt.extend;function Xe(t,e){return Lt.where(t,function(t){return t.pos===e})}function Qe(t,r){return t.sort(function(t,e){var i=r?e:t;var n=r?t:e;return i.weight===n.weight?i.index-n.index:i.weight-n.weight})}function ti(t){var e=[];var i,n,r;for(i=0,n=(t||[]).length;i<n;++i){r=t[i];e.push({index:i,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight})}return e}function ei(t,e){var i,n,r;for(i=0,n=t.length;i<n;++i){r=t[i];r.width=r.horizontal?r.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth;r.height=r.horizontal&&e.hBoxMaxHeight}}function ii(t){var e=ti(t);var i=Qe(Xe(e,"left"),true);var n=Qe(Xe(e,"right"));var r=Qe(Xe(e,"top"),true);var o=Qe(Xe(e,"bottom"));return{leftAndTop:i.concat(r),rightAndBottom:n.concat(o),chartArea:Xe(e,"chartArea"),vertical:i.concat(n),horizontal:r.concat(o)}}function ni(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function ri(t,e,i){var n=i.box;var r=t.maxPadding;var o,a;if(i.size){t[i.pos]-=i.size}i.size=i.horizontal?n.height:n.width;t[i.pos]+=i.size;if(n.getPadding){var s=n.getPadding();r.top=Math.max(r.top,s.top);r.left=Math.max(r.left,s.left);r.bottom=Math.max(r.bottom,s.bottom);r.right=Math.max(r.right,s.right)}o=e.outerWidth-ni(r,t,"left","right");a=e.outerHeight-ni(r,t,"top","bottom");if(o!==t.w||a!==t.h){t.w=o;t.h=a;return i.horizontal?o!==t.w:a!==t.h}}function oi(i){var n=i.maxPadding;function t(t){var e=Math.max(n[t]-i[t],0);i[t]+=e;return e}i.y+=t("top");i.x+=t("left");t("right");t("bottom")}function ai(t,i){var n=i.maxPadding;function e(t){var e={left:0,top:0,right:0,bottom:0};t.forEach(function(t){e[t]=Math.max(i[t],n[t])});return e}return t?e(["left","right"]):e(["top","bottom"])}function si(t,e,i){var n=[];var r,o,a,s,l,c;for(r=0,o=t.length;r<o;++r){a=t[r];s=a.box;s.update(a.width||e.w,a.height||e.h,ai(a.horizontal,e));if(ri(e,i,a)){c=true;if(n.length){l=true}}if(!s.fullWidth){n.push(a)}}return l?si(n,e,i)||c:c}function li(t,e,i){var n=i.padding;var r=e.x;var o=e.y;var a,s,l,c;for(a=0,s=t.length;a<s;++a){l=t[a];c=l.box;if(l.horizontal){c.left=c.fullWidth?n.left:e.left;c.right=c.fullWidth?i.outerWidth-n.right:e.left+e.w;c.top=o;c.bottom=o+c.height;c.width=c.right-c.left;o=c.bottom}else{c.left=r;c.right=r+c.width;c.top=e.top;c.bottom=e.top+e.h;c.height=c.bottom-c.top;r=c.right}}e.x=r;e.y=o}pt._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ci={defaults:{},addBox:function(t,e){if(!t.boxes){t.boxes=[]}e.fullWidth=e.fullWidth||false;e.position=e.position||"top";e.weight=e.weight||0;e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]};t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;if(i!==-1){t.boxes.splice(i,1)}},configure:function(t,e,i){var n=["fullWidth","position","weight"];var r=n.length;var o=0;var a;for(;o<r;++o){a=n[o];if(i.hasOwnProperty(a)){e[a]=i[a]}}},update:function(i,t,e){if(!i){return}var n=i.options.layout||{};var r=Lt.options.toPadding(n.padding);var o=t-r.width;var a=e-r.height;var s=ii(i.boxes);var l=s.vertical;var c=s.horizontal;var u=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,vBoxMaxWidth:o/2/l.length,hBoxMaxHeight:a/2});var h=Je({maxPadding:Je({},r),w:o,h:a,x:r.left,y:r.top},r);ei(l.concat(c),u);si(l,h,u);if(si(c,h,u)){si(l,h,u)}oi(h);li(s.leftAndTop,h,u);h.x+=h.w;h.y+=h.h;li(s.rightAndBottom,h,u);i.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h};Lt.each(s.chartArea,function(t){var e=t.box;Je(e,i.chartArea);e.update(h.w,h.h)})}},ui={acquireContext:function(t){if(t&&t.canvas){t=t.canvas}return t&&t.getContext("2d")||null}},hi="/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n",pi,di=e(Object.freeze({__proto__:null,default:hi})),fi="$chartjs",mi="chartjs-",gi=mi+"size-monitor",vi=mi+"render-monitor",_i=mi+"render-animation",yi=["animationstart","webkitAnimationStart"],bi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function xi(t,e){var i=Lt.getStyle(t,e);var n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):undefined}function wi(t,e){var i=t.style;var n=t.getAttribute("height");var r=t.getAttribute("width");t[fi]={initial:{height:n,width:r,style:{display:i.display,height:i.height,width:i.width}}};i.display=i.display||"block";if(r===null||r===""){var o=xi(t,"width");if(o!==undefined){t.width=o}}if(n===null||n===""){if(t.style.height===""){t.height=t.width/(e.options.aspectRatio||2)}else{var a=xi(t,"height");if(o!==undefined){t.height=a}}}return t}var ki,Li=function(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("e",null,e)}catch(t){}return t}()?{passive:true}:false;function Ci(t,e,i){t.addEventListener(e,i,Li)}function Mi(t,e,i){t.removeEventListener(e,i,Li)}function Si(t,e,i,n,r){return{type:t,chart:e,native:r||null,x:i!==undefined?i:null,y:n!==undefined?n:null}}function Ti(t,e){var i=bi[t.type]||t.type;var n=Lt.getRelativePosition(t,e);return Si(i,e,n.x,n.y,t)}function Pi(t,e){var i=false;var n=[];return function(){n=Array.prototype.slice.call(arguments);e=e||this;if(!i){i=true;Lt.requestAnimFrame.call(window,function(){i=false;t.apply(e,n)})}}}function Di(t){var e=document.createElement("div");e.className=t||"";return e}function Ai(t){var e=1e6;var i=Di(gi);var n=Di(gi+"-expand");var r=Di(gi+"-shrink");n.appendChild(Di());r.appendChild(Di());i.appendChild(n);i.appendChild(r);i._reset=function(){n.scrollLeft=e;n.scrollTop=e;r.scrollLeft=e;r.scrollTop=e};var o=function(){i._reset();t()};Ci(n,"scroll",o.bind(n,"expand"));Ci(r,"scroll",o.bind(r,"shrink"));return i}function Ei(e,i){var t=e[fi]||(e[fi]={});var n=t.renderProxy=function(t){if(t.animationName===_i){i()}};Lt.each(yi,function(t){Ci(e,t,n)});t.reflow=!!e.offsetParent;e.classList.add(vi)}function Oi(e){var t=e[fi]||{};var i=t.renderProxy;if(i){Lt.each(yi,function(t){Mi(e,t,i)});delete t.renderProxy}e.classList.remove(vi)}function Ii(i,n,r){var o=i[fi]||(i[fi]={});var e=o.resizer=Ai(Pi(function(){if(o.resizer){var t=r.options.maintainAspectRatio&&i.parentNode;var e=t?t.clientWidth:0;n(Si("resize",r));if(t&&t.clientWidth<e&&r.canvas){n(Si("resize",r))}}}));Ei(i,function(){if(o.resizer){var t=i.parentNode;if(t&&t!==e.parentNode){t.insertBefore(e,t.firstChild)}e._reset()}})}function Bi(t){var e=t[fi]||{};var i=e.resizer;delete e.resizer;Oi(t);if(i&&i.parentNode){i.parentNode.removeChild(i)}}function zi(t,e){var i=t[fi]||(t[fi]={});if(!i.containsStyles){i.containsStyles=true;e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css");n.appendChild(document.createTextNode(e));t.appendChild(n)}}var Ri={disableCSSInjection:false,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;var i=e.host?e:document.head;zi(i,di)}},acquireContext:function(t,e){if(typeof t==="string"){t=document.getElementById(t)}else if(t.length){t=t[0]}if(t&&t.canvas){t=t.canvas}var i=t&&t.getContext&&t.getContext("2d");if(i&&i.canvas===t){this._ensureLoaded(t);wi(t,e);return i}return null},releaseContext:function(t){var i=t.canvas;if(!i[fi]){return}var n=i[fi].initial;["height","width"].forEach(function(t){var e=n[t];if(Lt.isNullOrUndef(e)){i.removeAttribute(t)}else{i.setAttribute(t,e)}});Lt.each(n.style||{},function(t,e){i.style[e]=t});i.width=i.width;delete i[fi]},addEventListener:function(e,t,i){var n=e.canvas;if(t==="resize"){Ii(n,i,e);return}var r=i[fi]||(i[fi]={});var o=r.proxies||(r.proxies={});var a=o[e.id+"_"+t]=function(t){i(Ti(t,e))};Ci(n,t,a)},removeEventListener:function(t,e,i){var n=t.canvas;if(e==="resize"){Bi(n);return}var r=i[fi]||{};var o=r.proxies||{};var a=o[t.id+"_"+e];if(!a){return}Mi(n,e,a)}};Lt.addEvent=Ci,Lt.removeEvent=Mi;var Fi=Ri._enabled?Ri:ui,ji=Lt.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Fi);pt._set("global",{plugins:{}});var Ni={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){if(e.indexOf(t)===-1){e.push(t)}});this._cacheId++},unregister:function(t){var i=this._plugins;[].concat(t).forEach(function(t){var e=i.indexOf(t);if(e!==-1){i.splice(e,1)}});this._cacheId++},clear:function(){this._plugins=[];this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n=this.descriptors(t);var r=n.length;var o,a,s,l,c;for(o=0;o<r;++o){a=n[o];s=a.plugin;c=s[e];if(typeof c==="function"){l=[t].concat(i||[]);l.push(a.options);if(c.apply(s,l)===false){return false}}}return true},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId){return e.descriptors}var r=[];var o=[];var i=t&&t.config||{};var a=i.options&&i.options.plugins||{};this._plugins.concat(i.plugins||[]).forEach(function(t){var e=r.indexOf(t);if(e!==-1){return}var i=t.id;var n=a[i];if(n===false){return}if(n===true){n=Lt.clone(pt.global.plugins[i])}r.push(t);o.push({plugin:t,options:n||{}})});e.descriptors=o;e.id=this._cacheId;return o},_invalidate:function(t){delete t.$plugins}},Ui={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e;this.defaults[t]=Lt.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:undefined},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?Lt.merge({},[pt.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var i=this;if(i.defaults.hasOwnProperty(t)){i.defaults[t]=Lt.extend(i.defaults[t],e)}},addScalesToLayout:function(e){Lt.each(e.scales,function(t){t.fullWidth=t.options.fullWidth;t.position=t.options.position;t.weight=t.options.weight;ci.addBox(e,t)})}},Hi=Lt.valueOrDefault,Gi=Lt.rtl.getRtlAdapter;pt._set("global",{tooltips:{enabled:true,custom:null,mode:"nearest",position:"average",intersect:true,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:true,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:Lt.noop,title:function(t,e){var i="";var n=e.labels;var r=n?n.length:0;if(t.length>0){var o=t[0];if(o.label){i=o.label}else if(o.xLabel){i=o.xLabel}else if(r>0&&o.index<r){i=n[o.index]}}return i},afterTitle:Lt.noop,beforeBody:Lt.noop,beforeLabel:Lt.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";if(i){i+=": "}if(!Lt.isNullOrUndef(t.value)){i+=t.value}else{i+=t.yLabel}return i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex);var n=i.data[t.index];var r=n._view;return{borderColor:r.borderColor,backgroundColor:r.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:Lt.noop,afterBody:Lt.noop,beforeFooter:Lt.noop,footer:Lt.noop,afterFooter:Lt.noop}}});var Zi={average:function(t){if(!t.length){return false}var e,i;var n=0;var r=0;var o=0;for(e=0,i=t.length;e<i;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x;r+=s.y;++o}}return{x:n/o,y:r/o}},nearest:function(t,e){var i=e.x;var n=e.y;var r=Number.POSITIVE_INFINITY;var o,a,s;for(o=0,a=t.length;o<a;++o){var l=t[o];if(l&&l.hasValue()){var c=l.getCenterPoint();var u=Lt.distanceBetweenPoints(e,c);if(u<r){r=u;s=l}}}if(s){var h=s.tooltipPosition();i=h.x;n=h.y}return{x:i,y:n}}};function Wi(t,e){if(e){if(Lt.isArray(e)){Array.prototype.push.apply(t,e)}else{t.push(e)}}return t}function Vi(t){if((typeof t==="string"||t instanceof String)&&t.indexOf("\n")>-1){return t.split("\n")}return t}function qi(t){var e=t._xScale;var i=t._yScale||t._scale;var n=t._index;var r=t._datasetIndex;var o=t._chart.getDatasetMeta(r).controller;var a=o._getIndexScale();var s=o._getValueScale();return{xLabel:e?e.getLabelForIndex(n,r):"",yLabel:i?i.getLabelForIndex(n,r):"",label:a?""+a.getLabelForIndex(n,r):"",value:s?""+s.getLabelForIndex(n,r):"",index:n,datasetIndex:r,x:t._model.x,y:t._model.y}}function $i(t){var e=pt.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Hi(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Hi(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Hi(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Hi(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Hi(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Hi(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Hi(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Hi(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Hi(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ki(t,e){var i=t._chart.ctx;var n=e.yPadding*2;var r=0;var o=e.body;var a=o.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length;var l=e.footer.length;var c=e.titleFontSize;var u=e.bodyFontSize;var h=e.footerFontSize;n+=s*c;n+=s?(s-1)*e.titleSpacing:0;n+=s?e.titleMarginBottom:0;n+=a*u;n+=a?(a-1)*e.bodySpacing:0;n+=l?e.footerMarginTop:0;n+=l*h;n+=l?(l-1)*e.footerSpacing:0;var p=0;var d=function(t){r=Math.max(r,i.measureText(t).width+p)};i.font=Lt.fontString(c,e._titleFontStyle,e._titleFontFamily);Lt.each(e.title,d);i.font=Lt.fontString(u,e._bodyFontStyle,e._bodyFontFamily);Lt.each(e.beforeBody.concat(e.afterBody),d);p=e.displayColors?u+2:0;Lt.each(o,function(t){Lt.each(t.before,d);Lt.each(t.lines,d);Lt.each(t.after,d)});p=0;i.font=Lt.fontString(h,e._footerFontStyle,e._footerFontFamily);Lt.each(e.footer,d);r+=2*e.xPadding;return{width:r,height:n}}function Yi(t,e){var i=t._model;var n=t._chart;var r=t._chart.chartArea;var o="center";var a="center";if(i.y<e.height){a="top"}else if(i.y>n.height-e.height){a="bottom"}var s,l;var c,u;var h;var p=(r.left+r.right)/2;var d=(r.top+r.bottom)/2;if(a==="center"){s=function(t){return t<=p};l=function(t){return t>p}}else{s=function(t){return t<=e.width/2};l=function(t){return t>=n.width-e.width/2}}c=function(t){return t+e.width+i.caretSize+i.caretPadding>n.width};u=function(t){return t-e.width-i.caretSize-i.caretPadding<0};h=function(t){return t<=d?"top":"bottom"};if(s(i.x)){o="left";if(c(i.x)){o="center";a=h(i.y)}}else if(l(i.x)){o="right";if(u(i.x)){o="center";a=h(i.y)}}var f=t._options;return{xAlign:f.xAlign?f.xAlign:o,yAlign:f.yAlign?f.yAlign:a}}function Ji(t,e,i,n){var r=t.x;var o=t.y;var a=t.caretSize;var s=t.caretPadding;var l=t.cornerRadius;var c=i.xAlign;var u=i.yAlign;var h=a+s;var p=l+s;if(c==="right"){r-=e.width}else if(c==="center"){r-=e.width/2;if(r+e.width>n.width){r=n.width-e.width}if(r<0){r=0}}if(u==="top"){o+=h}else if(u==="bottom"){o-=e.height+h}else{o-=e.height/2}if(u==="center"){if(c==="left"){r+=h}else if(c==="right"){r-=h}}else if(c==="left"){r-=p}else if(c==="right"){r+=p}return{x:r,y:o}}function Xi(t,e){return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-t.xPadding:t.x+t.xPadding}function Qi(t){return Wi([],Vi(t))}var tn,en,nn=Et.extend({initialize:function(){this._model=$i(this._options);this._lastActive=[]},getTitle:function(){var t=this;var e=t._options;var i=e.callbacks;var n=i.beforeTitle.apply(t,arguments);var r=i.title.apply(t,arguments);var o=i.afterTitle.apply(t,arguments);var a=[];a=Wi(a,Vi(n));a=Wi(a,Vi(r));a=Wi(a,Vi(o));return a},getBeforeBody:function(){return Qi(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,i){var n=this;var r=n._options.callbacks;var o=[];Lt.each(t,function(t){var e={before:[],lines:[],after:[]};Wi(e.before,Vi(r.beforeLabel.call(n,t,i)));Wi(e.lines,r.label.call(n,t,i));Wi(e.after,Vi(r.afterLabel.call(n,t,i)));o.push(e)});return o},getAfterBody:function(){return Qi(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this;var e=t._options.callbacks;var i=e.beforeFooter.apply(t,arguments);var n=e.footer.apply(t,arguments);var r=e.afterFooter.apply(t,arguments);var o=[];o=Wi(o,Vi(i));o=Wi(o,Vi(n));o=Wi(o,Vi(r));return o},update:function(t){var e=this;var i=e._options;var n=e._model;var r=e._model=$i(i);var o=e._active;var a=e._data;var s={xAlign:n.xAlign,yAlign:n.yAlign};var l={x:n.x,y:n.y};var c={width:n.width,height:n.height};var u={x:n.caretX,y:n.caretY};var h,p;if(o.length){r.opacity=1;var d=[];var f=[];u=Zi[i.position].call(e,o,e._eventPosition);var m=[];for(h=0,p=o.length;h<p;++h){m.push(qi(o[h]))}if(i.filter){m=m.filter(function(t){return i.filter(t,a)})}if(i.itemSort){m=m.sort(function(t,e){return i.itemSort(t,e,a)})}Lt.each(m,function(t){d.push(i.callbacks.labelColor.call(e,t,e._chart));f.push(i.callbacks.labelTextColor.call(e,t,e._chart))});r.title=e.getTitle(m,a);r.beforeBody=e.getBeforeBody(m,a);r.body=e.getBody(m,a);r.afterBody=e.getAfterBody(m,a);r.footer=e.getFooter(m,a);r.x=u.x;r.y=u.y;r.caretPadding=i.caretPadding;r.labelColors=d;r.labelTextColors=f;r.dataPoints=m;c=Ki(this,r);s=Yi(this,c);l=Ji(r,c,s,e._chart)}else{r.opacity=0}r.xAlign=s.xAlign;r.yAlign=s.yAlign;r.x=l.x;r.y=l.y;r.width=c.width;r.height=c.height;r.caretX=u.x;r.caretY=u.y;e._model=r;if(t&&i.custom){i.custom.call(e,r)}return e},drawCaret:function(t,e){var i=this._chart.ctx;var n=this._view;var r=this.getCaretPosition(t,e,n);i.lineTo(r.x1,r.y1);i.lineTo(r.x2,r.y2);i.lineTo(r.x3,r.y3)},getCaretPosition:function(t,e,i){var n,r,o,a,s,l;var c=i.caretSize;var u=i.cornerRadius;var h=i.xAlign;var p=i.yAlign;var d=t.x;var f=t.y;var m=e.width;var g=e.height;if(p==="center"){s=f+g/2;if(h==="left"){n=d;r=n-c;o=n;a=s+c;l=s-c}else{n=d+m;r=n+c;o=n;a=s-c;l=s+c}}else{if(h==="left"){r=d+u+c;n=r-c;o=r+c}else if(h==="right"){r=d+m-u-c;n=r-c;o=r+c}else{r=i.caretX;n=r-c;o=r+c}if(p==="top"){a=f;s=a-c;l=a}else{a=f+g;s=a+c;l=a;var v=o;o=n;n=v}}return{x1:n,x2:r,x3:o,y1:a,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;var r=n.length;var o,a,s;if(r){var l=Gi(e.rtl,e.x,e.width);t.x=Xi(e,e._titleAlign);i.textAlign=l.textAlign(e._titleAlign);i.textBaseline="middle";o=e.titleFontSize;a=e.titleSpacing;i.fillStyle=e.titleFontColor;i.font=Lt.fontString(o,e._titleFontStyle,e._titleFontFamily);for(s=0;s<r;++s){i.fillText(n[s],l.x(t.x),t.y+o/2);t.y+=o+a;if(s+1===r){t.y+=e.titleMarginBottom-a}}}},drawBody:function(e,t,i){var n=t.bodyFontSize;var r=t.bodySpacing;var o=t._bodyAlign;var a=t.body;var s=t.displayColors;var l=0;var c=s?Xi(t,"left"):0;var u=Gi(t.rtl,t.x,t.width);var h=function(t){i.fillText(t,u.x(e.x+l),e.y+n/2);e.y+=n+r};var p,d,f,m,g,v,_,y;var b=u.textAlign(o);i.textAlign=o;i.textBaseline="middle";i.font=Lt.fontString(n,t._bodyFontStyle,t._bodyFontFamily);e.x=Xi(t,b);i.fillStyle=t.bodyFontColor;Lt.each(t.beforeBody,h);l=s&&b!=="right"?o==="center"?n/2+1:n+2:0;for(g=0,_=a.length;g<_;++g){p=a[g];d=t.labelTextColors[g];f=t.labelColors[g];i.fillStyle=d;Lt.each(p.before,h);m=p.lines;for(v=0,y=m.length;v<y;++v){if(s){var x=u.x(c);i.fillStyle=t.legendColorBackground;i.fillRect(u.leftForLtr(x,n),e.y,n,n);i.lineWidth=1;i.strokeStyle=f.borderColor;i.strokeRect(u.leftForLtr(x,n),e.y,n,n);i.fillStyle=f.backgroundColor;i.fillRect(u.leftForLtr(u.xPlus(x,1),n-2),e.y+1,n-2,n-2);i.fillStyle=d}h(m[v])}Lt.each(p.after,h)}l=0;Lt.each(t.afterBody,h);e.y-=r},drawFooter:function(t,e,i){var n=e.footer;var r=n.length;var o,a;if(r){var s=Gi(e.rtl,e.x,e.width);t.x=Xi(e,e._footerAlign);t.y+=e.footerMarginTop;i.textAlign=s.textAlign(e._footerAlign);i.textBaseline="middle";o=e.footerFontSize;i.fillStyle=e.footerFontColor;i.font=Lt.fontString(o,e._footerFontStyle,e._footerFontFamily);for(a=0;a<r;++a){i.fillText(n[a],s.x(t.x),t.y+o/2);t.y+=o+e.footerSpacing}}},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor;i.strokeStyle=e.borderColor;i.lineWidth=e.borderWidth;var r=e.xAlign;var o=e.yAlign;var a=t.x;var s=t.y;var l=n.width;var c=n.height;var u=e.cornerRadius;i.beginPath();i.moveTo(a+u,s);if(o==="top"){this.drawCaret(t,n)}i.lineTo(a+l-u,s);i.quadraticCurveTo(a+l,s,a+l,s+u);if(o==="center"&&r==="right"){this.drawCaret(t,n)}i.lineTo(a+l,s+c-u);i.quadraticCurveTo(a+l,s+c,a+l-u,s+c);if(o==="bottom"){this.drawCaret(t,n)}i.lineTo(a+u,s+c);i.quadraticCurveTo(a,s+c,a,s+c-u);if(o==="center"&&r==="left"){this.drawCaret(t,n)}i.lineTo(a,s+u);i.quadraticCurveTo(a,s,a+u,s);i.closePath();i.fill();if(e.borderWidth>0){i.stroke()}},draw:function(){var t=this._chart.ctx;var e=this._view;if(e.opacity===0){return}var i={width:e.width,height:e.height};var n={x:e.x,y:e.y};var r=Math.abs(e.opacity<.001)?0:e.opacity;var o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;if(this._options.enabled&&o){t.save();t.globalAlpha=r;this.drawBackground(n,e,t,i);n.y+=e.yPadding;Lt.rtl.overrideTextDirection(t,e.textDirection);this.drawTitle(n,e,t);this.drawBody(n,e,t);this.drawFooter(n,e,t);Lt.rtl.restoreTextDirection(t,e.textDirection);t.restore()}},handleEvent:function(t){var e=this;var i=e._options;var n=false;e._lastActive=e._lastActive||[];if(t.type==="mouseout"){e._active=[]}else{e._active=e._chart.getElementsAtEventForMode(t,i.mode,i);if(i.reverse){e._active.reverse()}}n=!Lt.arrayEquals(e._active,e._lastActive);if(n){e._lastActive=e._active;if(i.enabled||i.custom){e._eventPosition={x:t.x,y:t.y};e.update(true);e.pivot()}}return n}});nn.positioners=Zi;var rn=Lt.valueOrDefault;function on(){return Lt.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if(t==="xAxes"||t==="yAxes"){var r=i[t].length;var o,a,s;if(!e[t]){e[t]=[]}for(o=0;o<r;++o){s=i[t][o];a=rn(s.type,t==="xAxes"?"category":"linear");if(o>=e[t].length){e[t].push({})}if(!e[t][o].type||s.type&&s.type!==e[t][o].type){Lt.merge(e[t][o],[Ui.getScaleDefaults(a),s])}else{Lt.merge(e[t][o],s)}}}else{Lt._merger(t,e,i,n)}}})}function an(){return Lt.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var r=e[t]||{};var o=i[t];if(t==="scales"){e[t]=on(r,o)}else if(t==="scale"){e[t]=Lt.merge(r,[Ui.getScaleDefaults(o.type),o])}else{Lt._merger(t,e,i,n)}}})}function sn(t){t=t||{};var e=t.data=t.data||{};e.datasets=e.datasets||[];e.labels=e.labels||[];t.options=an(pt.global,pt[t.type],t.options||{});return t}function ln(e){var t=e.options;Lt.each(e.scales,function(t){ci.removeBox(e,t)});t=an(pt.global,pt[e.config.type],t);e.options=e.config.options=t;e.ensureScalesHaveIDs();e.buildOrUpdateScales();e.tooltip._options=t.tooltips;e.tooltip.initialize()}function cn(t,e,i){var n;var r=function(t){return t.id===n};do{n=e+i++}while(Lt.findIndex(t,r)>=0);return n}function un(t){return t==="top"||t==="bottom"}function hn(i,n){return function(t,e){return t[i]===e[i]?t[n]-e[n]:t[i]-e[i]}}pt._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:true,animationDuration:400},onClick:null,maintainAspectRatio:true,responsive:true,responsiveAnimationDuration:0});var pn=function(t,e){this.construct(t,e);return this};Lt.extend(pn.prototype,{construct:function(t,e){var i=this;e=sn(e);var n=ji.acquireContext(t,e);var r=n&&n.canvas;var o=r&&r.height;var a=r&&r.width;i.id=Lt.uid();i.ctx=n;i.canvas=r;i.config=e;i.width=a;i.height=o;i.aspectRatio=o?a/o:null;i.options=e.options;i._bufferedRender=false;i._layers=[];i.chart=i;i.controller=i;pn.instances[i.id]=i;Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}});if(!n||!r){console.error("Failed to create chart: can't acquire context from the given item");return}i.initialize();i.update()},initialize:function(){var t=this;Ni.notify(t,"beforeInit");Lt.retinaScale(t,t.options.devicePixelRatio);t.bindEvents();if(t.options.responsive){t.resize(true)}t.initToolTip();Ni.notify(t,"afterInit");return t},clear:function(){Lt.canvas.clear(this);return this},stop:function(){Bt.cancelAnimation(this);return this},resize:function(t){var e=this;var i=e.options;var n=e.canvas;var r=i.maintainAspectRatio&&e.aspectRatio||null;var o=Math.max(0,Math.floor(Lt.getMaximumWidth(n)));var a=Math.max(0,Math.floor(r?o/r:Lt.getMaximumHeight(n)));if(e.width===o&&e.height===a){return}n.width=e.width=o;n.height=e.height=a;n.style.width=o+"px";n.style.height=a+"px";Lt.retinaScale(e,i.devicePixelRatio);if(!t){var s={width:o,height:a};Ni.notify(e,"resize",[s]);if(i.onResize){i.onResize(e,s)}e.stop();e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options;var i=t.scales||{};var e=t.scale;Lt.each(i.xAxes,function(t,e){if(!t.id){t.id=cn(i.xAxes,"x-axis-",e)}});Lt.each(i.yAxes,function(t,e){if(!t.id){t.id=cn(i.yAxes,"y-axis-",e)}});if(e){e.id=e.id||"scale"}},buildOrUpdateScales:function(){var a=this;var t=a.options;var s=a.scales||{};var e=[];var l=Object.keys(s).reduce(function(t,e){t[e]=false;return t},{});if(t.scales){e=e.concat((t.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))}if(t.scale){e.push({options:t.scale,dtype:"radialLinear",isDefault:true,dposition:"chartArea"})}Lt.each(e,function(t){var e=t.options;var i=e.id;var n=rn(e.type,t.dtype);if(un(e.position)!==un(t.dposition)){e.position=t.dposition}l[i]=true;var r=null;if(i in s&&s[i].type===n){r=s[i];r.options=e;r.ctx=a.ctx;r.chart=a}else{var o=Ui.getScaleConstructor(n);if(!o){return}r=new o({id:i,type:n,options:e,ctx:a.ctx,chart:a});s[r.id]=r}r.mergeTicksOptions();if(t.isDefault){a.scale=r}});Lt.each(l,function(t,e){if(!t){delete s[e]}});a.scales=s;Ui.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this;var e=[];var i=t.data.datasets;var n,r;for(n=0,r=i.length;n<r;n++){var o=i[n];var a=t.getDatasetMeta(n);var s=o.type||t.config.type;if(a.type&&a.type!==s){t.destroyDatasetMeta(n);a=t.getDatasetMeta(n)}a.type=s;a.order=o.order||0;a.index=n;if(a.controller){a.controller.updateIndex(n);a.controller.linkScales()}else{var l=Ge[a.type];if(l===undefined){throw new Error('"'+a.type+'" is not a chart type.')}a.controller=new l(t,n);e.push(a.controller)}}return e},resetElements:function(){var i=this;Lt.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.reset()},i)},reset:function(){this.resetElements();this.tooltip.initialize()},update:function(t){var e=this;var i,n;if(!t||typeof t!=="object"){t={duration:t,lazy:arguments[1]}}ln(e);Ni._invalidate(e);if(Ni.notify(e,"beforeUpdate")===false){return}e.tooltip._data=e.data;var r=e.buildOrUpdateControllers();for(i=0,n=e.data.datasets.length;i<n;i++){e.getDatasetMeta(i).controller.buildOrUpdateElements()}e.updateLayout();if(e.options.animation&&e.options.animation.duration){Lt.each(r,function(t){t.reset()})}e.updateDatasets();e.tooltip.initialize();e.lastActive=[];Ni.notify(e,"afterUpdate");e._layers.sort(hn("z","_idx"));if(e._bufferedRender){e._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}}else{e.render(t)}},updateLayout:function(){var e=this;if(Ni.notify(e,"beforeLayout")===false){return}ci.update(this,this.width,this.height);e._layers=[];Lt.each(e.boxes,function(t){if(t._configure){t._configure()}e._layers.push.apply(e._layers,t._layers())},e);e._layers.forEach(function(t,e){t._idx=e});Ni.notify(e,"afterScaleUpdate");Ni.notify(e,"afterLayout")},updateDatasets:function(){var t=this;if(Ni.notify(t,"beforeDatasetsUpdate")===false){return}for(var e=0,i=t.data.datasets.length;e<i;++e){t.updateDataset(e)}Ni.notify(t,"afterDatasetsUpdate")},updateDataset:function(t){var e=this;var i=e.getDatasetMeta(t);var n={meta:i,index:t};if(Ni.notify(e,"beforeDatasetUpdate",[n])===false){return}i.controller._update();Ni.notify(e,"afterDatasetUpdate",[n])},render:function(t){var e=this;if(!t||typeof t!=="object"){t={duration:t,lazy:arguments[1]}}var i=e.options.animation;var n=rn(t.duration,i&&i.duration);var r=t.lazy;if(Ni.notify(e,"beforeRender")===false){return}var o=function(t){Ni.notify(e,"afterRender");Lt.callback(i&&i.onComplete,[t],e)};if(i&&n){var a=new It({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=Lt.easing.effects[e.easing];var n=e.currentStep;var r=n/e.numSteps;t.draw(i(r),r,n)},onAnimationProgress:i.onProgress,onAnimationComplete:o});Bt.addAnimation(e,a,n,r)}else{e.draw();o(new It({numSteps:0,chart:e}))}return e},draw:function(t){var e=this;var i,n;e.clear();if(Lt.isNullOrUndef(t)){t=1}e.transition(t);if(e.width<=0||e.height<=0){return}if(Ni.notify(e,"beforeDraw",[t])===false){return}n=e._layers;for(i=0;i<n.length&&n[i].z<=0;++i){n[i].draw(e.chartArea)}e.drawDatasets(t);for(;i<n.length;++i){n[i].draw(e.chartArea)}e._drawTooltip(t);Ni.notify(e,"afterDraw",[t])},transition:function(t){var e=this;for(var i=0,n=(e.data.datasets||[]).length;i<n;++i){if(e.isDatasetVisible(i)){e.getDatasetMeta(i).controller.transition(t)}}e.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e=this;var i=e.data.datasets||[];var n=[];var r,o;for(r=0,o=i.length;r<o;++r){if(!t||e.isDatasetVisible(r)){n.push(e.getDatasetMeta(r))}}n.sort(hn("order","index"));return n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(true)},drawDatasets:function(t){var e=this;var i,n;if(Ni.notify(e,"beforeDatasetsDraw",[t])===false){return}i=e._getSortedVisibleDatasetMetas();for(n=i.length-1;n>=0;--n){e.drawDataset(i[n],t)}Ni.notify(e,"afterDatasetsDraw",[t])},drawDataset:function(t,e){var i=this;var n={meta:t,index:t.index,easingValue:e};if(Ni.notify(i,"beforeDatasetDraw",[n])===false){return}t.controller.draw(e);Ni.notify(i,"afterDatasetDraw",[n])},_drawTooltip:function(t){var e=this;var i=e.tooltip;var n={tooltip:i,easingValue:t};if(Ni.notify(e,"beforeTooltipDraw",[n])===false){return}i.draw();Ni.notify(e,"afterTooltipDraw",[n])},getElementAtEvent:function(t){return Ye.modes.single(this,t)},getElementsAtEvent:function(t){return Ye.modes.label(this,t,{intersect:true})},getElementsAtXAxis:function(t){return Ye.modes["x-axis"](this,t,{intersect:true})},getElementsAtEventForMode:function(t,e,i){var n=Ye.modes[e];if(typeof n==="function"){return n(this,t,i)}return[]},getDatasetAtEvent:function(t){return Ye.modes.dataset(this,t,{intersect:true})},getDatasetMeta:function(t){var e=this;var i=e.data.datasets[t];if(!i._meta){i._meta={}}var n=i._meta[e.id];if(!n){n=i._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i.order||0,index:t}}return n},getVisibleDatasetCount:function(){var t=0;for(var e=0,i=this.data.datasets.length;e<i;++e){if(this.isDatasetVisible(e)){t++}}return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id;var i=this.data.datasets[t];var n=i._meta&&i._meta[e];if(n){n.controller.destroy();delete i._meta[e]}},destroy:function(){var t=this;var e=t.canvas;var i,n;t.stop();for(i=0,n=t.data.datasets.length;i<n;++i){t.destroyDatasetMeta(i)}if(e){t.unbindEvents();Lt.canvas.clear(t);ji.releaseContext(t.ctx);t.canvas=null;t.ctx=null}Ni.notify(t,"destroy");delete pn.instances[t.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new nn({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this;var i=e._listeners={};var n=function(){e.eventHandler.apply(e,arguments)};Lt.each(e.options.events,function(t){ji.addEventListener(e,t,n);i[t]=n});if(e.options.responsive){n=function(){e.resize()};ji.addEventListener(e,"resize",n);i.resize=n}},unbindEvents:function(){var i=this;var t=i._listeners;if(!t){return}delete i._listeners;Lt.each(t,function(t,e){ji.removeEventListener(i,e,t)})},updateHoverStyle:function(t,e,i){var n=i?"set":"remove";var r,o,a;for(o=0,a=t.length;o<a;++o){r=t[o];if(r){this.getDatasetMeta(r._datasetIndex).controller[n+"HoverStyle"](r)}}if(e==="dataset"){this.getDatasetMeta(t[0]._datasetIndex).controller["_"+n+"DatasetHoverStyle"]()}},eventHandler:function(t){var e=this;var i=e.tooltip;if(Ni.notify(e,"beforeEvent",[t])===false){return}e._bufferedRender=true;e._bufferedRequest=null;var n=e.handleEvent(t);if(i){n=i._start?i.handleEvent(t):n|i.handleEvent(t)}Ni.notify(e,"afterEvent",[t]);var r=e._bufferedRequest;if(r){e.render(r)}else if(n&&!e.animating){e.stop();e.render({duration:e.options.hover.animationDuration,lazy:true})}e._bufferedRender=false;e._bufferedRequest=null;return e},handleEvent:function(t){var e=this;var i=e.options||{};var n=i.hover;var r=false;e.lastActive=e.lastActive||[];if(t.type==="mouseout"){e.active=[]}else{e.active=e.getElementsAtEventForMode(t,n.mode,n)}Lt.callback(i.onHover||i.hover.onHover,[t.native,e.active],e);if(t.type==="mouseup"||t.type==="click"){if(i.onClick){i.onClick.call(e,t.native,e.active)}}if(e.lastActive.length){e.updateHoverStyle(e.lastActive,n.mode,false)}if(e.active.length&&n.mode){e.updateHoverStyle(e.active,n.mode,true)}r=!Lt.arrayEquals(e.active,e.lastActive);e.lastActive=e.active;return r}}),pn.instances={};var dn=pn;(pn.Controller=pn).types={},Lt.configMerge=an,Lt.scaleMerge=on;var fn=function(){Lt.where=function(t,e){if(Lt.isArray(t)&&Array.prototype.filter){return t.filter(e)}var i=[];Lt.each(t,function(t){if(e(t)){i.push(t)}});return i};Lt.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=i===undefined?t:i;for(var n=0,r=t.length;n<r;++n){if(e.call(i,t[n],n,t)){return n}}return-1};Lt.findNextWhere=function(t,e,i){if(Lt.isNullOrUndef(i)){i=-1}for(var n=i+1;n<t.length;n++){var r=t[n];if(e(r)){return r}}};Lt.findPreviousWhere=function(t,e,i){if(Lt.isNullOrUndef(i)){i=t.length}for(var n=i-1;n>=0;n--){var r=t[n];if(e(r)){return r}}};Lt.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};Lt.almostEquals=function(t,e,i){return Math.abs(t-e)<i};Lt.almostWhole=function(t,e){var i=Math.round(t);return i-e<=t&&i+e>=t};Lt.max=function(t){return t.reduce(function(t,e){if(!isNaN(e)){return Math.max(t,e)}return t},Number.NEGATIVE_INFINITY)};Lt.min=function(t){return t.reduce(function(t,e){if(!isNaN(e)){return Math.min(t,e)}return t},Number.POSITIVE_INFINITY)};Lt.sign=Math.sign?function(t){return Math.sign(t)}:function(t){t=+t;if(t===0||isNaN(t)){return t}return t>0?1:-1};Lt.toRadians=function(t){return t*(Math.PI/180)};Lt.toDegrees=function(t){return t*(180/Math.PI)};Lt._decimalPlaces=function(t){if(!Lt.isFinite(t)){return}var e=1;var i=0;while(Math.round(t*e)/e!==t){e*=10;i++}return i};Lt.getAngleFromPoint=function(t,e){var i=e.x-t.x;var n=e.y-t.y;var r=Math.sqrt(i*i+n*n);var o=Math.atan2(n,i);if(o<-.5*Math.PI){o+=2*Math.PI}return{angle:o,distance:r}};Lt.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};Lt.aliasPixel=function(t){return t%2===0?0:.5};Lt._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio;var r=i/2;return Math.round((e-r)*n)/n+r};Lt.splineCurve=function(t,e,i,n){var r=t.skip?e:t;var o=e;var a=i.skip?e:i;var s=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2));var l=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2));var c=s/(s+l);var u=l/(s+l);c=isNaN(c)?0:c;u=isNaN(u)?0:u;var h=n*c;var p=n*u;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+p*(a.x-r.x),y:o.y+p*(a.y-r.y)}}};Lt.EPSILON=Number.EPSILON||1e-14;Lt.splineCurveMonotone=function(t){var e=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}});var i=e.length;var n,r,o,a;for(n=0;n<i;++n){o=e[n];if(o.model.skip){continue}r=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(a&&!a.model.skip){var s=a.model.x-o.model.x;o.deltaK=s!==0?(a.model.y-o.model.y)/s:0}if(!r||r.model.skip){o.mK=o.deltaK}else if(!a||a.model.skip){o.mK=r.deltaK}else if(this.sign(r.deltaK)!==this.sign(o.deltaK)){o.mK=0}else{o.mK=(r.deltaK+o.deltaK)/2}}var l,c,u,h;for(n=0;n<i-1;++n){o=e[n];a=e[n+1];if(o.model.skip||a.model.skip){continue}if(Lt.almostEquals(o.deltaK,0,this.EPSILON)){o.mK=a.mK=0;continue}l=o.mK/o.deltaK;c=a.mK/o.deltaK;h=Math.pow(l,2)+Math.pow(c,2);if(h<=9){continue}u=3/Math.sqrt(h);o.mK=l*u*o.deltaK;a.mK=c*u*o.deltaK}var p;for(n=0;n<i;++n){o=e[n];if(o.model.skip){continue}r=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(r&&!r.model.skip){p=(o.model.x-r.model.x)/3;o.model.controlPointPreviousX=o.model.x-p;o.model.controlPointPreviousY=o.model.y-p*o.mK}if(a&&!a.model.skip){p=(a.model.x-o.model.x)/3;o.model.controlPointNextX=o.model.x+p;o.model.controlPointNextY=o.model.y+p*o.mK}}};Lt.nextItem=function(t,e,i){if(i){return e>=t.length-1?t[0]:t[e+1]}return e>=t.length-1?t[t.length-1]:t[e+1]};Lt.previousItem=function(t,e,i){if(i){return e<=0?t[t.length-1]:t[e-1]}return e<=0?t[0]:t[e-1]};Lt.niceNum=function(t,e){var i=Math.floor(Lt.log10(t));var n=t/Math.pow(10,i);var r;if(e){if(n<1.5){r=1}else if(n<3){r=2}else if(n<7){r=5}else{r=10}}else if(n<=1){r=1}else if(n<=2){r=2}else if(n<=5){r=5}else{r=10}return r*Math.pow(10,i)};Lt.requestAnimFrame=function(){if(typeof window==="undefined"){return function(t){t()}}return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}();Lt.getRelativePosition=function(t,e){var i,n;var r=t.originalEvent||t;var o=t.target||t.srcElement;var a=o.getBoundingClientRect();var s=r.touches;if(s&&s.length>0){i=s[0].clientX;n=s[0].clientY}else{i=r.clientX;n=r.clientY}var l=parseFloat(Lt.getStyle(o,"padding-left"));var c=parseFloat(Lt.getStyle(o,"padding-top"));var u=parseFloat(Lt.getStyle(o,"padding-right"));var h=parseFloat(Lt.getStyle(o,"padding-bottom"));var p=a.right-a.left-l-u;var d=a.bottom-a.top-c-h;i=Math.round((i-a.left-l)/p*o.width/e.currentDevicePixelRatio);n=Math.round((n-a.top-c)/d*o.height/e.currentDevicePixelRatio);return{x:i,y:n}};function u(t,e,i){var n;if(typeof t==="string"){n=parseInt(t,10);if(t.indexOf("%")!==-1){n=n/100*e.parentNode[i]}}else{n=t}return n}function h(t){return t!==undefined&&t!==null&&t!=="none"}function e(t,e,i){var n=document.defaultView;var r=Lt._getParentNode(t);var o=n.getComputedStyle(t)[e];var a=n.getComputedStyle(r)[e];var s=h(o);var l=h(a);var c=Number.POSITIVE_INFINITY;if(s||l){return Math.min(s?u(o,t,i):c,l?u(a,r,i):c)}return"none"}Lt.getConstraintWidth=function(t){return e(t,"max-width","clientWidth")};Lt.getConstraintHeight=function(t){return e(t,"max-height","clientHeight")};Lt._calculatePadding=function(t,e,i){e=Lt.getStyle(t,e);return e.indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)};Lt._getParentNode=function(t){var e=t.parentNode;if(e&&e.toString()==="[object ShadowRoot]"){e=e.host}return e};Lt.getMaximumWidth=function(t){var e=Lt._getParentNode(t);if(!e){return t.clientWidth}var i=e.clientWidth;var n=Lt._calculatePadding(e,"padding-left",i);var r=Lt._calculatePadding(e,"padding-right",i);var o=i-n-r;var a=Lt.getConstraintWidth(t);return isNaN(a)?o:Math.min(o,a)};Lt.getMaximumHeight=function(t){var e=Lt._getParentNode(t);if(!e){return t.clientHeight}var i=e.clientHeight;var n=Lt._calculatePadding(e,"padding-top",i);var r=Lt._calculatePadding(e,"padding-bottom",i);var o=i-n-r;var a=Lt.getConstraintHeight(t);return isNaN(a)?o:Math.min(o,a)};Lt.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)};Lt.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||typeof window!=="undefined"&&window.devicePixelRatio||1;if(i===1){return}var n=t.canvas;var r=t.height;var o=t.width;n.height=r*i;n.width=o*i;t.ctx.scale(i,i);if(!n.style.height&&!n.style.width){n.style.height=r+"px";n.style.width=o+"px"}};Lt.fontString=function(t,e,i){return e+" "+t+"px "+i};Lt.longestText=function(t,e,i,n){n=n||{};var r=n.data=n.data||{};var o=n.garbageCollect=n.garbageCollect||[];if(n.font!==e){r=n.data={};o=n.garbageCollect=[];n.font=e}t.font=e;var a=0;var s=i.length;var l,c,u,h,p;for(l=0;l<s;l++){h=i[l];if(h!==undefined&&h!==null&&Lt.isArray(h)!==true){a=Lt.measureText(t,r,o,a,h)}else if(Lt.isArray(h)){for(c=0,u=h.length;c<u;c++){p=h[c];if(p!==undefined&&p!==null&&!Lt.isArray(p)){a=Lt.measureText(t,r,o,a,p)}}}}var d=o.length/2;if(d>i.length){for(l=0;l<d;l++){delete r[o[l]]}o.splice(0,d)}return a};Lt.measureText=function(t,e,i,n,r){var o=e[r];if(!o){o=e[r]=t.measureText(r).width;i.push(r)}if(o>n){n=o}return n};Lt.numberOfLabelLines=function(t){var e=1;Lt.each(t,function(t){if(Lt.isArray(t)){if(t.length>e){e=t.length}}});return e};Lt.color=!X?function(t){console.error("Color.js not found!");return t}:function(t){if(t instanceof CanvasGradient){t=pt.global.defaultColor}return X(t)};Lt.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:Lt.color(t).saturate(.5).darken(.1).rgbString()}};function mn(){throw new Error("This method is not implemented: either no adapter can "+"be found or an incomplete integration was provided.")}function gn(t){this.options=t||{}}Lt.extend(gn.prototype,{formats:mn,parse:mn,format:mn,add:mn,diff:mn,startOf:mn,endOf:mn,_create:function(t){return t}}),gn.override=function(t){Lt.extend(gn.prototype,t)};var vn,_n={_date:gn},yn={formatters:{values:function(t){return Lt.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];if(Math.abs(n)>1){if(t!==Math.floor(t)){n=t-Math.floor(t)}}var r=Lt.log10(Math.abs(n));var o="";if(t!==0){var a=Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]));if(a<1e-4){var s=Lt.log10(Math.abs(t));var l=Math.floor(s)-Math.floor(r);l=Math.max(Math.min(l,20),0);o=t.toExponential(l)}else{var c=-1*Math.floor(r);c=Math.max(Math.min(c,20),0);o=t.toFixed(c)}}else{o="0"}return o},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(Lt.log10(t)));if(t===0){return"0"}else if(n===1||n===2||n===5||e===0||e===i.length-1){return t.toExponential()}return""}}},bn=Lt.isArray,xn=Lt.isNullOrUndef,wn=Lt.valueOrDefault,kn=Lt.valueAtIndexOrDefault;function Ln(t,e){var i=[];var n=t.length/e;var r=0;var o=t.length;for(;r<o;r+=n){i.push(t[Math.floor(r)])}return i}function Cn(t,e,i){var n=t.getTicks().length;var r=Math.min(e,n-1);var o=t.getPixelForTick(r);var a=t._startPixel;var s=t._endPixel;var l=1e-6;var c;if(i){if(n===1){c=Math.max(o-a,s-o)}else if(e===0){c=(t.getPixelForTick(1)-o)/2}else{c=(o-t.getPixelForTick(r-1))/2}o+=r<e?c:-c;if(o<a-l||o>s+l){return}}return o}function Mn(t,r){Lt.each(t,function(t){var e=t.gc;var i=e.length/2;var n;if(i>r){for(n=0;n<i;++n){delete t.data[e[n]]}e.splice(0,i)}})}function Sn(t,e,i,n){var r=i.length;var o=[];var a=[];var s=[];var l,c,u,h,p,d,f,m,g,v,_,y,b;for(l=0;l<r;++l){h=i[l].label;p=i[l].major?e.major:e.minor;t.font=d=p.string;f=n[d]=n[d]||{data:{},gc:[]};m=p.lineHeight;g=v=0;if(!xn(h)&&!bn(h)){g=Lt.measureText(t,f.data,f.gc,g,h);v=m}else if(bn(h)){for(c=0,u=h.length;c<u;++c){_=h[c];if(!xn(_)&&!bn(_)){g=Lt.measureText(t,f.data,f.gc,g,_);v+=m}}}o.push(g);a.push(v);s.push(m/2)}Mn(n,r);y=o.indexOf(Math.max.apply(null,o));b=a.indexOf(Math.max.apply(null,a));function x(t){return{width:o[t]||0,height:a[t]||0,offset:s[t]||0}}return{first:x(0),last:x(r-1),widest:x(y),highest:x(b)}}function Tn(t){return t.drawTicks?t.tickMarkLength:0}function Pn(t){var e,i;if(!t.display){return 0}e=Lt.options._parseFont(t);i=Lt.options.toPadding(t.padding);return e.lineHeight+i.height}function Dn(t,e){return Lt.extend(Lt.options._parseFont({fontFamily:wn(e.fontFamily,t.fontFamily),fontSize:wn(e.fontSize,t.fontSize),fontStyle:wn(e.fontStyle,t.fontStyle),lineHeight:wn(e.lineHeight,t.lineHeight)}),{color:Lt.options.resolve([e.fontColor,t.fontColor,pt.global.defaultFontColor])})}function An(t){var e=Dn(t,t.minor);var i=t.major.enabled?Dn(t,t.major):e;return{minor:e,major:i}}function En(t){var e=[];var i,n,r;for(n=0,r=t.length;n<r;++n){i=t[n];if(typeof i._index!=="undefined"){e.push(i)}}return e}function On(t){var e=t.length;var i,n;if(e<2){return false}for(n=t[0],i=1;i<e;++i){if(t[i]-t[i-1]!==n){return false}}return n}function In(t,e,i,n){var r=On(t);var o=(e.length-1)/n;var a,s,l,c;if(!r){return Math.max(o,1)}a=Lt.math._factorize(r);for(l=0,c=a.length-1;l<c;l++){s=a[l];if(s>o){return s}}return Math.max(o,1)}function Bn(t){var e=[];var i,n;for(i=0,n=t.length;i<n;i++){if(t[i].major){e.push(i)}}return e}function zn(t,e,i){var n=0;var r=e[0];var o,a;i=Math.ceil(i);for(o=0;o<t.length;o++){a=t[o];if(o===r){a._index=o;n++;r=e[n*i]}else{delete a.label}}}function Rn(t,e,i,n){var r=wn(i,0);var o=Math.min(wn(n,t.length),t.length);var a=0;var s,l,c,u;e=Math.ceil(e);if(n){s=n-i;e=s/Math.floor(s/e)}u=r;while(u<0){a++;u=Math.round(r+a*e)}for(l=Math.max(r,0);l<o;l++){c=t[l];if(l===u){c._index=l;a++;u=Math.round(r+a*e)}else{delete c.label}}}pt._set("scale",{display:true,position:"left",offset:false,gridLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:false,borderDash:[],borderDashOffset:0},scaleLabel:{display:false,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:0,reverse:false,display:true,autoSkip:true,autoSkipPadding:0,labelOffset:0,callback:yn.formatters.values,minor:{},major:{}}});var Fn=Et.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){Lt.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n=this;var r=n.options.ticks;var o=r.sampleSize;var a,s,l,c,u;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=Lt.extend({left:0,right:0,top:0,bottom:0},i);n._ticks=null;n.ticks=null;n._labelSizes=null;n._maxLabelLines=0;n.longestLabelWidth=0;n.longestTextCache=n.longestTextCache||{};n._gridLineItems=null;n._labelItems=null;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeDataLimits();n.determineDataLimits();n.afterDataLimits();n.beforeBuildTicks();c=n.buildTicks()||[];c=n.afterBuildTicks(c)||c;if((!c||!c.length)&&n.ticks){c=[];for(a=0,s=n.ticks.length;a<s;++a){c.push({value:n.ticks[a],major:false})}}n._ticks=c;u=o<c.length;l=n._convertTicksToLabels(u?Ln(c,o):c);n._configure();n.beforeCalculateTickRotation();n.calculateTickRotation();n.afterCalculateTickRotation();n.beforeFit();n.fit();n.afterFit();n._ticksToDraw=r.display&&(r.autoSkip||r.source==="auto")?n._autoSkip(c):c;if(u){l=n._convertTicksToLabels(n._ticksToDraw)}n.ticks=l;n.afterUpdate();return n.minSize},_configure:function(){var t=this;var e=t.options.ticks.reverse;var i,n;if(t.isHorizontal()){i=t.left;n=t.right}else{i=t.top;n=t.bottom;e=!e}t._startPixel=i;t._endPixel=n;t._reversePixels=e;t._length=n-i},afterUpdate:function(){Lt.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){Lt.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0},afterSetDimensions:function(){Lt.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){Lt.callback(this.options.beforeDataLimits,[this])},determineDataLimits:Lt.noop,afterDataLimits:function(){Lt.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){Lt.callback(this.options.beforeBuildTicks,[this])},buildTicks:Lt.noop,afterBuildTicks:function(t){var e=this;if(bn(t)&&t.length){return Lt.callback(e.options.afterBuildTicks,[e,t])}e.ticks=Lt.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks;return t},beforeTickToLabelConversion:function(){Lt.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this;var e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){Lt.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){Lt.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTicks().length;var r=i.minRotation||0;var o=i.maxRotation;var a=r;var s,l,c,u,h,p,d;if(!t._isVisible()||!i.display||r>=o||n<=1||!t.isHorizontal()){t.labelRotation=r;return}s=t._getLabelSizes();l=s.widest.width;c=s.highest.height-s.highest.offset;u=Math.min(t.maxWidth,t.chart.width-l);h=e.offset?t.maxWidth/n:u/(n-1);if(l+6>h){h=u/(n-(e.offset?.5:1));p=t.maxHeight-Tn(e.gridLines)-i.padding-Pn(e.scaleLabel);d=Math.sqrt(l*l+c*c);a=Lt.toDegrees(Math.min(Math.asin(Math.min((s.highest.height+6)/h,1)),Math.asin(Math.min(p/d,1))-Math.asin(c/d)));a=Math.max(r,Math.min(o,a))}t.labelRotation=a},afterCalculateTickRotation:function(){Lt.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){Lt.callback(this.options.beforeFit,[this])},fit:function(){var t=this;var e=t.minSize={width:0,height:0};var i=t.chart;var n=t.options;var r=n.ticks;var o=n.scaleLabel;var a=n.gridLines;var s=t._isVisible();var l=n.position==="bottom";var c=t.isHorizontal();if(c){e.width=t.maxWidth}else if(s){e.width=Tn(a)+Pn(o)}if(!c){e.height=t.maxHeight}else if(s){e.height=Tn(a)+Pn(o)}if(r.display&&s){var u=An(r);var h=t._getLabelSizes();var p=h.first;var d=h.last;var f=h.widest;var m=h.highest;var g=u.minor.lineHeight*.4;var v=r.padding;if(c){var _=t.labelRotation!==0;var y=Lt.toRadians(t.labelRotation);var b=Math.cos(y);var x=Math.sin(y);var w=x*f.width+b*(m.height-(_?m.offset:0))+(_?0:g);e.height=Math.min(t.maxHeight,e.height+w+v);var k=t.getPixelForTick(0)-t.left;var L=t.right-t.getPixelForTick(t.getTicks().length-1);var C,M;if(_){C=l?b*p.width+x*p.offset:x*(p.height-p.offset);M=l?x*(d.height-d.offset):b*d.width+x*d.offset}else{C=p.width/2;M=d.width/2}t.paddingLeft=Math.max((C-k)*t.width/(t.width-k),0)+3;t.paddingRight=Math.max((M-L)*t.width/(t.width-L),0)+3}else{var S=r.mirror?0:f.width+v+g;e.width=Math.min(t.maxWidth,e.width+S);t.paddingTop=p.height/2;t.paddingBottom=d.height/2}}t.handleMargins();if(c){t.width=t._length=i.width-t.margins.left-t.margins.right;t.height=e.height}else{t.width=e.width;t.height=t._length=i.height-t.margins.top-t.margins.bottom}},handleMargins:function(){var t=this;if(t.margins){t.margins.left=Math.max(t.paddingLeft,t.margins.left);t.margins.top=Math.max(t.paddingTop,t.margins.top);t.margins.right=Math.max(t.paddingRight,t.margins.right);t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom)}},afterFit:function(){Lt.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(xn(t)){return NaN}if((typeof t==="number"||t instanceof Number)&&!isFinite(t)){return NaN}if(t){if(this.isHorizontal()){if(t.x!==undefined){return this.getRightValue(t.x)}}else if(t.y!==undefined){return this.getRightValue(t.y)}}return t},_convertTicksToLabels:function(t){var e=this;var i,n,r;e.ticks=t.map(function(t){return t.value});e.beforeTickToLabelConversion();i=e.convertTicksToLabels(t)||e.ticks;e.afterTickToLabelConversion();for(n=0,r=t.length;n<r;++n){t[n].label=i[n]}return i},_getLabelSizes:function(){var t=this;var e=t._labelSizes;if(!e){t._labelSizes=e=Sn(t.ctx,An(t.options.ticks),t.getTicks(),t.longestTextCache);t.longestLabelWidth=e.widest.width}return e},_parseValue:function(t){var e,i,n,r;if(bn(t)){e=+this.getRightValue(t[0]);i=+this.getRightValue(t[1]);n=Math.min(e,i);r=Math.max(e,i)}else{t=+this.getRightValue(t);e=undefined;i=t;n=t;r=t}return{min:n,max:r,start:e,end:i}},_getScaleLabel:function(t){var e=this._parseValue(t);if(e.start!==undefined){return"["+e.start+", "+e.end+"]"}return+this.getRightValue(t)},getLabelForIndex:Lt.noop,getPixelForValue:Lt.noop,getValueForPixel:Lt.noop,getPixelForTick:function(t){var e=this;var i=e.options.offset;var n=e._ticks.length;var r=1/Math.max(n-(i?0:1),1);return t<0||t>n-1?null:e.getPixelForDecimal(t*r+(i?r/2:0))},getPixelForDecimal:function(t){var e=this;if(e._reversePixels){t=1-t}return e._startPixel+t*e._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this;var e=t.min;var i=t.max;return t.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0},_autoSkip:function(t){var e=this;var i=e.options.ticks;var n=e._length;var r=i.maxTicksLimit||n/e._tickSize()+1;var o=i.major.enabled?Bn(t):[];var a=o.length;var s=o[0];var l=o[a-1];var c,u,h,p;if(a>r){zn(t,o,a/r);return En(t)}h=In(o,t,n,r);if(a>0){for(c=0,u=a-1;c<u;c++){Rn(t,h,o[c],o[c+1])}p=a>1?(l-s)/(a-1):null;Rn(t,h,Lt.isNullOrUndef(p)?0:s-p,s);Rn(t,h,l,Lt.isNullOrUndef(p)?t.length:l+p);return En(t)}Rn(t,h);return En(t)},_tickSize:function(){var t=this;var e=t.options.ticks;var i=Lt.toRadians(t.labelRotation);var n=Math.abs(Math.cos(i));var r=Math.abs(Math.sin(i));var o=t._getLabelSizes();var a=e.autoSkipPadding||0;var s=o?o.widest.width+a:0;var l=o?o.highest.height+a:0;return t.isHorizontal()?l*n>s*r?s/n:l/r:l*r<s*n?l/n:s/r},_isVisible:function(){var t=this;var e=t.chart;var i=t.options.display;var n,r,o;if(i!=="auto"){return!!i}for(n=0,r=e.data.datasets.length;n<r;++n){if(e.isDatasetVisible(n)){o=e.getDatasetMeta(n);if(o.xAxisID===t.id||o.yAxisID===t.id){return true}}}return false},_computeGridLineItems:function(t){var e=this;var i=e.chart;var n=e.options;var r=n.gridLines;var o=n.position;var a=r.offsetGridLines;var s=e.isHorizontal();var l=e._ticksToDraw;var c=l.length+(a?1:0);var u=Tn(r);var h=[];var p=r.drawBorder?kn(r.lineWidth,0,0):0;var d=p/2;var f=Lt._alignPixel;var m=function(t){return f(i,t,p)};var g,v,_,y,b;var x,w,k,L,C,M,S,T,P,D,A,E;if(o==="top"){g=m(e.bottom);w=e.bottom-u;L=g-d;M=m(t.top)+d;T=t.bottom}else if(o==="bottom"){g=m(e.top);M=t.top;T=m(t.bottom)-d;w=g+d;L=e.top+u}else if(o==="left"){g=m(e.right);x=e.right-u;k=g-d;C=m(t.left)+d;S=t.right}else{g=m(e.left);C=t.left;S=m(t.right)-d;x=g+d;k=e.left+u}for(v=0;v<c;++v){_=l[v]||{};if(xn(_.label)&&v<l.length){continue}if(v===e.zeroLineIndex&&n.offset===a){P=r.zeroLineWidth;D=r.zeroLineColor;A=r.zeroLineBorderDash||[];E=r.zeroLineBorderDashOffset||0}else{P=kn(r.lineWidth,v,1);D=kn(r.color,v,"rgba(0,0,0,0.1)");A=r.borderDash||[];E=r.borderDashOffset||0}y=Cn(e,_._index||v,a);if(y===undefined){continue}b=f(i,y,P);if(s){x=k=C=S=b}else{w=L=M=T=b}h.push({tx1:x,ty1:w,tx2:k,ty2:L,x1:C,y1:M,x2:S,y2:T,width:P,color:D,borderDash:A,borderDashOffset:E})}h.ticksLength=c;h.borderValue=g;return h},_computeLabelItems:function(){var t=this;var e=t.options;var i=e.ticks;var n=e.position;var r=i.mirror;var o=t.isHorizontal();var a=t._ticksToDraw;var s=An(i);var l=i.padding;var c=Tn(e.gridLines);var u=-Lt.toRadians(t.labelRotation);var h=[];var p,d,f,m,g,v,_,y,b,x,w,k;if(n==="top"){v=t.bottom-c-l;_=!u?"center":"left"}else if(n==="bottom"){v=t.top+c+l;_=!u?"center":"right"}else if(n==="left"){g=t.right-(r?0:c)-l;_=r?"left":"right"}else{g=t.left+(r?0:c)+l;_=r?"right":"left"}for(p=0,d=a.length;p<d;++p){f=a[p];m=f.label;if(xn(m)){continue}y=t.getPixelForTick(f._index||p)+i.labelOffset;b=f.major?s.major:s.minor;x=b.lineHeight;w=bn(m)?m.length:1;if(o){g=y;k=n==="top"?((!u?.5:1)-w)*x:(!u?.5:0)*x}else{v=y;k=(1-w)*x/2}h.push({x:g,y:v,rotation:u,label:m,font:b,textOffset:k,textAlign:_})}return h},_drawGrid:function(t){var e=this;var i=e.options.gridLines;if(!i.display){return}var n=e.ctx;var r=e.chart;var o=Lt._alignPixel;var a=i.drawBorder?kn(i.lineWidth,0,0):0;var s=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));var l,c,u,h,p;for(u=0,h=s.length;u<h;++u){p=s[u];l=p.width;c=p.color;if(l&&c){n.save();n.lineWidth=l;n.strokeStyle=c;if(n.setLineDash){n.setLineDash(p.borderDash);n.lineDashOffset=p.borderDashOffset}n.beginPath();if(i.drawTicks){n.moveTo(p.tx1,p.ty1);n.lineTo(p.tx2,p.ty2)}if(i.drawOnChartArea){n.moveTo(p.x1,p.y1);n.lineTo(p.x2,p.y2)}n.stroke();n.restore()}}if(a){var d=a;var f=kn(i.lineWidth,s.ticksLength-1,1);var m=s.borderValue;var g,v,_,y;if(e.isHorizontal()){g=o(r,e.left,d)-d/2;v=o(r,e.right,f)+f/2;_=y=m}else{_=o(r,e.top,d)-d/2;y=o(r,e.bottom,f)+f/2;g=v=m}n.lineWidth=a;n.strokeStyle=kn(i.color,0);n.beginPath();n.moveTo(g,_);n.lineTo(v,y);n.stroke()}},_drawLabels:function(){var t=this;var e=t.options.ticks;if(!e.display){return}var i=t.ctx;var n=t._labelItems||(t._labelItems=t._computeLabelItems());var r,o,a,s,l,c,u,h;for(r=0,a=n.length;r<a;++r){l=n[r];c=l.font;i.save();i.translate(l.x,l.y);i.rotate(l.rotation);i.font=c.string;i.fillStyle=c.color;i.textBaseline="middle";i.textAlign=l.textAlign;u=l.label;h=l.textOffset;if(bn(u)){for(o=0,s=u.length;o<s;++o){i.fillText(""+u[o],0,h);h+=c.lineHeight}}else{i.fillText(u,0,h)}i.restore()}},_drawTitle:function(){var t=this;var e=t.ctx;var i=t.options;var n=i.scaleLabel;if(!n.display){return}var r=wn(n.fontColor,pt.global.defaultFontColor);var o=Lt.options._parseFont(n);var a=Lt.options.toPadding(n.padding);var s=o.lineHeight/2;var l=i.position;var c=0;var u,h;if(t.isHorizontal()){u=t.left+t.width/2;h=l==="bottom"?t.bottom-s-a.bottom:t.top+s+a.top}else{var p=l==="left";u=p?t.left+s+a.top:t.right-s-a.top;h=t.top+t.height/2;c=p?-.5*Math.PI:.5*Math.PI}e.save();e.translate(u,h);e.rotate(c);e.textAlign="center";e.textBaseline="middle";e.fillStyle=r;e.font=o.string;e.fillText(n.labelString,0,0);e.restore()},draw:function(t){var e=this;if(!e._isVisible()){return}e._drawGrid(t);e._drawTitle();e._drawLabels()},_layers:function(){var t=this;var e=t.options;var i=e.ticks&&e.ticks.z||0;var n=e.gridLines&&e.gridLines.z||0;if(!t._isVisible()||i===n||t.draw!==t._draw){return[{z:i,draw:function(){t.draw.apply(t,arguments)}}]}return[{z:n,draw:function(){t._drawGrid.apply(t,arguments);t._drawTitle.apply(t,arguments)}},{z:i,draw:function(){t._drawLabels.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(e){var i=this;var n=i.isHorizontal();return i.chart._getSortedVisibleDatasetMetas().filter(function(t){return(!e||t.type===e)&&(n?t.xAxisID===i.id:t.yAxisID===i.id)})}});Fn.prototype._draw=Fn.prototype.draw;var jn=Fn,Nn=Lt.isNullOrUndef,Un={position:"bottom"},Hn=jn.extend({determineDataLimits:function(){var t=this;var e=t._getLabels();var i=t.options.ticks;var n=i.min;var r=i.max;var o=0;var a=e.length-1;var s;if(n!==undefined){s=e.indexOf(n);if(s>=0){o=s}}if(r!==undefined){s=e.indexOf(r);if(s>=0){a=s}}t.minIndex=o;t.maxIndex=a;t.min=e[o];t.max=e[a]},buildTicks:function(){var t=this;var e=t._getLabels();var i=t.minIndex;var n=t.maxIndex;t.ticks=i===0&&n===e.length-1?e:e.slice(i,n+1)},getLabelForIndex:function(t,e){var i=this;var n=i.chart;if(n.getDatasetMeta(e).controller._getValueScaleId()===i.id){return i.getRightValue(n.data.datasets[e].data[t])}return i._getLabels()[t]},_configure:function(){var t=this;var e=t.options.offset;var i=t.ticks;jn.prototype._configure.call(t);if(!t.isHorizontal()){t._reversePixels=!t._reversePixels}if(!i){return}t._startValue=t.minIndex-(e?.5:0);t._valueRange=Math.max(i.length-(e?0:1),1)},getPixelForValue:function(t,e,i){var n=this;var r,o,a;if(!Nn(e)&&!Nn(i)){t=n.chart.data.datasets[i].data[e]}if(!Nn(t)){r=n.isHorizontal()?t.x:t.y}if(r!==undefined||t!==undefined&&isNaN(e)){o=n._getLabels();t=Lt.valueOrDefault(r,t);a=o.indexOf(t);e=a!==-1?a:e;if(isNaN(e)){e=t}}return n.getPixelForDecimal((e-n._startValue)/n._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=this;var i=Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange);return Math.min(Math.max(i,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Gn;Hn._defaults=Un;var Zn=Lt.noop,Wn=Lt.isNullOrUndef;function Vn(t,e){var i=[];var n=1e-14;var r=t.stepSize;var o=r||1;var a=t.maxTicks-1;var s=t.min;var l=t.max;var c=t.precision;var u=e.min;var h=e.max;var p=Lt.niceNum((h-u)/a/o)*o;var d,f,m,g;if(p<n&&Wn(s)&&Wn(l)){return[u,h]}g=Math.ceil(h/p)-Math.floor(u/p);if(g>a){p=Lt.niceNum(g*p/a/o)*o}if(r||Wn(c)){d=Math.pow(10,Lt._decimalPlaces(p))}else{d=Math.pow(10,c);p=Math.ceil(p*d)/d}f=Math.floor(u/p)*p;m=Math.ceil(h/p)*p;if(r){if(!Wn(s)&&Lt.almostWhole(s/p,p/1e3)){f=s}if(!Wn(l)&&Lt.almostWhole(l/p,p/1e3)){m=l}}g=(m-f)/p;if(Lt.almostEquals(g,Math.round(g),p/1e3)){g=Math.round(g)}else{g=Math.ceil(g)}f=Math.round(f*d)/d;m=Math.round(m*d)/d;i.push(Wn(s)?f:s);for(var v=1;v<g;++v){i.push(Math.round((f+v*p)*d)/d)}i.push(Wn(l)?m:l);return i}var qn=jn.extend({getRightValue:function(t){if(typeof t==="string"){return+t}return jn.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this;var e=t.options;var i=e.ticks;if(i.beginAtZero){var n=Lt.sign(t.min);var r=Lt.sign(t.max);if(n<0&&r<0){t.max=0}else if(n>0&&r>0){t.min=0}}var o=i.min!==undefined||i.suggestedMin!==undefined;var a=i.max!==undefined||i.suggestedMax!==undefined;if(i.min!==undefined){t.min=i.min}else if(i.suggestedMin!==undefined){if(t.min===null){t.min=i.suggestedMin}else{t.min=Math.min(t.min,i.suggestedMin)}}if(i.max!==undefined){t.max=i.max}else if(i.suggestedMax!==undefined){if(t.max===null){t.max=i.suggestedMax}else{t.max=Math.max(t.max,i.suggestedMax)}}if(o!==a){if(t.min>=t.max){if(o){t.max=t.min+1}else{t.min=t.max-1}}}if(t.min===t.max){t.max++;if(!i.beginAtZero){t.min--}}},getTickLimit:function(){var t=this;var e=t.options.ticks;var i=e.stepSize;var n=e.maxTicksLimit;var r;if(i){r=Math.ceil(t.max/i)-Math.floor(t.min/i)+1}else{r=t._computeTickLimit();n=n||11}if(n){r=Math.min(n,r)}return r},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Zn,buildTicks:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTickLimit();n=Math.max(2,n);var r={maxTicks:n,min:i.min,max:i.max,precision:i.precision,stepSize:Lt.valueOrDefault(i.fixedStepSize,i.stepSize)};var o=t.ticks=Vn(r,t);t.handleDirectionalChanges();t.max=Lt.max(o);t.min=Lt.min(o);if(i.reverse){o.reverse();t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice();t.zeroLineIndex=t.ticks.indexOf(0);jn.prototype.convertTicksToLabels.call(t)},_configure:function(){var t=this;var e=t.getTicks();var i=t.min;var n=t.max;var r;jn.prototype._configure.call(t);if(t.options.offset&&e.length){r=(n-i)/Math.max(e.length-1,1)/2;i-=r;n+=r}t._startValue=i;t._endValue=n;t._valueRange=n-i}}),$n={position:"left",ticks:{callback:yn.formatters.linear}},Kn=0,Yn=1;function Jn(t,e,i){var n=[i.type,e===undefined&&i.stack===undefined?i.index:"",i.stack].join(".");if(t[n]===undefined){t[n]={pos:[],neg:[]}}return t[n]}function Xn(t,e,i,n){var r=t.options;var o=r.stacked;var a=Jn(e,o,i);var s=a.pos;var l=a.neg;var c=n.length;var u,h;for(u=0;u<c;++u){h=t._parseValue(n[u]);if(isNaN(h.min)||isNaN(h.max)||i.data[u].hidden){continue}s[u]=s[u]||0;l[u]=l[u]||0;if(r.relativePoints){s[u]=100}else if(h.min<0||h.max<0){l[u]+=h.min}else{s[u]+=h.max}}}function Qn(t,e,i){var n=i.length;var r,o;for(r=0;r<n;++r){o=t._parseValue(i[r]);if(isNaN(o.min)||isNaN(o.max)||e.data[r].hidden){continue}t.min=Math.min(t.min,o.min);t.max=Math.max(t.max,o.max)}}var tr=qn.extend({determineDataLimits:function(){var e=this;var t=e.options;var i=e.chart;var n=i.data.datasets;var r=e._getMatchingVisibleMetas();var o=t.stacked;var a={};var s=r.length;var l,c,u,h;e.min=Number.POSITIVE_INFINITY;e.max=Number.NEGATIVE_INFINITY;if(o===undefined){for(l=0;!o&&l<s;++l){c=r[l];o=c.stack!==undefined}}for(l=0;l<s;++l){c=r[l];u=n[c.index].data;if(o){Xn(e,a,c,u)}else{Qn(e,c,u)}}Lt.each(a,function(t){h=t.pos.concat(t.neg);e.min=Math.min(e.min,Lt.min(h));e.max=Math.max(e.max,Lt.max(h))});e.min=Lt.isFinite(e.min)&&!isNaN(e.min)?e.min:Kn;e.max=Lt.isFinite(e.max)&&!isNaN(e.max)?e.max:Yn;e.handleTickRangeOptions()},_computeTickLimit:function(){var t=this;var e;if(t.isHorizontal()){return Math.ceil(t.width/40)}e=Lt.options._parseFont(t.options.ticks);return Math.ceil(t.height/e.lineHeight)},handleDirectionalChanges:function(){if(!this.isHorizontal()){this.ticks.reverse()}},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this;return e.getPixelForDecimal((+e.getRightValue(t)-e._startValue)/e._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;if(t<0||t>e.length-1){return null}return this.getPixelForValue(e[t])}}),er;tr._defaults=$n;var ir=Lt.valueOrDefault,nr=Lt.math.log10;function rr(t,e){var i=[];var n=ir(t.min,Math.pow(10,Math.floor(nr(e.min))));var r=Math.floor(nr(e.max));var o=Math.ceil(e.max/Math.pow(10,r));var a,s;if(n===0){a=Math.floor(nr(e.minNotZero));s=Math.floor(e.minNotZero/Math.pow(10,a));i.push(n);n=s*Math.pow(10,a)}else{a=Math.floor(nr(n));s=Math.floor(n/Math.pow(10,a))}var l=a<0?Math.pow(10,Math.abs(a)):1;do{i.push(n);++s;if(s===10){s=1;++a;l=a>=0?1:l}n=Math.round(s*Math.pow(10,a)*l)/l}while(a<r||a===r&&s<o);var c=ir(t.max,n);i.push(c);return i}var or={position:"left",ticks:{callback:yn.formatters.logarithmic}};function ar(t,e){return Lt.isFinite(t)&&t>=0?t:e}var sr=jn.extend({determineDataLimits:function(){var n=this;var t=n.options;var e=n.chart;var i=e.data.datasets;var r=n.isHorizontal();function o(t){return r?t.xAxisID===n.id:t.yAxisID===n.id}var a,s,l,c,u,h;n.min=Number.POSITIVE_INFINITY;n.max=Number.NEGATIVE_INFINITY;n.minNotZero=Number.POSITIVE_INFINITY;var p=t.stacked;if(p===undefined){for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&o(s)&&s.stack!==undefined){p=true;break}}}if(t.stacked||p){var d={};for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);var f=[s.type,t.stacked===undefined&&s.stack===undefined?a:"",s.stack].join(".");if(e.isDatasetVisible(a)&&o(s)){if(d[f]===undefined){d[f]=[]}c=i[a].data;for(u=0,h=c.length;u<h;u++){var m=d[f];l=n._parseValue(c[u]);if(isNaN(l.min)||isNaN(l.max)||s.data[u].hidden||l.min<0||l.max<0){continue}m[u]=m[u]||0;m[u]+=l.max}}}Lt.each(d,function(t){if(t.length>0){var e=Lt.min(t);var i=Lt.max(t);n.min=Math.min(n.min,e);n.max=Math.max(n.max,i)}})}else{for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&o(s)){c=i[a].data;for(u=0,h=c.length;u<h;u++){l=n._parseValue(c[u]);if(isNaN(l.min)||isNaN(l.max)||s.data[u].hidden||l.min<0||l.max<0){continue}n.min=Math.min(l.min,n.min);n.max=Math.max(l.max,n.max);if(l.min!==0){n.minNotZero=Math.min(l.min,n.minNotZero)}}}}}n.min=Lt.isFinite(n.min)?n.min:null;n.max=Lt.isFinite(n.max)?n.max:null;n.minNotZero=Lt.isFinite(n.minNotZero)?n.minNotZero:null;this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this;var e=t.options.ticks;var i=1;var n=10;t.min=ar(e.min,t.min);t.max=ar(e.max,t.max);if(t.min===t.max){if(t.min!==0&&t.min!==null){t.min=Math.pow(10,Math.floor(nr(t.min))-1);t.max=Math.pow(10,Math.floor(nr(t.max))+1)}else{t.min=i;t.max=n}}if(t.min===null){t.min=Math.pow(10,Math.floor(nr(t.max))-1)}if(t.max===null){t.max=t.min!==0?Math.pow(10,Math.floor(nr(t.min))+1):n}if(t.minNotZero===null){if(t.min>0){t.minNotZero=t.min}else if(t.max<1){t.minNotZero=Math.pow(10,Math.floor(nr(t.max)))}else{t.minNotZero=i}}},buildTicks:function(){var t=this;var e=t.options.ticks;var i=!t.isHorizontal();var n={min:ar(e.min),max:ar(e.max)};var r=t.ticks=rr(n,t);t.max=Lt.max(r);t.min=Lt.min(r);if(e.reverse){i=!i;t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}if(i){r.reverse()}},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();jn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;if(t<0||t>e.length-1){return null}return this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(nr(t));var i=Math.floor(t/Math.pow(10,e));return i*Math.pow(10,e)},_configure:function(){var t=this;var e=t.min;var i=0;jn.prototype._configure.call(t);if(e===0){e=t._getFirstTickValue(t.minNotZero);i=ir(t.options.ticks.fontSize,pt.global.defaultFontSize)/t._length}t._startValue=nr(e);t._valueOffset=i;t._valueRange=(nr(t.max)-nr(e))/(1-i)},getPixelForValue:function(t){var e=this;var i=0;t=+e.getRightValue(t);if(t>e.min&&t>0){i=(nr(t)-e._startValue)/e._valueRange+e._valueOffset}return e.getPixelForDecimal(i)},getValueForPixel:function(t){var e=this;var i=e.getDecimalForPixel(t);return i===0&&e.min===0?0:Math.pow(10,e._startValue+(i-e._valueOffset)*e._valueRange)}}),lr;sr._defaults=or;var cr=Lt.valueOrDefault,ur=Lt.valueAtIndexOrDefault,hr=Lt.options.resolve,pr={display:true,animate:true,position:"chartArea",angleLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:false},ticks:{showLabelBackdrop:true,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:yn.formatters.linear},pointLabels:{display:true,fontSize:10,callback:function(t){return t}}};function dr(t){var e=t.ticks;if(e.display&&t.display){return cr(e.fontSize,pt.global.defaultFontSize)+e.backdropPaddingY*2}return 0}function fr(t,e,i){if(Lt.isArray(i)){return{w:Lt.longestText(t,t.font,i),h:i.length*e}}return{w:t.measureText(i).width,h:e}}function mr(t,e,i,n,r){if(t===n||t===r){return{start:e-i/2,end:e+i/2}}else if(t<n||t>r){return{start:e-i,end:e}}return{start:e,end:e+i}}function gr(t){var e=Lt.options._parseFont(t.options.pointLabels);var i={l:0,r:t.width,t:0,b:t.height-t.paddingTop};var n={};var r,o,a;t.ctx.font=e.string;t._pointLabelSizes=[];var s=t.chart.data.labels.length;for(r=0;r<s;r++){a=t.getPointPosition(r,t.drawingArea+5);o=fr(t.ctx,e.lineHeight,t.pointLabels[r]);t._pointLabelSizes[r]=o;var l=t.getIndexAngle(r);var c=Lt.toDegrees(l)%360;var u=mr(c,a.x,o.w,0,180);var h=mr(c,a.y,o.h,90,270);if(u.start<i.l){i.l=u.start;n.l=l}if(u.end>i.r){i.r=u.end;n.r=l}if(h.start<i.t){i.t=h.start;n.t=l}if(h.end>i.b){i.b=h.end;n.b=l}}t.setReductions(t.drawingArea,i,n)}function vr(t){if(t===0||t===180){return"center"}else if(t<180){return"left"}return"right"}function _r(t,e,i,n){var r=i.y+n/2;var o,a;if(Lt.isArray(e)){for(o=0,a=e.length;o<a;++o){t.fillText(e[o],i.x,r);r+=n}}else{t.fillText(e,i.x,r)}}function yr(t,e,i){if(t===90||t===270){i.y-=e.h/2}else if(t>270||t<90){i.y-=e.h}}function br(t){var e=t.ctx;var i=t.options;var n=i.pointLabels;var r=dr(i);var o=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max);var a=Lt.options._parseFont(n);e.save();e.font=a.string;e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=s===0?r/2:0;var c=t.getPointPosition(s,o+l+5);var u=ur(n.fontColor,s,pt.global.defaultFontColor);e.fillStyle=u;var h=t.getIndexAngle(s);var p=Lt.toDegrees(h);e.textAlign=vr(p);yr(p,t._pointLabelSizes[s],c);_r(e,t.pointLabels[s],c,a.lineHeight)}e.restore()}function xr(t,e,i,n){var r=t.ctx;var o=e.circular;var a=t.chart.data.labels.length;var s=ur(e.color,n-1);var l=ur(e.lineWidth,n-1);var c;if(!o&&!a||!s||!l){return}r.save();r.strokeStyle=s;r.lineWidth=l;if(r.setLineDash){r.setLineDash(e.borderDash||[]);r.lineDashOffset=e.borderDashOffset||0}r.beginPath();if(o){r.arc(t.xCenter,t.yCenter,i,0,Math.PI*2)}else{c=t.getPointPosition(0,i);r.moveTo(c.x,c.y);for(var u=1;u<a;u++){c=t.getPointPosition(u,i);r.lineTo(c.x,c.y)}}r.closePath();r.stroke();r.restore()}function wr(t){return Lt.isNumber(t)?t:0}var kr=qn.extend({setDimensions:function(){var t=this;t.width=t.maxWidth;t.height=t.maxHeight;t.paddingTop=dr(t.options)/2;t.xCenter=Math.floor(t.width/2);t.yCenter=Math.floor((t.height-t.paddingTop)/2);t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var r=this;var i=r.chart;var o=Number.POSITIVE_INFINITY;var a=Number.NEGATIVE_INFINITY;Lt.each(i.data.datasets,function(t,e){if(i.isDatasetVisible(e)){var n=i.getDatasetMeta(e);Lt.each(t.data,function(t,e){var i=+r.getRightValue(t);if(isNaN(i)||n.data[e].hidden){return}o=Math.min(i,o);a=Math.max(i,a)})}});r.min=o===Number.POSITIVE_INFINITY?0:o;r.max=a===Number.NEGATIVE_INFINITY?0:a;r.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/dr(this.options))},convertTicksToLabels:function(){var e=this;qn.prototype.convertTicksToLabels.call(e);e.pointLabels=e.chart.data.labels.map(function(){var t=Lt.callback(e.options.pointLabels.callback,arguments,e);return t||t===0?t:""})},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this;var e=t.options;if(e.display&&e.pointLabels.display){gr(t)}else{t.setCenterPoint(0,0,0,0)}},setReductions:function(t,e,i){var n=this;var r=e.l/Math.sin(i.l);var o=Math.max(e.r-n.width,0)/Math.sin(i.r);var a=-e.t/Math.cos(i.t);var s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);r=wr(r);o=wr(o);a=wr(a);s=wr(s);n.drawingArea=Math.min(Math.floor(t-(r+o)/2),Math.floor(t-(a+s)/2));n.setCenterPoint(r,o,a,s)},setCenterPoint:function(t,e,i,n){var r=this;var o=r.width-e-r.drawingArea;var a=t+r.drawingArea;var s=i+r.drawingArea;var l=r.height-r.paddingTop-n-r.drawingArea;r.xCenter=Math.floor((a+o)/2+r.left);r.yCenter=Math.floor((s+l)/2+r.top+r.paddingTop)},getIndexAngle:function(t){var e=this.chart;var i=360/e.data.labels.length;var n=e.options||{};var r=n.startAngle||0;var o=(t*i+r)%360;return(o<0?o+360:o)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(Lt.isNullOrUndef(t)){return NaN}var i=e.drawingArea/(e.max-e.min);if(e.options.ticks.reverse){return(e.max-t)*i}return(t-e.min)*i},getPointPosition:function(t,e){var i=this;var n=i.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+i.xCenter,y:Math.sin(n)*e+i.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this;var i=e.min;var n=e.max;return e.getPointPositionForValue(t||0,e.beginAtZero?0:i<0&&n<0?n:i>0&&n>0?i:0)},_drawGrid:function(){var i=this;var t=i.ctx;var e=i.options;var n=e.gridLines;var r=e.angleLines;var o=cr(r.lineWidth,n.lineWidth);var a=cr(r.color,n.color);var s,l,c;if(e.pointLabels.display){br(i)}if(n.display){Lt.each(i.ticks,function(t,e){if(e!==0){l=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);xr(i,n,l,e)}})}if(r.display&&o&&a){t.save();t.lineWidth=o;t.strokeStyle=a;if(t.setLineDash){t.setLineDash(hr([r.borderDash,n.borderDash,[]]));t.lineDashOffset=hr([r.borderDashOffset,n.borderDashOffset,0])}for(s=i.chart.data.labels.length-1;s>=0;s--){l=i.getDistanceFromCenterForValue(e.ticks.reverse?i.min:i.max);c=i.getPointPosition(s,l);t.beginPath();t.moveTo(i.xCenter,i.yCenter);t.lineTo(c.x,c.y);t.stroke()}t.restore()}},_drawLabels:function(){var i=this;var n=i.ctx;var t=i.options;var r=t.ticks;if(!r.display){return}var e=i.getIndexAngle(0);var o=Lt.options._parseFont(r);var a=cr(r.fontColor,pt.global.defaultFontColor);var s,l;n.save();n.font=o.string;n.translate(i.xCenter,i.yCenter);n.rotate(e);n.textAlign="center";n.textBaseline="middle";Lt.each(i.ticks,function(t,e){if(e===0&&!r.reverse){return}s=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);if(r.showLabelBackdrop){l=n.measureText(t).width;n.fillStyle=r.backdropColor;n.fillRect(-l/2-r.backdropPaddingX,-s-o.size/2-r.backdropPaddingY,l+r.backdropPaddingX*2,o.size+r.backdropPaddingY*2)}n.fillStyle=a;n.fillText(t,0,-s)});n.restore()},_drawTitle:Lt.noop}),Lr;kr._defaults=pr;var Cr=Lt._deprecated,Mr=Lt.options.resolve,Sr=Lt.valueOrDefault,Tr=Number.MIN_SAFE_INTEGER||-9007199254740991,Pr=Number.MAX_SAFE_INTEGER||9007199254740991,Dr={millisecond:{common:true,size:1,steps:1e3},second:{common:true,size:1e3,steps:60},minute:{common:true,size:6e4,steps:60},hour:{common:true,size:36e5,steps:24},day:{common:true,size:864e5,steps:30},week:{common:false,size:6048e5,steps:4},month:{common:true,size:2628e6,steps:12},quarter:{common:false,size:7884e6,steps:4},year:{common:true,size:3154e7}},Ar=Object.keys(Dr);function Er(t,e){return t-e}function Or(t){var e={};var i=[];var n,r,o;for(n=0,r=t.length;n<r;++n){o=t[n];if(!e[o]){e[o]=true;i.push(o)}}return i}function Ir(t){return Lt.valueOrDefault(t.time.min,t.ticks.min)}function Br(t){return Lt.valueOrDefault(t.time.max,t.ticks.max)}function zr(t,e,i,n){if(n==="linear"||!t.length){return[{time:e,pos:0},{time:i,pos:1}]}var r=[];var o=[e];var a,s,l,c,u;for(a=0,s=t.length;a<s;++a){c=t[a];if(c>e&&c<i){o.push(c)}}o.push(i);for(a=0,s=o.length;a<s;++a){u=o[a+1];l=o[a-1];c=o[a];if(l===undefined||u===undefined||Math.round((u+l)/2)!==c){r.push({time:c,pos:a/(s-1)})}}return r}function Rr(t,e,i){var n=0;var r=t.length-1;var o,a,s;while(n>=0&&n<=r){o=n+r>>1;a=t[o-1]||null;s=t[o];if(!a){return{lo:null,hi:s}}else if(s[e]<i){n=o+1}else if(a[e]>i){r=o-1}else{return{lo:a,hi:s}}}return{lo:s,hi:null}}function Fr(t,e,i,n){var r=Rr(t,e,i);var o=!r.lo?t[0]:!r.hi?t[t.length-2]:r.lo;var a=!r.lo?t[1]:!r.hi?t[t.length-1]:r.hi;var s=a[e]-o[e];var l=s?(i-o[e])/s:0;var c=(a[n]-o[n])*l;return o[n]+c}function jr(t,e){var i=t._adapter;var n=t.options.time;var r=n.parser;var o=r||n.format;var a=e;if(typeof r==="function"){a=r(a)}if(!Lt.isFinite(a)){a=typeof o==="string"?i.parse(a,o):i.parse(a)}if(a!==null){return+a}if(!r&&typeof o==="function"){a=o(e);if(!Lt.isFinite(a)){a=i.parse(a)}}return a}function Nr(t,e){if(Lt.isNullOrUndef(e)){return null}var i=t.options.time;var n=jr(t,t.getRightValue(e));if(n===null){return n}if(i.round){n=+t._adapter.startOf(n,i.round)}return n}function Ur(t,e,i,n){var r=Ar.length;var o,a,s;for(o=Ar.indexOf(t);o<r-1;++o){a=Dr[Ar[o]];s=a.steps?a.steps:Pr;if(a.common&&Math.ceil((i-e)/(s*a.size))<=n){return Ar[o]}}return Ar[r-1]}function Hr(t,e,i,n,r){var o,a;for(o=Ar.length-1;o>=Ar.indexOf(i);o--){a=Ar[o];if(Dr[a].common&&t._adapter.diff(r,n,a)>=e-1){return a}}return Ar[i?Ar.indexOf(i):0]}function Gr(t){for(var e=Ar.indexOf(t)+1,i=Ar.length;e<i;++e){if(Dr[Ar[e]].common){return Ar[e]}}}function Zr(t,e,i,n){var r=t._adapter;var o=t.options;var a=o.time;var s=a.unit||Ur(a.minUnit,e,i,n);var l=Mr([a.stepSize,a.unitStepSize,1]);var c=s==="week"?a.isoWeekday:false;var u=e;var h=[];var p;if(c){u=+r.startOf(u,"isoWeek",c)}u=+r.startOf(u,c?"day":s);if(r.diff(i,e,s)>1e5*l){throw e+" and "+i+" are too far apart with stepSize of "+l+" "+s}for(p=u;p<i;p=+r.add(p,l,s)){h.push(p)}if(p===i||o.bounds==="ticks"){h.push(p)}return h}function Wr(t,e,i,n,r){var o=0;var a=0;var s,l;if(r.offset&&e.length){s=Fr(t,"time",e[0],"pos");if(e.length===1){o=1-s}else{o=(Fr(t,"time",e[1],"pos")-s)/2}l=Fr(t,"time",e[e.length-1],"pos");if(e.length===1){a=l}else{a=(l-Fr(t,"time",e[e.length-2],"pos"))/2}}return{start:o,end:a,factor:1/(o+1+a)}}function Vr(t,e,i,n){var r=t._adapter;var o=+r.startOf(e[0].value,n);var a=e[e.length-1].value;var s,l;for(s=o;s<=a;s=+r.add(s,1,n)){l=i[s];if(l>=0){e[l].major=true}}return e}function qr(t,e,i){var n=[];var r={};var o=e.length;var a,s;for(a=0;a<o;++a){s=e[a];r[s]=a;n.push({value:s,major:false})}return o===0||!i?n:Vr(t,n,r,i)}var $r={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:false,unit:false,round:false,displayFormat:false,isoWeekday:false,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:false,source:"auto",major:{enabled:false}}},Kr=jn.extend({initialize:function(){this.mergeTicksOptions();jn.prototype.initialize.call(this)},update:function(){var t=this;var e=t.options;var i=e.time||(e.time={});var n=t._adapter=new _n._date(e.adapters.date);Cr("time scale",i.format,"time.format","time.parser");Cr("time scale",i.min,"time.min","ticks.min");Cr("time scale",i.max,"time.max","ticks.max");Lt.mergeIf(i.displayFormats,n.formats());return jn.prototype.update.apply(t,arguments)},getRightValue:function(t){if(t&&t.t!==undefined){t=t.t}return jn.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t=this;var e=t.chart;var i=t._adapter;var n=t.options;var r=n.time.unit||"day";var o=Pr;var a=Tr;var s=[];var l=[];var c=[];var u,h,p,d,f,m,g;var v=t._getLabels();for(u=0,p=v.length;u<p;++u){c.push(Nr(t,v[u]))}for(u=0,p=(e.data.datasets||[]).length;u<p;++u){if(e.isDatasetVisible(u)){f=e.data.datasets[u].data;if(Lt.isObject(f[0])){l[u]=[];for(h=0,d=f.length;h<d;++h){m=Nr(t,f[h]);s.push(m);l[u][h]=m}}else{l[u]=c.slice(0);if(!g){s=s.concat(c);g=true}}}else{l[u]=[]}}if(c.length){o=Math.min(o,c[0]);a=Math.max(a,c[c.length-1])}if(s.length){s=p>1?Or(s).sort(Er):s.sort(Er);o=Math.min(o,s[0]);a=Math.max(a,s[s.length-1])}o=Nr(t,Ir(n))||o;a=Nr(t,Br(n))||a;o=o===Pr?+i.startOf(Date.now(),r):o;a=a===Tr?+i.endOf(Date.now(),r)+1:a;t.min=Math.min(o,a);t.max=Math.max(o+1,a);t._table=[];t._timestamps={data:s,datasets:l,labels:c}},buildTicks:function(){var t=this;var e=t.min;var i=t.max;var n=t.options;var r=n.ticks;var o=n.time;var a=t._timestamps;var s=[];var l=t.getLabelCapacity(e);var c=r.source;var u=n.distribution;var h,p,d;if(c==="data"||c==="auto"&&u==="series"){a=a.data}else if(c==="labels"){a=a.labels}else{a=Zr(t,e,i,l)}if(n.bounds==="ticks"&&a.length){e=a[0];i=a[a.length-1]}e=Nr(t,Ir(n))||e;i=Nr(t,Br(n))||i;for(h=0,p=a.length;h<p;++h){d=a[h];if(d>=e&&d<=i){s.push(d)}}t.min=e;t.max=i;t._unit=o.unit||(r.autoSkip?Ur(o.minUnit,t.min,t.max,l):Hr(t,s.length,o.minUnit,t.min,t.max));t._majorUnit=!r.major.enabled||t._unit==="year"?undefined:Gr(t._unit);t._table=zr(t._timestamps.data,e,i,u);t._offsets=Wr(t._table,s,e,i,n);if(r.reverse){s.reverse()}return qr(t,s,t._majorUnit)},getLabelForIndex:function(t,e){var i=this;var n=i._adapter;var r=i.chart.data;var o=i.options.time;var a=r.labels&&t<r.labels.length?r.labels[t]:"";var s=r.datasets[e].data[t];if(Lt.isObject(s)){a=i.getRightValue(s)}if(o.tooltipFormat){return n.format(jr(i,a),o.tooltipFormat)}if(typeof a==="string"){return a}return n.format(jr(i,a),o.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var r=this;var o=r._adapter;var a=r.options;var s=a.time.displayFormats;var l=s[r._unit];var c=r._majorUnit;var u=s[c];var h=i[e];var p=a.ticks;var d=c&&u&&h&&h.major;var f=o.format(t,n?n:d?u:l);var m=d?p.major:p.minor;var g=Mr([m.callback,m.userCallback,p.callback,p.userCallback]);return g?g(f,e,i):f},convertTicksToLabels:function(t){var e=[];var i,n;for(i=0,n=t.length;i<n;++i){e.push(this.tickFormatFunction(t[i].value,i,t))}return e},getPixelForOffset:function(t){var e=this;var i=e._offsets;var n=Fr(e._table,"time",t,"pos");return e.getPixelForDecimal((i.start+n)*i.factor)},getPixelForValue:function(t,e,i){var n=this;var r=null;if(e!==undefined&&i!==undefined){r=n._timestamps.datasets[i][e]}if(r===null){r=Nr(n,t)}if(r!==null){return n.getPixelForOffset(r)}},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this;var i=e._offsets;var n=e.getDecimalForPixel(t)/i.factor-i.end;var r=Fr(e._table,"pos",n,"time");return e._adapter._create(r)},_getLabelSize:function(t){var e=this;var i=e.options.ticks;var n=e.ctx.measureText(t).width;var r=Lt.toRadians(e.isHorizontal()?i.maxRotation:i.minRotation);var o=Math.cos(r);var a=Math.sin(r);var s=Sr(i.fontSize,pt.global.defaultFontSize);return{w:n*o+s*a,h:n*a+s*o}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this;var i=e.options.time;var n=i.displayFormats;var r=n[i.unit]||n.millisecond;var o=e.tickFormatFunction(t,0,qr(e,[t],e._majorUnit),r);var a=e._getLabelSize(o);var s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);if(e.options.offset){s--}return s>0?s:1}}),Yr;Kr._defaults=$r;var Jr={category:Hn,linear:tr,logarithmic:sr,radialLinear:kr,time:Kr},Xr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};_n._date.override(typeof n==="function"?{_id:"moment",formats:function(){return Xr},parse:function(t,e){if(typeof t==="string"&&typeof e==="string"){t=n(t,e)}else if(!(t instanceof n)){t=n(t)}return t.isValid()?t.valueOf():null},format:function(t,e){return n(t).format(e)},add:function(t,e,i){return n(t).add(e,i).valueOf()},diff:function(t,e,i){return n(t).diff(n(e),i)},startOf:function(t,e,i){t=n(t);if(e==="isoWeek"){return t.isoWeekday(i).valueOf()}return t.startOf(e).valueOf()},endOf:function(t,e){return n(t).endOf(e).valueOf()},_create:function(t){return n(t)}}:{}),pt._set("global",{plugins:{filler:{propagate:true}}});var Qr={dataset:function(t){var e=t.fill;var i=t.chart;var n=i.getDatasetMeta(e);var r=n&&i.isDatasetVisible(e);var o=r&&n.dataset._children||[];var a=o.length||0;return!a?null:function(t,e){return e<a&&o[e]._view||null}},boundary:function(t){var i=t.boundary;var e=i?i.x:null;var n=i?i.y:null;if(Lt.isArray(i)){return function(t,e){return i[e]}}return function(t){return{x:e===null?t.x:e,y:n===null?t.y:n}}}};function to(t,e,i){var n=t._model||{};var r=n.fill;var o;if(r===undefined){r=!!n.backgroundColor}if(r===false||r===null){return false}if(r===true){return"origin"}o=parseFloat(r,10);if(isFinite(o)&&Math.floor(o)===o){if(r[0]==="-"||r[0]==="+"){o=e+o}if(o===e||o<0||o>=i){return false}return o}switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return false}}function eo(t){var e=t.el._model||{};var i=t.el._scale||{};var n=t.fill;var r=null;var o;if(isFinite(n)){return null}if(n==="start"){r=e.scaleBottom===undefined?i.bottom:e.scaleBottom}else if(n==="end"){r=e.scaleTop===undefined?i.top:e.scaleTop}else if(e.scaleZero!==undefined){r=e.scaleZero}else if(i.getBasePixel){r=i.getBasePixel()}if(r!==undefined&&r!==null){if(r.x!==undefined&&r.y!==undefined){return r}if(Lt.isFinite(r)){o=i.isHorizontal();return{x:o?r:null,y:o?null:r}}}return null}function io(t){var e=t.el._scale;var i=e.options;var n=e.chart.data.labels.length;var r=t.fill;var o=[];var a,s,l,c,u;if(!n){return null}a=i.ticks.reverse?e.max:e.min;s=i.ticks.reverse?e.min:e.max;l=e.getPointPositionForValue(0,a);for(c=0;c<n;++c){u=r==="start"||r==="end"?e.getPointPositionForValue(c,r==="start"?a:s):e.getBasePosition(c);if(i.gridLines.circular){u.cx=l.x;u.cy=l.y;u.angle=e.getIndexAngle(c)-Math.PI/2}o.push(u)}return o}function no(t){var e=t.el._scale||{};if(e.getPointPositionForValue){return io(t)}return eo(t)}function ro(t,e,i){var n=t[e];var r=n.fill;var o=[e];var a;if(!i){return r}while(r!==false&&o.indexOf(r)===-1){if(!isFinite(r)){return r}a=t[r];if(!a){return false}if(a.visible){return r}o.push(r);r=a.fill}return false}function oo(t){var e=t.fill;var i="dataset";if(e===false){return null}if(!isFinite(e)){i="boundary"}return Qr[i](t)}function ao(t){return t&&!t.skip}function so(t,e,i,n,r){var o,a,s,l;if(!n||!r){return}t.moveTo(e[0].x,e[0].y);for(o=1;o<n;++o){Lt.canvas.lineTo(t,e[o-1],e[o])}if(i[0].angle!==undefined){a=i[0].cx;s=i[0].cy;l=Math.sqrt(Math.pow(i[0].x-a,2)+Math.pow(i[0].y-s,2));for(o=r-1;o>0;--o){t.arc(a,s,l,i[o].angle,i[o-1].angle,true)}return}t.lineTo(i[r-1].x,i[r-1].y);for(o=r-1;o>0;--o){Lt.canvas.lineTo(t,i[o],i[o-1],true)}}function lo(t,e,i,n,r,o){var a=e.length;var s=n.spanGaps;var l=[];var c=[];var u=0;var h=0;var p,d,f,m,g,v,_,y;t.beginPath();for(p=0,d=a;p<d;++p){f=p%a;m=e[f]._view;g=i(m,f,n);v=ao(m);_=ao(g);if(o&&y===undefined&&v){y=p+1;d=a+y}if(v&&_){u=l.push(m);h=c.push(g)}else if(u&&h){if(!s){so(t,l,c,u,h);u=h=0;l=[];c=[]}else{if(v){l.push(m)}if(_){c.push(g)}}}}so(t,l,c,u,h);t.closePath();t.fillStyle=r;t.fill()}var co={id:"filler",afterDatasetsUpdate:function(t,e){var i=(t.data.datasets||[]).length;var n=e.propagate;var r=[];var o,a,s,l;for(a=0;a<i;++a){o=t.getDatasetMeta(a);s=o.dataset;l=null;if(s&&s._model&&s instanceof ue.Line){l={visible:t.isDatasetVisible(a),fill:to(s,a,i),chart:t,el:s}}o.$filler=l;r.push(l)}for(a=0;a<i;++a){l=r[a];if(!l){continue}l.fill=ro(r,a,n);l.boundary=no(l);l.mapper=oo(l)}},beforeDatasetsDraw:function(t){var e=t._getSortedVisibleDatasetMetas();var i=t.ctx;var n,r,o,a,s,l,c;for(r=e.length-1;r>=0;--r){n=e[r].$filler;if(!n||!n.visible){continue}o=n.el;a=o._view;s=o._children||[];l=n.mapper;c=a.backgroundColor||pt.global.defaultColor;if(l&&c&&s.length){Lt.canvas.clipArea(i,t.chartArea);lo(i,s,l,a,c,o._loop);Lt.canvas.unclipArea(i)}}}},uo=Lt.rtl.getRtlAdapter,ho=Lt.noop,po=Lt.valueOrDefault;function fo(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}pt._set("global",{legend:{display:true,position:"top",align:"center",fullWidth:true,reverse:false,weight:1e3,onClick:function(t,e){var i=e.datasetIndex;var n=this.chart;var r=n.getDatasetMeta(i);r.hidden=r.hidden===null?!n.data.datasets[i].hidden:null;n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(i){var n=i.data.datasets;var t=i.options.legend||{};var r=t.labels&&t.labels.usePointStyle;return i._getSortedDatasetMetas().map(function(t){var e=t.controller.getStyle(r?0:undefined);return{text:n[t.index].label,fillStyle:e.backgroundColor,hidden:!i.isDatasetVisible(t.index),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,rotation:e.rotation,datasetIndex:t.index}},this)}}},legendCallback:function(t){var e=document.createElement("ul");var i=t.data.datasets;var n,r,o,a;e.setAttribute("class",t.id+"-legend");for(n=0,r=i.length;n<r;n++){o=e.appendChild(document.createElement("li"));a=o.appendChild(document.createElement("span"));a.style.backgroundColor=i[n].backgroundColor;if(i[n].label){o.appendChild(document.createTextNode(i[n].label))}}return e.outerHTML}});var mo=Et.extend({initialize:function(t){var e=this;Lt.extend(e,t);e.legendHitBoxes=[];e._hoveredItem=null;e.doughnutMode=false},beforeUpdate:ho,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:ho,beforeSetDimensions:ho,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:ho,beforeBuildLabels:ho,buildLabels:function(){var e=this;var i=e.options.labels||{};var t=Lt.callback(i.generateLabels,[e.chart],e)||[];if(i.filter){t=t.filter(function(t){return i.filter(t,e.chart.data)})}if(e.options.reverse){t.reverse()}e.legendItems=t},afterBuildLabels:ho,beforeFit:ho,fit:function(){var t=this;var e=t.options;var r=e.labels;var i=e.display;var o=t.ctx;var n=Lt.options._parseFont(r);var a=n.size;var s=t.legendHitBoxes=[];var l=t.minSize;var c=t.isHorizontal();if(c){l.width=t.maxWidth;l.height=i?10:0}else{l.width=i?10:0;l.height=t.maxHeight}if(!i){t.width=l.width=t.height=l.height=0;return}o.font=n.string;if(c){var u=t.lineWidths=[0];var h=0;o.textAlign="left";o.textBaseline="middle";Lt.each(t.legendItems,function(t,e){var i=fo(r,a);var n=i+a/2+o.measureText(t.text).width;if(e===0||u[u.length-1]+n+2*r.padding>l.width){h+=a+r.padding;u[u.length-(e>0?0:1)]=0}s[e]={left:0,top:0,width:n,height:a};u[u.length-1]+=n+r.padding});l.height+=h}else{var p=r.padding;var d=t.columnWidths=[];var f=t.columnHeights=[];var m=r.padding;var g=0;var v=0;Lt.each(t.legendItems,function(t,e){var i=fo(r,a);var n=i+a/2+o.measureText(t.text).width;if(e>0&&v+a+2*p>l.height){m+=g+r.padding;d.push(g);f.push(v);g=0;v=0}g=Math.max(g,n);v+=a+p;s[e]={left:0,top:0,width:n,height:a}});m+=g;d.push(g);f.push(v);l.width+=m}t.width=l.width;t.height=l.height},afterFit:ho,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var s=this;var i=s.options;var l=i.labels;var t=pt.global;var c=t.defaultColor;var u=t.elements.line;var h=s.height;var p=s.columnHeights;var d=s.width;var f=s.lineWidths;if(!i.display){return}var m=uo(i.rtl,s.left,s.minSize.width);var g=s.ctx;var e=po(l.fontColor,t.defaultFontColor);var n=Lt.options._parseFont(l);var v=n.size;var _;g.textAlign=m.textAlign("left");g.textBaseline="middle";g.lineWidth=.5;g.strokeStyle=e;g.fillStyle=e;g.font=n.string;var y=fo(l,v);var b=s.legendHitBoxes;var x=function(t,e,i){if(isNaN(y)||y<=0){return}g.save();var n=po(i.lineWidth,u.borderWidth);g.fillStyle=po(i.fillStyle,c);g.lineCap=po(i.lineCap,u.borderCapStyle);g.lineDashOffset=po(i.lineDashOffset,u.borderDashOffset);g.lineJoin=po(i.lineJoin,u.borderJoinStyle);g.lineWidth=n;g.strokeStyle=po(i.strokeStyle,c);if(g.setLineDash){g.setLineDash(po(i.lineDash,u.borderDash))}if(l&&l.usePointStyle){var r=y*Math.SQRT2/2;var o=m.xPlus(t,y/2);var a=e+v/2;Lt.canvas.drawPoint(g,i.pointStyle,r,o,a,i.rotation)}else{g.fillRect(m.leftForLtr(t,y),e,y,v);if(n!==0){g.strokeRect(m.leftForLtr(t,y),e,y,v)}}g.restore()};var w=function(t,e,i,n){var r=v/2;var o=m.xPlus(t,y+r);var a=e+r;g.fillText(i.text,o,a);if(i.hidden){g.beginPath();g.lineWidth=2;g.moveTo(o,a);g.lineTo(m.xPlus(o,n),a);g.stroke()}};var k=function(t,e){switch(i.align){case"start":return l.padding;case"end":return t-e;default:return(t-e+l.padding)/2}};var L=s.isHorizontal();if(L){_={x:s.left+k(d,f[0]),y:s.top+l.padding,line:0}}else{_={x:s.left+l.padding,y:s.top+k(h,p[0]),line:0}}Lt.rtl.overrideTextDirection(s.ctx,i.textDirection);var C=v+l.padding;Lt.each(s.legendItems,function(t,e){var i=g.measureText(t.text).width;var n=y+v/2+i;var r=_.x;var o=_.y;m.setWidth(s.minSize.width);if(L){if(e>0&&r+n+l.padding>s.left+s.minSize.width){o=_.y+=C;_.line++;r=_.x=s.left+k(d,f[_.line])}}else if(e>0&&o+C>s.top+s.minSize.height){r=_.x=r+s.columnWidths[_.line]+l.padding;_.line++;o=_.y=s.top+k(h,p[_.line])}var a=m.x(r);x(a,o,t);b[e].left=m.leftForLtr(a,b[e].width);b[e].top=o;w(a,o,t,i);if(L){_.x+=n+l.padding}else{_.y+=C}});Lt.rtl.restoreTextDirection(s.ctx,i.textDirection)},_getLegendItemAt:function(t,e){var i=this;var n,r,o;if(t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom){o=i.legendHitBoxes;for(n=0;n<o.length;++n){r=o[n];if(t>=r.left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height){return i.legendItems[n]}}}return null},handleEvent:function(t){var e=this;var i=e.options;var n=t.type==="mouseup"?"click":t.type;var r;if(n==="mousemove"){if(!i.onHover&&!i.onLeave){return}}else if(n==="click"){if(!i.onClick){return}}else{return}r=e._getLegendItemAt(t.x,t.y);if(n==="click"){if(r&&i.onClick){i.onClick.call(e,t.native,r)}}else{if(i.onLeave&&r!==e._hoveredItem){if(e._hoveredItem){i.onLeave.call(e,t.native,e._hoveredItem)}e._hoveredItem=r}if(i.onHover&&r){i.onHover.call(e,t.native,r)}}}});function go(t,e){var i=new mo({ctx:t.ctx,options:e,chart:t});ci.configure(t,i,e);ci.addBox(t,i);t.legend=i}var vo={id:"legend",_element:mo,beforeInit:function(t){var e=t.options.legend;if(e){go(t,e)}},beforeUpdate:function(t){var e=t.options.legend;var i=t.legend;if(e){Lt.mergeIf(e,pt.global.legend);if(i){ci.configure(t,i,e);i.options=e}else{go(t,e)}}else if(i){ci.removeBox(t,i);delete t.legend}},afterEvent:function(t,e){var i=t.legend;if(i){i.handleEvent(e)}}},_o=Lt.noop;pt._set("global",{title:{display:false,fontStyle:"bold",fullWidth:true,padding:10,position:"top",text:"",weight:2e3}});var yo=Et.extend({initialize:function(t){var e=this;Lt.extend(e,t);e.legendHitBoxes=[]},beforeUpdate:_o,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:_o,beforeSetDimensions:_o,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:_o,beforeBuildLabels:_o,buildLabels:_o,afterBuildLabels:_o,beforeFit:_o,fit:function(){var t=this;var e=t.options;var i=t.minSize={};var n=t.isHorizontal();var r,o;if(!e.display){t.width=i.width=t.height=i.height=0;return}r=Lt.isArray(e.text)?e.text.length:1;o=r*Lt.options._parseFont(e).lineHeight+e.padding*2;t.width=i.width=n?t.maxWidth:o;t.height=i.height=n?o:t.maxHeight},afterFit:_o,isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},draw:function(){var t=this;var e=t.ctx;var i=t.options;if(!i.display){return}var n=Lt.options._parseFont(i);var r=n.lineHeight;var o=r/2+i.padding;var a=0;var s=t.top;var l=t.left;var c=t.bottom;var u=t.right;var h,p,d;e.fillStyle=Lt.valueOrDefault(i.fontColor,pt.global.defaultFontColor);e.font=n.string;if(t.isHorizontal()){p=l+(u-l)/2;d=s+o;h=u-l}else{p=i.position==="left"?l+o:u-o;d=s+(c-s)/2;h=c-s;a=Math.PI*(i.position==="left"?-.5:.5)}e.save();e.translate(p,d);e.rotate(a);e.textAlign="center";e.textBaseline="middle";var f=i.text;if(Lt.isArray(f)){var m=0;for(var g=0;g<f.length;++g){e.fillText(f[g],0,m,h);m+=r}}else{e.fillText(f,0,0,h)}e.restore()}});function bo(t,e){var i=new yo({ctx:t.ctx,options:e,chart:t});ci.configure(t,i,e);ci.addBox(t,i);t.titleBlock=i}var xo,wo={},ko=co,Lo=vo,Co={id:"title",_element:yo,beforeInit:function(t){var e=t.options.title;if(e){bo(t,e)}},beforeUpdate:function(t){var e=t.options.title;var i=t.titleBlock;if(e){Lt.mergeIf(e,pt.global.title);if(i){ci.configure(t,i,e);i.options=e}else{bo(t,e)}}else if(i){ci.removeBox(t,i);delete t.titleBlock}}};for(var Mo in wo.filler=ko,wo.legend=Lo,wo.title=Co,dn.helpers=Lt,fn(),dn._adapters=_n,dn.Animation=It,dn.animationService=Bt,dn.controllers=Ge,dn.DatasetController=Ut,dn.defaults=pt,dn.Element=Et,dn.elements=ue,dn.Interaction=Ye,dn.layouts=ci,dn.platform=ji,dn.plugins=Ni,dn.Scale=jn,dn.scaleService=Ui,dn.Ticks=yn,dn.Tooltip=nn,dn.helpers.each(Jr,function(t,e){dn.scaleService.registerScaleType(e,t,t._defaults)}),wo){if(wo.hasOwnProperty(Mo)){dn.plugins.register(wo[Mo])}}dn.platform.initialize();var So=dn;if(typeof window!=="undefined"){window.Chart=dn}return(dn.Chart=dn).Legend=wo.legend._element,dn.Title=wo.title._element,dn.pluginService=dn.plugins,dn.PluginBase=dn.Element.extend({}),dn.canvasHelpers=dn.helpers.canvas,dn.layoutService=dn.layouts,dn.LinearScaleBase=qn,dn.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(i){dn[i]=function(t,e){return new dn(t,dn.helpers.merge(e||{},{type:i.charAt(0).toLowerCase()+i.slice(1)}))}}),So}(function(){try{return i(14)}catch(t){}}())},function(t){t.exports=JSON.parse("{}")},function(t,e,i){var n,r,o;r=[i(41)],void 0===(o="function"==typeof(n=function(i){var t=function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd){var e=i.fn.select2.amd}var e;(function(){if(!e||!e.requirejs){if(!e){e={}}else{r=e}
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var t,r,u;(function(d){var o,a,f,m,g={},v={},_={},y={},i=Object.prototype.hasOwnProperty,n=[].slice,b=/\.js$/;function x(t,e){return i.call(t,e)}function s(t,e){var i,n,r,o,a,s,l,c,u,h,p,d,f=e&&e.split("/"),m=_.map,g=m&&m["*"]||{};if(t){t=t.split("/");a=t.length-1;if(_.nodeIdCompat&&b.test(t[a])){t[a]=t[a].replace(b,"")}if(t[0].charAt(0)==="."&&f){d=f.slice(0,f.length-1);t=d.concat(t)}for(u=0;u<t.length;u++){p=t[u];if(p==="."){t.splice(u,1);u-=1}else if(p===".."){if(u===0||u===1&&t[2]===".."||t[u-1]===".."){continue}else if(u>0){t.splice(u-1,2);u-=2}}}t=t.join("/")}if((f||g)&&m){i=t.split("/");for(u=i.length;u>0;u-=1){n=i.slice(0,u).join("/");if(f){for(h=f.length;h>0;h-=1){r=m[f.slice(0,h).join("/")];if(r){r=r[n];if(r){o=r;s=u;break}}}}if(o){break}if(!l&&g&&g[n]){l=g[n];c=u}}if(!o&&l){o=l;s=c}if(o){i.splice(0,s,o);t=i.join("/")}}return t}function w(e,i){return function(){var t=n.call(arguments,0);if(typeof t[0]!=="string"&&t.length===1){t.push(null)}return a.apply(d,t.concat([e,i]))}}function l(e){return function(t){return s(t,e)}}function k(e){return function(t){g[e]=t}}function L(t){if(x(v,t)){var e=v[t];delete v[t];y[t]=true;o.apply(d,e)}if(!x(g,t)&&!x(y,t)){throw new Error("No "+t)}return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;if(i>-1){e=t.substring(0,i);t=t.substring(i+1,t.length)}return[e,t]}function C(t){return t?c(t):[]}f=function(t,e){var i,n=c(t),r=n[0],o=e[1];t=n[1];if(r){r=s(r,o);i=L(r)}if(r){if(i&&i.normalize){t=i.normalize(t,l(o))}else{t=s(t,o)}}else{t=s(t,o);n=c(t);r=n[0];t=n[1];if(r){i=L(r)}}return{f:r?r+"!"+t:t,n:t,pr:r,p:i}};function e(t){return function(){return _&&_.config&&_.config[t]||{}}}m={require:function(t){return w(t)},exports:function(t){var e=g[t];if(typeof e!=="undefined"){return e}else{return g[t]={}}},module:function(t){return{id:t,uri:"",exports:g[t],config:e(t)}}};o=function(t,e,i,n){var r,o,a,s,l,c,u=[],h=typeof i,p;n=n||t;c=C(n);if(h==="undefined"||h==="function"){e=!e.length&&i.length?["require","exports","module"]:e;for(l=0;l<e.length;l+=1){s=f(e[l],c);o=s.f;if(o==="require"){u[l]=m.require(t)}else if(o==="exports"){u[l]=m.exports(t);p=true}else if(o==="module"){r=u[l]=m.module(t)}else if(x(g,o)||x(v,o)||x(y,o)){u[l]=L(o)}else if(s.p){s.p.load(s.n,w(n,true),k(o),{});u[l]=g[o]}else{throw new Error(t+" missing "+o)}}a=i?i.apply(g[t],u):undefined;if(t){if(r&&r.exports!==d&&r.exports!==g[t]){g[t]=r.exports}else if(a!==d||!p){g[t]=a}}}else if(t){g[t]=i}};t=r=a=function(t,e,i,n,r){if(typeof t==="string"){if(m[t]){return m[t](e)}return L(f(t,C(e)).f)}else if(!t.splice){_=t;if(_.deps){a(_.deps,_.callback)}if(!e){return}if(e.splice){t=e;e=i;i=null}else{t=d}}e=e||function(){};if(typeof i==="function"){i=n;n=r}if(n){o(d,t,e,i)}else{setTimeout(function(){o(d,t,e,i)},4)}return a};a.config=function(t){return a(t)};t._defined=g;u=function(t,e,i){if(typeof t!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!e.splice){i=e;e=[]}if(!x(g,t)&&!x(v,t)){v[t]=[t,e,i]}};u.amd={jQuery:true}})();e.requirejs=t;e.require=r;e.define=u}})();e.define("almond",function(){});e.define("jquery",[],function(){var t=i||$;if(t==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return t});e.define("select2/utils",["jquery"],function(o){var r={};r.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var r in e){if(i.call(e,r)){t[r]=e[r]}}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t};function h(t){var e=t.prototype;var i=[];for(var n in e){var r=e[n];if(typeof r!=="function"){continue}if(n==="constructor"){continue}i.push(n)}return i}r.Decorate=function(n,r){var t=h(r);var e=h(n);function o(){var t=Array.prototype.unshift;var e=r.prototype.constructor.length;var i=n.prototype.constructor;if(e>0){t.call(arguments,n.prototype.constructor);i=r.prototype.constructor}i.apply(this,arguments)}r.displayName=n.displayName;function i(){this.constructor=o}o.prototype=new i;for(var a=0;a<e.length;a++){var s=e[a];o.prototype[s]=n.prototype[s]}var l=function(t){var e=function(){};if(t in o.prototype){e=o.prototype[t]}var i=r.prototype[t];return function(){var t=Array.prototype.unshift;t.call(arguments,e);return i.apply(this,arguments)}};for(var c=0;c<t.length;c++){var u=t[c];o.prototype[u]=l(u)}return o};var t=function(){this.listeners={}};t.prototype.on=function(t,e){this.listeners=this.listeners||{};if(t in this.listeners){this.listeners[t].push(e)}else{this.listeners[t]=[e]}};t.prototype.trigger=function(t){var e=Array.prototype.slice;var i=e.call(arguments,1);this.listeners=this.listeners||{};if(i==null){i=[]}if(i.length===0){i.push({})}i[0]._type=t;if(t in this.listeners){this.invoke(this.listeners[t],e.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};t.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++){t[i].apply(this,e)}};r.Observable=t;r.generateChars=function(t){var e="";for(var i=0;i<t;i++){var n=Math.floor(Math.random()*36);e+=n.toString(36)}return e};r.bind=function(t,e){return function(){t.apply(e,arguments)}};r._convertData=function(t){for(var e in t){var i=e.split("-");var n=t;if(i.length===1){continue}for(var r=0;r<i.length;r++){var o=i[r];o=o.substring(0,1).toLowerCase()+o.substring(1);if(!(o in n)){n[o]={}}if(r==i.length-1){n[o]=t[e]}n=n[o]}delete t[e]}return t};r.hasScroll=function(t,e){var i=o(e);var n=e.style.overflowX;var r=e.style.overflowY;if(n===r&&(r==="hidden"||r==="visible")){return false}if(n==="scroll"||r==="scroll"){return true}return i.innerHeight()<e.scrollHeight||i.innerWidth()<e.scrollWidth};r.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof t!=="string"){return t}return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})};r.appendMany=function(t,e){if(o.fn.jquery.substr(0,3)==="1.7"){var i=o();o.map(e,function(t){i=i.add(t)});e=i}t.append(e)};r.__cache={};var i=0;r.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");if(e==null){if(t.id){e=t.id;t.setAttribute("data-select2-id",e)}else{t.setAttribute("data-select2-id",++i);e=i.toString()}}return e};r.StoreData=function(t,e,i){var n=r.GetUniqueElementId(t);if(!r.__cache[n]){r.__cache[n]={}}r.__cache[n][e]=i};r.GetData=function(t,e){var i=r.GetUniqueElementId(t);if(e){if(r.__cache[i]){if(r.__cache[i][e]!=null){return r.__cache[i][e]}return o(t).data(e)}return o(t).data(e)}else{return r.__cache[i]}};r.RemoveData=function(t){var e=r.GetUniqueElementId(t);if(r.__cache[e]!=null){delete r.__cache[e]}t.removeAttribute("data-select2-id")};return r});e.define("select2/results",["jquery","./utils"],function(f,m){function n(t,e,i){this.$element=t;this.data=i;this.options=e;n.__super__.constructor.call(this)}m.Extend(n,m.Observable);n.prototype.render=function(){var t=f('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){t.attr("aria-multiselectable","true")}this.$results=t;return t};n.prototype.clear=function(){this.$results.empty()};n.prototype.displayMessage=function(t){var e=this.options.get("escapeMarkup");this.clear();this.hideLoading();var i=f('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var n=this.options.get("translations").get(t.message);i.append(e(n(t.args)));i[0].className+=" select2-results__message";this.$results.append(i)};n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};n.prototype.append=function(t){this.hideLoading();var e=[];if(t.results==null||t.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i];var r=this.option(n);e.push(r)}this.$results.append(e)};n.prototype.position=function(t,e){var i=e.find(".select2-results");i.append(t)};n.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)};n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]");var e=t.filter("[aria-selected=true]");if(e.length>0){e.first().trigger("mouseenter")}else{t.first().trigger("mouseenter")}this.ensureHighlightVisible()};n.prototype.setClasses=function(){var i=this;this.data.current(function(t){var n=f.map(t,function(t){return t.id.toString()});var e=i.$results.find(".select2-results__option[aria-selected]");e.each(function(){var t=f(this);var e=m.GetData(this,"data");var i=""+e.id;if(e.element!=null&&e.element.selected||e.element==null&&f.inArray(i,n)>-1){t.attr("aria-selected","true")}else{t.attr("aria-selected","false")}})})};n.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching");var i={disabled:true,loading:true,text:e(t)};var n=this.option(i);n.className+=" loading-results";this.$results.prepend(n)};n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};n.prototype.option=function(t){var e=document.createElement("li");e.className="select2-results__option";var i={role:"option","aria-selected":"false"};var n=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(t.element!=null&&n.call(t.element,":disabled")||t.element==null&&t.disabled){delete i["aria-selected"];i["aria-disabled"]="true"}if(t.id==null){delete i["aria-selected"]}if(t._resultId!=null){e.id=t._resultId}if(t.title){e.title=t.title}if(t.children){i.role="group";i["aria-label"]=t.text;delete i["aria-selected"]}for(var r in i){var o=i[r];e.setAttribute(r,o)}if(t.children){var a=f(e);var s=document.createElement("strong");s.className="select2-results__group";var l=f(s);this.template(t,s);var c=[];for(var u=0;u<t.children.length;u++){var h=t.children[u];var p=this.option(h);c.push(p)}var d=f("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(c);a.append(s);a.append(d)}else{this.template(t,e)}m.StoreData(e,"data",t);return e};n.prototype.bind=function(e,t){var l=this;var i=e.id+"-results";this.$results.attr("id",i);e.on("results:all",function(t){l.clear();l.append(t.data);if(e.isOpen()){l.setClasses();l.highlightFirstItem()}});e.on("results:append",function(t){l.append(t.data);if(e.isOpen()){l.setClasses()}});e.on("query",function(t){l.hideMessages();l.showLoading(t)});e.on("select",function(){if(!e.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});e.on("unselect",function(){if(!e.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});e.on("open",function(){l.$results.attr("aria-expanded","true");l.$results.attr("aria-hidden","false");l.setClasses();l.ensureHighlightVisible()});e.on("close",function(){l.$results.attr("aria-expanded","false");l.$results.attr("aria-hidden","true");l.$results.removeAttr("aria-activedescendant")});e.on("results:toggle",function(){var t=l.getHighlightedResults();if(t.length===0){return}t.trigger("mouseup")});e.on("results:select",function(){var t=l.getHighlightedResults();if(t.length===0){return}var e=m.GetData(t[0],"data");if(t.attr("aria-selected")=="true"){l.trigger("close",{})}else{l.trigger("select",{data:e})}});e.on("results:previous",function(){var t=l.getHighlightedResults();var e=l.$results.find("[aria-selected]");var i=e.index(t);if(i<=0){return}var n=i-1;if(t.length===0){n=0}var r=e.eq(n);r.trigger("mouseenter");var o=l.$results.offset().top;var a=r.offset().top;var s=l.$results.scrollTop()+(a-o);if(n===0){l.$results.scrollTop(0)}else if(a-o<0){l.$results.scrollTop(s)}});e.on("results:next",function(){var t=l.getHighlightedResults();var e=l.$results.find("[aria-selected]");var i=e.index(t);var n=i+1;if(n>=e.length){return}var r=e.eq(n);r.trigger("mouseenter");var o=l.$results.offset().top+l.$results.outerHeight(false);var a=r.offset().top+r.outerHeight(false);var s=l.$results.scrollTop()+a-o;if(n===0){l.$results.scrollTop(0)}else if(a>o){l.$results.scrollTop(s)}});e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")});e.on("results:message",function(t){l.displayMessage(t)});if(f.fn.mousewheel){this.$results.on("mousewheel",function(t){var e=l.$results.scrollTop();var i=l.$results.get(0).scrollHeight-e+t.deltaY;var n=t.deltaY>0&&e-t.deltaY<=0;var r=t.deltaY<0&&i<=l.$results.height();if(n){l.$results.scrollTop(0);t.preventDefault();t.stopPropagation()}else if(r){l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height());t.preventDefault();t.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var e=f(this);var i=m.GetData(this,"data");if(e.attr("aria-selected")==="true"){if(l.options.get("multiple")){l.trigger("unselect",{originalEvent:t,data:i})}else{l.trigger("close",{})}return}l.trigger("select",{originalEvent:t,data:i})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var e=m.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted");l.trigger("results:focus",{data:e,element:f(this)})})};n.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t};n.prototype.destroy=function(){this.$results.remove()};n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(t.length===0){return}var e=this.$results.find("[aria-selected]");var i=e.index(t);var n=this.$results.offset().top;var r=t.offset().top;var o=this.$results.scrollTop()+(r-n);var a=r-n;o-=t.outerHeight(false)*2;if(i<=2){this.$results.scrollTop(0)}else if(a>this.$results.outerHeight()||a<0){this.$results.scrollTop(o)}};n.prototype.template=function(t,e){var i=this.options.get("templateResult");var n=this.options.get("escapeMarkup");var r=i(t,e);if(r==null){e.style.display="none"}else if(typeof r==="string"){e.innerHTML=n(r)}else{f(e).append(r)}};return n});e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t});e.define("select2/selection/base",["jquery","../utils","../keys"],function(r,o,a){function i(t,e){this.$element=t;this.options=e;i.__super__.constructor.call(this)}o.Extend(i,o.Observable);i.prototype.render=function(){var t=r('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(o.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=o.GetData(this.$element[0],"old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}t.attr("title",this.$element.attr("title"));t.attr("tabindex",this._tabindex);t.attr("aria-disabled","false");this.$selection=t;return t};i.prototype.bind=function(t,e){var i=this;var n=t.id+"-results";this.container=t;this.$selection.on("focus",function(t){i.trigger("focus",t)});this.$selection.on("blur",function(t){i._handleBlur(t)});this.$selection.on("keydown",function(t){i.trigger("keypress",t);if(t.which===a.SPACE){t.preventDefault()}});t.on("results:focus",function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)});t.on("selection:update",function(t){i.update(t.data)});t.on("open",function(){i.$selection.attr("aria-expanded","true");i.$selection.attr("aria-owns",n);i._attachCloseHandler(t)});t.on("close",function(){i.$selection.attr("aria-expanded","false");i.$selection.removeAttr("aria-activedescendant");i.$selection.removeAttr("aria-owns");i.$selection.trigger("focus");i._detachCloseHandler(t)});t.on("enable",function(){i.$selection.attr("tabindex",i._tabindex);i.$selection.attr("aria-disabled","false")});t.on("disable",function(){i.$selection.attr("tabindex","-1");i.$selection.attr("aria-disabled","true")})};i.prototype._handleBlur=function(t){var e=this;window.setTimeout(function(){if(document.activeElement==e.$selection[0]||r.contains(e.$selection[0],document.activeElement)){return}e.trigger("blur",t)},1)};i.prototype._attachCloseHandler=function(t){r(document.body).on("mousedown.select2."+t.id,function(t){var e=r(t.target);var i=e.closest(".select2");var n=r(".select2.select2-container--open");n.each(function(){if(this==i[0]){return}var t=o.GetData(this,"element");t.select2("close")})})};i.prototype._detachCloseHandler=function(t){r(document.body).off("mousedown.select2."+t.id)};i.prototype.position=function(t,e){var i=e.find(".selection");i.append(t)};i.prototype.destroy=function(){this._detachCloseHandler(this.container)};i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")};i.prototype.isEnabled=function(){return!this.isDisabled()};i.prototype.isDisabled=function(){return this.options.get("disabled")};return i});e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i,n){function r(){r.__super__.constructor.apply(this,arguments)}i.Extend(r,e);r.prototype.render=function(){var t=r.__super__.render.call(this);t.addClass("select2-selection--single");t.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return t};r.prototype.bind=function(e,t){var i=this;r.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",n);this.$selection.on("mousedown",function(t){if(t.which!==1){return}i.trigger("toggle",{originalEvent:t})});this.$selection.on("focus",function(t){});this.$selection.on("blur",function(t){});e.on("focus",function(t){if(!e.isOpen()){i.$selection.trigger("focus")}})};r.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty();t.removeAttr("title")};r.prototype.display=function(t,e){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(t,e))};r.prototype.selectionContainer=function(){return t("<span></span>")};r.prototype.update=function(t){if(t.length===0){this.clear();return}var e=t[0];var i=this.$selection.find(".select2-selection__rendered");var n=this.display(e,i);i.empty().append(n);var r=e.title||e.text;if(r){i.attr("title",r)}else{i.removeAttr("title")}};return r});e.define("select2/selection/multiple",["jquery","./base","../utils"],function(o,t,l){function i(t,e){i.__super__.constructor.apply(this,arguments)}l.Extend(i,t);i.prototype.render=function(){var t=i.__super__.render.call(this);t.addClass("select2-selection--multiple");t.html('<ul class="select2-selection__rendered"></ul>');return t};i.prototype.bind=function(t,e){var r=this;i.__super__.bind.apply(this,arguments);this.$selection.on("click",function(t){r.trigger("toggle",{originalEvent:t})});this.$selection.on("click",".select2-selection__choice__remove",function(t){if(r.isDisabled()){return}var e=o(this);var i=e.parent();var n=l.GetData(i[0],"data");r.trigger("unselect",{originalEvent:t,data:n})})};i.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty();t.removeAttr("title")};i.prototype.display=function(t,e){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(t,e))};i.prototype.selectionContainer=function(){var t=o('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return t};i.prototype.update=function(t){this.clear();if(t.length===0){return}var e=[];for(var i=0;i<t.length;i++){var n=t[i];var r=this.selectionContainer();var o=this.display(n,r);r.append(o);var a=n.title||n.text;if(a){r.attr("title",a)}l.StoreData(r[0],"data",n);e.push(r)}var s=this.$selection.find(".select2-selection__rendered");l.appendMany(s,e)};return i});e.define("select2/selection/placeholder",["../utils"],function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));t.call(this,e,i)}e.prototype.normalizePlaceholder=function(t,e){if(typeof e==="string"){e={id:"",text:e}}return e};e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();i.html(this.display(e));i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return i};e.prototype.update=function(t,e){var i=e.length==1&&e[0].id!=this.placeholder.id;var n=e.length>1;if(n||i){return t.call(this,e)}this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)};return e});e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(r,n,s){function t(){}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)});e.on("keypress",function(t){n._handleKeyboardClear(t,e)})};t.prototype._handleClear=function(t,e){if(this.isDisabled()){return}var i=this.$selection.find(".select2-selection__clear");if(i.length===0){return}e.stopPropagation();var n=s.GetData(i[0],"data");var r=this.$element.val();this.$element.val(this.placeholder.id);var o={data:n};this.trigger("clear",o);if(o.prevented){this.$element.val(r);return}for(var a=0;a<n.length;a++){o={data:n[a]};this.trigger("unselect",o);if(o.prevented){this.$element.val(r);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};t.prototype._handleKeyboardClear=function(t,e,i){if(i.isOpen()){return}if(e.which==n.DELETE||e.which==n.BACKSPACE){this._handleClear(e)}};t.prototype.update=function(t,e){t.call(this,e);if(this.$selection.find(".select2-selection__placeholder").length>0||e.length===0){return}var i=this.options.get("translations").get("removeAllItems");var n=r('<span class="select2-selection__clear" title="'+i()+'">'+"&times;"+"</span>");s.StoreData(n[0],"data",e);this.$selection.find(".select2-selection__rendered").prepend(n)};return t});e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,s,l){function t(t,e,i){t.call(this,e,i)}t.prototype.render=function(t){var e=n('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</li>");this.$searchContainer=e;this.$search=e.find("input");var i=t.call(this);this._transferTabIndex();return i};t.prototype.bind=function(t,e,i){var r=this;var n=e.id+"-results";t.call(this,e,i);e.on("open",function(){r.$search.attr("aria-controls",n);r.$search.trigger("focus")});e.on("close",function(){r.$search.val("");r.$search.removeAttr("aria-controls");r.$search.removeAttr("aria-activedescendant");r.$search.trigger("focus")});e.on("enable",function(){r.$search.prop("disabled",false);r._transferTabIndex()});e.on("disable",function(){r.$search.prop("disabled",true)});e.on("focus",function(t){r.$search.trigger("focus")});e.on("results:focus",function(t){if(t.data._resultId){r.$search.attr("aria-activedescendant",t.data._resultId)}else{r.$search.removeAttr("aria-activedescendant")}});this.$selection.on("focusin",".select2-search--inline",function(t){r.trigger("focus",t)});this.$selection.on("focusout",".select2-search--inline",function(t){r._handleBlur(t)});this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation();r.trigger("keypress",t);r._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===l.BACKSPACE&&r.$search.val()===""){var i=r.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var n=s.GetData(i[0],"data");r.searchRemoveChoice(n);t.preventDefault()}}});this.$selection.on("click",".select2-search--inline",function(t){if(r.$search.val()){t.stopPropagation()}});var o=document.documentMode;var a=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(t){if(a){r.$selection.off("input.search input.searchcheck");return}r.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(a&&t.type==="input"){r.$selection.off("input.search input.searchcheck");return}var e=t.which;if(e==l.SHIFT||e==l.CTRL||e==l.ALT){return}if(e==l.TAB){return}r.handleSearch(t)})};t.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};t.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)};t.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");t.call(this,e);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(i){this.$search.trigger("focus")}};t.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};t.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e});this.$search.val(e.text);this.handleSearch()};t.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(this.$search.attr("placeholder")!==""){t=this.$selection.find(".select2-selection__rendered").width()}else{var e=this.$search.val().length+1;t=e*.75+"em"}this.$search.css("width",t)};return t});e.define("select2/selection/eventRelay",["jquery"],function(a){function t(){}t.prototype.bind=function(t,e,i){var n=this;var r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var o=["opening","closing","selecting","unselecting","clearing"];t.call(this,e,i);e.on("*",function(t,e){if(a.inArray(t,r)===-1){return}e=e||{};var i=a.Event("select2:"+t,{params:e});n.$element.trigger(i);if(a.inArray(t,o)===-1){return}e.prevented=i.isDefaultPrevented()})};return t});e.define("select2/translation",["jquery","require"],function(e,i){function n(t){this.dict=t||{}}n.prototype.all=function(){return this.dict};n.prototype.get=function(t){return this.dict[t]};n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)};n._cache={};n.loadPath=function(t){if(!(t in n._cache)){var e=i(t);n._cache[t]=e}return new n(n._cache[t])};return n});e.define("select2/diacritics",[],function(){var t={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"};return t});e.define("select2/data/base",["../utils"],function(n){function i(t,e){i.__super__.constructor.call(this)}n.Extend(i,n.Observable);i.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")};i.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")};i.prototype.bind=function(t,e){};i.prototype.destroy=function(){};i.prototype.generateResultId=function(t,e){var i=t.id+"-result-";i+=n.generateChars(4);if(e.id!=null){i+="-"+e.id.toString()}else{i+="-"+n.generateChars(4)}return i};return i});e.define("select2/data/select",["./base","../utils","jquery"],function(t,s,l){function i(t,e){this.$element=t;this.options=e;i.__super__.constructor.call(this)}s.Extend(i,t);i.prototype.current=function(t){var i=[];var n=this;this.$element.find(":selected").each(function(){var t=l(this);var e=n.item(t);i.push(e)});t(i)};i.prototype.select=function(r){var o=this;r.selected=true;if(l(r.element).is("option")){r.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple")){this.current(function(t){var e=[];r=[r];r.push.apply(r,t);for(var i=0;i<r.length;i++){var n=r[i].id;if(l.inArray(n,e)===-1){e.push(n)}}o.$element.val(e);o.$element.trigger("input").trigger("change")})}else{var t=r.id;this.$element.val(t);this.$element.trigger("input").trigger("change")}};i.prototype.unselect=function(r){var o=this;if(!this.$element.prop("multiple")){return}r.selected=false;if(l(r.element).is("option")){r.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current(function(t){var e=[];for(var i=0;i<t.length;i++){var n=t[i].id;if(n!==r.id&&l.inArray(n,e)===-1){e.push(n)}}o.$element.val(e);o.$element.trigger("input").trigger("change")})};i.prototype.bind=function(t,e){var i=this;this.container=t;t.on("select",function(t){i.select(t.data)});t.on("unselect",function(t){i.unselect(t.data)})};i.prototype.destroy=function(){this.$element.find("*").each(function(){s.RemoveData(this)})};i.prototype.query=function(n,t){var r=[];var o=this;var e=this.$element.children();e.each(function(){var t=l(this);if(!t.is("option")&&!t.is("optgroup")){return}var e=o.item(t);var i=o.matches(n,e);if(i!==null){r.push(i)}});t({results:r})};i.prototype.addOptions=function(t){s.appendMany(this.$element,t)};i.prototype.option=function(t){var e;if(t.children){e=document.createElement("optgroup");e.label=t.text}else{e=document.createElement("option");if(e.textContent!==undefined){e.textContent=t.text}else{e.innerText=t.text}}if(t.id!==undefined){e.value=t.id}if(t.disabled){e.disabled=true}if(t.selected){e.selected=true}if(t.title){e.title=t.title}var i=l(e);var n=this._normalizeItem(t);n.element=e;s.StoreData(e,"data",n);return i};i.prototype.item=function(t){var e={};e=s.GetData(t[0],"data");if(e!=null){return e}if(t.is("option")){e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")}}else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};var i=t.children("option");var n=[];for(var r=0;r<i.length;r++){var o=l(i[r]);var a=this.item(o);n.push(a)}e.children=n}e=this._normalizeItem(e);e.element=t[0];s.StoreData(t[0],"data",e);return e};i.prototype._normalizeItem=function(t){if(t!==Object(t)){t={id:t,text:t}}t=l.extend({},{text:""},t);var e={selected:false,disabled:false};if(t.id!=null){t.id=t.id.toString()}if(t.text!=null){t.text=t.text.toString()}if(t._resultId==null&&t.id&&this.container!=null){t._resultId=this.generateResultId(this.container,t)}return l.extend({},e,t)};i.prototype.matches=function(t,e){var i=this.options.get("matcher");return i(t,e)};return i});e.define("select2/data/array",["./select","../utils","jquery"],function(t,f,m){function n(t,e){this._dataToConvert=e.get("data")||[];n.__super__.constructor.call(this,t,e)}f.Extend(n,t);n.prototype.bind=function(t,e){n.__super__.bind.call(this,t,e);this.addOptions(this.convertToOptions(this._dataToConvert))};n.prototype.select=function(i){var t=this.$element.find("option").filter(function(t,e){return e.value==i.id.toString()});if(t.length===0){t=this.option(i);this.addOptions(t)}n.__super__.select.call(this,i)};n.prototype.convertToOptions=function(t){var e=this;var i=this.$element.find("option");var n=i.map(function(){return e.item(m(this)).id}).get();var r=[];function o(t){return function(){return m(this).val()==t.id}}for(var a=0;a<t.length;a++){var s=this._normalizeItem(t[a]);if(m.inArray(s.id,n)>=0){var l=i.filter(o(s));var c=this.item(l);var u=m.extend(true,{},s,c);var h=this.option(u);l.replaceWith(h);continue}var p=this.option(s);if(s.children){var d=this.convertToOptions(s.children);f.appendMany(p,d)}r.push(p)}return r};return n});e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,a){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}i.__super__.constructor.call(this,t,e)}e.Extend(i,t);i.prototype._applyDefaults=function(t){var e={data:function(t){return a.extend({},t,{q:t.term})},transport:function(t,e,i){var n=a.ajax(t);n.then(e);n.fail(i);return n}};return a.extend({},e,t,true)};i.prototype.processResults=function(t){return t};i.prototype.query=function(i,n){var t=[];var r=this;if(this._request!=null){if(a.isFunction(this._request.abort)){this._request.abort()}this._request=null}var e=a.extend({type:"GET"},this.ajaxOptions);if(typeof e.url==="function"){e.url=e.url.call(this.$element,i)}if(typeof e.data==="function"){e.data=e.data.call(this.$element,i)}function o(){var t=e.transport(e,function(t){var e=r.processResults(t,i);if(r.options.get("debug")&&window.console&&console.error){if(!e||!e.results||!a.isArray(e.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}n(e)},function(){if("status"in t&&(t.status===0||t.status==="0")){return}r.trigger("results:message",{message:"errorLoading"})});r._request=t}if(this.ajaxOptions.delay&&i.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)}else{o()}};return i});e.define("select2/data/tags",["jquery"],function(u){function t(t,e,i){var n=i.get("tags");var r=i.get("createTag");if(r!==undefined){this.createTag=r}var o=i.get("insertTag");if(o!==undefined){this.insertTag=o}t.call(this,e,i);if(u.isArray(n)){for(var a=0;a<n.length;a++){var s=n[a];var l=this._normalizeItem(s);var c=this.option(l);this.$element.append(c)}}}t.prototype.query=function(t,h,p){var d=this;this._removeOldTags();if(h.term==null||h.page!=null){t.call(this,h,p);return}function f(t,e){var i=t.results;for(var n=0;n<i.length;n++){var r=i[n];var o=r.children!=null&&!f({results:r.children},true);var a=(r.text||"").toUpperCase();var s=(h.term||"").toUpperCase();var l=a===s;if(l||o){if(e){return false}t.data=i;p(t);return}}if(e){return true}var c=d.createTag(h);if(c!=null){var u=d.option(c);u.attr("data-select2-tag",true);d.addOptions([u]);d.insertTag(i,c)}t.results=i;p(t)}t.call(this,h,f)};t.prototype.createTag=function(t,e){var i=u.trim(e.term);if(i===""){return null}return{id:i,text:i}};t.prototype.insertTag=function(t,e,i){e.unshift(i)};t.prototype._removeOldTags=function(t){var e=this.$element.find("option[data-select2-tag]");e.each(function(){if(this.selected){return}u(this).remove()})};return t});e.define("select2/data/tokenizer",["jquery"],function(p){function t(t,e,i){var n=i.get("tokenizer");if(n!==undefined){this.tokenizer=n}t.call(this,e,i)}t.prototype.bind=function(t,e,i){t.call(this,e,i);this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")};t.prototype.query=function(t,e,i){var r=this;function n(t){var e=r._normalizeItem(t);var i=r.$element.find("option").filter(function(){return p(this).val()===e.id});if(!i.length){var n=r.option(e);n.attr("data-select2-tag",true);r._removeOldTags();r.addOptions([n])}o(e)}function o(t){r.trigger("select",{data:t})}e.term=e.term||"";var a=this.tokenizer(e,this.options,n);if(a.term!==e.term){if(this.$search.length){this.$search.val(a.term);this.$search.trigger("focus")}e.term=a.term}t.call(this,e,i)};t.prototype.tokenizer=function(t,e,i,n){var r=i.get("tokenSeparators")||[];var o=e.term;var a=0;var s=this.createTag||function(t){return{id:t.term,text:t.term}};while(a<o.length){var l=o[a];if(p.inArray(l,r)===-1){a++;continue}var c=o.substr(0,a);var u=p.extend({},e,{term:c});var h=s(u);if(h==null){a++;continue}n(h);o=o.substr(a+1)||"";a=0}return{term:o}};return t});e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength");t.call(this,e,i)}t.prototype.query=function(t,e,i){e.term=e.term||"";if(e.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}});return}t.call(this,e,i)};return t});e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength");t.call(this,e,i)}t.prototype.query=function(t,e,i){e.term=e.term||"";if(this.maximumInputLength>0&&e.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}});return}t.call(this,e,i)};return t});e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength");t.call(this,e,i)}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("select",function(){n._checkIfMaximumSelected()})};t.prototype.query=function(t,e,i){var n=this;this._checkIfMaximumSelected(function(){t.call(n,e,i)})};t.prototype._checkIfMaximumSelected=function(t,i){var n=this;this.current(function(t){var e=t!=null?t.length:0;if(n.maximumSelectionLength>0&&e>=n.maximumSelectionLength){n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}});return}if(i){i()}})};return t});e.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(t,e){this.$element=t;this.options=e;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$dropdown=t;return t};i.prototype.bind=function(){};i.prototype.position=function(t,e){};i.prototype.destroy=function(){this.$dropdown.remove()};return i});e.define("select2/dropdown/search",["jquery","../utils"],function(o,t){function e(){}e.prototype.render=function(t){var e=t.call(this);var i=o('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=i;this.$search=i.find("input");e.prepend(i);return e};e.prototype.bind=function(t,e,i){var n=this;var r=e.id+"-results";t.call(this,e,i);this.$search.on("keydown",function(t){n.trigger("keypress",t);n._keyUpPrevented=t.isDefaultPrevented()});this.$search.on("input",function(t){o(this).off("keyup")});this.$search.on("keyup input",function(t){n.handleSearch(t)});e.on("open",function(){n.$search.attr("tabindex",0);n.$search.attr("aria-controls",r);n.$search.trigger("focus");window.setTimeout(function(){n.$search.trigger("focus")},0)});e.on("close",function(){n.$search.attr("tabindex",-1);n.$search.removeAttr("aria-controls");n.$search.removeAttr("aria-activedescendant");n.$search.val("");n.$search.trigger("blur")});e.on("focus",function(){if(!e.isOpen()){n.$search.trigger("focus")}});e.on("results:all",function(t){if(t.query.term==null||t.query.term===""){var e=n.showSearch(t);if(e){n.$searchContainer.removeClass("select2-search--hide")}else{n.$searchContainer.addClass("select2-search--hide")}}});e.on("results:focus",function(t){if(t.data._resultId){n.$search.attr("aria-activedescendant",t.data._resultId)}else{n.$search.removeAttr("aria-activedescendant")}})};e.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};e.prototype.showSearch=function(t,e){return true};return e});e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));t.call(this,e,i,n)}t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results);t.call(this,e)};t.prototype.normalizePlaceholder=function(t,e){if(typeof e==="string"){e={id:"",text:e}}return e};t.prototype.removePlaceholder=function(t,e){var i=e.slice(0);for(var n=e.length-1;n>=0;n--){var r=e[n];if(this.placeholder.id===r.id){i.splice(n,1)}}return i};return t});e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(t,e,i,n){this.lastParams={};t.call(this,e,i,n);this.$loadingMore=this.createLoadingMore();this.loading=false}t.prototype.append=function(t,e){this.$loadingMore.remove();this.loading=false;t.call(this,e);if(this.showLoadingMore(e)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("query",function(t){n.lastParams=t;n.loading=true});e.on("query:append",function(t){n.lastParams=t;n.loading=true});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};t.prototype.loadMoreIfNeeded=function(){var t=n.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!t){return}var e=this.$results.offset().top+this.$results.outerHeight(false);var i=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(e+50>=i){this.loadMore()}};t.prototype.loadMore=function(){this.loading=true;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)};t.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more};t.prototype.createLoadingMore=function(){var t=n("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var e=this.options.get("translations").get("loadingMore");t.html(e(this.lastParams));return t};return t});e.define("select2/dropdown/attachBody",["jquery","../utils"],function(d,s){function t(t,e,i){this.$dropdownParent=d(i.get("dropdownParent")||document.body);t.call(this,e,i)}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("open",function(){n._showDropdown();n._attachPositioningHandler(e);n._bindContainerResultHandlers(e)});e.on("close",function(){n._hideDropdown();n._detachPositioningHandler(e)});this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})};t.prototype.destroy=function(t){t.call(this);this.$dropdownContainer.remove()};t.prototype.position=function(t,e,i){e.attr("class",i.attr("class"));e.removeClass("select2");e.addClass("select2-container--open");e.css({position:"absolute",top:-999999});this.$container=i};t.prototype.render=function(t){var e=d("<span></span>");var i=t.call(this);e.append(i);this.$dropdownContainer=e;return e};t.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()};t.prototype._bindContainerResultHandlers=function(t,e){if(this._containerResultsHandlersBound){return}var i=this;e.on("results:all",function(){i._positionDropdown();i._resizeDropdown()});e.on("results:append",function(){i._positionDropdown();i._resizeDropdown()});e.on("results:message",function(){i._positionDropdown();i._resizeDropdown()});e.on("select",function(){i._positionDropdown();i._resizeDropdown()});e.on("unselect",function(){i._positionDropdown();i._resizeDropdown()});this._containerResultsHandlersBound=true};t.prototype._attachPositioningHandler=function(t,e){var i=this;var n="scroll.select2."+e.id;var r="resize.select2."+e.id;var o="orientationchange.select2."+e.id;var a=this.$container.parents().filter(s.hasScroll);a.each(function(){s.StoreData(this,"select2-scroll-position",{x:d(this).scrollLeft(),y:d(this).scrollTop()})});a.on(n,function(t){var e=s.GetData(this,"select2-scroll-position");d(this).scrollTop(e.y)});d(window).on(n+" "+r+" "+o,function(t){i._positionDropdown();i._resizeDropdown()})};t.prototype._detachPositioningHandler=function(t,e){var i="scroll.select2."+e.id;var n="resize.select2."+e.id;var r="orientationchange.select2."+e.id;var o=this.$container.parents().filter(s.hasScroll);o.off(i);d(window).off(i+" "+n+" "+r)};t.prototype._positionDropdown=function(){var t=d(window);var e=this.$dropdown.hasClass("select2-dropdown--above");var i=this.$dropdown.hasClass("select2-dropdown--below");var n=null;var r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(false);var o={height:this.$container.outerHeight(false)};o.top=r.top;o.bottom=r.top+o.height;var a={height:this.$dropdown.outerHeight(false)};var s={top:t.scrollTop(),bottom:t.scrollTop()+t.height()};var l=s.top<r.top-a.height;var c=s.bottom>r.bottom+a.height;var u={left:r.left,top:o.bottom};var h=this.$dropdownParent;if(h.css("position")==="static"){h=h.offsetParent()}var p={top:0,left:0};if(d.contains(document.body,h[0])||h[0].isConnected){p=h.offset()}u.top-=p.top;u.left-=p.left;if(!e&&!i){n="below"}if(!c&&l&&!e){n="above"}else if(!l&&c&&e){n="below"}if(n=="above"||e&&n!=="below"){u.top=o.top-p.top-a.height}if(n!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)}this.$dropdownContainer.css(u)};t.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){t.minWidth=t.width;t.position="relative";t.width="auto"}this.$dropdown.css(t)};t.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return t});e.define("select2/dropdown/minimumResultsForSearch",[],function(){function r(t){var e=0;for(var i=0;i<t.length;i++){var n=t[i];if(n.children){e+=r(n.children)}else{e++}}return e}function t(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}t.call(this,e,i,n)}t.prototype.showSearch=function(t,e){if(r(e.data.results)<this.minimumResultsForSearch){return false}return t.call(this,e)};return t});e.define("select2/dropdown/selectOnClose",["../utils"],function(o){function t(){}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("close",function(t){n._handleSelectOnClose(t)})};t.prototype._handleSelectOnClose=function(t,e){if(e&&e.originalSelect2Event!=null){var i=e.originalSelect2Event;if(i._type==="select"||i._type==="unselect"){return}}var n=this.getHighlightedResults();if(n.length<1){return}var r=o.GetData(n[0],"data");if(r.element!=null&&r.element.selected||r.element==null&&r.selected){return}this.trigger("select",{data:r})};return t});e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("select",function(t){n._selectTriggered(t)});e.on("unselect",function(t){n._selectTriggered(t)})};t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;if(i&&(i.ctrlKey||i.metaKey)){return}this.trigger("close",{originalEvent:i,originalSelect2Event:e})};return t});e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum;var i="Please delete "+e+" character";if(e!=1){i+="s"}return i},inputTooShort:function(t){var e=t.minimum-t.input.length;var i="Please enter "+e+" or more characters";return i},loadingMore:function(){return"Loading more results"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";if(t.maximum!=1){e+="s"}return e},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"}}});e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(u,c,h,p,d,f,m,g,v,_,a,i,y,b,x,w,k,L,C,M,S,T,P,D,A,E,O,I,t){function e(){this.reset()}e.prototype.apply=function(t){t=u.extend(true,{},this.defaults,t);if(t.dataAdapter==null){if(t.ajax!=null){t.dataAdapter=x}else if(t.data!=null){t.dataAdapter=b}else{t.dataAdapter=y}if(t.minimumInputLength>0){t.dataAdapter=_.Decorate(t.dataAdapter,L)}if(t.maximumInputLength>0){t.dataAdapter=_.Decorate(t.dataAdapter,C)}if(t.maximumSelectionLength>0){t.dataAdapter=_.Decorate(t.dataAdapter,M)}if(t.tags){t.dataAdapter=_.Decorate(t.dataAdapter,w)}if(t.tokenSeparators!=null||t.tokenizer!=null){t.dataAdapter=_.Decorate(t.dataAdapter,k)}if(t.query!=null){var e=c(t.amdBase+"compat/query");t.dataAdapter=_.Decorate(t.dataAdapter,e)}if(t.initSelection!=null){var i=c(t.amdBase+"compat/initSelection");t.dataAdapter=_.Decorate(t.dataAdapter,i)}}if(t.resultsAdapter==null){t.resultsAdapter=h;if(t.ajax!=null){t.resultsAdapter=_.Decorate(t.resultsAdapter,D)}if(t.placeholder!=null){t.resultsAdapter=_.Decorate(t.resultsAdapter,P)}if(t.selectOnClose){t.resultsAdapter=_.Decorate(t.resultsAdapter,O)}}if(t.dropdownAdapter==null){if(t.multiple){t.dropdownAdapter=S}else{var n=_.Decorate(S,T);t.dropdownAdapter=n}if(t.minimumResultsForSearch!==0){t.dropdownAdapter=_.Decorate(t.dropdownAdapter,E)}if(t.closeOnSelect){t.dropdownAdapter=_.Decorate(t.dropdownAdapter,I)}if(t.dropdownCssClass!=null||t.dropdownCss!=null||t.adaptDropdownCssClass!=null){var r=c(t.amdBase+"compat/dropdownCss");t.dropdownAdapter=_.Decorate(t.dropdownAdapter,r)}t.dropdownAdapter=_.Decorate(t.dropdownAdapter,A)}if(t.selectionAdapter==null){if(t.multiple){t.selectionAdapter=d}else{t.selectionAdapter=p}if(t.placeholder!=null){t.selectionAdapter=_.Decorate(t.selectionAdapter,f)}if(t.allowClear){t.selectionAdapter=_.Decorate(t.selectionAdapter,m)}if(t.multiple){t.selectionAdapter=_.Decorate(t.selectionAdapter,g)}if(t.containerCssClass!=null||t.containerCss!=null||t.adaptContainerCssClass!=null){var o=c(t.amdBase+"compat/containerCss");t.selectionAdapter=_.Decorate(t.selectionAdapter,o)}t.selectionAdapter=_.Decorate(t.selectionAdapter,v)}t.language=this._resolveLanguage(t.language);t.language.push("en");var a=[];for(var s=0;s<t.language.length;s++){var l=t.language[s];if(a.indexOf(l)===-1){a.push(l)}}t.language=a;t.translations=this._processTranslations(t.language,t.debug);return t};e.prototype.reset=function(){function l(t){function e(t){return i[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function c(t,e){if(u.trim(t.term)===""){return e}if(e.children&&e.children.length>0){var i=u.extend(true,{},e);for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];var o=c(t,r);if(o==null){i.children.splice(n,1)}}if(i.children.length>0){return i}return c(t,i)}var a=l(e.text).toUpperCase();var s=l(t.term).toUpperCase();if(a.indexOf(s)>-1){return e}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:_.escapeMarkup,language:{},matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}};e.prototype.applyFromElement=function(t,e){var i=t.language;var n=this.defaults.language;var r=e.prop("lang");var o=e.closest("[lang]").prop("lang");var a=Array.prototype.concat.call(this._resolveLanguage(r),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(o));t.language=a;return t};e.prototype._resolveLanguage=function(t){if(!t){return[]}if(u.isEmptyObject(t)){return[]}if(u.isPlainObject(t)){return[t]}var e;if(!u.isArray(t)){e=[t]}else{e=t}var i=[];for(var n=0;n<e.length;n++){i.push(e[n]);if(typeof e[n]==="string"&&e[n].indexOf("-")>0){var r=e[n].split("-");var o=r[0];i.push(o)}}return i};e.prototype._processTranslations=function(t,e){var i=new a;for(var n=0;n<t.length;n++){var r=new a;var o=t[n];if(typeof o==="string"){try{r=a.loadPath(o)}catch(t){try{o=this.defaults.amdLanguageBase+o;r=a.loadPath(o)}catch(t){if(e&&window.console&&console.warn){console.warn('Select2: The language file for "'+o+'" could '+"not be automatically loaded. A fallback will be used instead.")}}}}else if(u.isPlainObject(o)){r=new a(o)}else{r=o}i.extend(r)}return i};e.prototype.set=function(t,e){var i=u.camelCase(t);var n={};n[i]=e;var r=_._convertData(n);u.extend(true,this.defaults,r)};var n=new e;return n});e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,p,r,d){function t(t,e){this.options=t;if(e!=null){this.fromElement(e)}if(e!=null){this.options=r.applyFromElement(this.options,e)}this.options=r.apply(this.options);if(e&&e.is("input")){var i=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,i)}}t.prototype.fromElement=function(t){var e=["select2"];if(this.options.multiple==null){this.options.multiple=t.prop("multiple")}if(this.options.disabled==null){this.options.disabled=t.prop("disabled")}if(this.options.dir==null){if(t.prop("dir")){this.options.dir=t.prop("dir")}else if(t.closest("[dir]").prop("dir")){this.options.dir=t.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}t.prop("disabled",this.options.disabled);t.prop("multiple",this.options.multiple);if(d.GetData(t[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}d.StoreData(t[0],"data",d.GetData(t[0],"select2Tags"));d.StoreData(t[0],"tags",true)}if(d.GetData(t[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}t.attr("ajax--url",d.GetData(t[0],"ajaxUrl"));d.StoreData(t[0],"ajax-Url",d.GetData(t[0],"ajaxUrl"))}var i={};function n(t,e){return e.toUpperCase()}for(var r=0;r<t[0].attributes.length;r++){var o=t[0].attributes[r].name;var a="data-";if(o.substr(0,a.length)==a){var s=o.substring(a.length);var l=d.GetData(t[0],s);var c=s.replace(/-([a-z])/g,n);i[c]=l}}if(p.fn.jquery&&p.fn.jquery.substr(0,2)=="1."&&t[0].dataset){i=p.extend(true,{},t[0].dataset,i)}var u=p.extend(true,{},d.GetData(t[0]),i);u=d._convertData(u);for(var h in u){if(p.inArray(h,e)>-1){continue}if(p.isPlainObject(this.options[h])){p.extend(this.options[h],u[h])}else{this.options[h]=u[h]}}return this};t.prototype.get=function(t){return this.options[t]};t.prototype.set=function(t,e){this.options[t]=e};return t});e.define("select2/core",["jquery","./options","./utils","./keys"],function(a,c,u,n){var h=function(t,e){if(u.GetData(t[0],"select2")!=null){u.GetData(t[0],"select2").destroy()}this.$element=t;this.id=this._generateId(t);e=e||{};this.options=new c(e,t);h.__super__.constructor.call(this);var i=t.attr("tabindex")||0;u.StoreData(t[0],"old-tabindex",i);t.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(t,this.options);var r=this.render();this._placeContainer(r);var o=this.options.get("selectionAdapter");this.selection=new o(t,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);var a=this.options.get("dropdownAdapter");this.dropdown=new a(t,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);var s=this.options.get("resultsAdapter");this.results=new s(t,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(t){l.trigger("selection:update",{data:t})});t.addClass("select2-hidden-accessible");t.attr("aria-hidden","true");this._syncAttributes();u.StoreData(t[0],"select2",this);t.data("select2",this)};u.Extend(h,u.Observable);h.prototype._generateId=function(t){var e="";if(t.attr("id")!=null){e=t.attr("id")}else if(t.attr("name")!=null){e=t.attr("name")+"-"+u.generateChars(2)}else{e=u.generateChars(4)}e=e.replace(/(:|\.|\[|\]|,)/g,"");e="select2-"+e;return e};h.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));if(e!=null){t.css("width",e)}};h.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(e=="resolve"){var n=this._resolveWidth(t,"style");if(n!=null){return n}return this._resolveWidth(t,"element")}if(e=="element"){var r=t.outerWidth(false);if(r<=0){return"auto"}return r+"px"}if(e=="style"){var o=t.attr("style");if(typeof o!=="string"){return null}var a=o.split(";");for(var s=0,l=a.length;s<l;s=s+1){var c=a[s].replace(/\s/g,"");var u=c.match(i);if(u!==null&&u.length>=1){return u[1]}}return null}if(e=="computedstyle"){var h=window.getComputedStyle(t[0]);return h.width}return e};h.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};h.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})});this.$element.on("focus.select2",function(t){e.trigger("focus",t)});this._syncA=u.bind(this._syncAttributes,this);this._syncS=u.bind(this._syncSubtree,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._syncA)}var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(t!=null){this._observer=new t(function(t){e._syncA();e._syncS(null,t)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})}else if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",e._syncA,false);this.$element[0].addEventListener("DOMNodeInserted",e._syncS,false);this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,false)}};h.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(t,e){i.trigger(t,e)})};h.prototype._registerSelectionEvents=function(){var i=this;var n=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()});this.selection.on("focus",function(t){i.focus(t)});this.selection.on("*",function(t,e){if(a.inArray(t,n)!==-1){return}i.trigger(t,e)})};h.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(t,e){i.trigger(t,e)})};h.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(t,e){i.trigger(t,e)})};h.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")});this.on("close",function(){i.$container.removeClass("select2-container--open")});this.on("enable",function(){i.$container.removeClass("select2-container--disabled")});this.on("disable",function(){i.$container.addClass("select2-container--disabled")});this.on("blur",function(){i.$container.removeClass("select2-container--focus")});this.on("query",function(e){if(!i.isOpen()){i.trigger("open",{})}this.dataAdapter.query(e,function(t){i.trigger("results:all",{data:t,query:e})})});this.on("query:append",function(e){this.dataAdapter.query(e,function(t){i.trigger("results:append",{data:t,query:e})})});this.on("keypress",function(t){var e=t.which;if(i.isOpen()){if(e===n.ESC||e===n.TAB||e===n.UP&&t.altKey){i.close(t);t.preventDefault()}else if(e===n.ENTER){i.trigger("results:select",{});t.preventDefault()}else if(e===n.SPACE&&t.ctrlKey){i.trigger("results:toggle",{});t.preventDefault()}else if(e===n.UP){i.trigger("results:previous",{});t.preventDefault()}else if(e===n.DOWN){i.trigger("results:next",{});t.preventDefault()}}else{if(e===n.ENTER||e===n.SPACE||e===n.DOWN&&t.altKey){i.open();t.preventDefault()}}})};h.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};h.prototype._isChangeMutation=function(t,e){var i=false;var n=this;if(t&&t.target&&(t.target.nodeName!=="OPTION"&&t.target.nodeName!=="OPTGROUP")){return}if(!e){i=true}else if(e.addedNodes&&e.addedNodes.length>0){for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];if(o.selected){i=true}}}else if(e.removedNodes&&e.removedNodes.length>0){i=true}else if(a.isArray(e)){a.each(e,function(t,e){if(n._isChangeMutation(t,e)){i=true;return false}})}return i};h.prototype._syncSubtree=function(t,e){var i=this._isChangeMutation(t,e);var n=this;if(i){this.dataAdapter.current(function(t){n.trigger("selection:update",{data:t})})}};h.prototype.trigger=function(t,e){var i=h.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(e===undefined){e={}}if(t in n){var r=n[t];var o={prevented:false,name:t,args:e};i.call(this,r,o);if(o.prevented){e.prevented=true;return}}i.call(this,t,e)};h.prototype.toggleDropdown=function(){if(this.isDisabled()){return}if(this.isOpen()){this.close()}else{this.open()}};h.prototype.open=function(){if(this.isOpen()){return}if(this.isDisabled()){return}this.trigger("query",{})};h.prototype.close=function(t){if(!this.isOpen()){return}this.trigger("close",{originalEvent:t})};h.prototype.isEnabled=function(){return!this.isDisabled()};h.prototype.isDisabled=function(){return this.options.get("disabled")};h.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};h.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};h.prototype.focus=function(t){if(this.hasFocus()){return}this.$container.addClass("select2-container--focus");this.trigger("focus",{})};h.prototype.enable=function(t){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(t==null||t.length===0){t=[true]}var e=!t[0];this.$element.prop("disabled",e)};h.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var e=[];this.dataAdapter.current(function(t){e=t});return e};h.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(t==null||t.length===0){return this.$element.val()}var e=t[0];if(a.isArray(e)){e=a.map(e,function(t){return t.toString()})}this.$element.val(e).trigger("input").trigger("change")};h.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._syncA)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._syncA,false);this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,false);this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,false)}this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");u.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};h.prototype.render=function(){var t=a('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$container=t;this.$container.addClass("select2-container--"+this.options.get("theme"));u.StoreData(t[0],"element",this.$element);return t};return h});e.define("jquery-mousewheel",["jquery"],function(t){return t});e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(r,t,o,e,a){if(r.fn.select2==null){var s=["open","close","destroy"];r.fn.select2=function(i){i=i||{};if(typeof i==="object"){this.each(function(){var t=r.extend(true,{},i);var e=new o(r(this),t)});return this}else if(typeof i==="string"){var e;var n=Array.prototype.slice.call(arguments,1);this.each(function(){var t=a.GetData(this,"select2");if(t==null&&window.console&&console.error){console.error("The select2('"+i+"') method was called on an "+"element that is not using Select2.")}e=t[i].apply(t,n)});if(r.inArray(i,s)>-1){return this}return e}else{throw new Error("Invalid arguments for Select2: "+i)}}}if(r.fn.select2.defaults==null){r.fn.select2.defaults=e}return o});return{define:e.define,require:e.require}}(),e=t.require("jquery.select2");return i.fn.select2.amd=t,e})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";function n(t){t=t||{},this.settings={timeMovingThreshold:t.timeMovingThreshold||15e3,eleGainThreshold:t.eleGainThreshold||5},this.xml=null,this.metadata={},this.waypoints=[],this.routes=[],this.tracks=[]}n.prototype.parse=function(t){var e=this,i=new DOMParser;this.xml=i.parseFromString(t,"text/xml");var n=this.xml.querySelector("metadata");null!==n&&(this.metadata=this.parseMetadataType(n));for(var r=[].slice.call(this.xml.querySelectorAll("wpt")),o=0;o<r.length;o++){var a=r[o],s=e.parseWptType(a,!0);e.waypoints.push(s)}for(var l=[].slice.call(this.xml.querySelectorAll("rte")),o=0;o<l.length;o++){var c=l[o],u=e.parseRteType(c);u.time=e.calcTime(u.points),u.distance=e.calcDistance(u.points),u.elevation=e.calcElevation(u.points),u.heartRate=e.calcHeartRate(u.points),e.routes.push(u)}for(var h=[].slice.call(this.xml.querySelectorAll("trk")),o=0;o<h.length;o++){var p=h[o],d=e.parseTrkType(p);d.time=e.calcTime(d.points),d.distance=e.calcDistance(d.points),d.elevation=e.calcElevation(d.points),d.heartRate=e.calcHeartRate(d.points),e.tracks.push(d)}},n.prototype.getFirstTagValue=function(t,e){var i=t.querySelectorAll(e);return i.length?i[0].textContent:null},n.prototype.getFirstTagValueNs=function(t,e,i){var n=t.getElementsByTagNameNS(e,i);return n.length?n[0].textContent:null},n.prototype.getTpxValue=function(t,e){var i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v1",e);return null===i&&(i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v2",e)),i},n.prototype.parseLinks=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("link")),n=0;n<i.length;n++){var r=i[n],o=this.parseLinkType(r);e.push(o)}return e},n.prototype.parseRtepts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("rtept")),n=0;n<i.length;n++){var r=i[n],o=this.parseWptType(r,!1);e.push(o)}return e},n.prototype.parseTrkpts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkpt")),n=0;n<i.length;n++){var r=i[n],o=this.parseWptType(r,!1);e.push(o)}return e},n.prototype.parseTrksegs=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkseg")),n=0;n<i.length;n++){var r=i[n],o=this.parseTrksegType(r,!1);o.time=this.calcTime(o.points),o.distance=this.calcDistance(o.points),o.elevation=this.calcElevation(o.points),o.heartRate=this.calcHeartRate(o.points),e.push(o)}return e},n.prototype.parseWptTypeExtensions=function(t){return{tpx:this.parseTrackPointExtensionType(t)}},n.prototype.parseLinkType=function(t){return{href:t.getAttribute("href"),text:this.getFirstTagValue(t,"text"),type:this.getFirstTagValue(t,"type")}},n.prototype.parseMetadataType=function(t){return{name:this.getFirstTagValue(t,"name"),desc:this.getFirstTagValue(t,"desc"),time:Date.parse(this.getFirstTagValue(t,"time")),links:this.parseLinks(t)}},n.prototype.parseWptType=function(t,e){var i={lat:parseFloat(t.getAttribute("lat")),lon:parseFloat(t.getAttribute("lon")),ele:parseFloat(this.getFirstTagValue(t,"ele")),time:Date.parse(this.getFirstTagValue(t,"time")),extension:this.parseWptTypeExtensions(t)};return e&&(i.name=this.getFirstTagValue(t,"name"),i.cmt=this.getFirstTagValue(t,"cmt"),i.desc=this.getFirstTagValue(t,"desc"),i.links=this.parseLinks(t)),i},n.prototype.parseRteType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseRtepts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrkType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseTrkpts(t),segments:this.parseTrksegs(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrksegType=function(t){return{points:this.parseTrkpts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseMmpExtensionType=function(t,e){var i=t.querySelector("extensions");if(null===i)return{};for(var n={},r=0;r<e.length;r++){var o=e[r];n[o]=this.getFirstTagValueNs(i,"https://www.mapsmarker.com/GPX/1/",o)}return n},n.prototype.parseTrackPointExtensionType=function(t){var e=t.querySelector("TrackPointExtension");return null===e?{}:{atemp:parseFloat(this.getTpxValue(e,"atemp")),wtemp:parseFloat(this.getTpxValue(e,"wtemp")),depth:parseFloat(this.getTpxValue(e,"depth")),hr:parseInt(this.getTpxValue(e,"hr")),cad:parseInt(this.getTpxValue(e,"cad")),speed:parseFloat(this.getTpxValue(e,"speed")),course:parseFloat(this.getTpxValue(e,"course")),bearing:parseFloat(this.getTpxValue(e,"bearing"))}},n.prototype.calcTime=function(t){var e=0,i=0;t[0].elapsed=e;for(var n=0;n<t.length-1;n++){var r=t[n+1].time-t[n].time;isNaN(r)||(e+=r,r<this.settings.timeMovingThreshold&&(i+=r)),t[n+1].elapsed=e}return{start:t[0].time,end:t[t.length-1].time,total:e,moving:i}},n.prototype.calcDistance=function(t){var e=0;t[0].dist=e;for(var i=0;i<t.length-1;i++){e+=this.calcDistanceBetween(t[i],t[i+1]),t[i+1].dist=e}return{total:e}},n.prototype.calcDistanceBetween=function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lon-t.lon)*i/2),s=o*o+Math.cos(n)*Math.cos(r)*a*a;return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},n.prototype.calcElevation=function(t){for(var e=[],i=0,n=0,r=null,o=0;o<t.length;o++){var a,s=t[o].ele;isNaN(s)?(t[o].gain=Math.abs(i),t[o].loss=Math.abs(n)):(null!==r?(a=s-r,5<=Math.abs(a)&&(0<a?i+=a:a<0&&(n+=a),r=s,e.push(s))):(e.push(s),r=s),t[o].gain=Math.abs(i),t[o].loss=Math.abs(n))}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),gain:Math.abs(i),loss:Math.abs(n),avg:e.reduce(function(t,e){return t+e},0)/e.length}},n.prototype.calcHeartRate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].extension;void 0!==n.tpx&&n.tpx.hr&&e.push(n.tpx.hr)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),avg:e.reduce(function(t,e){return t+e},0)/e.length}};var r=n,o=i(2),c=i.n(o),a=i(0),Y=i.n(a),s=i(1);i(15),i(6),i(7),i(8),i(9),i(18),i(19),i(20),i(21),i(22);Y.a.Control.ResetView=Y.a.Control.extend({options:{position:"topleft",onDemand:!1,coordinates:null,zoom:null,title:""},onAdd:function(t){var e=Y.a.DomUtil.create("div","leaflet-bar"),i=this.options;return i.onDemand&&(e.style.display="none",t.on("movestart",function(){e.style.display="block"})),null===i.coordinates&&(i.coordinates=t.getCenter()),null===i.zoom&&(i.zoom=t.getZoom()),this._createButton("",i.title,"mmp-control-resetview",e,this._resetView),e},_createButton:function(t,e,i,n,r){var o=Y.a.DomUtil.create("a",i,n);o.innerHTML=t,o.href="#",o.title=e,Y.a.DomEvent.disableClickPropagation(o),Y.a.DomEvent.on(o,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(o,"click",r,this),Y.a.DomEvent.on(o,"click",this._refocusOnMap,this)},_resetView:function(){this._map.stop(),this.options.onDemand&&this._map.once("moveend",function(){this._container.style.display="none"},this),this._map.setView(this.options.coordinates,this.options.zoom,{animate:!0})}}),Y.a.control.resetView=function(t){return new Y.a.Control.ResetView(t)},Y.a.Control.Filters=Y.a.Control.extend({options:{mmp:null,collapsed:!0,position:"topright",buttons:!0,allText:"All",noneText:"None"},initialize:function(t){Y.a.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-filters",r=this._container=Y.a.DomUtil.create("div",n);r.setAttribute("aria-haspopup",!0),Y.a.DomEvent.disableClickPropagation(r),Y.a.DomEvent.disableScrollPropagation(r),i&&(this._map.on("click",this.collapse,this),Y.a.Browser.android||Y.a.DomEvent.on(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=Y.a.DomUtil.create("a",n+"-toggle",r);o.href="#",o.title="Filters",Y.a.Browser.touch?(Y.a.DomEvent.on(o,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(o,"click",this.expand,this)):Y.a.DomEvent.on(o,"focus",this.expand,this);var a,s,l,c=this._form=Y.a.DomUtil.create("form",n+"-list",r);this.options.buttons&&(a=Y.a.DomUtil.create("div","mmp-control-filters-buttons",c),(s=Y.a.DomUtil.create("a",null,a)).innerHTML=this.options.allText,s.href="#",s.title=this.options.allText,Y.a.DomEvent.disableClickPropagation(s),Y.a.DomEvent.on(s,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(s,"click",function(){this._batchSelect(!0)},this),(l=Y.a.DomUtil.create("a",null,a)).innerHTML=this.options.noneText,l.href="#",l.title=this.options.noneText,Y.a.DomEvent.disableClickPropagation(l),Y.a.DomEvent.on(l,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(l,"click",function(){this._batchSelect(!1)},this));var u=[];Object.keys(e.settings.filtersDetails).forEach(function(t){void 0!==e.groups[t]&&u.push({index:e.settings.filtersDetails[t].index,id:t,icon:e.settings.filtersDetails[t].icon,name:e.settings.filtersDetails[t].name,count:Object.keys(e.groups[t].markers).length})}),u="id"==e.settings.filtersOrderBy?e.sortArray(u,"id",e.settings.filtersSortOrder,!0):"name"==e.settings.filtersOrderBy?e.sortArray(u,"name",e.settings.filtersSortOrder,!1):"count"==e.settings.filtersOrderBy?e.sortArray(u,"count",e.settings.filtersSortOrder,!0):e.sortArray(u,"index",e.settings.filtersSortOrder,!0);for(var h=0;h<u.length;h++){var p=Y.a.DomUtil.create("label",null,c),d=Y.a.DomUtil.create("input",n+"-selector",p);d.type="checkbox",d.value=u[h].id,void 0!==e.groups[u[h].id]&&e.groups[u[h].id].active&&(d.checked=!0);var f=Y.a.DomUtil.create("span",null,p),m="";e.settings.filtersIcon&&(m+='<img class="mmp-filter-icon" src="'+(u[h].icon?mmpVars.iconsUrl+u[h].icon:mmpVars.pluginUrl+"images/leaflet/marker.png")+'" />'),e.settings.filtersName&&(m+=u[h].name),e.settings.filtersCount&&(m+=" [ "+u[h].count+" ]"),f.innerHTML=m,Y.a.DomEvent.on(d,"click",function(){void 0!==e.groups[this.value]&&(e.groups[this.value].active=this.checked),e.drawMarkers(),e.drawGeoJson(),t.fire("filterclick")},d)}return i||this.expand(),r},expand:function(){Y.a.DomUtil.addClass(this._container,"mmp-control-filters-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Y.a.DomUtil.addClass(this._form,"mmp-control-filters-scrollbar"),this._form.style.height=t+"px"):Y.a.DomUtil.removeClass(this._form,"mmp-control-filters-scrollbar"),this},collapse:function(){return Y.a.DomUtil.removeClass(this._container,"mmp-control-filters-expanded"),this},_batchSelect:function(t){for(var e=this.options.mmp,i=this._container.getElementsByClassName("mmp-control-filters-selector"),n=i.length-1;0<=n;n--)i[n].checked=t,void 0!==e.groups[i[n].value]&&(e.groups[i[n].value].active=t);e.drawMarkers(),e.drawGeoJson(),this._map.fire("filterclick")}}),Y.a.control.filters=function(t){return new Y.a.Control.Filters(t)},Y.a.Control.Gpx=Y.a.Control.extend({options:{mmp:null,collapsed:!0,position:"topleft"},initialize:function(t){Y.a.Util.setOptions(this,t)},onAdd:function(e){this._map=e;var i=this.options.mmp,t=this.options.collapsed,n="mmp-control-tracks",r=this._container=Y.a.DomUtil.create("div",n);r.setAttribute("aria-haspopup",!0),Y.a.DomEvent.disableClickPropagation(r),Y.a.DomEvent.disableScrollPropagation(r),t&&(this._map.on("click",this.collapse,this),Y.a.Browser.android||Y.a.DomEvent.on(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=Y.a.DomUtil.create("a",n+"-toggle",r);o.href="#",o.title="Tracks",Y.a.Browser.touch?(Y.a.DomEvent.on(o,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(o,"click",this.expand,this)):Y.a.DomEvent.on(o,"focus",this.expand,this);for(var a=this._form=Y.a.DomUtil.create("form",n+"-list",r),s=0;s<i.gpx.tracks.length;s++){var l=Y.a.DomUtil.create("label",null,a),c=Y.a.DomUtil.create("input",n+"-selector",l);c.type="radio",c.name="mmp-gpx-tracks",0==(c.value=s)&&(c.checked=!0),Y.a.DomUtil.create("span",null,l).innerHTML=i.gpx.tracks[s].name?i.gpx.tracks[s].name:"Unnamed Track",Y.a.DomEvent.on(c,"click",function(){var t=parseInt(this.value);e._activeTrack=t,e.fitBounds(i.gpxTracks[t].getBounds(),{padding:[10,10]}),i.updateElevationChart(!0)},c)}return t||this.expand(),r},expand:function(){Y.a.DomUtil.addClass(this._container,"mmp-control-tracks-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Y.a.DomUtil.addClass(this._form,"mmp-control-tracks-scrollbar"),this._form.style.height=t+"px"):Y.a.DomUtil.removeClass(this._form,"mmp-control-tracks-scrollbar"),this},collapse:function(){return Y.a.DomUtil.removeClass(this._container,"mmp-control-tracks-expanded"),this}}),Y.a.control.gpx=function(t){return new Y.a.Control.Gpx(t)};i(23);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){var K=this;this.uid=t.uid,this.type=t.type,this.id=t.id,this.lazy=t.lazy,this.customMarkers=t.markers,this.settings=t.overrides||{},this.language=t.language||null,this.highlight=t.highlight||null,this.fullscreen=t.fullscreen||!1,this.chartContainer=t.chart||null,this.page=t.page||null,this.containers={},this.map={},this.groups={},this.markers={},this.markerGroup={},this.geoJson={},this.geoJsonGroup={},this.tooltips={},this.basemaps={},this.minimaps={},this.overlays={},this.controls={},this.gpx={},this.gpxChart={},this.gpxTracks={},this.gpxWaypoints={},this.chartLayers={},this.location={},this.listeners={},this.on=function(t,e){K.listeners[t]instanceof Array||(K.listeners[t]=[]),-1===K.listeners[t].indexOf(e)&&K.listeners[t].push(e)},this.off=function(t,e){var i;K.listeners[t]instanceof Array&&(-1!==(i=K.listeners[t].indexOf(e))&&K.listeners[t].splice(i,1))},this.fire=function(t,e){if(K.listeners[t]instanceof Array)for(var i=0;i<K.listeners[t].length;i++)K.listeners[t][i].call(K,e)},this.isVisible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},this.isInViewport=function(t){var e=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;return e.left<=n&&0<=e.right&&e.top<=i&&0<=e.bottom},this.checkInvalidateSize=function(){var t=K.isVisible(K.containers.main);!K.mapVisible&&t&&(K.map.invalidateSize(),void 0!==K.controls.minimap&&K.controls.minimap._miniMap.invalidateSize()),K.mapVisible=t},this.sortArray=function(t,r,o,a){return t.sort(function(t,e){var i,n="desc"==o?(i=e[r],t[r]):(i=t[r],e[r]);return a?i-n:i.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}),t},this.hasString=function(t,e,i,n){return n&&(t=t.replace(/<\/?[^>]+(>|$)/g,"")),i?-1!==t.indexOf(e):-1!==t.toUpperCase().indexOf(e.toUpperCase())},this.strToBounds=function(t){return 4!==(t=(t=t.replace(/[^0-9.,-]/g,"")).split(",")).length?null:(t.map(parseFloat),[[t[0],t[1]],[t[2],t[3]]])},this.boundsToStr=function(t){return[t.getSouth(),t.getWest(),t.getNorth(),t.getEast()].join(",")},this.checkJson=function(t){try{var e=JSON.parse(t);if(e&&"object"===l(e))return e}catch(t){}return!1},this.msToPrime=function(t,e){var i=Math.floor(t),n=i%1e3,r=(i=Math.floor(i/1e3))%60,o=(i=Math.floor(i/60))%60,a=(i=Math.floor(i/60))%24,s=Math.floor(i/24);return e?(n="",r+='"'):(n+='"',r+="."),6e4<t?o+="'":o="",36e5<t?a+=":":a="",864e5<t?s+=".":s="",s+a+o+r+n},this.roundToDec=function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},this.formatGpxValue=function(t,e,i){if(isNaN(t))return"N/A";var n,r,o="dist"===e?(n=1.609344,r=" km"," mi"):(n=.3048,r=" m"," ft"),a="imperial"===i||"imperial-metric"===i?(s=t*n,t):(s=t)/n,s=K.roundToDec(s,2)+r;switch(a=K.roundToDec(a,2)+o,i){case"imperial":return a;case"metric-imperial":return s+" ("+a+")";case"imperial-metric":return a+" ("+s+")";default:return s}},this.addLoading=function(t){if(!t.getElementsByClassName("mmp-loading-spinner").length){var e=document.createElement("div");e.className="mmp-loading-spinner";var i=document.createElement("div");i.className="rect-wrap",e.appendChild(i);for(var n=1;n<=5;n++){var r=document.createElement("div");r.className="rect"+n,i.appendChild(r)}t.appendChild(e)}},this.removeLoading=function(t){for(var e=t.getElementsByClassName("mmp-loading-spinner"),i=0;i<e.length;i++)e[i].remove()},this.showMapModal=function(t,e){void 0!==K.containers.mapModal&&K.containers.mapModal.remove(),K.containers.mapModal=Y.a.DomUtil.create("div","mmp-map-modal"),K.containers.mapModal.addEventListener("click",function(t){t.target===this&&this.remove()});var i=Y.a.DomUtil.create("div","mmp-map-modal-content",K.containers.mapModal),n=Y.a.DomUtil.create("span","mmp-map-modal-close",i);n.innerHTML="&times;",n.addEventListener("click",function(t){t.target===this&&K.containers.mapModal.remove()});var r=Y.a.DomUtil.create("div","mmp-map-modal-header",i);Y.a.DomUtil.create("p","mmp-map-modal-title",r).innerHTML=t;var o=Y.a.DomUtil.create("div","mmp-map-modal-body",i);"string"==typeof e?Y.a.DomUtil.create("p","mmp-map-modal-message",o).innerHTML=e:o.appendChild(e),K.containers.map.appendChild(K.containers.mapModal)},this.getDirectionsLink=function(t,e,i,n){var r=K.settings,o="";switch(t){case"googlemaps":o="https://www.google.com/maps?daddr="+(n||e+","+i),o+="&t="+r.directionsGoogleType,o+="&layer="+(r.directionsGoogleTraffic?"1":"0"),o+="&doflg="+r.directionsGoogleUnits,r.directionsGoogleAvoidHighways&&(o+="&dirflg=h"),r.directionsGoogleAvoidTolls&&(o+="&dirflg=t"),r.directionsGooglePublicTransport&&(o+="&dirflg=r"),r.directionsGoogleWalking&&(o+="&dirflg=w"),r.directionsGoogleLanguage&&(o+="&hl="+r.directionsGoogleLanguage),o+="&om="+(r.directionsGoogleOverview?"1":"0");break;case"yours":o="http://www.yournavigation.org/?tlat="+e+"&tlon="+i,o+="&v="+r.directionsYoursType,o+="&fast="+("fastest"===r.directionsYoursRoute?"1":"0"),o+="&layer="+r.directionsYoursLayer;break;case"ors":o="https://maps.openrouteservice.org/directions?a=null,null,"+e+","+i,o+="&b="+("Bicycle"===r.directionsOrsType?"1a":"Pedestrian"===r.directionsOrsType?"2":"HeavyVehicle"===r.directionsOrsType?"4a":"0"),o+="&c="+("Shortest"===r.directionsOrsRoute?"1":"Recommended"===r.directionsOrsRoute?"2":"0");break;case"bingmaps":o="https://www.bing.com/maps/default.aspx?v=2&rtp=pos___e_~pos."+e+"_"+i+(n?"_"+n:"")}return o},this.getApiLink=function(t,e,i){i=i||{};var n=K.settings,r=mmpVars.apiUrl;switch(n.language&&(i.lang=n.language),t){case"editMap":r=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e;break;case"editMarker":r=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+e;break;case"fs":r+="fullscreen/"+e+"/";break;case"gpx":r=mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+n.gpxUrl;break;case"geojson":r+="export/geojson/"+e+"/";break;case"kml":r+="export/kml/"+e+"/";break;case"georss":r+="export/georss/"+e+"/"}return Object.keys(i).length&&(r+="?",Object.keys(i).forEach(function(t){r+=t+"="+i[t]+"&"}),r=r.slice(0,-1)),r},this.addApiLink=function(t,e,i,n){var r=Y.a.DomUtil.create("a",null,n);r.href=t,r.rel="nofollow",r.target="_blank",r.title=e;var o=Y.a.DomUtil.create("img",null,r);o.src=mmpVars.pluginUrl+"images/icons/"+i,o.title=e,o.style.width=14,o.style.height=14},this.addShareLink=function(t,e){var i=Y.a.DomUtil.create("img","mmp-share-icon",e);i.src=mmpVars.pluginUrl+"images/icons/share.png",i.title=mmpL10n.api.share,i.addEventListener("click",function(){K.containers.main.scrollIntoView(),K.openShareModal(t)})},this.openShareModal=function(t){var e=K.settings,i=e.apiFullscreen&&"fs"===e.shareUrl?K.getApiLink("fs",K.id,{marker:t}):K.page+"?markerid="+t,n=Y.a.DomUtil.create("div",null);e.shareFacebook&&n.appendChild(K.getShareLink("facebook",i,e.shareText)),e.shareTwitter&&n.appendChild(K.getShareLink("twitter",i,e.shareText)),e.shareLinkedIn&&n.appendChild(K.getShareLink("linkedin",i,e.shareText)),e.shareWhatsApp&&n.appendChild(K.getShareLink("whatsapp",i,e.shareText)),e.shareEmail&&n.appendChild(K.getShareLink("email",i,e.shareText));var r=Y.a.DomUtil.create("div","mmp-share-modal-url",n),o=Y.a.DomUtil.create("input",null,r);o.setAttribute("type","text"),o.setAttribute("value",i),o.addEventListener("click",function(){this.select()}),K.showMapModal(mmpL10n.api.share,n)},this.getShareLink=function(t,e,i){e=encodeURIComponent(e),i=encodeURIComponent(i);var n=Y.a.DomUtil.create("a","mmp-share-button-link");n.setAttribute("target","_blank"),n.setAttribute("rel","noopener");var r=Y.a.DomUtil.create("div","mmp-share-button",n),o=Y.a.DomUtil.create("div","mmp-share-button-icon",r),a=Y.a.SVG.create("svg");a.setAttribute("viewBox","0 0 24 24"),o.appendChild(a);var s=Y.a.SVG.create("path");switch(a.appendChild(s),t){case"facebook":n.setAttribute("href","https://www.facebook.com/sharer.php?u="+e),Y.a.DomUtil.addClass(r,"mmp-share-button-facebook"),s.setAttribute("d","M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z");break;case"twitter":n.setAttribute("href","https://twitter.com/share?text="+i+"&url="+e+"&via=mapsmarker"),Y.a.DomUtil.addClass(r,"mmp-share-button-twitter"),s.setAttribute("d","M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z");break;case"linkedin":n.setAttribute("href","https://www.linkedin.com/shareArticle?title="+i+"&url="+e),Y.a.DomUtil.addClass(r,"mmp-share-button-linkedin"),s.setAttribute("d","M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z");break;case"whatsapp":Y.a.Browser.mobile?n.setAttribute("href","whatsapp://send?text="+i+" "+e):n.setAttribute("href","https://api.whatsapp.com/send?text="+i+" "+e),Y.a.DomUtil.addClass(r,"mmp-share-button-whatsapp"),s.setAttribute("d","M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z");break;case"email":i?n.setAttribute("href","mailto:?subject="+i+"&body="+e):n.setAttribute("href","mailto:?body="+e),n.setAttribute("target","_self"),Y.a.DomUtil.addClass(r,"mmp-share-button-email"),s.setAttribute("d","M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z");break;default:return null}return n},this.checkPopupSize=function(t){var e=K.settings;K.containers.map.offsetWidth<e.popupMaxWidth?(t.options.minWidth=K.containers.map.offsetWidth-50,t.options.maxWidth=K.containers.map.offsetWidth-50):(t.options.minWidth=e.popupMinWidth,t.options.maxWidth=e.popupMaxWidth),K.containers.map.offsetHeight<e.popupMaxHeight?t.options.maxHeight=K.containers.map.offsetHeight-50:t.options.maxHeight=e.popupMaxHeight,t.update()},this.loadPopup=function(s,l){return new Promise(function(t,e){var i,n,r,o,a=s.getPopup();void 0!==a?l||!a.getContent()?(i=Y.a.DomUtil.create("div","mmp-popup"),Y.a.DomUtil.create("img","mmp-popup-loading",i).src=mmpVars.pluginUrl+"images/paging-ajax-loader.gif",a.setContent(i),n="",s instanceof Y.a.Marker?n=K.getMarkerPopup(s):s instanceof Y.a.Path&&(n=K.getGeoJsonPopup(s)),r=n.getElementsByTagName("img"),o=Array.prototype.slice.call(r),Promise.all(o.map(K.imgLoaded)).then(function(){a.setContent(n),t(a)})):t(a):e()})},this.getMarkerPopup=function(t){var e,i,n,r,o,a,s=K.settings,l=Y.a.DomUtil.create("div","mmp-popup");return l.id="mmp-popup-"+t.id,s.popupMarkername&&t.name&&((e=Y.a.DomUtil.create("div","mmp-popup-name",l)).innerHTML=t.name,e.style.borderBottom="1px solid #f0f0e7"),t.popup&&(Y.a.DomUtil.create("div","mmp-popup-text",l).innerHTML=t.popup),(t.address&&s.popupAddress||s.popupCoordinates||s.popupDirections||s.popupShare)&&((i=Y.a.DomUtil.create("div","mmp-popup-location",l)).style.borderTop="1px solid #f0f0e7",s.popupShare&&(n=Y.a.DomUtil.create("i","mmp-popup-share",i),K.addShareLink(t.id,n)),t.address&&s.popupAddress&&(Y.a.DomUtil.create("span","mmp-popup-location-address",i).innerHTML+=t.address),s.popupCoordinates&&(r=Y.a.DomUtil.create("span","mmp-popup-location-coordinates",i),t.address&&s.popupAddress?r.innerHTML+=" ("+t.getLatLng().lat+", "+t.getLatLng().lng+")":r.innerHTML+=t.getLatLng().lat+", "+t.getLatLng().lng),s.popupDirections&&(o=Y.a.DomUtil.create("span","mmp-popup-location-directions",i),(t.address&&s.popupAddress||s.popupCoordinates)&&(o.innerHTML+=" "),(a=Y.a.DomUtil.create("a",null,o)).href=K.getDirectionsLink(s.directionsProvider,t.getLatLng().lat,t.getLatLng().lng,t.address),a.target="_blank",a.title=mmpL10n.api.dir,a.innerHTML="("+mmpL10n.popup.directions+")")),l},this.getGeoJsonPopup=function(t){var e,i=K.settings,n=Y.a.DomUtil.create("div","mmp-popup");return i.popupMarkername&&t.options.name&&((e=Y.a.DomUtil.create("div","mmp-popup-name",n)).innerHTML=t.options.name,e.style.borderBottom="1px solid #f0f0e7"),t.options.popup&&(Y.a.DomUtil.create("div","mmp-popup-text",n).innerHTML=t.options.popup),n},this.imgLoaded=function(e){return new Promise(function(t){e.addEventListener("load",t),e.addEventListener("error",t)})},this.updatePopups=function(){var n=K.settings;Object.keys(K.markers).forEach(function(t){var e=K.markers[t],i=e.getPopup();void 0!==i&&(i.setContent(""),i.options.minWidth=n.popupMinWidth,i.options.maxWidth=n.popupMaxWidth,i.options.maxHeight=n.popupMaxHeight,i.isOpen()&&K.updatePopup(e))})},this.updatePopup=function(t,e){var i=K.settings,n=t.getPopup();!n&&t.options.popup?t.bindPopup("",K.popup):n&&!t.options.popup&&(t.closePopup(),t.unbindPopup()),K.loadPopup(t,e).then(function(t){K.checkPopupSize(t),i.popupCenterOnMap&&K.centerPopup(t)}).catch(function(){})},this.centerPopup=function(t){var e,i,n,r;t.isOpen()&&(e=t.getLatLng(),i=K.map.project(e),n=t._container.clientHeight,i.y-=n/2,r=K.map.unproject(i),K.map.panTo(r,{animate:!0}))},this.highlightMarker=function(t,e,i){var n;t.link?K.openLink(t.link,t.blank):(e&&K.containers.main.scrollIntoView(),n=function(t,e){var i;e?t.isPopupOpen()?K.updatePopup(t):t.openPopup():(i=t.getLatLng(),K.map.setView(i))},K.settings.clustering?K.markerGroup.zoomToShowLayer(t,function(){n(t,i)}):n(t,i))},this.openLink=function(t,e){var i="1"===e?"_blank":"_self";window.open(t,i)},this.editMarker=function(t){var e;void 0!==t.relatedTarget.id&&(e=K.getApiLink("editMarker",t.relatedTarget.id),K.openLink(e,"1"))},this.logError=function(t){console.error("[Maps Marker Pro] "+t)},this.xhr=function(r){return new Promise(function(t,e){var i,n=new XMLHttpRequest;n.open(r.type,r.url,!0),n.onload=function(){200===n.status?t(n.responseText):e(n.statusText)},r.data?(i=new FormData,Object.keys(r.data).forEach(function(t){i.append(t,r.data[t])}),n.send(i)):n.send(null)})},this.main=function(){var t=document.getElementById("maps-marker-pro-"+K.uid);t?((mapsMarkerPro[K.uid]=K).containers.main=t,K.lazy?"function"==typeof IntersectionObserver?new IntersectionObserver(K.lazyLoadHandler,{root:null,rootMargin:"0px",threshold:0}).observe(K.containers.main):K.lazyLoadHandlerFallback():K.load()):"function"==typeof MutationObserver?new MutationObserver(K.deferredLoadHandler).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):K.logError("Unable to find map container")},this.load=function(){var t,e,i;"function"==typeof URL&&(t=new URL(window.location.href),e=parseInt(t.searchParams.get("marker")),isNaN(e)||(K.urlHighlight=e),i=parseInt(t.searchParams.get("markerid")),isNaN(i)||(K.urlHighlight=i));for(var n=document.getElementsByClassName("mmp-highlight"),r=0;r<n.length;r++){var o=n[r].dataset;o.uid&&o.uid!==K.uid||o.map&&o.map!==K.id||n[r].addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset,i=e.marker||null,n=!e.scroll||"false"!==e.scroll,r=!e.open||"false"!==e.open;i&&void 0!==K.markers[i]&&K.highlightMarker(K.markers[i],n,r)})}for(r=0;r<mapsMarkerPro.callbacks.length;r++){var a=mapsMarkerPro.callbacks[r];"function"==typeof a&&a(K)}K.xhr({type:"POST",url:ajaxurl,data:{action:"mmp_map_settings",type:K.type,id:K.id,lang:K.language}}).then(function(t){if(!(t=JSON.parse(t)).success)return K.containers.main.innerHTML=t.response,void Y.a.DomUtil.addClass(K.containers.main,"mmp-map-error");var e=t.response;for(Object.keys(K.settings).forEach(function(t){e[t]=K.settings[t]}),(K.settings=e).callback&&"function"==typeof window[e.callback]&&window[e.callback](K);K.containers.main.hasChildNodes();)K.containers.main.removeChild(K.containers.main.firstChild);K.fire("settingsloaded",K.settings),K.init()}).catch(function(t){K.containers.main.innerHTML="Error: the map with ID "+K.id+" could not be loaded. Please contact the site owner.",Y.a.DomUtil.addClass(K.containers.main,"mmp-map-error"),K.logError("Error loading settings ("+t+")")})},this.init=function(){K.containers.rowWrap=Y.a.DomUtil.create("div","mmp-row-wrap",K.containers.main),K.containers.colWrap=Y.a.DomUtil.create("div","mmp-col-wrap",K.containers.rowWrap),K.loadPanel(),K.loadMap(),K.loadChart(),K.loadList(),K.setLayout(),window.addEventListener("resize",K.setLayoutThrottled),"function"==typeof IntersectionObserver?new IntersectionObserver(K.visibilityDetectionHandler,{root:null,rootMargin:"0px",threshold:0}).observe(K.containers.main):K.visibilityDetectionHandlerFallback(),K.loadBasemaps(),K.loadOverlays(),K.loadResources()},this.setLayout=function(){var t,e=K.settings;if(K.fullscreen)return Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-below"),Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-right"),Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-left"),Y.a.DomUtil.addClass(K.containers.main,"mmp-fullscreen"),void K.map.invalidateSize();Y.a.DomUtil.removeClass(K.containers.main,"mmp-fullscreen"),K.containers.main.style.width=e.width+e.widthUnit,K.containers.map.style.height=e.height+e.heightUnit,e.responsive&&"px"==e.widthUnit&&(t=e.width,1<e.list&&(t+=e.listWidth),"100%"!=K.containers.main.style.width&&K.containers.main.parentNode.offsetWidth<t?K.containers.main.style.width="100%":"100%"==K.containers.main.style.width&&K.containers.main.parentNode.offsetWidth>t&&(K.containers.main.style.width=e.width+"px")),void 0!==K.containers.list&&(0<e.list?1==e.list||-1===K.containers.main.style.width.indexOf("px")&&K.containers.main.offsetWidth<e.listWidth+e.listBreakpoint?(Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-right"),Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-left"),Y.a.DomUtil.addClass(K.containers.main,"mmp-list-below")):(Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-below"),K.containers.list.style.flex="0 0 "+e.listWidth+"px",2==e.list?(Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-left"),Y.a.DomUtil.addClass(K.containers.main,"mmp-list-right")):3==e.list&&(Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-right"),Y.a.DomUtil.addClass(K.containers.main,"mmp-list-left"))):(Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-below"),Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-right"),Y.a.DomUtil.removeClass(K.containers.main,"mmp-list-left"))),K.map.invalidateSize()},this.setLayoutThrottled=Y.a.Util.throttle(K.setLayout,200,this),this.loadPanel=function(){var t,e=K.settings;void 0!==K.containers.panel&&K.containers.panel.remove(),e.panel&&(K.containers.panel=Y.a.DomUtil.create("div","mmp-panel"),K.containers.panel.id="mmp-panel-"+K.uid,K.containers.panel.style.backgroundColor=e.panelColor,Y.a.DomUtil.create("div","mmp-panel-text",K.containers.panel).innerHTML=e.name,t=Y.a.DomUtil.create("div","mmp-panel-api",K.containers.panel),"map"===K.type&&(e.panelEdit&&K.addApiLink(K.getApiLink("editMap",K.id),mmpL10n.api.editMap,"map-edit.png",t),e.apiFullscreen&&e.panelFs&&K.addApiLink(K.getApiLink("fs",K.id),mmpL10n.api.fs,"fullscreen.png",t),e.panelGpx&&e.gpxUrl&&K.addApiLink(K.getApiLink("gpx",K.id),mmpL10n.gpx.metaDownload,"gpx.png",t),e.apiExport&&e.panelGeoJson&&K.addApiLink(K.getApiLink("geojson",K.id),mmpL10n.api.geoJson,"geojson.png",t),e.apiExport&&e.panelKml&&K.addApiLink(K.getApiLink("kml",K.id),mmpL10n.api.kml,"kml.png",t),e.apiExport&&e.panelGeoRss&&K.addApiLink(K.getApiLink("georss",K.id),mmpL10n.api.geoRss,"georss.png",t)),K.containers.main.insertBefore(K.containers.panel,K.containers.rowWrap),K.fire("panelloaded",K.map))},this.loadMap=function(){var t=K.settings;"function"==typeof K.map.remove&&K.map.remove(),K.map={},void 0!==K.containers.map&&K.containers.map.remove(),K.containers.map=Y.a.DomUtil.create("div","mmp-map"),K.containers.map.id="mmp-map-"+K.uid,K.map=Y.a.map(K.containers.map,{center:[t.lat,t.lng],zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:t.zoomStep,zoomDelta:t.zoomStep,maxBounds:K.strToBounds(t.maxBounds),maxBoundsViscosity:1,gestureHandling:!K.fullscreen&&t.gestureHandling,dragging:t.dragging,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,keyboard:t.keyboard,keyboardPanDelta:t.keyboardPanDelta,scrollWheelZoom:t.scrollWheelZoom,doubleClickZoom:t.doubleClickZoom,touchZoom:t.touchZoom,boxzoom:t.boxzoom,bounceAtZoomLimits:t.bounceAtZoomLimits,worldCopyJump:t.worldCopyJump,attributionControl:!1,zoomControl:!1,closePopupOnClick:t.popupAutoClose,contextmenu:!0}),K.map._activeTrack=0,K.containers.colWrap.insertBefore(K.containers.map,K.containers.chartWrap),K.fire("maploaded",K.map)},this.loadChart=function(){var t=K.settings;"function"==typeof K.gpxChart.destroy&&K.gpxChart.destroy(),K.gpxChart={},void 0!==K.containers.chartWrap&&K.containers.chartWrap.remove(),t.gpxUrl&&t.gpxChart&&void 0!==K.gpx.tracks&&K.gpx.tracks.length&&(K.chartContainer&&(K.containers.chartWrap=document.getElementById(K.chartContainer)),K.chartContainer&&K.containers.chartWrap||(K.chartContainer=null,K.containers.chartWrap=Y.a.DomUtil.create("div","mmp-gpx-chart-wrap"),K.containers.chartWrap.style.height=t.gpxChartHeight+"px"),K.containers.chartWrap.style.position="relative",K.containers.chartWrap.style.minWidth=0,K.containers.chart=Y.a.DomUtil.create("canvas","mmp-gpx-chart"),K.containers.chart.id="mmp-gpx-chart-"+K.uid,K.containers.chartWrap.appendChild(K.containers.chart),K.chartContainer||K.containers.colWrap.appendChild(K.containers.chartWrap),K.fire("chartloaded",K.gpxChart))},this.loadList=function(){var t=K.settings;void 0!==K.containers.list&&K.containers.list.remove(),"map"!==K.type&&"custom"!==K.type||K.fullscreen||!t.list||(K.containers.list=Y.a.DomUtil.create("div","mmp-list"),K.containers.list.id="mmp-list-"+K.uid,K.containers.rowWrap.appendChild(K.containers.list))},this.loadBasemaps=function(){var n=K.settings;Object.keys(K.basemaps).forEach(function(t){K.map.removeLayer(K.basemaps[t])}),K.basemaps={},K.minimaps={},Object.keys(n.basemaps).forEach(function(t){if(void 0!==n.availableBasemaps[n.basemaps[t]]){var e,i=n.availableBasemaps[n.basemaps[t]];if(1==i.type)i.options.bounds&&"string"==typeof i.options.bounds&&(e=K.strToBounds(i.options.bounds),i.options.rasterTiles?i.options.bounds=[K.map.unproject(Y.a.point(e[0][1],e[0][0]),i.options.maxNativeZoom),K.map.unproject(Y.a.point(e[1][1],e[1][0]),i.options.maxNativeZoom)]:i.options.bounds=e),i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=void 0===i.options.errorTiles&&n.errorTiles||i.options.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,i.wms?(K.basemaps[i.name]=Y.a.tileLayer.wms(i.url,i.options),K.minimaps[i.name]=Y.a.tileLayer.wms(i.url,i.options)):(K.basemaps[i.name]=Y.a.tileLayer(i.url,i.options),K.minimaps[i.name]=Y.a.tileLayer(i.url,i.options));else if(2==i.type&&n.googleApiKey)i.options.styles=n.basemapGoogleStyles,i.options.edgeBufferTiles=0,K.basemaps[i.name]=new Y.a.gridLayer.googleMutant(i.options),K.minimaps[i.name]=new Y.a.gridLayer.googleMutant(i.options);else if(3==i.type&&n.bingApiKey)i.options.bingMapsKey=n.bingApiKey,i.options.culture=n.basemapBingCulture,i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=n.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,K.basemaps[i.name]=Y.a.tileLayer.bing(i.options),K.minimaps[i.name]=Y.a.tileLayer.bing(i.options);else if(4==i.type&&(n.hereApiKey||n.hereAppId&&n.hereAppCode))i.options.apiKey=n.hereApiKey,i.options.appId=n.hereAppId,i.options.appCode=n.hereAppCode,i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=n.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,K.basemaps[i.name]=Y.a.tileLayer.here(i.options),K.minimaps[i.name]=Y.a.tileLayer.here(i.options);else if(5==i.type&&n.tomApiKey)i.options.apiKey=n.tomApiKey,i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=n.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,K.basemaps[i.name]=Y.a.tileLayer.tomTom(i.options),K.minimaps[i.name]=Y.a.tileLayer.tomTom(i.options);else{if(6!=i.type)return;i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=void 0===i.options.errorTiles&&n.errorTiles||i.options.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,i.labels?(K.basemaps[i.name]=Y.a.layerGroup([s.c(i.key,i.options),s.c(i.labels,i.options)]),K.minimaps[i.name]=Y.a.layerGroup([s.c(i.key,i.options),s.c(i.labels,i.options)])):(K.basemaps[i.name]=s.c(i.key,i.options),K.minimaps[i.name]=s.c(i.key,i.options))}}});var t,e=Object.keys(K.basemaps);void 0!==n.availableBasemaps[n.basemapDefault]?(t=n.availableBasemaps[n.basemapDefault].name,void 0!==K.basemaps[t]?K.basemaps[t].addTo(K.map):e.length&&K.basemaps[e[0]].addTo(K.map)):e.length&&K.basemaps[e[0]].addTo(K.map),K.fire("basemapsloaded",K.basemaps)},this.loadOverlays=function(){var n=K.settings;Object.keys(K.overlays).forEach(function(t){K.map.removeLayer(K.overlays[t])}),K.overlays={},Object.keys(n.overlays).forEach(function(t){var e,i;void 0!==n.availableOverlays[n.overlays[t]]&&((e=n.availableOverlays[n.overlays[t]]).options.bounds&&"string"==typeof e.options.bounds&&(i=K.strToBounds(e.options.bounds),e.options.rasterTiles?e.options.bounds=[K.map.unproject(Y.a.point(i[0][1],i[0][0]),e.options.maxNativeZoom),K.map.unproject(Y.a.point(i[1][1],i[1][0]),e.options.maxNativeZoom)]:e.options.bounds=i),e.options.minZoom=n.minZoom,e.options.maxZoom=n.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles||e.options.errorTiles?n.errorTileUrl:null,e.options.edgeBufferTiles=n.basemapEdgeBufferTiles,e.wms?K.overlays[e.name]=Y.a.tileLayer.wms(e.url,e.options):K.overlays[e.name]=Y.a.tileLayer(e.url,e.options),-1!==n.overlaysActive.indexOf(n.overlays[t])&&K.overlays[e.name].addTo(K.map))}),K.fire("overlaysloaded",K.overlays)},this.loadResources=function(){var e=K.settings;return K.groups={},K.groups[K.id]={active:!0,markers:{}},Object.keys(e.filtersDetails).forEach(function(t){K.groups[t]={active:e.filtersDetails[t].active,markers:{}}}),Promise.all([K.getMarkers(),K.getGeoJson(),K.getGpx()]).then(function(t){K.loadControls()}).catch(function(t){K.logError("Error loading map")})},this.drawMarkers=function(i){var t=K.settings;if("function"==typeof K.markerGroup.remove&&K.markerGroup.remove(),K.markerGroup={},t.clustering?K.markerGroup=Y.a.markerClusterGroup({showCoverageOnHover:t.showCoverageOnHover,disableClusteringAtZoom:t.disableClusteringAtZoom||null,maxClusterRadius:t.maxClusterRadius,singleMarkerMode:t.singleMarkerMode,spiderfyDistanceMultiplier:t.spiderfyDistanceMultiplier,chunkedLoading:!1}):K.markerGroup=Y.a.featureGroup(),K.markerGroup.addTo(K.map),i||(i=[],Object.keys(K.groups).forEach(function(e){K.groups[e].active&&Object.keys(K.groups[e].markers).forEach(function(t){i.push(K.groups[e].markers[t])})})),t.clustering)K.markerGroup.addLayers(i);else for(var e=0;e<i.length;e++)K.markerGroup.hasLayer(i[e])||K.markerGroup.addLayer(i[e])},this.getMarkers=function(){var e=[K.id];return Object.keys(K.settings.filtersDetails).forEach(function(t){e.push(t)}),K.addLoading(K.containers.map),K.xhr({type:"POST",url:ajaxurl,data:{action:"mmp_map_markers",type:K.type,id:e,custom:K.customMarkers,all:K.settings.filtersAllMarkers,lang:K.language}}).then(function(t){var e=JSON.parse(t);return K.addMarkers(e),K.removeLoading(K.containers.map),!0}).catch(function(t){return K.logError("Error loading markers ("+t+")"),!1})},this.addMarkers=function(t){var e=K.settings;"function"==typeof K.markerGroup.remove&&K.markerGroup.remove(),K.markers={},K.markerGroup={},K.tooltip={direction:e.tooltipDirection,permanent:e.tooltipPermanent,sticky:e.tooltipSticky,opacity:e.tooltipOpacity},K.popup={minWidth:e.popupMinWidth,maxWidth:e.popupMaxWidth,maxHeight:e.popupMaxHeight,autoPan:!e.popupCenterOnMap,closeButton:e.popupCloseButton,autoClose:e.popupAutoClose};for(var i=0;i<t.length;i++){var n=t[i];if(K.markers[n.id]=Y.a.marker([n.lat,n.lng],{pmIgnore:!0,contextmenu:e.listEdit,contextmenuItems:[{text:mmpL10n.api.editMarker,icon:mmpVars.pluginUrl+"images/icons/map-edit.png",callback:K.editMarker}],icon:Y.a.icon({iconUrl:n.icon?mmpVars.iconsUrl+n.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:e.iconSize,iconAnchor:e.iconAnchor,popupAnchor:e.popupAnchor,shadowUrl:e.shadowUrl,shadowSize:e.shadowSize,shadowAnchor:e.shadowAnchor,className:"mmp-marker-icon mmp-marker-icon-"+n.id}),opacity:e.markerOpacity}),K.markers[n.id].id=n.id,K.markers[n.id].name=n.name,K.markers[n.id].address=n.address,K.markers[n.id].popup=n.popup,K.markers[n.id].link=n.link,K.markers[n.id].blank=n.blank,K.markers[n.id].icon=n.icon,K.markers[n.id].created=n.created,K.markers[n.id].updated=n.updated,K.markers[n.id].edit=n.edit,n.name&&(K.tooltips[n.id]=n.name,!e.tooltip||!e.tooltipPermanent&&Y.a.Browser.mobile||K.markers[n.id].bindTooltip(K.tooltips[n.id],K.tooltip)),n.link?(K.markers[n.id].on("click",function(){K.openLink(this.link,this.blank)}),K.markers[n.id].on("keypress",function(t){13==t.which&&K.openLink(this.link,this.blank)})):(n.popup||n.address&&e.popupAddress||e.popupCoordinates||e.popupDirections)&&K.markers[n.id].bindPopup("",K.popup),K.markers[n.id].on("popupopen",K.openPopupHandler),e.popupOpenOnHover?K.markers[n.id].on("mouseover",K.openOnHoverHandler):K.markers[n.id].off("mouseover",K.openOnHoverHandler),"map"!==K.type||e.filtersAllMarkers)K.groups[K.id].markers[n.id]=K.markers[n.id];else for(var r=0;r<n.maps.length;r++)void 0!==K.groups[n.maps[r]]&&(K.groups[n.maps[r]].markers[n.id]=K.markers[n.id])}K.drawMarkers(),"map"===K.type&&!K.fullscreen&&0<e.list?K.map.on("filterclick",K.updateListHandler):K.map.off("filterclick",K.updateListHandler),K.fire("markersloaded",K.markers)},this.getGeoJson=function(){var e=[K.id];return!K.settings.filtersAllMarkers&&K.settings.filtersGeoJson&&Object.keys(K.settings.filtersDetails).forEach(function(t){e.push(t)}),K.addLoading(K.containers.map),K.xhr({type:"POST",url:ajaxurl,data:{action:"mmp_map_geojson",type:K.type,id:e,lang:K.language}}).then(function(t){var e=JSON.parse(t);return K.addGeoJson(e),K.removeLoading(K.containers.map),!0}).catch(function(t){return K.logError("Error loading GeoJSON ("+t+")"),!1})},this.parseGeoJson=function(t){return Y.a.geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return Y.a.circle(e,t.properties.radius)},style:function(e){var i={};return Object.keys(e.properties).forEach(function(t){switch(t){case"weight":i[t]=parseInt(e.properties[t]);break;case"opacity":case"fillOpacity":i[t]=parseFloat(e.properties[t]);break;default:i[t]=e.properties[t]}}),i},onEachFeature:function(t,e){e.options.popup&&e.bindPopup("",K.popup),e.on("popupopen",K.openPopupHandler)}})},this.addGeoJson=function(e){"function"==typeof K.geoJsonGroup.remove&&K.geoJsonGroup.remove(),K.geoJson={},K.geoJsonGroup={},K.geoJson[K.id]=Y.a.geoJSON(),e&&(Object.keys(e).forEach(function(t){void 0===e[t].features?K.geoJson[t]=Y.a.geoJSON():K.geoJson[t]=K.parseGeoJson(e[t])}),K.drawGeoJson(),K.fire("geojsonloaded",K.geoJson))},this.drawGeoJson=function(){"function"==typeof K.geoJsonGroup.remove&&K.geoJsonGroup.remove(),K.geoJsonGroup=Y.a.featureGroup(),K.geoJsonGroup.addTo(K.map),Object.keys(K.groups).forEach(function(t){K.groups[t].active&&void 0!==K.geoJson[t]&&K.geoJsonGroup.addLayer(K.geoJson[t])})},this.getList=function(e,n,i,r,o){var a=K.settings;if(!("map"!==K.type&&"custom"!==K.type||K.fullscreen)&&a.list){e=e||1,n=n||"",i=i||a.listOrderBy,r=r||a.listSortOrder,o=o||0;var s,l,c=[];if("distance"==i)if(void 0===K.controls.locate)i="distance"!==a.listOrderBy?a.listOrderBy:a.listOrderById?"id":a.listOrderByName?"name":a.listOrderByAddress?"address":a.listOrderByIcon?"icon":a.listOrderByCreated?"created":a.listOrderByUpdated?"updated":"id";else if(void 0===K.location.latlng)return K.map.once("locationfound",function(){K.getList(1,n,i,r,o)}),K.map.once("locationerror",function(){i="distance"!==a.listOrderBy?a.listOrderBy:a.listOrderById?"id":a.listOrderByName?"name":a.listOrderByAddress?"address":a.listOrderByIcon?"icon":a.listOrderByCreated?"created":a.listOrderByUpdated?"updated":"id","distance"===a.listOrderBy&&(a.listOrderBy=i),K.getList(1,n,i,r,o)}),void K.controls.locate.start();if(Object.keys(K.groups).forEach(function(i){K.groups[i].active&&Object.keys(K.groups[i].markers).forEach(function(t){var e=K.groups[i].markers[t];-1===c.indexOf(e)&&(!n||K.hasString(e.name,n)||K.hasString(e.address,n)||K.hasString(e.popup,n))&&(void 0!==K.location.latlng?(void 0===e.distance&&(s=K.location.latlng,l=e.getLatLng(),e.distance=Y.a.latLng(s).distanceTo(l)),void 0!==e.distance&&0<o?"imperial"==a.listDistanceUnit||"imperial-metric"==a.listDistanceUnit?e.distance/1609.344<=o&&c.push(e):e.distance/1e3<=o&&c.push(e):c.push(e)):c.push(e))})}),"id"==i?c=K.sortArray(c,"id",r,!0):"name"==i?c=K.sortArray(c,"name",r,!1):"address"==i?c=K.sortArray(c,"address",r,!1):"distance"==i?c=K.sortArray(c,"distance",r,!0):"icon"==i?c=K.sortArray(c,"icon",r,!1):"created"===i?c=K.sortArray(c,"created",r,!0):"updated"===i&&(c=K.sortArray(c,"updated",r,!0)),K.containers.list.innerHTML="",a.listSearch){var t,u=Y.a.DomUtil.create("div","mmp-list-header",K.containers.list),h=Y.a.DomUtil.create("div","mmp-list-header-left",u),p=Y.a.DomUtil.create("div","mmp-list-search-wrap",h),d=Y.a.DomUtil.create("input","mmp-list-search",p);if(d.type="text",d.value=n,d.placeholder=mmpL10n.list.search,n&&((t=Y.a.DomUtil.create("div","mmp-list-search-clear",p)).src=mmpVars.pluginUrl+"images/leaflet/search.png",t.addEventListener("click",function(){K.getList(1,null,i,r,o)})),void 0!==K.location.latlng){for(var f=Y.a.DomUtil.create("select","mmp-list-radius",h),m=[0,5,10,15,20,25,50,100,200,500],g=0;g<m.length;g++){var v=Y.a.DomUtil.create("option",null,f);v.value=m[g],m[g]==o&&(v.defaultSelected=!0),m[g]<=0?v.innerHTML=mmpL10n.list.everywhere:"imperial"==a.listDistanceUnit?v.innerHTML=m[g]+" mi":"metric-imperial"==a.listDistanceUnit?v.innerHTML=m[g]+" km ("+(m[g]/1.609344).toFixed(a.listDistancePrecision)+" mi)":"imperial-metric"==a.listDistanceUnit?v.innerHTML=m[g]+" mi ("+(1.609344*m[g]).toFixed(a.listDistancePrecision)+" km)":v.innerHTML=m[g]+" km"}f.addEventListener("change",function(){K.getList(1,n,y.value,r,f.value)})}var _=Y.a.DomUtil.create("div","mmp-list-header-right",u),y=Y.a.DomUtil.create("select","mmp-list-sort",_),b=Y.a.DomUtil.create("a","mmp-list-order mmp-"+r,_);b.href="#";var x=[];for(a.listOrderById&&x.push("id"),a.listOrderByName&&x.push("name"),a.listOrderByAddress&&x.push("address"),a.listOrderByDistance&&void 0!==K.controls.locate&&x.push("distance"),a.listOrderByIcon&&x.push("icon"),a.listOrderByCreated&&x.push("created"),a.listOrderByUpdated&&x.push("updated"),g=0;g<x.length;g++){var w=Y.a.DomUtil.create("option",null,y);w.value=x[g],x[g]==i&&(w.defaultSelected=!0),w.innerHTML=mmpL10n.list[x[g]]}d.addEventListener("keyup",function(t){13==t.which&&K.getList(1,d.value,i,r,o)}),y.addEventListener("change",function(){K.getList(1,n,y.value,r,o)}),b.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),K.getList(1,n,i,"asc"===r?"desc":"asc",o)})}K.containers.listBody=Y.a.DomUtil.create("div","mmp-list-body",K.containers.list);var k=c.length>a.listLimit?a.listLimit:c.length,L=Math.ceil(c.length/a.listLimit),C=(e=L<e?L:e)==L?c.length:k*e;for(g=(e-1)*k;g<C;g++){var M,S,T,P=Y.a.DomUtil.create("div","mmp-list-row",K.containers.listBody);a.listIcon&&(M=Y.a.DomUtil.create("div","mmp-list-row-icon",P),S=Y.a.DomUtil.create("div","mmp-list-icon",M),T=Y.a.DomUtil.create("img",null,S),c[g].icon?T.src=mmpVars.iconsUrl+c[g].icon:T.src=mmpVars.pluginUrl+"images/leaflet/marker.png");var D,A=Y.a.DomUtil.create("div","mmp-list-row-info",P),E=Y.a.DomUtil.create("div","mmp-list-row-header",A);a.listName&&((D=Y.a.DomUtil.create("div","mmp-list-name",E)).innerHTML=c[g].name,"none"!==a.listAction&&(D.tabIndex=0,function(e){var i="popup"===a.listAction;Y.a.DomEvent.on(D,"click",function(){K.highlightMarker(c[e],K.containers.main.getBoundingClientRect().top<0,i)}),Y.a.DomEvent.on(D,"keypress",function(t){13===t.which&&K.highlightMarker(c[e],K.containers.main.getBoundingClientRect().top<0,i)})}(g)));var O,I,B,z=Y.a.DomUtil.create("div","mmp-list-api",E);c[g].edit&&K.addApiLink(K.getApiLink("editMarker",c[g].id),mmpL10n.api.editMarker,"map-edit.png",z),a.listDir&&(I=K.getDirectionsLink(a.directionsProvider,c[g].getLatLng().lat,c[g].getLatLng().lng,c[g].address),"googlemaps"==a.directionsProvider?O=a.directionsGoogleWalking?"walk.png":"car.png":"yours"==a.directionsProvider?O="bicycle"==a.directionsYoursType?"bicycle.png":"foot"==a.directionsYoursType?"walk.png":"car.png":"ors"==a.directionsProvider?O="Bicycle"==a.directionsOrsType?"bicycle.png":"Pedestrian"==a.directionsOrsType?"walk.png":"car.png":"bingmaps"==a.directionsProvider&&(O="car.png"),K.addApiLink(I,mmpL10n.api.dir,O,z)),a.apiFullscreen&&a.listFs&&K.addApiLink(K.getApiLink("fs",K.id,{marker:c[g].id}),mmpL10n.api.fs,"fullscreen.png",z),a.listShare&&(B=Y.a.DomUtil.create("i","mmp-list-share",z),K.addShareLink(c[g].id,B));var R=Y.a.DomUtil.create("div","mmp-list-row-body",A);a.listPopup&&(Y.a.DomUtil.create("div","mmp-list-popup",R).innerHTML=c[g].popup);var F,j=Y.a.DomUtil.create("div","mmp-list-row-footer",A);a.listAddress&&c[g].address&&(Y.a.DomUtil.create("div","mmp-list-address",j).innerHTML=c[g].address),a.listDistance&&void 0!==c[g].distance&&(F=Y.a.DomUtil.create("div","mmp-list-distance",z),"imperial"==a.listDistanceUnit?F.innerHTML=(c[g].distance/1609.344).toFixed(a.listDistancePrecision)+" mi":"metric-imperial"==a.listDistanceUnit?F.innerHTML=(c[g].distance/1e3).toFixed(a.listDistancePrecision)+" km ("+(c[g].distance/1609.344).toFixed(a.listDistancePrecision)+" mi)":"imperial-metric"==a.listDistanceUnit?F.innerHTML=(c[g].distance/1609.344).toFixed(a.listDistancePrecision)+" mi ("+(c[g].distance/1e3).toFixed(a.listDistancePrecision)+" km)":F.innerHTML=(c[g].distance/1e3).toFixed(a.listDistancePrecision)+" km")}var N,U,H,G,Z,W,V,q=Y.a.DomUtil.create("div","mmp-list-footer",K.containers.list),$=Y.a.DomUtil.create("div","mmp-list-count",q);0===c.length?$.innerHTML=mmpL10n.list.noResults:1===c.length?$.innerHTML=mmpL10n.list.oneResult:$.innerHTML=c.length+" "+mmpL10n.list.results,c.length>a.listLimit&&(N=Y.a.DomUtil.create("div","mmp-list-nav",q),(U=Y.a.DomUtil.create("button",null,N)).innerHTML="&laquo;",U.addEventListener("click",function(){K.getList(1,n,i,r,o)}),(H=Y.a.DomUtil.create("button",null,N)).innerHTML="&lsaquo;",H.addEventListener("click",function(){var t=1===e?1:e-1;K.getList(t,n,i,r,o)}),(G=Y.a.DomUtil.create("button",null,N)).innerHTML="&rsaquo;",G.addEventListener("click",function(){var t=e===L?L:e+1;K.getList(t,n,i,r,o)}),(Z=Y.a.DomUtil.create("button",null,N)).innerHTML="&raquo;",Z.addEventListener("click",function(){K.getList(L,n,i,r,o)}),W=Y.a.DomUtil.create("div","mmp-list-page",q),(V=Y.a.DomUtil.create("input",null,W)).type="text",V.value=e,W.appendChild(document.createTextNode(" / "+L)),W.addEventListener("keyup",function(t){13==t.which&&K.getList(Math.abs(parseInt(V.value)),n,i,r,o)})),K.drawMarkers(c)}},this.loadControls=function(){var e,t=K.settings;void 0!==K.controls.locate&&K.controls.locate.stop(),Object.keys(K.controls).forEach(function(t){K.controls[t].remove()}),K.controls={},K.controls.attribution=Y.a.control.attribution({position:t.attributionPosition,prefix:t.attributionPrefix}),K.controls.attribution._esriAttributionAdded=!0,"hidden"!=t.zoomControlPosition&&(K.controls.zoom=Y.a.control.zoom({position:t.zoomControlPosition,zoomInTitle:mmpL10n.control.zoomIn,zoomOutTitle:mmpL10n.control.zoomOut})),"hidden"!=t.fullscreenPosition&&(K.controls.fullscreen=Y.a.control.fullscreen({position:t.fullscreenPosition,title:{false:mmpL10n.control.fullscreenFalse,true:mmpL10n.control.fullscreenTrue}})),"hidden"!=t.resetPosition&&(K.controls.reset=Y.a.control.resetView({position:t.resetPosition,onDemand:t.resetOnDemand,title:mmpL10n.control.reset})),"hidden"!=t.locatePosition&&(K.controls.locate=Y.a.control.locate({locateOptions:{enableHighAccuracy:!0},position:t.locatePosition,drawCircle:t.locateDrawCircle,drawMarker:t.locateDrawMarker,setView:t.locateSetView,keepCurrentZoomLevel:t.locateKeepCurrentZoomLevel,clickBehavior:{inView:t.locateClickBehaviorInView,outOfView:t.locateClickBehaviorOutOfView},icon:t.locateIcon,iconLoading:"icon-spinner",metric:t.locateMetric,showPopup:t.locateShowPopup,strings:{title:mmpL10n.control.locateTitle,metersUnit:mmpL10n.control.locateMetersUnit,feetUnit:mmpL10n.control.locateFeetUnit,popup:mmpL10n.control.locatePopup,outsideMapBoundsMsg:mmpL10n.control.locateOutsideMapBoundsMsg},onLocationError:function(t){var e=mmpL10n.control.locateErrorUnknown;1===t.code?e=mmpL10n.control.locateErrorDenied:2===t.code?e=mmpL10n.control.locateErrorUnavailable:3===t.code&&(e=mmpL10n.control.locateErrorTimeout),K.showMapModal(mmpL10n.control.locateError,e)},onLocationOutsideMapBounds:function(t){t.stop(),K.showMapModal(mmpL10n.control.locateError,t.options.strings.outsideMapBoundsMsg)}})),"hidden"!=t.scalePosition&&(K.controls.scale=Y.a.control.scale({position:t.scalePosition,maxWidth:t.scaleMaxWidth,metric:t.scaleMetric,imperial:t.scaleImperial})),"hidden"!=t.layersPosition&&(Object.keys(K.basemaps).length||Object.keys(K.overlays).length)&&(K.controls.layers=Y.a.control.layers(null,null,{position:t.layersPosition,collapsed:"collapsed"==t.layersCollapsed||"collapsed-mobile"==t.layersCollapsed&&Y.a.Browser.mobile}),Object.keys(K.basemaps).forEach(function(t){K.controls.layers.addBaseLayer(K.basemaps[t],t)}),Object.keys(K.overlays).forEach(function(t){K.controls.layers.addOverlay(K.overlays[t],t)})),"hidden"!=t.filtersPosition&&"map"===K.type&&Object.keys(t.filtersDetails).length&&!t.filtersAllMarkers&&(K.controls.filters=Y.a.control.filters({mmp:K,position:t.filtersPosition,collapsed:"collapsed"==t.filtersCollapsed||"collapsed-mobile"==t.filtersCollapsed&&Y.a.Browser.mobile,buttons:t.filtersButtons,allText:mmpL10n.control.filtersAll,noneText:mmpL10n.control.filtersNone})),"hidden"!=t.gpxControlPosition&&void 0!==K.gpx.tracks&&1<K.gpx.tracks.length&&(K.controls.gpx=Y.a.control.gpx({mmp:K,collapsed:"collapsed"==t.gpxControlCollapsed||"collapsed-mobile"==t.gpxControlCollapsed&&Y.a.Browser.mobile,position:t.gpxControlPosition})),"hidden"!=t.minimapPosition&&Object.keys(K.minimaps).length&&(e=Y.a.tileLayer(""),Object.keys(K.basemaps).forEach(function(t){K.map.hasLayer(K.basemaps[t])&&(e=K.minimaps[t])}),K.controls.minimap=new Y.a.Control.MiniMap(e,{position:t.minimapPosition,width:t.minimapWidth,height:t.minimapHeight,collapsedWidth:t.minimapCollapsedWidth,collapsedHeight:t.minimapCollapsedHeight,zoomLevelOffset:t.minimapZoomLevelOffset,zoomLevelFixed:t.minimapZoomLevelFixed||null,toggleDisplay:!0,autoToggleDisplay:!1,minimized:"collapsed"==t.minimapMinimized||"collapsed-mobile"==t.minimapMinimized&&Y.a.Browser.mobile,strings:{hideText:mmpL10n.control.minimapHideText,showText:mmpL10n.control.minimapShowText},mapOptions:{attributionControl:!1}})),Object.keys(K.controls).forEach(function(t){K.controls[t].addTo(K.map)}),Object.keys(K.basemaps).forEach(function(t){var e=K.basemaps[t];K.map.hasLayer(e)&&(e instanceof Y.a.TileLayer.HERE?e._findCopyrightBBox():e instanceof Y.a.TileLayer.TomTom?e._addAttribution():e instanceof s.a&&s.b._updateMapAttribution({target:K.map}))}),t.attributionCondensed&&(Y.a.DomUtil.removeClass(K.controls.attribution.getContainer(),"leaflet-control-attribution"),Y.a.DomUtil.addClass(K.controls.attribution.getContainer(),"mmp-control-attribution")),void 0!==K.controls.minimap?K.map.on("baselayerchange",K.updateMinimapHandler):K.map.off("baselayerchange",K.updateMinimapHandler),void 0!==K.controls.locate?(K.map.on("locationfound",K.updateLocationHandler),K.map.once("locationfound",K.updateListHandler),!K.settings.locateAutostart||K.urlHighlight||K.highlight||K.controls.locate.start()):(K.map.off("locationfound",K.updateLocationHandler),K.map.off("locationfound",K.updateListHandler)),K.fire("controlsloaded",K.controls),setTimeout(function(){K.urlHighlight&&void 0!==K.markers[K.urlHighlight]?K.highlightMarker(K.markers[K.urlHighlight],!0,!0):K.highlight&&void 0!==K.markers[K.highlight]&&K.highlightMarker(K.markers[K.highlight],!1,!0)},100),K.getList()},this.getGpx=function(){var t=K.settings;return t.gpxUrl?(void 0!==K.containers.chartWrap&&K.addLoading(K.containers.chartWrap),K.xhr({type:"GET",url:t.gpxUrl}).then(function(t){if(K.gpx=new r,K.gpx.parse(t),!K.gpx.tracks.length){for(var e=0;e<K.gpx.routes.length;e++){var i=K.gpx.routes[e];i.segments=[{points:i.points,extensions:i.extensions,time:i.time,distance:i.distance,elevation:i.elevation}],K.gpx.tracks.push(i)}K.gpx.routes=[]}return K.addGpx(),void 0!==K.containers.chartWrap&&K.removeLoading(K.containers.chartWrap),!0}).catch(function(t){return K.logError("Error loading GPX ("+t+")"),!1})):Promise.resolve()},this.addGpx=function(){var t=K.settings;if(void 0!==K.gpxGroup&&"function"==typeof K.gpxGroup.remove&&K.gpxGroup.remove(),K.gpxGroup=Y.a.featureGroup(),K.gpxTracks={},void 0!==K.gpx.tracks&&K.gpx.tracks.length){for(var e=[],i=0;i<K.gpx.tracks.length;i++)for(var n=K.gpx.tracks[i],r=0;r<n.segments.length;r++){var o=n.segments[r];e[i]=Y.a.polyline([],{pmIgnore:!0,interactive:!0,smoothFactor:t.gpxTrackSmoothFactor,color:n.extensions.color||o.extensions.color||t.gpxTrackColor,weight:parseInt(n.extensions.weight||o.extensions.weight||t.gpxTrackWeight),opacity:parseFloat(n.extensions.opacity||o.extensions.opacity||t.gpxTrackOpacity)});for(var a=0;a<o.points.length;a++){var s=o.points[a].lat,l=o.points[a].lon;e[i].addLatLng([s,l])}e[i].addTo(K.gpxGroup)}K.gpxTracks=e}K.setTrackIcons(),K.setIntervalMarkers(),K.setTrackMeta(),K.setWaypoints(),K.gpxGroup.addTo(K.map),K.fire("gpxloaded",K.gpxTracks),K.loadChart(),K.addElevationChart()},this.getGpxName=function(t){return!(void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].name)&&K.gpx.tracks[t].name},this.getGpxStartTime=function(t){return!(void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].time.start)&&new Date(K.gpx.tracks[t].time.start).toUTCString()},this.getGpxEndTime=function(t){return!(void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].time.end)&&new Date(K.gpx.tracks[t].time.end).toUTCString()},this.getGpxTimeTotal=function(t,e){return!(void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].time.total)&&K.msToPrime(K.gpx.tracks[t].time.total,e)},this.getGpxTimeMoving=function(t,e){return!(void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].time.moving)&&K.msToPrime(K.gpx.tracks[t].time.moving,e)},this.getGpxDistance=function(t,e){if(e=e||"metric",void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return(K.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi";case"metric-imperial":return(K.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km ("+(K.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi)";case"imperial-metric":return(K.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi ("+(K.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km)";default:return(K.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km"}},this.getGpxPace=function(t,e,i){if(e=e||"metric",void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].time.moving||!K.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return K.msToPrime(K.gpx.tracks[t].time.moving/(K.gpx.tracks[t].distance.total/1609.344),i)+"/mi";case"metric-imperial":return K.msToPrime(K.gpx.tracks[t].time.moving/(K.gpx.tracks[t].distance.total/1e3),i)+"/km ("+K.msToPrime(K.gpx.tracks[t].time.moving/(K.gpx.tracks[t].distance.total/1609.344),i)+"/mi)";case"imperial-metric":return K.msToPrime(K.gpx.tracks[t].time.moving/(K.gpx.tracks[t].distance.total/1609.344),i)+"/mi ("+K.msToPrime(K.gpx.tracks[t].time.moving/(K.gpx.tracks[t].distance.total/1e3),i)+"/km)";default:return K.msToPrime(K.gpx.tracks[t].time.moving/(K.gpx.tracks[t].distance.total/1e3),i)+"/km"}},this.getGpxHeartRate=function(t){return!(void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].heartRate.avg)&&K.gpx.tracks[t].heartRate.avg.toFixed(0)+" bpm"},this.getGpxElevation=function(t,e){if(e=e||"metric",void 0===K.gpx.tracks[t]||!K.gpx.tracks[t].elevation.gain&&!K.gpx.tracks[t].elevation.loss)return!1;var i=K.gpx.tracks[t].elevation.gain-K.gpx.tracks[t].elevation.loss;switch(e){case"imperial":return"+"+(K.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(K.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft";case"metric-imperial":return"+"+K.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+K.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m (+"+(K.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(K.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft)";case"imperial-metric":return"+"+(K.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(K.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft (+"+K.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+K.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m)";default:return"+"+K.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+K.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m"}},this.setTrackStyle=function(){var e=K.settings;Object.keys(K.gpxTracks).forEach(function(t){K.gpxTracks[t].setStyle({color:e.gpxTrackColor,weight:e.gpxTrackWeight,opacity:e.gpxTrackOpacity})})},this.setTrackIcons=function(){var i=K.settings;void 0!==K.gpx.tracks&&Object.keys(K.gpx.tracks).forEach(function(t){var e;void 0!==K.gpx.tracks[t].startIcon&&K.gpx.tracks[t].startIcon&&K.gpx.tracks[t].startIcon.remove(),void 0!==K.gpx.tracks[t].endIcon&&K.gpx.tracks[t].endIcon&&K.gpx.tracks[t].endIcon.remove(),i.gpxShowStartIcon&&(K.gpx.tracks[t].startIcon=Y.a.marker([K.gpx.tracks[t].points[0].lat,K.gpx.tracks[t].points[0].lon],{pmIgnore:!0,interactive:!1,icon:Y.a.icon({iconUrl:i.gpxStartIcon?mmpVars.iconsUrl+i.gpxStartIcon:mmpVars.pluginUrl+"images/leaflet/gpx-start.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-start"})}).addTo(K.gpxGroup)),i.gpxShowEndIcon&&(e=K.gpx.tracks[t].points.length-1,K.gpx.tracks[t].endIcon=Y.a.marker([K.gpx.tracks[t].points[e].lat,K.gpx.tracks[t].points[e].lon],{pmIgnore:!0,interactive:!1,icon:Y.a.icon({iconUrl:i.gpxEndIcon?mmpVars.iconsUrl+i.gpxEndIcon:mmpVars.pluginUrl+"images/leaflet/gpx-end.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-end"})}).addTo(K.gpxGroup))})},this.setIntervalMarkers=function(){var t=K.settings;if(void 0!==K.gpx.tracks&&(Object.keys(K.gpx.tracks).forEach(function(t){if(void 0!==K.gpx.tracks[t].intervalMarkers&&K.gpx.tracks[t].intervalMarkers.length)for(var e=K.gpx.tracks[t].intervalMarkers,i=0;i<e.length;i++)e[i].remove()}),t.gpxIntervalMarkers))for(var e="imperial"===t.gpxMetaUnits||"imperial-metric"===t.gpxMetaUnits?1609.344:1e3,i=K.gpx.tracks,n=0;n<i.length;n++){i[n].intervalMarkers=[];for(var r=1,o=i[n].points,a=0;a<o.length;a++){var s,l=o[a];l.dist>=r*e&&(s=Y.a.marker([l.lat,l.lon],{pmIgnore:!0,interactive:!1,icon:Y.a.divIcon({className:"mmp-interval-marker",html:"<span>"+r+"</span>"})}).addTo(K.map),i[n].intervalMarkers.push(s),r++)}}},this.setTrackMeta=function(){var r=K.settings;Object.keys(K.gpxTracks).forEach(function(t){if(!r.gpxMeta)return K.gpxTracks[t].closePopup(),void K.gpxTracks[t].unbindPopup();for(var e=Y.a.DomUtil.create("div","mmp-gpx-meta"),i=[{show:r.gpxMetaName,title:mmpL10n.gpx.metaName,value:K.getGpxName(t)},{show:r.gpxMetaStart,title:mmpL10n.gpx.metaStart,value:K.getGpxStartTime(t)},{show:r.gpxMetaEnd,title:mmpL10n.gpx.metaEnd,value:K.getGpxEndTime(t)},{show:r.gpxMetaTotal,title:mmpL10n.gpx.metaTotal,value:K.getGpxTimeTotal(t)},{show:r.gpxMetaMoving,title:mmpL10n.gpx.metaMoving,value:K.getGpxTimeMoving(t)},{show:r.gpxMetaDistance,title:mmpL10n.gpx.metaDistance,value:K.getGpxDistance(t,r.gpxMetaUnits)},{show:r.gpxMetaPace,title:mmpL10n.gpx.metaPace,value:K.getGpxPace(t,r.gpxMetaUnits)},{show:r.gpxMetaHeartRate,title:mmpL10n.gpx.metaHeartRate,value:K.getGpxHeartRate(t)},{show:r.gpxMetaElevation,title:mmpL10n.gpx.metaElevation,value:K.getGpxElevation(t,r.gpxMetaUnits)}],n=0;n<i.length;n++)!i[n].show||r.gpxMetaHideMissing&&!1===i[n].value||(!1===i[n].value&&(i[n].value="N/A"),e.innerHTML+="<strong>"+i[n].title+":</strong> "+i[n].value+"<br />");r.gpxMetaDownload&&(e.innerHTML+='<a href="'+mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+K.settings.gpxUrl+'"><img src="'+mmpVars.pluginUrl+'images/icons/download-gpx.png" /> '+mmpL10n.gpx.metaDownload+"</a><br />"),r.gpxMetaDesc&&K.gpx.tracks[t].desc&&(e.innerHTML&&(e.innerHTML+="<br />"),e.innerHTML+=K.gpx.tracks[t].desc),void 0!==K.gpxTracks[t].getPopup()&&K.gpxTracks[t].getPopup()?K.gpxTracks[t].setPopupContent(e):K.gpxTracks[t].bindPopup(e)})},this.setWaypoints=function(){for(var t=K.settings,e=0;e<K.gpxWaypoints.length;e++)K.gpxWaypoints[e].remove();if(K.gpxWaypoints=[],t.gpxWaypoints&&void 0!==K.gpx.waypoints)for(e=0;e<K.gpx.waypoints.length;e++){var i,n=Y.a.circleMarker([K.gpx.waypoints[e].lat,K.gpx.waypoints[e].lon],{interactive:!0,radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity}).addTo(K.gpxGroup);K.gpx.waypoints[e].name&&n.bindTooltip(K.gpx.waypoints[e].name),K.gpx.waypoints[e].desc&&((i=Y.a.DomUtil.create("div","mmp-gpx-waypoint")).innerHTML=K.gpx.waypoints[e].desc,n.bindPopup(i)),K.gpxWaypoints.push(n)}},this.setWaypointStyle=function(){for(var t=K.settings,e=0;e<K.gpxWaypoints.length;e++)K.gpxWaypoints[e].setStyle({radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity})},this.generateChartData=function(){var e,i="imperial"===K.settings.gpxChartUnits||"imperial-metric"===K.settings.gpxChartUnits?(e=1609.433,.3048):(e=1e3,1),n=isNaN(parseFloat(K.settings.gpxChartYOffset))?0:parseFloat(K.settings.gpxChartYOffset);return K.gpx.tracks[K.map._activeTrack].points.map(function(t){return{x:t.dist/e,y:t.ele/i+n}})},this.updateElevationChart=function(t){var e,i=K.settings;K.gpxChart instanceof c.a&&(t&&(e=K.generateChartData(),K.gpxChart.data.datasets[0].data=e,K.gpxChart.options.scales.xAxes[0].ticks.max=e[e.length-1].x),K.gpxChart.data.datasets[0].borderWidth=i.gpxChartLineWidth,K.gpxChart.data.datasets[0].borderColor=i.gpxChartLineColor,K.gpxChart.data.datasets[0].fill=i.gpxChartFill,K.gpxChart.data.datasets[0].backgroundColor=i.gpxChartFillColor,K.gpxChart.options.scales.yAxes[0].gridLines.color=i.gpxChartGridLinesColor,K.gpxChart.options.scales.yAxes[0].ticks.min=isNaN(parseInt(i.gpxChartYMin))?void 0:parseInt(i.gpxChartYMin),K.gpxChart.options.scales.yAxes[0].ticks.max=isNaN(parseInt(i.gpxChartYMax))?void 0:parseInt(i.gpxChartYMax),K.gpxChart.options.scales.yAxes[0].ticks.reverse=i.gpxChartReverseY,K.gpxChart.options.scales.yAxes[0].ticks.minor.fontColor=i.gpxChartTicksFontColor,K.gpxChart.options.scales.xAxes[0].gridLines.color=i.gpxChartGridLinesColor,K.gpxChart.options.scales.xAxes[0].ticks.reverse=i.gpxChartReverseX,K.gpxChart.options.scales.xAxes[0].ticks.minor.fontColor=i.gpxChartTicksFontColor,K.gpxChart.options.chartArea.backgroundColor=i.gpxChartBgColor,K.gpxChart.options.tooltips.backgroundColor=i.gpxChartTooltipBgColor,K.gpxChart.options.tooltips.bodyFontColor=i.gpxChartTooltipFontColor,K.gpxChart.options.indicator.lineWidth=i.gpxChartIndicatorLineWidth,K.gpxChart.options.indicator.lineColor=i.gpxChartIndicatorLineColor,K.gpxChart.update())},this.updateElevationChartThrottled=Y.a.Util.throttle(K.updateElevationChart,100,this),this.addElevationChart=function(){var t,e,l=K.settings;K.settings.gpxChart&&void 0!==K.gpx.tracks&&K.gpx.tracks.length&&(void 0===K.containers.chartWrap&&K.loadChart(),t=K.generateChartData(),e=document.getElementById("mmp-gpx-chart-"+K.uid).getContext("2d"),c.a.platform.disableCSSInjection=!0,c.a.defaults.scatterIndicator=c.a.defaults.scatter,c.a.controllers.scatterIndicator=c.a.controllers.scatter.extend({draw:function(t){var e,i,n,r,o,a,s;c.a.controllers.scatter.prototype.draw.call(this,t),this.chart.tooltip._active&&this.chart.tooltip._active.length&&void 0!==this.chart.scales["y-axis-1"]?(e=this.chart.ctx,i=K.map._activeTrack,r=(n=this.chart.tooltip._active[0])._index,o=n.tooltipPosition().x,a=this.chart.scales["y-axis-1"].top,s=this.chart.scales["y-axis-1"].bottom,this.chart.config.options.indicator&&this.chart.config.options.indicator.lineWidth&&this.chart.config.options.indicator.lineColor&&(e.save(),e.beginPath(),e.moveTo(o,a),e.lineTo(o,s),e.lineWidth=this.chart.config.options.indicator.lineWidth,e.strokeStyle=this.chart.config.options.indicator.lineColor,e.stroke(),e.restore()),l.gpxChartLocator&&void 0!==K.chartLayers.locator&&(K.chartLayers.locator.setLatLng([K.gpx.tracks[i].points[r].lat,K.gpx.tracks[i].points[r].lon]),K.map.hasLayer(K.chartLayers.locator)||K.chartLayers.locator.addTo(K.map))):void 0!==K.chartLayers.locator&&K.map.hasLayer(K.chartLayers.locator)&&K.chartLayers.locator.remove()}}),K.gpxChart=new c.a(e,{plugins:[{beforeDraw:function(t){var e,i;t.config.options.chartArea&&t.config.options.chartArea.backgroundColor&&(e=t.chart.ctx,i=t.chartArea,e.save(),e.fillStyle=t.config.options.chartArea.backgroundColor,e.fillRect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.restore())}},{afterDraw:function(t){var e,i,n;t.data.datasets[0].data.filter(function(t){return!isNaN(t.y)}).length||(e=t.chart.ctx,i=t.chart.width,n=t.chart.height,t.clear(),e.save(),e.fillStyle="rgba(0, 0, 0, 1)",e.textAlign="center",e.textBaseline="middle",e.fillText(mmpL10n.gpx.noElevationData,i/2,n/2),e.restore())}}],type:"scatterIndicator",data:{datasets:[{data:t,pointRadius:0,showLine:!0,spanGaps:!0,borderCapStyle:"round",borderWidth:l.gpxChartLineWidth,borderColor:l.gpxChartLineColor,fill:l.gpxChartFill,backgroundColor:l.gpxChartFillColor}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},layout:{padding:{top:10}},scales:{yAxes:[{gridLines:{color:l.gpxChartGridLinesColor},ticks:{callback:function(t){return K.formatGpxValue(t,"ele",l.gpxChartUnits)},min:isNaN(parseInt(l.gpxChartYMin))?void 0:parseInt(l.gpxChartYMin),max:isNaN(parseInt(l.gpxChartYMax))?void 0:parseInt(l.gpxChartYMax),reverse:l.gpxChartReverseY,fontColor:l.gpxChartTicksFontColor}}],xAxes:[{afterBuildTicks:function(t){var e=t.ticks.length;2<e&&(t.ticks[e-2]=null)},gridLines:{color:l.gpxChartGridLinesColor},ticks:{callback:function(t){if(null!==t)return K.formatGpxValue(t,"dist",l.gpxChartUnits)},min:0,max:t[t.length-1].x,reverse:l.gpxChartReverseX,autoSkip:!1,fontColor:l.gpxChartTicksFontColor}}]},legend:{display:!1},chartArea:{backgroundColor:l.gpxChartBgColor},tooltips:{callbacks:{label:function(t,e){var i=t.datasetIndex,n=t.index,r=e.datasets[i].data[n].y,o=e.datasets[i].data[n].x;return[mmpL10n.gpx.metaElevation+": "+K.formatGpxValue(r,"ele",l.gpxChartUnits),mmpL10n.gpx.metaDistance+": "+K.formatGpxValue(o,"dist",l.gpxChartUnits)]}},mode:"index",intersect:!1,displayColors:!1,backgroundColor:l.gpxChartTooltipBgColor,bodyFontColor:l.gpxChartTooltipFontColor},indicator:{lineWidth:l.gpxChartIndicatorLineWidth,lineColor:l.gpxChartIndicatorLineColor},hover:{animationDuration:250}}}),void 0!==K.chartLayers&&Object.keys(K.chartLayers).forEach(function(t){K.chartLayers[t].remove()}),K.chartLayers={},K.chartLayers.locator=Y.a.circleMarker([0,0]),K.setChartStyle())},this.setChartStyle=function(){var t=K.settings;t.gpxChart&&void 0!==K.chartLayers&&(Object.keys(K.chartLayers).forEach(function(t){K.chartLayers[t].remove()}),K.chartLayers.locator.setStyle({interactive:!1,radius:t.gpxChartLocatorRadius,stroke:t.gpxChartLocatorStroke,color:t.gpxChartLocatorColor,weight:t.gpxChartLocatorWeight,fillColor:t.gpxChartLocatorFillColor,fillOpacity:t.gpxChartLocatorFillOpacity}))},this.fitVisibleMarkers=function(){var t=K.markerGroup.getBounds();t.isValid()&&K.map.fitBounds(t)},this.fitGeoJson=function(t){var e,i=K.geoJson.getLayer(t);void 0===i||(e=i.getBounds()).isValid()&&K.map.fitBounds(e)},this.deferredLoadHandler=function(t,i){t.forEach(function(t){if("childList"===t.type&&t.addedNodes.length)for(var e=0;e<t.addedNodes.length;e++){if(t.addedNodes[e].id==="maps-marker-pro-"+K.uid)return i.disconnect(),void K.main()}})},this.lazyLoadHandler=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.target===K.containers.main&&n.isIntersecting&&(e.disconnect(),K.load())}},this.lazyLoadHandlerFallback=function(){if(!K.isVisible(K.containers.main)||!K.isInViewport(K.containers.main))return setTimeout(K.lazyLoadHandlerFallback,250);K.load()},this.visibilityDetectionHandler=function(t,e){for(var i=0;i<t.length;i++){t[i].target===K.containers.main&&K.checkInvalidateSize()}},this.visibilityDetectionHandlerFallback=function(){K.checkInvalidateSize(),setTimeout(K.visibilityDetectionHandlerFallback,250)},this.openPopupHandler=function(t){var e=K.settings,i=t.target.getPopup();void 0!==i&&K.loadPopup(t.target).then(function(){K.checkPopupSize(i),e.popupCenterOnMap&&K.centerPopup(i),K.fire("popupopen",i)}).catch(function(){})},this.openOnHoverHandler=function(t){t.target.openPopup()},this.updateListHandler=function(){K.getList()},this.updateMinimapHandler=function(t){K.controls.minimap.changeLayer(K.minimaps[t.name])},this.updateLocationHandler=function(t){K.location=t},this.main()}},function(t,e){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:21,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._isMounted=!0,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise(function(t,e){var i=0,n=null,n=setInterval(function(){return 10<=i?(clearInterval(n),e(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(n),t(window.google)):void++i},500)}),this.once("spawned",function(){if(this._subLayers)for(var t in this._subLayers)this._subLayers[t].setMap(this._mutant)}),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(e){L.GridLayer.prototype.onAdd.call(this,e),this._initMutantContainer(),this._GAPIPromise.then(function(){var t;this._isMounted&&(this._ready=!0,this._initMutant(),(e=this._map)&&(t=this.options.updateWhenIdle?"moveend":"move",e.on(t,this._update,this),this.once("remove",function(){this._map.off(t,this._update,this)}),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}.bind(this)),e._controlCorners.bottomright.style.marginBottom="20px",e._controlCorners.bottomleft.style.marginBottom="20px",this._update()))}.bind(this))},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),google.maps.event.clearListeners(t,"idle"),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle"),t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("moveend",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners&&(t._controlCorners.bottomright.style.marginBottom=0,t._controlCorners.bottomleft.style.marginBottom=0),this._isMounted=!1},addGoogleLayer:function(e,i){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var t=new google.maps[e](i);this._mutant&&t.setMap(this._mutant),this._subLayers[e]=t}.bind(this)),this},removeGoogleLayer:function(e){return this._GAPIPromise.then(function(){var t=this._subLayers&&this._subLayers[e];t&&(t.setMap(null),delete this._subLayers[e])}.bind(this)),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex=800,this._mutantContainer.style.pointerEvents="none",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var t=this._mutantContainer.style;t.width="100%",t.height="100%",this._attachObserver(this._mutantContainer)},_initMutant:function(){var t;this._mutant||(t=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"}),this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=this._mutantContainer.querySelectorAll("a"),e=0;e<t.length;++e)t[e].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:t}))},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var r=i.addedNodes[n];r instanceof HTMLImageElement?this._onMutatedImage(r):r instanceof HTMLElement&&(Array.prototype.forEach.call(r.querySelectorAll("img"),this._boundOnMutatedImage),"white"===r.style.backgroundColor&&L.DomUtil.remove(r),0===r.textContent.indexOf("For development purposes only")&&L.DomUtil.remove(r),Array.prototype.forEach.call(r.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,i,n,r,o,a,s=t.src.match(this._roadRegexp),l=0;s?(e={z:s[1],x:s[2],y:s[3]},1<this._imagesPerTile&&(l=t.style.zIndex=1)):((s=t.src.match(this._satRegexp))&&(e={x:s[1],y:s[2],z:s[3]}),l=0),e?(i=this._tileCoordsToKey(e),t.style.position="absolute",t.style.visibility="hidden",n=i+"/"+l,this._freshTiles[n]=t,n in this._tileCallbacks&&this._tileCallbacks[n]?(this._tileCallbacks[n].pop()(t),this._tileCallbacks[n].length||delete this._tileCallbacks[n]):this._tiles[i]&&(r=this._tiles[i].el,o=0===l?r.firstChild:r.firstChild.nextSibling,a=this._clone(t),r.replaceChild(a,o))):t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,i){var e=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.dataset.pending=this._imagesPerTile,i=i.bind(this,null,n);for(var r=0;r<this._imagesPerTile;++r){var o,a=e+"/"+r;a in this._freshTiles?(o=this._freshTiles[a],n.appendChild(this._clone(o)),--n.dataset.pending):(this._tileCallbacks[a]=this._tileCallbacks[a]||[],this._tileCallbacks[a].push(function(e){return function(t){e.appendChild(this._clone(t)),--e.dataset.pending,parseInt(e.dataset.pending)||i()}.bind(this)}.bind(this)(n)))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(i),n},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(){var t,e,i,n,r;this._mutant&&(t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng),this._mutant.setCenter(e),n=(i=this._map.getZoom())!==Math.round(i),r=this._mutant.getZoom(),n||i===r||(this._mutant.setZoom(i),this._mutantIsReady&&this._checkZoomLevels())),L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()));var i=this._mutant.getZoom();for(var n in Object.keys(this._freshTiles))i!==n.split(":")[2]&&delete this._freshTiles[n]}},_removeTile:function(t){if(this._mutant)return setTimeout(this._pruneTile.bind(this,t),1e3),L.GridLayer.prototype._removeTile.call(this,t)},_getLargeGMapBound:function(t){var e=t.getSouthWest(),i=t.getNorthEast(),n=e.lat(),r=e.lng(),o=i.lat(),a=i.lng(),s=Math.abs(o-n),l=Math.abs(a-r);return L.latLngBounds([[n-s,r-l],[o+s,a+l]])},_pruneTile:function(t){var e=this._mutant.getZoom(),i=t.split(":")[2],n=this._mutant.getBounds(),r=this._getLargeGMapBound(n);if(n)for(var o=0;o<this._imagesPerTile;++o){var a,s=t+"/"+o;s in this._freshTiles&&(a=this._map&&this._keyToBounds(t),this._map&&a.overlaps(r)&&i===e||delete this._freshTiles[s])}}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},function(t,e,i){var n=i(0),r=i(16),o=i(17);var a=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],s=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if("string"==typeof t&&(t={bingMapsKey:t}),t&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&s.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+s.join(", "));var e=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=r(e,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){console.error(t),e(t)}),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",r=i;0<r;r--){var o=0,a=1<<r-1;0!=(t&a)&&o++,0!=(e&a)&&(o+=2),n+=o.toString()}return n}(t.x,t.y,t.z),i=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture});return"string"==typeof this.options.style&&(i+="&st="+this.options.style),i},onAdd:function(e){e.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,e),this._attributions.forEach(function(t){e.attributionControl.addAttribution(t)})},onRemove:function(e){e.off("moveend",this._updateAttribution,this),this._attributions.forEach(function(t){e.attributionControl.removeAttribution(t)}),n.TileLayer.prototype.onRemove.call(this,e)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();var i=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return r(i,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));var e=t.resourceSets[0].resources[0];return this._url=e.imageUrl,this._imageryProviders=e.imageryProviders||[],this.options.subdomains=e.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t,n,e,i,r=this._map;r&&r.attributionControl&&(t=r.getZoom(),e=r.getBounds().toBBoxString(),n=[(i=e.split(","))[1],i[0],i[3],i[2]],this._fetch.then(function(){var e=this._getAttributions(n,t),i=this._attributions;e.forEach(function(t){-1<i.indexOf(t)||r.attributionControl.addAttribution(t)}),i.filter(function(t){-1<e.indexOf(t)||r.attributionControl.removeAttribution(t)}),this._attributions=e}.bind(this)))},_getAttributions:function(n,r){return this._imageryProviders.reduce(function(t,e){for(var i=0;i<e.coverageAreas.length;i++)if(o(n,e.coverageAreas[i].bbox)&&r>=e.coverageAreas[i].zoomMin&&r<=e.coverageAreas[i].zoomMax)return t.push(e.attribution),t;return t},[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},t.exports=n.TileLayer.Bing},function(t,e,i){"use strict";var n=i(0),s=i.n(n);s.a.TileLayer.HERE=s.a.TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",apiKey:"",appId:"",appCode:""},initialize:function(t){var e,i,n,r=(t=s.a.setOptions(this,t)).scheme.split(".")[0];t.tileResolution=256,s.a.Browser.retina&&(t.tileResolution=512),n=t.apiKey?(e=".maps.ls.hereapi.com",i="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?apiKey={apiKey}","/maptile/2.1/copyright/{mapId}?apiKey={apiKey}"):(e=".maps.api.here.com",i="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}","/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}");var o="satellite"!=r&&"terrain"!=r&&"hybrid"!=r?"base":"aerial";-1!==t.scheme.indexOf(".traffic.")&&(o="traffic");var a="https://{s}."+o+e+i;this._attributionUrl=s.a.Util.template("https://1."+o+e+n,this.options),s.a.TileLayer.prototype.initialize.call(this,a,t),this._attributionText=""},onAdd:function(t){s.a.TileLayer.prototype.onAdd.call(this,t),this._attributionText="",this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){s.a.TileLayer.prototype.onRemove.call(this,t),void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText),this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=s.a.bind(function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))},this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,i=0;i<e.length;i++)if(e[i].boxes)for(var n=0;n<e[i].boxes.length;n++){var r=e[i].boxes[n];e[i].boxes[n]=s.a.latLngBounds([[r[0],r[1]],[r[2],r[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],i=this._map.getZoom(),n=this._map.getBounds(),r=0;r<t.length;r++){if(t[r].minLevel<i&&t[r].maxLevel>i&&!t[r].boxes){e.push(t[r]);break}for(var o=0;o<t[r].boxes.length;o++){var a=t[r].boxes[o];if(n.overlaps(a)){e.push(t[r]);break}}}for(var s=['<a href="https://legal.here.com/terms/serviceterms/gb/">HERE maps</a>'],r=0;r<e.length;r++){var l=e[r];s.push('<abbr title="'+l.alt+'">'+l.label+"</abbr>")}var c=" "+s.join(", ")+". ";c!==this._attributionText&&void 0!==this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=c))}}}),s.a.tileLayer.here=function(t){return new s.a.TileLayer.HERE(t)}},function(t,e,i){"use strict";var n=i(0),u=i.n(n);u.a.TileLayer.TomTom=u.a.TileLayer.extend({options:{apiKey:"",style:"main",subdomains:"abcd",minNativeZoom:0,maxNativeZoom:22},initialize:function(t){var e="https://{s}.api.tomtom.com/map/1/tile/basic/"+(t=u.a.setOptions(this,t)).style+"/{z}/{x}/{y}.png?key="+t.apiKey;u.a.TileLayer.prototype.initialize.call(this,e,t),this._copyright=u.a.DomUtil.create("div","tomtom-copyright"),this._copyrightClose=u.a.DomUtil.create("button","tomtom-copyright-close",this._copyright),this._copyrightContent=u.a.DomUtil.create("div","tomtom-copyright-content",this._copyright),u.a.DomEvent.on(this._copyrightClose,"click",function(t){t.preventDefault(),t.stopPropagation(),this._hideCopyright()},this),this._attributionText='<a class="tomtom-attribution" href="#">&copy; 1992 - '+(new Date).getFullYear()+" TomTom.</a>"},onAdd:function(t){u.a.TileLayer.prototype.onAdd.call(this,t),this._addAttribution(),this._map.on("click",this._hideCopyright,this)},onRemove:function(t){u.a.TileLayer.prototype.onRemove.call(this,t),this._hideCopyright(),this._removeAttribution(),this._map.off("click",this._hideCopyright,this)},_addAttribution:function(){var t;void 0!==this._map.attributionControl&&(this._map.attributionControl.addAttribution(this._attributionText),null!==(t=this._map.attributionControl.getContainer().querySelector(".tomtom-attribution"))&&u.a.DomEvent.on(t,"click",function(t){t.preventDefault(),t.stopPropagation(),this._showCopyright()},this))},_removeAttribution:function(){void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText)},_showCopyright:function(){var t=this._map.getContainer();null===t.querySelector(".tomtom-copyright")&&t.appendChild(this._copyright);var e,i,n=this._map.getBounds(),r=n.getNorthEast().wrap(),o=n.getSouthWest().wrap(),a=o.lng<r.lng?(e=o.lng,r.lng):(e=r.lng,o.lng),s=o.lat<r.lat?(i=o.lat,r.lat):(i=r.lat,o.lat),l="https://api.tomtom.com/map/1/copyrights/"+e+"/"+i+"/"+a+"/"+s+".json?key="+this.options.apiKey,c=new XMLHttpRequest;c.onreadystatechange=u.a.bind(function(){if(c.readyState===XMLHttpRequest.DONE&&200===c.status){for(var t=JSON.parse(c.responseText),e="<h4>General Copyrights:</h4>",i=0;i<t.generalCopyrights.length;i++)e+="<p>"+t.generalCopyrights[i]+"</p>";for(i=0;i<t.regions.length;i++){var n=t.regions[i];e+="<h4>"+n.country.label+":</h4>";for(var r=0;r<n.copyrights.length;r++)e+="<p>"+n.copyrights[r]+"</p>"}this._copyrightContent.innerHTML=e}},this),c.open("GET",l,!0),c.send()},_hideCopyright:function(){this._copyright.remove()}}),u.a.tileLayer.tomTom=function(t,e){return new u.a.TileLayer.TomTom(t,e)}},function(t,e,i){"use strict";t.exports=i(11).polyfill()},function(t,e,i){(function(nt,rt){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
t.exports=function(){"use strict";function n(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function l(t){return typeof t==="function"}var t=void 0;if(Array.isArray){t=Array.isArray}else{t=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}var i=t,r=0,e=void 0,o=void 0,a=function t(e,i){b[r]=e;b[r+1]=i;r+=2;if(r===2){if(o){o(x)}else{k()}}};function s(t){o=t}function c(t){a=t}var u=typeof window!=="undefined"?window:undefined,h=u||{},p=h.MutationObserver||h.WebKitMutationObserver,d=typeof self==="undefined"&&typeof nt!=="undefined"&&{}.toString.call(nt)==="[object process]",f=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return nt.nextTick(x)}}function g(){if(typeof e!=="undefined"){return function(){e(x)}}return y()}function v(){var t=0;var e=new p(x);var i=document.createTextNode("");e.observe(i,{characterData:true});return function(){i.data=t=++t%2}}function _(){var t=new MessageChannel;t.port1.onmessage=x;return function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(x,1)}}var b=new Array(1e3);function x(){for(var t=0;t<r;t+=2){var e=b[t];var i=b[t+1];e(i);b[t]=undefined;b[t+1]=undefined}r=0}function w(){try{var t=Function("return this")().require("vertx");e=t.runOnLoop||t.runOnContext;return g()}catch(t){return y()}}var k=void 0;if(d){k=m()}else if(p){k=v()}else if(f){k=_()}else if(u===undefined&&"function"==="function"){k=w()}else{k=y()}function L(t,e){var i=this;var n=new this.constructor(S);if(n[M]===undefined){q(n)}var r=i._state;if(r){var o=arguments[r-1];a(function(){return G(r,n,o,i._result)})}else{U(i,n,t,e)}return n}function C(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e){return t}var i=new e(S);R(i,t);return i}var M=Math.random().toString(36).substring(2);function S(){}var T=void 0,P=1,D=2;function A(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function O(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function I(t,n,r){a(function(e){var i=false;var t=O(r,n,function(t){if(i){return}i=true;if(n!==t){R(e,t)}else{j(e,t)}},function(t){if(i){return}i=true;N(e,t)},"Settle: "+(e._label||" unknown promise"));if(!i&&t){i=true;N(e,t)}},t)}function B(e,t){if(t._state===P){j(e,t._result)}else if(t._state===D){N(e,t._result)}else{U(t,undefined,function(t){return R(e,t)},function(t){return N(e,t)})}}function z(t,e,i){if(e.constructor===t.constructor&&i===L&&e.constructor.resolve===C){B(t,e)}else{if(i===undefined){j(t,e)}else if(l(i)){I(t,e,i)}else{j(t,e)}}}function R(e,t){if(e===t){N(e,A())}else if(n(t)){var i=void 0;try{i=t.then}catch(t){N(e,t);return}z(e,t,i)}else{j(e,t)}}function F(t){if(t._onerror){t._onerror(t._result)}H(t)}function j(t,e){if(t._state!==T){return}t._result=e;t._state=P;if(t._subscribers.length!==0){a(H,t)}}function N(t,e){if(t._state!==T){return}t._state=D;t._result=e;a(F,t)}function U(t,e,i,n){var r=t._subscribers;var o=r.length;t._onerror=null;r[o]=e;r[o+P]=i;r[o+D]=n;if(o===0&&t._state){a(H,t)}}function H(t){var e=t._subscribers;var i=t._state;if(e.length===0){return}var n=void 0,r=void 0,o=t._result;for(var a=0;a<e.length;a+=3){n=e[a];r=e[a+i];if(n){G(i,n,r,o)}else{r(o)}}t._subscribers.length=0}function G(t,e,i,n){var r=l(i),o=void 0,a=void 0,s=true;if(r){try{o=i(n)}catch(t){s=false;a=t}if(e===o){N(e,E());return}}else{o=n}if(e._state!==T){}else if(r&&s){R(e,o)}else if(s===false){N(e,a)}else if(t===P){j(e,o)}else if(t===D){N(e,o)}}function Z(i,t){try{t(function t(e){R(i,e)},function t(e){N(i,e)})}catch(t){N(i,t)}}var W=0;function V(){return W++}function q(t){t[M]=W++;t._state=undefined;t._result=undefined;t._subscribers=[]}function $(){return new Error("Array Methods must be provided an Array")}var K=function(){function t(t,e){this._instanceConstructor=t;this.promise=new t(S);if(!this.promise[M]){q(this.promise)}if(i(e)){this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0){j(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(e);if(this._remaining===0){j(this.promise,this._result)}}}else{N(this.promise,$())}}t.prototype._enumerate=function t(e){for(var i=0;this._state===T&&i<e.length;i++){this._eachEntry(e[i],i)}};t.prototype._eachEntry=function t(e,i){var n=this._instanceConstructor;var r=n.resolve;if(r===C){var o=void 0;var a=void 0;var s=false;try{o=e.then}catch(t){s=true;a=t}if(o===L&&e._state!==T){this._settledAt(e._state,i,e._result)}else if(typeof o!=="function"){this._remaining--;this._result[i]=e}else if(n===et){var l=new n(S);if(s){N(l,a)}else{z(l,e,o)}this._willSettleAt(l,i)}else{this._willSettleAt(new n(function(t){return t(e)}),i)}}else{this._willSettleAt(r(e),i)}};t.prototype._settledAt=function t(e,i,n){var r=this.promise;if(r._state===T){this._remaining--;if(e===D){N(r,n)}else{this._result[i]=n}}if(this._remaining===0){j(r,this._result)}};t.prototype._willSettleAt=function t(e,i){var n=this;U(e,undefined,function(t){return n._settledAt(P,i,t)},function(t){return n._settledAt(D,i,t)})};return t}();function Y(t){return new K(this,t).promise}function J(r){var o=this;if(i(r))return new o(function(t,e){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(t,e)});else return new o(function(t,e){return e(new TypeError("You must pass an array to race."))})}function X(t){var e=new this(S);return N(e,t),e}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function e(t){this[M]=V();this._result=this._state=undefined;this._subscribers=[];if(S!==t){typeof t!=="function"&&Q();this instanceof e?Z(this,t):tt()}}e.prototype.catch=function t(e){return this.then(null,e)};e.prototype.finally=function t(e){var i=this;var n=i.constructor;if(l(e)){return i.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}return i.then(e,e)};return e}();function it(){var t=void 0;if(void 0!==rt)t=rt;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et}return et.prototype.then=L,et.all=function(t){return new K(this,t).promise},et.race=function(r){var o=this;return i(r)?new o(function(t,e){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},et.resolve=C,et.reject=function(t){var e=new this(S);return N(e,t),e},et._setScheduler=function(t){o=t},et._setAsap=function(t){a=t},et._asap=a,et.polyfill=function(){var t=void 0;if(void 0!==rt)t=rt;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et},et.Promise=et}()}).call(this,i(12),i(13))},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var t=s(p);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){if("undefined"==typeof moment){var i=new Error("Cannot find module 'moment'");throw i.code="MODULE_NOT_FOUND",i}t.exports=moment},function(t,e,i){!function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:true,showCoverageOnHover:true,zoomToBoundsOnClick:true,singleMarkerMode:false,disableClusteringAtZoom:null,removeOutsideVisibleBounds:true,animate:true,animateAddingMarkers:false,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:false,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t);if(!this.options.iconCreateFunction){this.options.iconCreateFunction=this._defaultIconCreateFunction}this._featureGroup=L.featureGroup();this._featureGroup.addEventParent(this);this._nonPointGroup=L.featureGroup();this._nonPointGroup.addEventParent(this);this._inZoomAnimation=0;this._needsClustering=[];this._needsRemoving=[];this._currentShownBounds=null;this._queue=[];this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation);this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup){return this.addLayers([t])}if(!t.getLatLng){this._nonPointGroup.addLayer(t);this.fire("layeradd",{layer:t});return this}if(!this._map){this._needsClustering.push(t);this.fire("layeradd",{layer:t});return this}if(this.hasLayer(t)){return this}if(this._unspiderfy){this._unspiderfy()}this._addLayer(t,this._maxZoom);this.fire("layeradd",{layer:t});this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent){while(e.__parent._zoom>=i){e=e.__parent}}if(this._currentShownBounds.contains(e.getLatLng())){if(this.options.animateAddingMarkers){this._animationAddLayer(t,e)}else{this._animationAddLayerNonAnimated(t,e)}}return this},removeLayer:function(t){if(t instanceof L.LayerGroup){return this.removeLayers([t])}if(!t.getLatLng){this._nonPointGroup.removeLayer(t);this.fire("layerremove",{layer:t});return this}if(!this._map){if(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)){this._needsRemoving.push({layer:t,latlng:t._latlng})}this.fire("layerremove",{layer:t});return this}if(!t.__parent){return this}if(this._unspiderfy){this._unspiderfy();this._unspiderfyLayer(t)}this._removeLayer(t,true);this.fire("layerremove",{layer:t});this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();t.off(this._childMarkerEventHandlers,this);if(this._featureGroup.hasLayer(t)){this._featureGroup.removeLayer(t);if(t.clusterShow){t.clusterShow()}}return this},addLayers:function(r,o){if(!L.Util.isArray(r)){return this.addLayer(r)}var a=this._featureGroup,s=this._nonPointGroup,l=this.options.chunkedLoading,c=this.options.chunkInterval,u=this.options.chunkProgress,h=r.length,p=0,d=true,f;if(this._map){var m=(new Date).getTime();var g=L.bind(function(){var t=(new Date).getTime();for(;p<h;p++){if(l&&p%200===0){var e=(new Date).getTime()-t;if(e>c){break}}f=r[p];if(f instanceof L.LayerGroup){if(d){r=r.slice();d=false}this._extractNonGroupLayers(f,r);h=r.length;continue}if(!f.getLatLng){s.addLayer(f);if(!o){this.fire("layeradd",{layer:f})}continue}if(this.hasLayer(f)){continue}this._addLayer(f,this._maxZoom);if(!o){this.fire("layeradd",{layer:f})}if(f.__parent){if(f.__parent.getChildCount()===2){var i=f.__parent.getAllChildMarkers(),n=i[0]===f?i[1]:i[0];a.removeLayer(n)}}}if(u){u(p,h,(new Date).getTime()-m)}if(p===h){this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)}else{setTimeout(g,this.options.chunkDelay)}},this);g()}else{var t=this._needsClustering;for(;p<h;p++){f=r[p];if(f instanceof L.LayerGroup){if(d){r=r.slice();d=false}this._extractNonGroupLayers(f,r);h=r.length;continue}if(!f.getLatLng){s.addLayer(f);continue}if(this.hasLayer(f)){continue}t.push(f)}}return this},removeLayers:function(t){var e,i,n=t.length,r=this._featureGroup,o=this._nonPointGroup,a=true;if(!this._map){for(e=0;e<n;e++){i=t[e];if(i instanceof L.LayerGroup){if(a){t=t.slice();a=false}this._extractNonGroupLayers(i,t);n=t.length;continue}this._arraySplice(this._needsClustering,i);o.removeLayer(i);if(this.hasLayer(i)){this._needsRemoving.push({layer:i,latlng:i._latlng})}this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=n;for(e=0;e<l;e++){i=s[e];if(i instanceof L.LayerGroup){this._extractNonGroupLayers(i,s);l=s.length;continue}this._unspiderfyLayer(i)}}for(e=0;e<n;e++){i=t[e];if(i instanceof L.LayerGroup){if(a){t=t.slice();a=false}this._extractNonGroupLayers(i,t);n=t.length;continue}if(!i.__parent){o.removeLayer(i);this.fire("layerremove",{layer:i});continue}this._removeLayer(i,true,true);this.fire("layerremove",{layer:i});if(r.hasLayer(i)){r.removeLayer(i);if(i.clusterShow){i.clusterShow()}}}this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds);return this},clearLayers:function(){if(!this._map){this._needsClustering=[];this._needsRemoving=[];delete this._gridClusters;delete this._gridUnclustered}if(this._noanimationUnspiderfy){this._noanimationUnspiderfy()}this._featureGroup.clearLayers();this._nonPointGroup.clearLayers();this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this);delete t.__parent},this);if(this._map){this._generateInitialClusters()}return this},getBounds:function(){var t=new L.LatLngBounds;if(this._topClusterLevel){t.extend(this._topClusterLevel._bounds)}for(var e=this._needsClustering.length-1;e>=0;e--){t.extend(this._needsClustering[e].getLatLng())}t.extend(this._nonPointGroup.getBounds());return t},eachLayer:function(t,e){var i=this._needsClustering.slice(),n=this._needsRemoving,r,o,a;if(this._topClusterLevel){this._topClusterLevel.getAllChildMarkers(i)}for(o=i.length-1;o>=0;o--){r=true;for(a=n.length-1;a>=0;a--){if(n[a].layer===i[o]){r=false;break}}if(r){t.call(e,i[o])}}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var e=[];this.eachLayer(function(t){e.push(t)});return e},getLayer:function(e){var i=null;e=parseInt(e,10);this.eachLayer(function(t){if(L.stamp(t)===e){i=t}});return i},hasLayer:function(t){if(!t){return false}var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--){if(i[e]===t){return true}}i=this._needsRemoving;for(e=i.length-1;e>=0;e--){if(i[e].layer===t){return false}}return!!(t.__parent&&t.__parent._group===this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){if(typeof e!=="function"){e=function(){}}var i=function(){if((t._icon||t.__parent._icon)&&!this._inZoomAnimation){this._map.off("moveend",i,this);this.off("animationend",i,this);if(t._icon){e()}else if(t.__parent._icon){this.once("spiderfied",e,this);t.__parent.spiderfy()}}};if(t._icon&&this._map.getBounds().contains(t.getLatLng())){e()}else if(t.__parent._zoom<Math.round(this._map._zoom)){this._map.on("moveend",i,this);this._map.panTo(t.getLatLng())}else{this._map.on("moveend",i,this);this.on("animationend",i,this);t.__parent.zoomToBounds()}},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom())){throw"Map has no maxZoom specified"}this._featureGroup.addTo(t);this._nonPointGroup.addTo(t);if(!this._gridClusters){this._generateInitialClusters()}this._maxLat=t.options.crs.projection.MAX_LATITUDE;for(e=0,i=this._needsRemoving.length;e<i;e++){n=this._needsRemoving[e];n.newlatlng=n.layer._latlng;n.layer._latlng=n.latlng}for(e=0,i=this._needsRemoving.length;e<i;e++){n=this._needsRemoving[e];this._removeLayer(n.layer,true);n.layer._latlng=n.newlatlng}this._needsRemoving=[];this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds();this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);if(this._spiderfierOnAdd){this._spiderfierOnAdd()}this._bindEvents();i=this._needsClustering;this._needsClustering=[];this.addLayers(i,true)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this);t.off("moveend",this._moveEnd,this);this._unbindEvents();this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","");if(this._spiderfierOnRemove){this._spiderfierOnRemove()}delete this._maxLat;this._hideCoverage();this._featureGroup.remove();this._nonPointGroup.remove();this._featureGroup.clearLayers();this._map=null},getVisibleParent:function(t){var e=t;while(e&&!e._icon){e=e.__parent}return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--){if(t[i]===e){t.splice(i,1);return true}}},_removeFromGridUnclustered:function(t,e){var i=this._map,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());for(;e>=r;e--){if(!n[e].removeObject(t,i.project(t.getLatLng(),e))){break}}},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng);if(e){t.target.openPopup()}}},_moveChild:function(t,e,i){t._latlng=e;this.removeLayer(t);t._latlng=i;this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart;if(e){this._moveChild(t.target,e,t.target._latlng)}},_removeLayer:function(t,e,i){var n=this._gridClusters,r=this._gridUnclustered,o=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());if(e){this._removeFromGridUnclustered(t,this._maxZoom)}var l=t.__parent,c=l._markers,u;this._arraySplice(c,t);while(l){l._childCount--;l._boundsNeedUpdate=true;if(l._zoom<s){break}else if(e&&l._childCount<=1){u=l._markers[0]===t?l._markers[1]:l._markers[0];n[l._zoom].removeObject(l,a.project(l._cLatLng,l._zoom));r[l._zoom].addObject(u,a.project(u.getLatLng(),l._zoom));this._arraySplice(l.__parent._childClusters,l);l.__parent._markers.push(u);u.__parent=l.__parent;if(l._icon){o.removeLayer(l);if(!i){o.addLayer(u)}}}else{l._iconNeedsUpdate=true}l=l.__parent}delete t.__parent},_isOrIsParent:function(t,e){while(e){if(t===e){return true}e=e.parentNode}return false},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget)){return}t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount();var i=" marker-cluster-";if(e<10){i+="small"}else if(e<100){i+="medium"}else{i+="large"}return new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;if(e||n){this.on("clusterclick",this._zoomOrSpiderfy,this)}if(i){this.on("clustermouseover",this._showCoverage,this);this.on("clustermouseout",this._hideCoverage,this);t.on("zoomend",this._hideCoverage,this)}},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;while(i._childClusters.length===1){i=i._childClusters[0]}if(i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom){e.spiderfy()}else if(this.options.zoomToBoundsOnClick){e.zoomToBounds()}if(t.originalEvent&&t.originalEvent.keyCode===13){this._map._container.focus()}},_showCoverage:function(t){var e=this._map;if(this._inZoomAnimation){return}if(this._shownPolygon){e.removeLayer(this._shownPolygon)}if(t.layer.getChildCount()>2&&t.layer!==this._spiderfied){this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions);e.addLayer(this._shownPolygon)}},_hideCoverage:function(){if(this._shownPolygon){this._map.removeLayer(this._shownPolygon);this._shownPolygon=null}},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;if(t||i){this.off("clusterclick",this._zoomOrSpiderfy,this)}if(e){this.off("clustermouseover",this._showCoverage,this);this.off("clustermouseout",this._hideCoverage,this);n.off("zoomend",this._hideCoverage,this)}},_zoomEnd:function(){if(!this._map){return}this._mergeSplitClusters();this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds()},_moveEnd:function(){if(this._inZoomAnimation){return}var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t);this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t);this._currentShownBounds=t;return},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;if(typeof i!=="function"){n=function(){return i}}if(this.options.disableClusteringAtZoom!==null){t=this.options.disableClusteringAtZoom-1}this._maxZoom=t;this._gridClusters={};this._gridUnclustered={};for(var r=t;r>=e;r--){this._gridClusters[r]=new L.DistanceGrid(n(r));this._gridUnclustered[r]=new L.DistanceGrid(n(r))}this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i=this._gridClusters,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom()),o,a;if(this.options.singleMarkerMode){this._overrideMarkerIcon(t)}t.on(this._childMarkerEventHandlers,this);for(;e>=r;e--){o=this._map.project(t.getLatLng(),e);var s=i[e].getNearObject(o);if(s){s._addChild(t);t.__parent=s;return}s=n[e].getNearObject(o);if(s){var l=s.__parent;if(l){this._removeLayer(s,false)}var c=new this._markerCluster(this,e,s,t);i[e].addObject(c,this._map.project(c._cLatLng,e));s.__parent=c;t.__parent=c;var u=c;for(a=e-1;a>l._zoom;a--){u=new this._markerCluster(this,a,u);i[a].addObject(u,this._map.project(s.getLatLng(),a))}l._addChild(u);this._removeFromGridUnclustered(s,e);return}n[e].addObject(t,o)}this._topClusterLevel._addChild(t);t.__parent=this._topClusterLevel;return},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){if(t instanceof L.MarkerCluster&&t._iconNeedsUpdate){t._updateIcon()}})},_enqueue:function(t){this._queue.push(t);if(!this._queueTimeout){this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300)}},_processQueue:function(){for(var t=0;t<this._queue.length;t++){this._queue[t].call(this)}this._queue.length=0;clearTimeout(this._queueTimeout);this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue();if(this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())){this._animationStart();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds());this._animationZoomIn(this._zoom,t)}else if(this._zoom>t){this._animationStart();this._animationZoomOut(this._zoom,t)}else{this._moveEnd()}},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds){return this._mapBoundsInfinite}else if(L.Browser.mobile){return this._checkBoundsMaxLat(this._map.getBounds())}return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(t){var e=this._maxLat;if(e!==undefined){if(t.getNorth()>=e){t._northEast.lat=Infinity}if(t.getSouth()<=-e){t._southWest.lat=-Infinity}}return t},_animationAddLayerNonAnimated:function(t,e){if(e===t){this._featureGroup.addLayer(t)}else if(e._childCount===2){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]);this._featureGroup.removeLayer(i[1])}else{e._updateIcon()}},_extractNonGroupLayers:function(t,e){var i=t.getLayers(),n=0,r;e=e||[];for(;n<i.length;n++){r=i[n];if(r instanceof L.LayerGroup){this._extractNonGroupLayers(r,e);continue}e.push(r)}return e},_overrideMarkerIcon:function(t){var e=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-Infinity,-Infinity),new L.LatLng(Infinity,Infinity))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t);this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds());this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t);this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds());this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationZoomIn:function(r,o){var a=this._getExpandedVisibleBounds(),s=this._featureGroup,t=Math.floor(this._map.getMinZoom()),l;this._ignoreMove=true;this._topClusterLevel._recursively(a,r,t,function(t){var e=t._latlng,i=t._markers,n;if(!a.contains(e)){e=null}if(t._isSingleParent()&&r+1===o){s.removeLayer(t);t._recursivelyAddChildrenToMap(null,o,a)}else{t.clusterHide();t._recursivelyAddChildrenToMap(e,o,a)}for(l=i.length-1;l>=0;l--){n=i[l];if(!a.contains(n._latlng)){s.removeLayer(n)}}});this._forceLayout();this._topClusterLevel._recursivelyBecomeVisible(a,o);s.eachLayer(function(t){if(!(t instanceof L.MarkerCluster)&&t._icon){t.clusterShow()}});this._topClusterLevel._recursively(a,r,o,function(t){t._recursivelyRestoreChildPositions(o)});this._ignoreMove=false;this._enqueue(function(){this._topClusterLevel._recursively(a,r,t,function(t){s.removeLayer(t);t.clusterShow()});this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e);this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds());this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t);if(e!==t){if(e._childCount>2){e._updateIcon();this._forceLayout();this._animationStart();t._setPos(this._map.latLngToLayerPoint(e.getLatLng()));t.clusterHide();this._enqueue(function(){n.removeLayer(t);t.clusterShow();i._animationEnd()})}else{this._forceLayout();i._animationStart();i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)}}}},_animationZoomOutSingle:function(e,i,n){var r=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(r,o,i+1,n);var a=this;this._forceLayout();e._recursivelyBecomeVisible(r,n);this._enqueue(function(){if(e._childCount===1){var t=e._markers[0];this._ignoreMove=true;t.setLatLng(t.getLatLng());this._ignoreMove=false;if(t.clusterShow){t.clusterShow()}}else{e._recursively(r,n,o,function(t){t._recursivelyRemoveChildrenFromMap(r,o,i+1)})}a._animationEnd()})},_animationEnd:function(){if(this._map){this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")}this._inZoomAnimation--;this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane});this._group=t;this._zoom=e;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._bounds=new L.LatLngBounds;if(i){this._addChild(i)}if(n){this._addChild(n)}},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--){this._childClusters[i].getAllChildMarkers(t)}for(var n=this._markers.length-1;n>=0;n--){if(e&&this._markers[n].__dragStart){continue}t.push(this._markers[n])}return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){var e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),r=this._zoom+1,o=i.getZoom(),a;while(e.length>0&&n>r){r++;var s=[];for(a=0;a<e.length;a++){s=s.concat(e[a]._childClusters)}e=s}if(n>r){this._group._map.setView(this._latlng,r)}else if(n<=o){this._group._map.setView(this._latlng,o+1)}else{this._group._map.fitBounds(this._bounds,t)}},getBounds:function(){var t=new L.LatLngBounds;t.extend(this._bounds);return t},_updateIcon:function(){this._iconNeedsUpdate=true;if(this._icon){this.setIcon(this)}},createIcon:function(){if(this._iconNeedsUpdate){this._iconObj=this._group.options.iconCreateFunction(this);this._iconNeedsUpdate=false}return this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._setClusterCenter(t);if(t instanceof L.MarkerCluster){if(!e){this._childClusters.push(t);t.__parent=this}this._childCount+=t._childCount}else{if(!e){this._markers.push(t)}this._childCount++}if(this.__parent){this.__parent._addChild(t,true)}},_setClusterCenter:function(t){if(!this._cLatLng){this._cLatLng=t._cLatLng||t._latlng}},_resetBounds:function(){var t=this._bounds;if(t._southWest){t._southWest.lat=Infinity;t._southWest.lng=Infinity}if(t._northEast){t._northEast.lat=-Infinity;t._northEast.lng=-Infinity}},_recalculateBounds:function(){var t=this._markers,e=this._childClusters,i=0,n=0,r=this._childCount,o,a,s,l;if(r===0){return}this._resetBounds();for(o=0;o<t.length;o++){s=t[o]._latlng;this._bounds.extend(s);i+=s.lat;n+=s.lng}for(o=0;o<e.length;o++){a=e[o];if(a._boundsNeedUpdate){a._recalculateBounds()}this._bounds.extend(a._bounds);s=a._wLatLng;l=a._childCount;i+=s.lat*l;n+=s.lng*l}this._latlng=this._wLatLng=new L.LatLng(i/r,n/r);this._boundsNeedUpdate=false},_addToMap:function(t){if(t){this._backupLatlng=this._latlng;this.setLatLng(t)}this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,r,e){this._recursively(t,this._group._map.getMinZoom(),e-1,function(t){var e=t._markers,i,n;for(i=e.length-1;i>=0;i--){n=e[i];if(n._icon){n._setPos(r);n.clusterHide()}}},function(t){var e=t._childClusters,i,n;for(i=e.length-1;i>=0;i--){n=e[i];if(n._icon){n._setPos(r);n.clusterHide()}}})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,i,n,r){this._recursively(e,r,i,function(t){t._recursivelyAnimateChildrenIn(e,t._group._map.latLngToLayerPoint(t.getLatLng()).round(),n);if(t._isSingleParent()&&n-1===r){t.clusterShow();t._recursivelyRemoveChildrenFromMap(e,i,n)}else{t.clusterHide()}t._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(n,r,o){this._recursively(o,this._group._map.getMinZoom()-1,r,function(t){if(r===t._zoom){return}for(var e=t._markers.length-1;e>=0;e--){var i=t._markers[e];if(!o.contains(i._latlng)){continue}if(n){i._backupLatlng=i.getLatLng();i.setLatLng(n);if(i.clusterHide){i.clusterHide()}}t._group._featureGroup.addLayer(i)}},function(t){t._addToMap(n)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];if(i._backupLatlng){i.setLatLng(i._backupLatlng);delete i._backupLatlng}}if(t-1===this._zoom){for(var n=this._childClusters.length-1;n>=0;n--){this._childClusters[n]._restorePosition()}}else{for(var r=this._childClusters.length-1;r>=0;r--){this._childClusters[r]._recursivelyRestoreChildPositions(t)}}},_restorePosition:function(){if(this._backupLatlng){this.setLatLng(this._backupLatlng);delete this._backupLatlng}},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var r,o;this._recursively(t,e-1,i-1,function(t){for(o=t._markers.length-1;o>=0;o--){r=t._markers[o];if(!n||!n.contains(r._latlng)){t._group._featureGroup.removeLayer(r);if(r.clusterShow){r.clusterShow()}}}},function(t){for(o=t._childClusters.length-1;o>=0;o--){r=t._childClusters[o];if(!n||!n.contains(r._latlng)){t._group._featureGroup.removeLayer(r);if(r.clusterShow){r.clusterShow()}}}})},_recursively:function(t,e,i,n,r){var o=this._childClusters,a=this._zoom,s,l;if(e<=a){if(n){n(this)}if(r&&a===i){r(this)}}if(a<e||a<i){for(s=o.length-1;s>=0;s--){l=o[s];if(l._boundsNeedUpdate){l._recalculateBounds()}if(t.intersects(l._bounds)){l._recursively(t,e,i,n,r)}}}},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;this.setOpacity(0);this.options.opacity=t;return this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t;this._sqCellSize=t*t;this._grid={};this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,o=r[n]=r[n]||{},a=o[i]=o[i]||[],s=L.Util.stamp(t);this._objectPoint[s]=e;a.push(t)},updateObject:function(t,e){this.removeObject(t);this.addObject(t,e)},removeObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,o=r[n]=r[n]||{},a=o[i]=o[i]||[],s,l;delete this._objectPoint[L.Util.stamp(t)];for(s=0,l=a.length;s<l;s++){if(a[s]===t){a.splice(s,1);if(l===1){delete o[i]}return true}}},eachObject:function(t,e){var i,n,r,o,a,s,l,c=this._grid;for(i in c){a=c[i];for(n in a){s=a[n];for(r=0,o=s.length;r<o;r++){l=t.call(e,s[r]);if(l){r--;o--}}}}},getNearObject:function(t){var e=this._getCoord(t.x),i=this._getCoord(t.y),n,r,o,a,s,l,c,u,h=this._objectPoint,p=this._sqCellSize,d=null;for(n=i-1;n<=i+1;n++){a=this._grid[n];if(a){for(r=e-1;r<=e+1;r++){s=a[r];if(s){for(o=0,l=s.length;o<l;o++){c=s[o];u=this._sqDist(h[L.Util.stamp(c)],t);if(u<p||u<=p&&d===null){p=u;d=c}}}}}}return d},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i=0,n=null,r=[],o,a,s;for(o=e.length-1;o>=0;o--){a=e[o];s=this.getDistant(a,t);if(s>0){r.push(a)}else{continue}if(s>i){i=s;n=a}}return{maxPoint:n,newPoints:r}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);if(n.maxPoint){i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints));i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints));return i}else{return[t[0]]}},getConvexHull:function(t){var e=false,i=false,n=false,r=false,o=null,a=null,s=null,l=null,c=null,u=null,h;for(h=t.length-1;h>=0;h--){var p=t[h];if(e===false||p.lat>e){o=p;e=p.lat}if(i===false||p.lat<i){a=p;i=p.lat}if(n===false||p.lng>n){s=p;n=p.lng}if(r===false||p.lng<r){l=p;r=p.lng}}if(i!==e){u=a;c=o}else{u=l;c=s}var d=[].concat(this.buildConvexHull([u,c],t),this.buildConvexHull([c,u],t));return d}}}(),L.MarkerCluster.include({getConvexHull:function(){var t=this.getAllChildMarkers(),e=[],i,n;for(n=t.length-1;n>=0;n--){i=t[n].getLatLng();e.push(i)}return L.QuickHull.getConvexHull(e)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied===this||this._group._inZoomAnimation){return}var t=this.getAllChildMarkers(null,true),e=this._group,i=e._map,n=i.latLngToLayerPoint(this._latlng),r;this._group._unspiderfy();this._group._spiderfied=this;if(t.length>=this._circleSpiralSwitchover){r=this._generatePointsSpiral(t.length,n)}else{n.y+=10;r=this._generatePointsCircle(t.length,n)}this._animationSpiderfy(t,r)},unspiderfy:function(t){if(this._group._inZoomAnimation){return}this._animationUnspiderfy(t);this._group._spiderfied=null},_generatePointsCircle:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),n=i/this._2PI,r=this._2PI/t,o=[],a,s;n=Math.max(n,35);o.length=t;for(a=0;a<t;a++){s=this._circleStartAngle+a*r;o[a]=new L.Point(e.x+n*Math.cos(s),e.y+n*Math.sin(s))._round()}return o},_generatePointsSpiral:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier,n=i*this._spiralLengthStart,r=i*this._spiralFootSeparation,o=i*this._spiralLengthFactor*this._2PI,a=0,s=[],l;s.length=t;for(l=t;l>=0;l--){if(l<t){s[l]=new L.Point(e.x+n*Math.cos(a),e.y+n*Math.sin(a))._round()}a+=r/n+l*5e-4;n+=o/a}return s},_noanimationUnspiderfy:function(){var t=this._group,e=t._map,i=t._featureGroup,n=this.getAllChildMarkers(null,true),r,o;t._ignoreMove=true;this.setOpacity(1);for(o=n.length-1;o>=0;o--){r=n[o];i.removeLayer(r);if(r._preSpiderfyLatlng){r.setLatLng(r._preSpiderfyLatlng);delete r._preSpiderfyLatlng}if(r.setZIndexOffset){r.setZIndexOffset(0)}if(r._spiderLeg){e.removeLayer(r._spiderLeg);delete r._spiderLeg}}t.fire("unspiderfied",{cluster:this,markers:n});t._ignoreMove=false;t._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i=this._group,n=i._map,r=i._featureGroup,o=this._group.options.spiderLegPolylineOptions,a,s,l,c;i._ignoreMove=true;for(a=0;a<t.length;a++){c=n.layerPointToLatLng(e[a]);s=t[a];l=new L.Polyline([this._latlng,c],o);n.addLayer(l);s._spiderLeg=l;s._preSpiderfyLatlng=s._latlng;s.setLatLng(c);if(s.setZIndexOffset){s.setZIndexOffset(1e6)}r.addLayer(s)}this.setOpacity(.3);i._ignoreMove=false;i.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i=this,n=this._group,r=n._map,o=n._featureGroup,a=this._latlng,s=r.latLngToLayerPoint(a),l=L.Path.SVG,c=L.extend({},this._group.options.spiderLegPolylineOptions),u=c.opacity,h,p,d,f,m,g;if(u===undefined){u=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity}if(l){c.opacity=0;c.className=(c.className||"")+" leaflet-cluster-spider-leg"}else{c.opacity=u}n._ignoreMove=true;for(h=0;h<t.length;h++){p=t[h];g=r.layerPointToLatLng(e[h]);d=new L.Polyline([a,g],c);r.addLayer(d);p._spiderLeg=d;if(l){f=d._path;m=f.getTotalLength()+.1;f.style.strokeDasharray=m;f.style.strokeDashoffset=m}if(p.setZIndexOffset){p.setZIndexOffset(1e6)}if(p.clusterHide){p.clusterHide()}o.addLayer(p);if(p._setPos){p._setPos(s)}}n._forceLayout();n._animationStart();for(h=t.length-1;h>=0;h--){g=r.layerPointToLatLng(e[h]);p=t[h];p._preSpiderfyLatlng=p._latlng;p.setLatLng(g);if(p.clusterShow){p.clusterShow()}if(l){d=p._spiderLeg;f=d._path;f.style.strokeDashoffset=0;d.setStyle({opacity:u})}}this.setOpacity(.3);n._ignoreMove=false;setTimeout(function(){n._animationEnd();n.fire("spiderfied",{cluster:i,markers:t})},200)},_animationUnspiderfy:function(t){var e=this,i=this._group,n=i._map,r=i._featureGroup,o=t?n._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):n.latLngToLayerPoint(this._latlng),a=this.getAllChildMarkers(null,true),s=L.Path.SVG,l,c,u,h,p,d;i._ignoreMove=true;i._animationStart();this.setOpacity(1);for(c=a.length-1;c>=0;c--){l=a[c];if(!l._preSpiderfyLatlng){continue}l.closePopup();l.setLatLng(l._preSpiderfyLatlng);delete l._preSpiderfyLatlng;d=true;if(l._setPos){l._setPos(o);d=false}if(l.clusterHide){l.clusterHide();d=false}if(d){r.removeLayer(l)}if(s){u=l._spiderLeg;h=u._path;p=h.getTotalLength()+.1;h.style.strokeDashoffset=p;u.setStyle({opacity:0})}}i._ignoreMove=false;setTimeout(function(){var t=0;for(c=a.length-1;c>=0;c--){l=a[c];if(l._spiderLeg){t++}}for(c=a.length-1;c>=0;c--){l=a[c];if(!l._spiderLeg){continue}if(l.clusterShow){l.clusterShow()}if(l.setZIndexOffset){l.setZIndexOffset(0)}if(t>1){r.removeLayer(l)}n.removeLayer(l._spiderLeg);delete l._spiderLeg}i._animationEnd();i.fire("unspiderfied",{cluster:e,markers:a})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation){this._map.on("zoomstart",this._unspiderfyZoomStart,this)}this._map.on("zoomend",this._noanimationUnspiderfy,this);if(!L.Browser.touch){this._map.getRenderer(this)}},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._map.off("zoomend",this._noanimationUnspiderfy,this);this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){if(!this._map){return}this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){if(L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")){return}this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._unspiderfy(t)},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){if(this._spiderfied){this._spiderfied.unspiderfy(t)}},_noanimationUnspiderfy:function(){if(this._spiderfied){this._spiderfied._noanimationUnspiderfy()}},_unspiderfyLayer:function(t){if(t._spiderLeg){this._featureGroup.removeLayer(t);if(t.clusterShow){t.clusterShow()}if(t.setZIndexOffset){t.setZIndexOffset(0)}this._map.removeLayer(t._spiderLeg);delete t._spiderLeg}}}),L.MarkerClusterGroup.include({refreshClusters:function(t){if(!t){t=this._topClusterLevel.getAllChildMarkers()}else if(t instanceof L.MarkerClusterGroup){t=t._topClusterLevel.getAllChildMarkers()}else if(t instanceof L.LayerGroup){t=t._layers}else if(t instanceof L.MarkerCluster){t=t.getAllChildMarkers()}else if(t instanceof L.Marker){t=[t]}this._flagParentsIconsNeedUpdate(t);this._refreshClustersIcons();if(this.options.singleMarkerMode){this._refreshSingleMarkerModeMarkers(t)}return this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t){i=t[e].__parent;while(i){i._iconNeedsUpdate=true;i=i.__parent}}},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t){i=t[e];if(this.hasLayer(i)){i.setIcon(this._overrideMarkerIcon(i))}}}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;L.setOptions(i,t);this.setIcon(i);if(e&&this.__parent){this.__parent._group.refreshClusters(this)}return this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i}(e)},function(t,e,i){var n,r,o;r=[e,t],void 0===(o="function"==typeof(n=function(t,e){"use strict";var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function h(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(e){try{delete window[e]}catch(t){window[e]=undefined}}function d(t){var e=document.getElementById(t);if(e){document.getElementsByTagName("head")[0].removeChild(e)}}function n(o){var a=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var s=o;var l=a.timeout||i.timeout;var c=a.jsonpCallback||i.jsonpCallback;var u=undefined;return new Promise(function(t,e){var i=a.jsonpCallbackFunction||h();var n=c+"_"+i;window[i]=function(e){t({ok:true,json:function t(){return Promise.resolve(e)}});if(u)clearTimeout(u);d(n);p(i)};s+=s.indexOf("?")===-1?"?":"&";var r=document.createElement("script");r.setAttribute("src",""+s+c+"="+i);if(a.charset){r.setAttribute("charset",a.charset)}r.id=n;document.getElementsByTagName("head")[0].appendChild(r);u=setTimeout(function(){e(new Error("JSONP request to "+o+" timed out"));p(i);d(n);window[i]=function(){p(i)}},l);r.onerror=function(){e(new Error("JSONP request to "+o+" failed"));p(i);d(n);if(u)clearTimeout(u)}})}e.exports=n})?n.apply(e,r):n)||(t.exports=o)},function(t,e){t.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},function(t,e,i){var n,r,o,a,s;a=function(a){a.EdgeBuffer={previousMethods:{getTiledPixelBounds:a.GridLayer.prototype._getTiledPixelBounds}},a.GridLayer.include({_getTiledPixelBounds:function(t,e,i){var n,r=a.EdgeBuffer.previousMethods.getTiledPixelBounds.call(this,t,e,i),o=1;return void 0!==this.options.edgeBufferTiles&&null!==this.options.edgeBufferTiles&&(o=this.options.edgeBufferTiles),0<o&&(n=a.GridLayer.prototype.getTileSize.call(this).multiplyBy(o),r=new a.Bounds(r.min.subtract(n),r.max.add(n))),r}})},s=window,r=[i(0)],void 0===(o="function"==typeof(n=a)?n.apply(e,r):n)||(t.exports=o),void 0!==s&&s.L&&!s.L.EdgeBuffer&&a(s.L)},function(t,e,i){!function(t){"use strict";var r={ar:{touch:"   ",scroll:" ctrl + scroll / ",scrollMac:"   +  / "},bg:{touch:"  ,    ",scroll:"  Ctrl ,  ,      ",scrollMac:"   ,  ,      "},bn:{touch:"     ",scroll:"   ctrl + scroll  ",scrollMac:"       "},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla  mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"Kposunut mapy pouijte dva prsty",scroll:"Velikost zobrazen mapy zmte podrenm klvesy Ctrl aposouvnm koleka myi",scrollMac:"Velikost zobrazen mapy zmnte podrenm klvesy  aposunutm koleka myi / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud p kortet",scrollMac:"Brug  + rullefunktionen til at zoome ind og ud p kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:""},el:{touch:"      ",scroll:"   Ctrl  ,     ",scrollMac:"    +     "},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantn pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantn pulsada la tecla  mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta  eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"        .",scroll:"    ctrl + scroll  ",scrollMac:"     +   ."},fi:{touch:"Siirr karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittmll.",scrollMac:"Zoomaa karttaa pitmll painike  painettuna ja vierittmll."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang  + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deuxdoigts pour dplacer la carte",scroll:"Vous pouvez zoomer sur la carte  l'aide de CTRL+Molette de dfilement",scrollMac:"Vous pouvez zoomer sur la carte  l'aide de +Molette de dfilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme  e desprzate para ampliar o mapa"},gu:{touch:"     ",scroll:"    ctrl +   ",scrollMac:"    +   "},hi:{touch:"              ",scroll:"      ctrl +    ",scrollMac:"       +    "},hr:{touch:"Pomiite kartu pomou dva prsta",scroll:"Upotrijebite Ctrl i kliza mia da biste zumirali kartu",scrollMac:"Upotrijebite gumb  dok se pomiete za zumiranje karte"},hu:{touch:"Kt ujjal mozgassa a trkpet",scroll:"A trkp a ctrl + grgets hasznlatval nagythat",scrollMac:"A trkp a  + grgets hasznlatval nagythat"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan  + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza  + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"     ",scroll:"        ctrl ",scrollMac:"         "},ja:{touch:" 2 ",scroll:"Ctrl ",scrollMac:" "},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},ko:{touch:"    .",scroll:" / Ctrl   .",scrollMac:"   +  "},lt:{touch:"Perkelkite emlap dviem pirtais",scroll:"Slinkite nuspaud klavi Ctrl, kad pakeistumte emlapio mastel",scrollMac:"Paspauskite klavi  ir slinkite, kad priartintumte emlap"},lv:{touch:"Lai prvietotu karti, bdiet to ar diviem pirkstiem",scroll:"Kartes tlummaiai izmantojiet ctrl + ritinanu",scrollMac:"Lai veiktu kartes tlummaiu, izmantojiet  + ritinanu"},ml:{touch:"    ",scroll:" +     ",scrollMac:" +     "},mr:{touch:"    ",scroll:"   ctrl + scroll ",scrollMac:"    +  "},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik  + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for  flytte kartet",scroll:"Hold ctrl-tasten inne og rull for  zoome p kartet",scrollMac:"Hold inne -tasten og rull for  zoome p kartet"},pl:{touch:"Przesu map dwoma palcami",scroll:"Nacinij CTRL i przewi, by przybliy map",scrollMac:"Nacinij i przewi, by przybliy map"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use  e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use  e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize  + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosii dou degete pentru a deplasa harta",scroll:"Apsai tasta ctrl i derulai simultan pentru a mri harta",scrollMac:"Folosii  i derulai pentru a mri/micora harta"},ru:{touch:"  ,     ",scroll:"  ,  ,   Ctrl.",scrollMac:"  ,  + "},sk:{touch:"Mapu mete posun dvoma prstami",scroll:"Ak chcete pribli mapu, stlate klves ctrl aposvajte",scrollMac:"Ak chcete pribli mapu, stlate klves  aposvajte kolieskom myi"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid poveate tako, da drite tipko Ctrl in vrtite kolesce na miki",scrollMac:"Uporabite  + funkcijo pomika, da poveate ali pomanjate zemljevid"},sr:{touch:"    ",scroll:" ctrl       ",scrollMac:"        "},sv:{touch:"Anvnd tv fingrar fr att flytta kartan",scroll:"Anvnd ctrl + rulla fr att zooma kartan",scrollMac:"Anvnd  + rulla fr att zooma p kartan"},ta:{touch:"    ",scroll:" / , ctrl  , /  ",scrollMac:" / ,   , /  "},te:{touch:"     ",scroll:"   ctrl   ,  ",scrollMac:"    +  "},th:{touch:" 2 ",scroll:" Ctrl  ",scrollMac:"  "},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang  + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek iin iki parmanz kullann",scroll:"Haritay yaknlatrmak iin ctrl + kaydrma kombinasyonunu kullann",scrollMac:"Haritay yaknlatrmak iin  tuuna basp ekran kaydrn"},uk:{touch:"   ",scroll:"   ,   ,   Ctrl",scrollMac:"   ,   + "},vi:{touch:"S dng hai ngn tay  di chuyn bn ",scroll:"S dng ctrl + cun  thu phng bn ",scrollMac:"S dng  + cun  thu phng bn "},"zh-CN":{touch:"",scroll:" Ctrl ",scrollMac:"  "},"zh-TW":{touch:"",scroll:" ctrl ",scrollMac:"  "}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var e=!1,i=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?e=!0:"moveend"==t.type&&(e=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)t=this._map.options.gestureHandlingOptions.text;else{var e=this._getUserLanguage();e||(e="en"),r[e]&&(t=r[e]),t||-1===e.indexOf("-")||(e=e.split("-")[0],t=r[e]),t||(t=r[e="en"])}var i=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(i=!0);var n=t.scroll;i&&(n=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",n)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){e||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",i),t.GestureHandling=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){var t,e;this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t&&(e=L.bind(this._onFullscreenChange,this),this.whenReady(function(){L.DomEvent.on(document,t,e)}),this.on("unload",function(){L.DomEvent.off(document,t,e)}))}),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},function(t,e,i){var n,r,o,a,s;a=function(l){var t=l.Control.extend({includes:l.Evented?l.Evented.prototype:l.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(t,e){l.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=t},onAdd:function(t){this._mainMap=t,this._container=l.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",l.DomEvent.disableClickPropagation(this._container),l.DomEvent.on(this._container,"mousewheel",l.DomEvent.stopPropagation);var e={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs},e=l.Util.extend(this.options.mapOptions,e);return this._miniMap=new l.Map(this._container,e),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(l.Util.bind(function(){this._aimingRect=l.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=l.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){l.Control.prototype.addTo.call(this,t);var e=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(t,e,i,n,r,o){var a=l.DomUtil.create("a",i,n);a.innerHTML=t,a.href="#",a.title=e;var s=l.DomEvent.stopPropagation;return l.DomEvent.on(a,"click",s).on(a,"mousedown",s).on(a,"dblclick",s).on(a,"click",l.DomEvent.preventDefault).on(a,"click",r,o),a},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){var e;this._miniMapMoving?this._miniMapMoving=!1:(e=this.options.centerFixed||this._mainMap.getCenter(),this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())),this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){var e,i,n;this.options.centerFixed||(e=this._aimingRect.getBounds(),i=this._miniMap.latLngToContainerPoint(e.getSouthWest()),n=this._miniMap.latLngToContainerPoint(e.getNorthEast()),this._lastAimingRectPosition={sw:i,ne:n})},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new l.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),n=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=n,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return!this._userToggledDisplay&&this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){l.Util.requestAnimFrame(function(){l.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),l.Browser.any3d||l.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){l.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var t={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",t),this.fire("toggle",t)}});return l.Map.mergeOptions({miniMapControl:!1}),l.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new t).addTo(this))}),t},s=window,r=[i(0)],void 0===(o="function"==typeof(n=a)?n.apply(e,r):n)||(t.exports=o),void 0!==s&&s.L&&(s.L.Control.MiniMap=a(L),s.L.control.minimap=function(t,e){return new s.L.Control.MiniMap(t,e)})},function(t,e,i){var n,r,o,a,s;
/*!
Copyright (c) 2016 Dominik Moritz

This file is part of the leaflet locate control. It is licensed under the MIT license.
You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
*/
a=function(l){function i(e,i,t){(t=t.split(" ")).forEach(function(t){l.DomUtil[e].call(this,i,t)})}function e(t,e){i("addClass",t,e)}function n(t,e){i("removeClass",t,e)}var t=l.Marker.extend({initialize:function(t,e){l.Util.setOptions(this,e),this._latlng=t,this.createIcon()},createIcon:function(){var t=this.options,e="";void 0!==t.color&&(e+="stroke:"+t.color+";"),void 0!==t.weight&&(e+="stroke-width:"+t.weight+";"),void 0!==t.fillColor&&(e+="fill:"+t.fillColor+";"),void 0!==t.fillOpacity&&(e+="fill-opacity:"+t.fillOpacity+";"),void 0!==t.opacity&&(e+="opacity:"+t.opacity+";");var i=this._getIconSVG(t,e);this._locationIcon=l.divIcon({className:i.className,html:i.svg,iconSize:[i.w,i.h]}),this.setIcon(this._locationIcon)},_getIconSVG:function(t,e){var i=t.radius,n=i+t.weight,r=2*n;return{className:"leaflet-control-locate-location",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+r+'" height="'+r+'" version="1.1" viewBox="-'+n+" -"+n+" "+r+" "+r+'"><circle r="'+i+'" style="'+e+'" /></svg>',w:r,h:r}},setStyle:function(t){l.Util.setOptions(this,t),this.createIcon()}}),r=t.extend({initialize:function(t,e,i){l.Util.setOptions(this,i),this._latlng=t,this._heading=e,this.createIcon()},setHeading:function(t){this._heading=t},_getIconSVG:function(t,e){var i=t.radius,n=t.width+t.weight,r=2*(i+t.depth+t.weight),o="M0,0 l"+t.width/2+","+t.depth+" l-"+n+",0 z";return{className:"leaflet-control-locate-heading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+r+'" version="1.1" viewBox="-'+n/2+" 0 "+n+" "+r+'" style="'+("transform: rotate("+this._heading+"deg)")+'"><path d="'+o+'" style="'+e+'" /></svg>',w:n,h:r}}}),o=l.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds:function(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:t,compassClass:r,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,createButtonCallback:function(t,e){var i=l.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",t);return i.title=e.strings.title,i.role="button",i.href="#",{link:i,icon:l.DomUtil.create(e.iconElementTag,e.icon,i)}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(t){for(var e in t)"object"==typeof this.options[e]?l.extend(this.options[e],t[e]):this.options[e]=t[e];this.options.followMarkerStyle=l.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=l.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=l.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd:function(t){var e=l.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=e,this._map=t,this._layer=this.options.layer||new l.LayerGroup,this._layer.addTo(t),this._event=void 0,this._compassHeading=null,this._prevBounds=null;var i=this.options.createButtonCallback(e,this.options);return this._link=i.link,this._icon=i.icon,l.DomEvent.on(this._link,"click",l.DomEvent.stopPropagation).on(this._link,"click",l.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",l.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),e},_onClick:function(){this._justClicked=!0;var t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active&&void 0!==this._event){var e=this.options.clickBehavior,i=e.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(i=t?e.inView:e.inViewNotFollowing),e[i]&&(i=e[i]),i){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing:function(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate:function(){var t,e,i;this._active||(this._map.locate(this.options.locateOptions),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),!this.options.showCompass||((t="ondeviceorientationabsolute"in window)||"ondeviceorientation"in window)&&(e=this,i=function(){l.DomEvent.on(window,t?"deviceorientationabsolute":"deviceorientation",e._onDeviceOrientation,e)},DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t&&i()}):i()))},_deactivate:function(){this._map.stopLocate(),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?l.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&l.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView:function(){var t;this._drawMarker(),this._isOutsideMapBounds()?(this._event=void 0,this.options.onLocationOutsideMapBounds(this)):this._justClicked&&!1!==this.options.initialZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel):this.options.keepCurrentZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]):(t=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds,this._ignoreEvent=!0,t.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom}),l.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this))},_drawCompass:function(){var t,e;this._event&&(t=this._event.latlng,this.options.showCompass&&t&&null!==this._compassHeading&&(e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle,this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)),!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null))},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var t,e,i,n,r=this._event.accuracy,o=this._event.latlng;this.options.drawCircle&&(t=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle,this._circle?this._circle.setLatLng(o).setRadius(r).setStyle(t):this._circle=l.circle(o,r,t).addTo(this._layer)),i=this.options.metric?(e=r.toFixed(0),this.options.strings.metersUnit):(e=(3.2808399*r).toFixed(0),this.options.strings.feetUnit),this.options.drawMarker&&(n=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle,this._marker?(this._marker.setLatLng(o),this._marker.setStyle&&this._marker.setStyle(n)):this._marker=new this.options.markerClass(o,n).addTo(this._layer)),this._drawCompass();var a=this.options.strings.popup;function s(){return"string"==typeof a?l.Util.template(a,{distance:e,unit:i}):"function"==typeof a?a({distance:e,unit:i}):a}this.options.showPopup&&a&&this._marker&&this._marker.bindPopup(s())._popup.setLatLng(o),this.options.showPopup&&a&&this._compass&&this._compass.bindPopup(s())._popup.setLatLng(o)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading:function(t){!isNaN(parseFloat(t))&&isFinite(t)?(t=Math.round(t),this._compassHeading=t,l.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration:function(){this._setCompassHeading()},_onDeviceOrientation:function(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom:function(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd:function(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(n(this._container,"active following"),e(this._container,"requesting"),n(this._icon,this.options.icon),e(this._icon,this.options.iconLoading)):"active"==t?(n(this._container,"requesting following"),e(this._container,"active"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)):"following"==t&&(n(this._container,"requesting"),e(this._container,"active following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon))},_cleanClasses:function(){l.DomUtil.removeClass(this._container,"requesting"),l.DomUtil.removeClass(this._container,"active"),l.DomUtil.removeClass(this._container,"following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return l.control.locate=function(t){return new l.Control.Locate(t)},o},s=window,r=[i(0)],void 0===(o="function"==typeof(n=a)?n.apply(e,r):n)||(t.exports=o),void 0!==s&&s.L&&(s.L.Control.Locate=a(L))},function(t,e,i){var n,r,o;r=[i(0)],void 0===(o="function"==typeof(n=function(u){u.Map.mergeOptions({contextmenuItems:[]}),u.Map.ContextMenu=u.Handler.extend({_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(t){u.Handler.prototype.initialize.call(this,t);this._items=[];this._visible=false;var e=this._container=u.DomUtil.create("div",u.Map.ContextMenu.BASE_CLS,t._container);e.style.zIndex=1e4;e.style.position="absolute";if(t.options.contextmenuWidth){e.style.width=t.options.contextmenuWidth+"px"}this._createItems();u.DomEvent.on(e,"click",u.DomEvent.stop).on(e,"mousedown",u.DomEvent.stop).on(e,"dblclick",u.DomEvent.stop).on(e,"contextmenu",u.DomEvent.stop)},addHooks:function(){var t=this._map.getContainer();u.DomEvent.on(t,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this);if(u.Browser.touch){u.DomEvent.on(document,this._touchstart,this._hide,this)}this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var t=this._map.getContainer();u.DomEvent.off(t,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this);if(u.Browser.touch){u.DomEvent.off(document,this._touchstart,this._hide,this)}this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(t,e){if(t instanceof u.LatLng){t=this._map.latLngToContainerPoint(t)}this._showAtPoint(t,e)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=e!==undefined?e:this._items.length;var i=this._createItem(this._container,t,e);this._items.push(i);this._sizeChanged=true;this._map.fire("contextmenu.additem",{contextmenu:this,el:i.el,index:e});return i.el},removeItem:function(t){var e=this._container;if(!isNaN(t)){t=e.children[t]}if(t){this._removeItem(u.Util.stamp(t));this._sizeChanged=true;this._map.fire("contextmenu.removeitem",{contextmenu:this,el:t});return t}return null},removeAllItems:function(){var t=this._container.children,e;while(t.length){e=t[0];this._removeItem(u.Util.stamp(e))}return t},hideAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display="none"}},showAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display=""}},setDisabled:function(t,e){var i=this._container,n=u.Map.ContextMenu.BASE_CLS+"-item";if(!isNaN(t)){t=i.children[t]}if(t&&u.DomUtil.hasClass(t,n)){if(e){u.DomUtil.addClass(t,n+"-disabled");this._map.fire("contextmenu.disableitem",{contextmenu:this,el:t})}else{u.DomUtil.removeClass(t,n+"-disabled");this._map.fire("contextmenu.enableitem",{contextmenu:this,el:t})}}},isVisible:function(){return this._visible},_createItems:function(){var t=this._map.options.contextmenuItems,e,i,n;for(i=0,n=t.length;i<n;i++){this._items.push(this._createItem(this._container,t[i]))}},_createItem:function(t,e,i){if(e.separator||e==="-"){return this._createSeparator(t,i)}var n=u.Map.ContextMenu.BASE_CLS+"-item",r=e.disabled?n+" "+n+"-disabled":n,o=this._insertElementAt("a",r,t,i),a=this._createEventHandler(o,e.callback,e.context,e.hideOnSelect),s=this._getIcon(e),l=this._getIconCls(e),c="";if(s){c='<img class="'+u.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>'}else if(l){c='<span class="'+u.Map.ContextMenu.BASE_CLS+"-icon "+l+'"></span>'}o.innerHTML=c+e.text;o.href="#";u.DomEvent.on(o,"mouseover",this._onItemMouseOver,this).on(o,"mouseout",this._onItemMouseOut,this).on(o,"mousedown",u.DomEvent.stopPropagation).on(o,"click",a);if(u.Browser.touch){u.DomEvent.on(o,this._touchstart,u.DomEvent.stopPropagation)}if(!u.Browser.pointer){u.DomEvent.on(o,"click",this._onItemMouseOut,this)}return{id:u.Util.stamp(o),el:o,callback:a}},_removeItem:function(t){var e,i,n,r,o;for(n=0,r=this._items.length;n<r;n++){e=this._items[n];if(e.id===t){i=e.el;o=e.callback;if(o){u.DomEvent.off(i,"mouseover",this._onItemMouseOver,this).off(i,"mouseover",this._onItemMouseOut,this).off(i,"mousedown",u.DomEvent.stopPropagation).off(i,"click",o);if(u.Browser.touch){u.DomEvent.off(i,this._touchstart,u.DomEvent.stopPropagation)}if(!u.Browser.pointer){u.DomEvent.on(i,"click",this._onItemMouseOut,this)}}this._container.removeChild(i);this._items.splice(n,1);return e}}return null},_createSeparator:function(t,e){var i=this._insertElementAt("div",u.Map.ContextMenu.BASE_CLS+"-separator",t,e);return{id:u.Util.stamp(i),el:i}},_createEventHandler:function(e,i,n,r){var o=this,a=this._map,s=u.Map.ContextMenu.BASE_CLS+"-item-disabled",r=r!==undefined?r:true;return function(t){if(u.DomUtil.hasClass(e,s)){return}if(r){o._hide()}if(i){i.call(n||a,o._showLocation)}o._map.fire("contextmenu.select",{contextmenu:o,el:e})}},_insertElementAt:function(t,e,i,n){var r,o=document.createElement(t);o.className=e;if(n!==undefined){r=i.children[n]}if(r){i.insertBefore(o,r)}else{i.appendChild(o)}return o},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(t,e){if(this._items.length){var i=this._map,n=i.containerPointToLayerPoint(t),r=i.layerPointToLatLng(n),o=u.extend(e||{},{contextmenu:this});this._showLocation={latlng:r,layerPoint:n,containerPoint:t};if(e&&e.relatedTarget){this._showLocation.relatedTarget=e.relatedTarget}this._setPosition(t);if(!this._visible){this._container.style.display="block";this._visible=true}this._map.fire("contextmenu.show",o)}},_hide:function(){if(this._visible){this._visible=false;this._container.style.display="none";this._map.fire("contextmenu.hide",{contextmenu:this})}},_getIcon:function(t){return u.Browser.retina&&t.retinaIcon||t.icon},_getIconCls:function(t){return u.Browser.retina&&t.retinaIconCls||t.iconCls},_setPosition:function(t){var e=this._map.getSize(),i=this._container,n=this._getElementSize(i),r;if(this._map.options.contextmenuAnchor){r=u.point(this._map.options.contextmenuAnchor);t=t.add(r)}i._leaflet_pos=t;if(t.x+n.x>e.x){i.style.left="auto";i.style.right=Math.min(Math.max(e.x-t.x,0),e.x-n.x-1)+"px"}else{i.style.left=Math.max(t.x,0)+"px";i.style.right="auto"}if(t.y+n.y>e.y){i.style.top="auto";i.style.bottom=Math.min(Math.max(e.y-t.y,0),e.y-n.y-1)+"px"}else{i.style.top=Math.max(t.y,0)+"px";i.style.bottom="auto"}},_getElementSize:function(t){var e=this._size,i=t.style.display;if(!e||this._sizeChanged){e={};t.style.left="-999999px";t.style.right="auto";t.style.display="block";e.x=t.offsetWidth;e.y=t.offsetHeight;t.style.left="auto";t.style.display=i;this._sizeChanged=false}return e},_onKeyDown:function(t){var e=t.keyCode;if(e===27){this._hide()}},_onItemMouseOver:function(t){u.DomUtil.addClass(t.target||t.srcElement,"over")},_onItemMouseOut:function(t){u.DomUtil.removeClass(t.target||t.srcElement,"over")}}),u.Map.addInitHook("addHandler","contextmenu",u.Map.ContextMenu),u.Mixin.ContextMenu={bindContextMenu:function(t){u.setOptions(this,t);this._initContextMenu();return this},unbindContextMenu:function(){this.off("contextmenu",this._showContextMenu,this);return this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){var e=[];for(var i=0;i<this.options.contextmenuItems.length;i++){if(this.options.contextmenuItems[i].index==t){e.push(i)}}var n=e.pop();while(n!==undefined){this.options.contextmenuItems.splice(n,1);n=e.pop()}},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index);this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[];this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(t){var e,i,n,r,o;if(this._map.contextmenu){i=u.extend({relatedTarget:this},t);n=this._map.mouseEventToContainerPoint(t.originalEvent);if(!this.options.contextmenuInheritItems){this._map.contextmenu.hideAllItems()}for(r=0,o=this.options.contextmenuItems.length;r<o;r++){e=this.options.contextmenuItems[r];this._items.push(this._map.contextmenu.insertItem(e,e.index))}this._map.once("contextmenu.hide",this._hideContextMenu,this);this._map.contextmenu.showAt(n,i)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++){this._map.contextmenu.removeItem(this._items[t])}this._items.length=0;if(!this.options.contextmenuInheritItems){this._map.contextmenu.showAllItems()}}};var t=[u.Marker,u.Path],e={contextmenu:false,contextmenuItems:[],contextmenuInheritItems:true},i,n,r;for(n=0,r=t.length;n<r;n++){i=t[n];if(!i.prototype.options){i.prototype.options=e}else{i.mergeOptions(e)}i.addInitHook(function(){if(this.options.contextmenu){this._initContextMenu()}});i.include(u.Mixin.ContextMenu)}return u.Map.ContextMenu})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},,function(t,e){function i(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}
/*!
 * autocomplete.js 0.37.1
 * https://github.com/algolia/autocomplete.js
 * Copyright 2020 Algolia, Inc. and other contributors; Licensed MIT
 */var n,r;r={},i.m=n=[function(t,e,i){"use strict";t.exports=i(1)},function(t,e,i){"use strict";var n=i(2),o=i(3);n.element=o;var a=i(4);a.isArray=o.isArray,a.isFunction=o.isFunction,a.isObject=o.isPlainObject,a.bind=o.proxy,a.each=function(t,i){o.each(t,function(t,e){return i(e,t)})},a.map=o.map,a.mixin=o.extend,a.Event=o.Event;var s=i(5),l=i(6),r=o.fn.autocomplete,c="aaAutocomplete",u={initialize:function(n,r){return r=a.isArray(r)?r:[].slice.call(arguments,1),n=n||{},this.each(function(){var t,e=o(this),i=new l({el:e});t=new s({input:e,eventBus:i,dropdownMenuContainer:n.dropdownMenuContainer,hint:void 0===n.hint||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,autoselectOnBlur:n.autoselectOnBlur,tabAutocomplete:n.tabAutocomplete,openOnFocus:n.openOnFocus,templates:n.templates,debug:n.debug,clearOnSelected:n.clearOnSelected,cssClasses:n.cssClasses,datasets:r,keyboardShortcuts:n.keyboardShortcuts,appendTo:n.appendTo,autoWidth:n.autoWidth}),e.data(c,t)})},open:function(){return this.each(function(){var t,e=o(this);(t=e.data(c))&&t.open()})},close:function(){return this.each(function(){var t,e=o(this);(t=e.data(c))&&t.close()})},val:function(i){return arguments.length?this.each(function(){var t,e=o(this);(t=e.data(c))&&t.setVal(i)}):function(t){var e,i;(e=t.data(c))&&(i=e.getVal());return i}(this.first())},destroy:function(){return this.each(function(){var t,e=o(this);(t=e.data(c))&&(t.destroy(),e.removeData(c))})}};o.fn.autocomplete=function(t){var e;return u[t]&&"initialize"!==t?(e=this.filter(function(){return!!o(this).data(c)}),u[t].apply(e,[].slice.call(arguments,1))):u.initialize.apply(this,arguments)},o.fn.autocomplete.noConflict=function(){return o.fn.autocomplete=r,this},o.fn.autocomplete.sources=s.sources,o.fn.autocomplete.escapeHighlightedString=a.escapeHighlightedString,t.exports=o.fn.autocomplete},function(t,e){"use strict";t.exports={element:null}},function(t,e){t.exports=jQuery},function(t,e,i){"use strict";var n,r=i(2);function a(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}t.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(t){if(void 0===t&&(t=navigator.userAgent),/(msie|trident)/i.test(t)){var e=t.match(/(msie |rv:)(\d+(.\d+)?)/i);if(e)return e[2]}return!1},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(t){return"number"==typeof t},toStr:function(t){return null==t?"":t+""},cloneDeep:function(t){var i=this.mixin({},t),n=this;return this.each(i,function(t,e){t&&(n.isArray(t)?i[e]=[].concat(t):n.isObject(t)&&(i[e]=n.cloneDeep(t)))}),i},error:function(t){throw new Error(t)},every:function(i,n){var r=!0;return i?(this.each(i,function(t,e){r=r&&(n.call(null,t,e,i)&&r)}),!!r):r},any:function(i,n){var r=!1;return i&&this.each(i,function(t,e){if(n.call(null,t,e,i))return!(r=!0)}),r},getUniqueId:(n=0,function(){return n++}),templatify:function(t){if(this.isFunction(t))return t;var e=r.element(t);return"SCRIPT"===e.prop("tagName")?function(){return e.text()}:function(){return String(t)}},defer:function(t){setTimeout(t,0)},noop:function(){},formatPrefix:function(t,e){return e?"":t+"-"},className:function(t,e,i){return(i?"":".")+t+e},escapeHighlightedString:function(t,e,i){e=e||"<em>";var n=document.createElement("div");n.appendChild(document.createTextNode(e)),i=i||"</em>";var r=document.createElement("div");r.appendChild(document.createTextNode(i));var o=document.createElement("div");return o.appendChild(document.createTextNode(t)),o.innerHTML.replace(RegExp(a(n.innerHTML),"g"),e).replace(RegExp(a(r.innerHTML),"g"),i)}}},function(t,e,i){"use strict";var a="aaAttrs",s=i(4),l=i(2),o=i(6),c=i(7),n=i(16),u=i(18),h=i(19);function p(t){if((t=t||{}).input||s.error("missing input"),this.isActivated=!1,this.debug=!!t.debug,this.autoselect=!!t.autoselect,this.autoselectOnBlur=!!t.autoselectOnBlur,this.openOnFocus=!!t.openOnFocus,this.minLength=s.isNumber(t.minLength)?t.minLength:1,this.autoWidth=void 0===t.autoWidth||!!t.autoWidth,this.clearOnSelected=!!t.clearOnSelected,this.tabAutocomplete=void 0===t.tabAutocomplete||!!t.tabAutocomplete,t.hint=!!t.hint,t.hint&&t.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=t.css=s.mixin({},h,t.appendTo?h.appendTo:{}),this.cssClasses=t.cssClasses=s.mixin({},h.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix=s.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=t.listboxId=[this.cssClasses.root,"listbox",s.getUniqueId()].join("-");var e=function(t){var e,i,n,r;e=l.element(t.input),i=l.element(u.wrapper.replace("%ROOT%",t.cssClasses.root)).css(t.css.wrapper),t.appendTo||"block"!==e.css("display")||"table"!==e.parent().css("display")||i.css("display","table-cell");var o=u.dropdown.replace("%PREFIX%",t.cssClasses.prefix).replace("%DROPDOWN_MENU%",t.cssClasses.dropdownMenu);n=l.element(o).css(t.css.dropdown).attr({role:"listbox",id:t.listboxId}),t.templates&&t.templates.dropdownMenu&&n.html(s.templatify(t.templates.dropdownMenu)());(r=e.clone().css(t.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(e))).val("").addClass(s.className(t.cssClasses.prefix,t.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),r.removeData&&r.removeData();e.data(a,{"aria-autocomplete":e.attr("aria-autocomplete"),"aria-expanded":e.attr("aria-expanded"),"aria-owns":e.attr("aria-owns"),autocomplete:e.attr("autocomplete"),dir:e.attr("dir"),role:e.attr("role"),spellcheck:e.attr("spellcheck"),style:e.attr("style"),type:e.attr("type")}),e.addClass(s.className(t.cssClasses.prefix,t.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":t.datasets&&t.datasets[0]&&t.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":t.ariaLabel,"aria-owns":t.listboxId}).css(t.hint?t.css.input:t.css.inputWithNoHint);try{e.attr("dir")||e.attr("dir","auto")}catch(t){}return(i=t.appendTo?i.appendTo(l.element(t.appendTo).eq(0)).eq(0):e.wrap(i).parent()).prepend(t.hint?r:null).append(n),{wrapper:i,input:e,hint:r,menu:n}}(t);this.$node=e.wrapper;var i=this.$input=e.input,n=e.menu,r=e.hint;t.dropdownMenuContainer&&l.element(t.dropdownMenuContainer).css("position","relative").append(n.css("top","0")),i.on("blur.aa",function(t){var e=document.activeElement;s.isMsie()&&(n[0]===e||n[0].contains(e))&&(t.preventDefault(),t.stopImmediatePropagation(),s.defer(function(){i.focus()}))}),n.on("mousedown.aa",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new o({el:i}),this.dropdown=new p.Dropdown({appendTo:t.appendTo,wrapper:this.$node,menu:n,datasets:t.datasets,templates:t.templates,cssClasses:t.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new p.Input({input:i,hint:r}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(t),this._setLanguageDirection()}s.mixin(p.prototype,{_bindKeyboardShortcuts:function(t){var r,o;t.keyboardShortcuts&&(r=this.$input,o=[],s.each(t.keyboardShortcuts,function(t){"string"==typeof t&&(t=t.toUpperCase().charCodeAt(0)),o.push(t)}),l.element(document).keydown(function(t){var e,i=t.target||t.srcElement,n=i.tagName;i.isContentEditable||"INPUT"===n||"SELECT"===n||"TEXTAREA"===n||(e=t.which||t.keyCode,-1!==o.indexOf(e)&&(r.focus(),t.stopPropagation(),t.preventDefault()))}))},_onSuggestionClicked:function(t,e){var i;(i=this.dropdown.getDatumForSuggestion(e))&&this._select(i,{selectionMethod:"click"})},_onCursorMoved:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(n),i&&(e&&this.input.setInputValue(i.value,!0),this.eventBus.trigger("cursorchanged",i.raw,i.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var t=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",t.width+"px");var e=this.$node[0].getBoundingClientRect(),i=t.bottom-e.top;this.$node.css("top",i+"px");var n=t.left-e.left;this.$node.css("left",n+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){var t;this.isActivated=!0,this.openOnFocus&&((t=this.input.getQuery()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open())},_onBlurred:function(){var t=this.dropdown.getDatumForCursor(),e=this.dropdown.getDatumForTopSuggestion(),i={selectionMethod:"blur"};this.debug||(this.autoselectOnBlur&&t?this._select(t,i):this.autoselectOnBlur&&e?this._select(e,i):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),r={selectionMethod:"enterKey"};i?(this._select(i,r),e.preventDefault()):this.autoselect&&n&&(this._select(n,r),e.preventDefault())},_onTabKeyed:function(t,e){var i;this.tabAutocomplete?(i=this.dropdown.getDatumForCursor())?(this._select(i,{selectionMethod:"tabKey"}),e.preventDefault()):this._autocomplete(!0):this.dropdown.close()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t=this.input.getLanguageDirection();this.dir!==t&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,i,n,r=this.dropdown.getDatumForTopSuggestion();r&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(t=this.input.getInputValue(),e=c.normalizeQuery(t),i=s.escapeRegExChars(e),(n=new RegExp("^(?:"+i+")(.+$)","i").exec(r.value))?this.input.setHint(t+n[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,i=this.input.getHint(),n=this.input.getQuery(),r=t||this.input.isCursorAtEnd();i&&n!==i&&r&&((e=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(e.value),this.eventBus.trigger("autocompleted",e.raw,e.datasetName))},_select:function(t,e){void 0!==t.value&&this.input.setQuery(t.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(t.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",t.raw,t.datasetName,e).isDefaultPrevented()&&(this.dropdown.close(),s.defer(s.bind(this.dropdown.empty,this.dropdown)))},open:function(){var t;this.isActivated||((t=this.input.getInputValue()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty()),this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=s.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),function(t,e){var i=t.find(s.className(e.prefix,e.input));s.each(i.data(a),function(t,e){void 0===t?i.removeAttr(e):i.attr(e,t)}),i.detach().removeClass(s.className(e.prefix,e.input,!0)).insertAfter(t),i.removeData&&i.removeData(a);t.remove()}(this.$node,this.cssClasses),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),p.Dropdown=n,p.Input=c,p.sources=i(20),t.exports=p},function(t,e,i){"use strict";var o=i(4),n=i(2);function r(t){t&&t.el||o.error("EventBus initialized without el"),this.$el=n.element(t.el)}o.mixin(r.prototype,{trigger:function(t,e,i,n){var r=o.Event("autocomplete:"+t);return this.$el.trigger(r,[e,i,n]),r}}),t.exports=r},function(t,e,i){"use strict";var s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},l=i(4),c=i(2),n=i(8);function o(t){var e,i,n,r,o,a=this;(t=t||{}).input||l.error("input is missing"),e=l.bind(this._onBlur,this),i=l.bind(this._onFocus,this),n=l.bind(this._onKeydown,this),r=l.bind(this._onInput,this),this.$hint=c.element(t.hint),this.$input=c.element(t.input).on("blur.aa",e).on("focus.aa",i).on("keydown.aa",n),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=l.noop),l.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(t){s[t.which||t.keyCode]||l.defer(l.bind(a._onInput,a,t))}):this.$input.on("input.aa",r),this.query=this.$input.val(),this.$overflowHelper=(o=this.$input,c.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:o.css("font-family"),fontSize:o.css("font-size"),fontStyle:o.css("font-style"),fontVariant:o.css("font-variant"),fontWeight:o.css("font-weight"),wordSpacing:o.css("word-spacing"),letterSpacing:o.css("letter-spacing"),textIndent:o.css("text-indent"),textRendering:o.css("text-rendering"),textTransform:o.css("text-transform")}).insertAfter(o))}function a(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}o.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},l.mixin(o.prototype,n,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,r;switch(t){case"tab":n=this.getHint(),r=this.getInputValue(),i=n&&n!==r&&!a(e);break;case"up":case"down":i=!a(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i="tab"!==t||!a(e);return i},_checkInputValue:function(){var t,e,i,n,r=this.getInputValue();i=r,n=this.query,e=!(!(t=o.normalizeQuery(i)===o.normalizeQuery(n))||!this.query)&&this.query.length!==r.length,this.query=r,t?e&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){void 0===t&&(t=this.query),this.$input.val(t),e?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(t){this.$input.attr("aria-activedescendant",t)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t);""!==t&&i&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e=this.$input.val().length,i=this.$input[0].selectionStart;return l.isNumber(i)?i===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),t.exports=o},function(t,e,i){"use strict";var a=i(9),s=/\s+/;function n(t,e,i,n){var r,o,a;if(!i)return this;for(e=e.split(s),i=n?(a=n,(o=i).bind?o.bind(a):function(){o.apply(a,[].slice.call(arguments,0))}):i,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function l(n,r,o){return function(){for(var t,e=0,i=n.length;!t&&e<i;e+=1)t=!1===n[e].apply(r,o);return!t}}t.exports={onSync:function(t,e,i){return n.call(this,"sync",t,e,i)},onAsync:function(t,e,i){return n.call(this,"async",t,e,i)},off:function(t){var e;if(!this._callbacks)return this;t=t.split(s);for(;e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,i,n,r,o;if(!this._callbacks)return this;t=t.split(s),n=[].slice.call(arguments,1);for(;(e=t.shift())&&(i=this._callbacks[e]);)r=l(i.sync,this,[e].concat(n)),o=l(i.async,this,[e].concat(n)),r()&&a(o);return this}}},function(t,e,i){"use strict";var n,r,o,a=[i(10),i(12),i(13),i(14),i(15)],s=-1,l=[],c=!1;function u(){n&&r&&(n=!1,r.length?l=r.concat(l):s=-1,l.length&&h())}function h(){if(!n){n=!(c=!1);for(var t=l.length,e=setTimeout(u);t;){for(r=l,l=[];r&&++s<t;)r[s].run();s=-1,t=l.length}r=null,n=!(s=-1),clearTimeout(e)}}for(var p=-1,d=a.length;++p<d;)if(a[p]&&a[p].test&&a[p].test()){o=a[p].install(h);break}function f(t,e){this.fun=t,this.array=e}f.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},t.exports=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),c||n||(c=!0,o())}},function(t,i,e){(function(e){"use strict";i.test=function(){return void 0!==e&&!e.browser},i.install=function(t){return function(){e.nextTick(t)}}}).call(i,e(11))},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var t=s(p);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){(function(r){"use strict";var o=r.MutationObserver||r.WebKitMutationObserver;e.test=function(){return o},e.install=function(t){var e=0,i=new o(t),n=r.document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}}).call(e,function(){return this}())},function(t,e){(function(i){"use strict";e.test=function(){return!i.setImmediate&&void 0!==i.MessageChannel},e.install=function(t){var e=new i.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}}).call(e,function(){return this}())},function(t,e){(function(i){"use strict";e.test=function(){return"document"in i&&"onreadystatechange"in i.document.createElement("script")},e.install=function(e){return function(){var t=i.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},i.document.documentElement.appendChild(t),e}}}).call(e,function(){return this}())},function(t,e){"use strict";e.test=function(){return!0},e.install=function(t){return function(){setTimeout(t,0)}}},function(t,e,i){"use strict";var s=i(4),l=i(2),n=i(8),r=i(17),c=i(19);function u(r){var t,e,i,o=this;(r=r||{}).menu||s.error("menu is required"),s.isArray(r.datasets)||s.isObject(r.datasets)||s.error("1 or more datasets required"),r.datasets||s.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=r.minLength||0,this.templates={},this.appendTo=r.appendTo||!1,this.css=s.mixin({},c,r.appendTo?c.appendTo:{}),this.cssClasses=r.cssClasses=s.mixin({},c.defaultClasses,r.cssClasses||{}),this.cssClasses.prefix=r.cssClasses.formattedPrefix||s.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),t=s.bind(this._onSuggestionClick,this),e=s.bind(this._onSuggestionMouseEnter,this),i=s.bind(this._onSuggestionMouseLeave,this);var n=s.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=l.element(r.menu).on("mouseenter.aa",n,e).on("mouseleave.aa",n,i).on("click.aa",n,t),this.$container=r.appendTo?r.wrapper:this.$menu,r.templates&&r.templates.header&&(this.templates.header=s.templatify(r.templates.header),this.$menu.prepend(this.templates.header())),r.templates&&r.templates.empty&&(this.templates.empty=s.templatify(r.templates.empty),this.$empty=l.element('<div class="'+s.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=s.map(r.datasets,function(t){return e=o.$menu,i=t,n=r.cssClasses,new u.Dataset(s.mixin({$menu:e,cssClasses:n},i));var e,i,n}),s.each(this.datasets,function(t){var e=t.getRoot();e&&0===e.parent().length&&o.$menu.append(e),t.onSync("rendered",o._onRendered,o)}),r.templates&&r.templates.footer&&(this.templates.footer=s.templatify(r.templates.footer),this.$menu.append(this.templates.footer()));var a=this;l.element(window).resize(function(){a._redraw()})}s.mixin(u.prototype,n,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",l.element(t.currentTarget))},_onSuggestionMouseEnter:function(t){var e,i=l.element(t.currentTarget);i.hasClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))||(this._removeCursor(),e=this,setTimeout(function(){e._setCursor(i,!1)},0))},_onSuggestionMouseLeave:function(t){if(t.relatedTarget&&0<l.element(t.relatedTarget).closest("."+s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length)return;this._removeCursor(),this.trigger("cursorRemoved")},_onRendered:function(t,e){var i;this.isEmpty=s.every(this.datasets,function(t){return t.isEmpty()}),this.isEmpty?(e.length>=this.minLength&&this.trigger("empty"),this.$empty?e.length<this.minLength?this._hide():(i=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query}),this.$empty.html(i),this.$empty.show(),this._show()):!s.any(this.datasets,function(t){return t.templates&&t.templates.empty})||e.length<this.minLength?this._hide():this._show()):this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),e.length>=this.minLength?this._show():this._hide()),this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(s.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(s.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(t,e){t.first().addClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",e)},_removeCursor:function(){this._getCursor().removeClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(t){var e,i,n,r;this.isOpen&&(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1!==(n=((n=e.index(i)+t)+1)%(e.length+1)-1)?(n<-1&&(n=e.length-1),this._setCursor(r=e.eq(n),!0),this._ensureVisible(r)):this.trigger("cursorRemoved"))},_ensureVisible:function(t){var e=t.position().top,i=e+t.height()+parseInt(t.css("margin-top"),10)+parseInt(t.css("margin-bottom"),10),n=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10);e<0?this.$menu.scrollTop(n+e):r<i&&this.$menu.scrollTop(n+(i-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:r.extractDatum(t),value:r.extractValue(t),datasetName:r.extractDatasetName(t)}),e},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(e){s.each(this.datasets,function(t){t.update(e)})},empty:function(){s.each(this.datasets,function(t){t.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,s.each(this.datasets,function(t){t.destroy()})}}),u.Dataset=r,t.exports=u},function(t,e,i){"use strict";var s=i(4),l=i(2),c=i(18),o=i(19),n=i(8);function r(t){var e,i,n;(t=t||{}).templates=t.templates||{},t.source||s.error("missing source"),t.name&&!/^[_a-zA-Z0-9-]+$/.test(t.name)&&s.error("invalid dataset name: "+t.name),this.query=null,this._isEmpty=!0,this.highlight=!!t.highlight,this.name=void 0===t.name||null===t.name?s.getUniqueId():t.name,this.source=t.source,this.displayFn=(e=(e=t.display||t.displayKey)||"value",s.isFunction(e)?e:function(t){return t[e]}),this.debounce=t.debounce,this.cache=!1!==t.cache,this.templates=(i=t.templates,n=this.displayFn,{empty:i.empty&&s.templatify(i.empty),header:i.header&&s.templatify(i.header),footer:i.footer&&s.templatify(i.footer),suggestion:i.suggestion||function(t){return"<p>"+n(t)+"</p>"}}),this.css=s.mixin({},o,t.appendTo?o.appendTo:{}),this.cssClasses=t.cssClasses=s.mixin({},o.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||s.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var r=s.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=t.$menu&&0<t.$menu.find(r+"-"+this.name).length?l.element(t.$menu.find(r+"-"+this.name)[0]):l.element(c.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=t.$menu,this.clearCachedSuggestions()}r.extractDatasetName=function(t){return l.element(t).data("aaDataset")},r.extractValue=function(t){return l.element(t).data("aaValue")},r.extractDatum=function(t){var e=l.element(t).data("aaDatum");return"string"==typeof e&&(e=JSON.parse(e)),e},s.mixin(r.prototype,n,{_render:function(e,o){if(this.$el){var i,a=this,t=[].slice.call(arguments,2);if(this.$el.empty(),i=o&&o.length,this._isEmpty=!i,!i&&this.templates.empty)this.$el.html(function(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!0}].concat(t),a.templates.empty.apply(this,t)}.apply(this,t)).prepend(a.templates.header?n.apply(this,t):null).append(a.templates.footer?r.apply(this,t):null);else if(i)this.$el.html(function(){var t,e,n=[].slice.call(arguments,0),r=this,i=c.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return t=l.element(i).css(this.css.suggestions),e=s.map(o,function(t){var e,i=c.suggestion.replace("%PREFIX%",r.cssClasses.prefix).replace("%SUGGESTION%",r.cssClasses.suggestion);return(e=l.element(i).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(a.templates.suggestion.apply(this,[t].concat(n)))).data("aaDataset",a.name),e.data("aaValue",a.displayFn(t)||void 0),e.data("aaDatum",JSON.stringify(t)),e.children().each(function(){l.element(this).css(r.css.suggestionChild)}),e}),t.append.apply(t,e),t}.apply(this,t)).prepend(a.templates.header?n.apply(this,t):null).append(a.templates.footer?r.apply(this,t):null);else if(o&&!Array.isArray(o))throw new TypeError("suggestions must be an array");this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(i?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(i?"without":"with")+"-"+this.name),this.trigger("rendered",e)}function n(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!i}].concat(t);return a.templates.header.apply(this,t)}function r(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!i}].concat(t);return a.templates.footer.apply(this,t)}},getRoot:function(){return this.$el},update:function(i){function t(t){var e;this.canceled||i!==this.query||(e=[].slice.call(arguments,1),this.cacheSuggestions(i,t,e),this._render.apply(this,[i,t].concat(e)))}var e,n;this.query=i,this.canceled=!1,this.shouldFetchFromCache(i)?t.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs)):(n=function(){e.canceled||e.source(i,t.bind(e))},(e=this).debounce?(clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(function(){e.debounceTimeout=null,n()},this.debounce)):n())},cacheSuggestions:function(t,e,i){this.cachedQuery=t,this.cachedSuggestions=e,this.cachedRenderExtraArgs=i},shouldFetchFromCache:function(t){return this.cache&&this.cachedQuery===t&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.$el&&(this.cancel(),this.$el.empty(),this.trigger("rendered",""))},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),t.exports=r},function(t,e){"use strict";t.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},function(t,e,i){"use strict";var n=i(4),r={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};n.isMsie()&&n.mixin(r.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(r.input,{marginTop:"-1px"}),t.exports=r},function(t,e,i){"use strict";t.exports={hits:i(21),popularIn:i(24)}},function(t,e,i){"use strict";var r=i(4),o=i(22),a=i(23);t.exports=function(e,n){var t=a(e.as._ua);return t&&3<=t[0]&&20<t[1]&&((n=n||{}).additionalUA="autocomplete.js "+o),function(t,i){e.search(t,n,function(t,e){t?r.error(t.message):i(e.hits,e)})}}},function(t,e){t.exports="0.37.1"},function(t,e){"use strict";t.exports=function(t){var e=t.match(/Algolia for JavaScript \((\d+\.)(\d+\.)(\d+)\)/)||t.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(e)return[e[1],e[2],e[3]]}},function(t,e,i){"use strict";var h=i(4),p=i(22),d=i(23);t.exports=function(e,n,r,l){var t=d(e.as._ua);if(t&&3<=t[0]&&20<t[1]&&((n=n||{}).additionalUA="autocomplete.js "+p),!r.source)return h.error("Missing 'source' key");var c=h.isFunction(r.source)?r.source:function(t){return t[r.source]};if(!r.index)return h.error("Missing 'index' key");var u=r.index;return l=l||{},function(t,s){e.search(t,n,function(t,o){if(t)h.error(t.message);else{if(0<o.hits.length){var a=o.hits[0],e=h.mixin({hitsPerPage:0},r);delete e.source,delete e.index;var i=d(u.as._ua);return i&&3<=i[0]&&20<i[1]&&(n.additionalUA="autocomplete.js "+p),void u.search(c(a),e,function(t,e){if(t)h.error(t.message);else{var i,n=[];l.includeAll&&(i=l.allTitle||"All departments",n.push(h.mixin({facet:{value:i,count:e.nbHits}},h.cloneDeep(a)))),h.each(e.facets,function(t,i){h.each(t,function(t,e){n.push(h.mixin({facet:{facet:i,value:e,count:t}},h.cloneDeep(a)))})});for(var r=1;r<o.hits.length;++r)n.push(o.hits[r]);s(n,o)}})}s([])}})}}}],i.c=r,i.p="",i(0)},function(t,e){t.exports=jQuery},function(t,e,i){var n,r,o,a=function(){function o(t,e){function a(t,e){u=function(t){for(var e=new Array(t),i=0;i<t;i+=1){e[i]=new Array(t);for(var n=0;n<t;n+=1)e[i][n]=null}return e}(h=4*s+17),i(0,0),i(h-7,0),i(0,h-7),o(),r(),f(t,e),7<=s&&p(t),null==n&&(n=g(s,l,c)),m(n,e)}var s=t,l=_[e],u=null,h=0,n=null,c=[],d={},i=function(t,e){for(var i=-1;i<=7;i+=1)if(!(t+i<=-1||h<=t+i))for(var n=-1;n<=7;n+=1)e+n<=-1||h<=e+n||(u[t+i][e+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},r=function(){for(var t=8;t<h-8;t+=1)null==u[t][6]&&(u[t][6]=t%2==0);for(var e=8;e<h-8;e+=1)null==u[6][e]&&(u[6][e]=e%2==0)},o=function(){for(var t=y.getPatternPosition(s),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var n=t[e],r=t[i];if(null==u[n][r])for(var o=-2;o<=2;o+=1)for(var a=-2;a<=2;a+=1)u[n+o][r+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},p=function(t){for(var e=y.getBCHTypeNumber(s),i=0;i<18;i+=1){var n=!t&&1==(e>>i&1);u[Math.floor(i/3)][i%3+h-8-3]=n}for(i=0;i<18;i+=1){n=!t&&1==(e>>i&1);u[i%3+h-8-3][Math.floor(i/3)]=n}},f=function(t,e){for(var i=l<<3|e,n=y.getBCHTypeInfo(i),r=0;r<15;r+=1){var o=!t&&1==(n>>r&1);r<6?u[r][8]=o:r<8?u[r+1][8]=o:u[h-15+r][8]=o}for(r=0;r<15;r+=1){o=!t&&1==(n>>r&1);r<8?u[8][h-r-1]=o:r<9?u[8][15-r-1+1]=o:u[8][15-r-1]=o}u[h-8][8]=!t},m=function(t,e){for(var i=-1,n=h-1,r=7,o=0,a=y.getMaskFunction(e),s=h-1;0<s;s-=2)for(6==s&&--s;;){for(var l,c=0;c<2;c+=1){null==u[n][s-c]&&(l=!1,o<t.length&&(l=1==(t[o]>>>r&1)),a(n,s-c)&&(l=!l),u[n][s-c]=l,-1==--r&&(o+=1,r=7))}if((n+=i)<0||h<=n){n-=i,i=-i;break}}},g=function(t,e,i){for(var n=C.getRSBlocks(t,e),r=M(),o=0;o<i.length;o+=1){var a=i[o];r.put(a.getMode(),4),r.put(a.getLength(),y.getLengthInBits(a.getMode(),t)),a.write(r)}for(var s=0,o=0;o<n.length;o+=1)s+=n[o].dataCount;if(r.getLengthInBits()>8*s)throw"code length overflow. ("+r.getLengthInBits()+">"+8*s+")";for(r.getLengthInBits()+4<=8*s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*s||(r.put(236,8),r.getLengthInBits()>=8*s));)r.put(17,8);return function(t,e){for(var i=0,n=0,r=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l,n=Math.max(n,l),r=Math.max(r,c);o[s]=new Array(l);for(var u=0;u<o[s].length;u+=1)o[s][u]=255&t.getBuffer()[u+i];i+=l;var h=y.getErrorCorrectPolynomial(c),p=b(o[s],h.getLength()-1).mod(h);a[s]=new Array(h.getLength()-1);for(u=0;u<a[s].length;u+=1){var d=u+p.getLength()-a[s].length;a[s][u]=0<=d?p.getAt(d):0}}for(var f=0,u=0;u<e.length;u+=1)f+=e[u].totalCount;for(var m=new Array(f),g=0,u=0;u<n;u+=1)for(s=0;s<e.length;s+=1)u<o[s].length&&(m[g]=o[s][u],g+=1);for(u=0;u<r;u+=1)for(s=0;s<e.length;s+=1)u<a[s].length&&(m[g]=a[s][u],g+=1);return m}(r,n)};d.addData=function(t,e){var i=null;switch(e=e||"Byte"){case"Numeric":i=S(t);break;case"Alphanumeric":i=T(t);break;case"Byte":i=P(t);break;case"Kanji":i=D(t);break;default:throw"mode:"+e}c.push(i),n=null},d.isDark=function(t,e){if(t<0||h<=t||e<0||h<=e)throw t+","+e;return u[t][e]},d.getModuleCount=function(){return h},d.make=function(){if(s<1){for(var t=1;t<40;t++){for(var e=C.getRSBlocks(t,l),i=M(),n=0;n<c.length;n++){var r=c[n];i.put(r.getMode(),4),i.put(r.getLength(),y.getLengthInBits(r.getMode(),t)),r.write(i)}for(var o=0,n=0;n<e.length;n++)o+=e[n].dataCount;if(i.getLengthInBits()<=8*o)break}s=t}a(!1,function(){for(var t=0,e=0,i=0;i<8;i+=1){a(!0,i);var n=y.getLostPoint(d);(0==i||n<t)&&(t=n,e=i)}return e}())},d.createTableTag=function(t,e){t=t||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",i+='">',i+="<tbody>";for(var n=0;n<d.getModuleCount();n+=1){i+="<tr>";for(var r=0;r<d.getModuleCount();r+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=d.isDark(n,r)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+="</tbody>",i+="</table>"},d.createSvgTag=function(t,e,i,n){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,i=r.alt,n=r.title),t=t||2,e=void 0===e?4*t:e,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var o,a,s,l=d.getModuleCount()*t+2*e,c="",u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ";for(c+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',c+=r.scalable?"":' width="'+l+'px" height="'+l+'px"',c+=' viewBox="0 0 '+l+" "+l+'" ',c+=' preserveAspectRatio="xMinYMin meet"',c+=n.text||i.text?' role="img" aria-labelledby="'+v([n.id,i.id].join(" ").trim())+'"':"",c+=">",c+=n.text?'<title id="'+v(n.id)+'">'+v(n.text)+"</title>":"",c+=i.text?'<description id="'+v(i.id)+'">'+v(i.text)+"</description>":"",c+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',c+='<path d="',a=0;a<d.getModuleCount();a+=1)for(s=a*t+e,o=0;o<d.getModuleCount();o+=1)d.isDark(a,o)&&(c+="M"+(o*t+e)+","+s+u);return c+='" stroke="transparent" fill="black"/>',c+="</svg>"},d.createDataURL=function(r,t){r=r||2,t=void 0===t?4*r:t;var e=d.getModuleCount()*r+2*t,o=t,a=e-t;return E(e,e,function(t,e){if(o<=t&&t<a&&o<=e&&e<a){var i=Math.floor((t-o)/r),n=Math.floor((e-o)/r);return d.isDark(n,i)?0:1}return 1})},d.createImgTag=function(t,e,i){t=t||2,e=void 0===e?4*t:e;var n=d.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=d.createDataURL(t,e),r+='"',r+=' width="',r+=n,r+='"',r+=' height="',r+=n,r+='"',i&&(r+=' alt="',r+=v(i),r+='"'),r+="/>"};var v=function(t){for(var e="",i=0;i<t.length;i+=1){var n=t.charAt(i);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return d.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;for(var e,i,n,r,o=+d.getModuleCount()+2*t,a=t,s=o-t,l={"":""," ":""," ":"","  ":" "},c={"":""," ":""," ":" ","  ":" "},u="",h=0;h<o;h+=2){for(i=Math.floor(h-a),n=Math.floor(h+1-a),e=0;e<o;e+=1)r="",a<=e&&e<s&&a<=h&&h<s&&d.isDark(i,Math.floor(e-a))&&(r=" "),a<=e&&e<s&&a<=h+1&&h+1<s&&d.isDark(n,Math.floor(e-a))?r+=" ":r+="",u+=t<1&&s<=h+1?c[r]:l[r];u+="\n"}return o%2&&0<t?u.substring(0,u.length-o-1)+Array(1+o).join(""):u.substring(0,u.length-1)}(e);--t,e=void 0===e?2*t:e;for(var i,n,r,o=d.getModuleCount()*t+2*e,a=e,s=o-e,l=Array(t+1).join(""),c=Array(t+1).join("  "),u="",h="",p=0;p<o;p+=1){for(n=Math.floor((p-a)/t),h="",i=0;i<o;i+=1)r=1,a<=i&&i<s&&a<=p&&p<s&&d.isDark(n,Math.floor((i-a)/t))&&(r=0),h+=r?l:c;for(n=0;n<t;n+=1)u+=h+"\n"}return u.substring(0,u.length-1)},d.renderTo2dContext=function(t,e){e=e||2;for(var i=d.getModuleCount(),n=0;n<i;n++)for(var r=0;r<i;r++)t.fillStyle=d.isDark(n,r)?"black":"white",t.fillRect(n*e,r*e,e,e)},d}o.stringToBytes=(o.stringToBytesFuncs={default:function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);e.push(255&n)}return e}}).default,o.createStringToBytes=function(s,l){var o=function(){function t(){var t=e.read();if(-1==t)throw"eof";return t}for(var e=A(s),i=0,n={};;){var r=e.read();if(-1==r)break;var o=t(),a=t()<<8|t();n[String.fromCharCode(r<<8|o)]=a,i+=1}if(i!=l)throw i+" != "+l;return n}(),a="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var n,r=t.charCodeAt(i);r<128?e.push(r):"number"==typeof(n=o[t.charAt(i)])?(255&n)==n?e.push(n):(e.push(n>>>8),e.push(255&n)):e.push(a)}return e}};var e,t,a=1,s=2,r=4,l=8,_={L:1,M:0,Q:3,H:2},i=0,n=1,c=2,u=3,h=4,p=5,d=6,f=7,y=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],(t={}).getBCHTypeInfo=function(t){for(var e=t<<10;0<=m(e)-m(1335);)e^=1335<<m(e)-m(1335);return 21522^(t<<10|e)},t.getBCHTypeNumber=function(t){for(var e=t<<12;0<=m(e)-m(7973);)e^=7973<<m(e)-m(7973);return t<<12|e},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(t){switch(t){case i:return function(t,e){return(t+e)%2==0};case n:return function(t,e){return t%2==0};case c:return function(t,e){return e%3==0};case u:return function(t,e){return(t+e)%3==0};case h:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case p:return function(t,e){return t*e%2+t*e%3==0};case d:return function(t,e){return(t*e%2+t*e%3)%2==0};case f:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},t.getErrorCorrectPolynomial=function(t){for(var e=b([1],0),i=0;i<t;i+=1)e=e.multiply(b([1,g.gexp(i)],0));return e},t.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case a:return 10;case s:return 9;case r:case l:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case a:return 12;case s:return 11;case r:return 16;case l:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case a:return 14;case s:return 13;case r:return 16;case l:return 12;default:throw"mode:"+t}}},t.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;n<e;n+=1)for(var r=0;r<e;r+=1){for(var o=0,a=t.isDark(n,r),s=-1;s<=1;s+=1)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l+=1)r+l<0||e<=r+l||0==s&&0==l||a==t.isDark(n+s,r+l)&&(o+=1);5<o&&(i+=3+o-5)}for(n=0;n<e-1;n+=1)for(r=0;r<e-1;r+=1){var c=0;t.isDark(n,r)&&(c+=1),t.isDark(n+1,r)&&(c+=1),t.isDark(n,r+1)&&(c+=1),t.isDark(n+1,r+1)&&(c+=1),0!=c&&4!=c||(i+=3)}for(n=0;n<e;n+=1)for(r=0;r<e-6;r+=1)t.isDark(n,r)&&!t.isDark(n,r+1)&&t.isDark(n,r+2)&&t.isDark(n,r+3)&&t.isDark(n,r+4)&&!t.isDark(n,r+5)&&t.isDark(n,r+6)&&(i+=40);for(r=0;r<e;r+=1)for(n=0;n<e-6;n+=1)t.isDark(n,r)&&!t.isDark(n+1,r)&&t.isDark(n+2,r)&&t.isDark(n+3,r)&&t.isDark(n+4,r)&&!t.isDark(n+5,r)&&t.isDark(n+6,r)&&(i+=40);for(var u=0,r=0;r<e;r+=1)for(n=0;n<e;n+=1)t.isDark(n,r)&&(u+=1);return i+=10*(Math.abs(100*u/e/e-50)/5)},t);function m(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e}var g=function(){for(var e=new Array(256),i=new Array(256),t=0;t<8;t+=1)e[t]=1<<t;for(t=8;t<256;t+=1)e[t]=e[t-4]^e[t-5]^e[t-6]^e[t-8];for(t=0;t<255;t+=1)i[e[t]]=t;var n={glog:function(t){if(t<1)throw"glog("+t+")";return i[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return e[t]}};return n}();function b(n,r){if(void 0===n.length)throw n.length+"/"+r;var e=function(){for(var t=0;t<n.length&&0==n[t];)t+=1;for(var e=new Array(n.length-t+r),i=0;i<n.length-t;i+=1)e[i]=n[i+t];return e}(),o={getAt:function(t){return e[t]},getLength:function(){return e.length},multiply:function(t){for(var e=new Array(o.getLength()+t.getLength()-1),i=0;i<o.getLength();i+=1)for(var n=0;n<t.getLength();n+=1)e[i+n]^=g.gexp(g.glog(o.getAt(i))+g.glog(t.getAt(n)));return b(e,0)},mod:function(t){if(o.getLength()-t.getLength()<0)return o;for(var e=g.glog(o.getAt(0))-g.glog(t.getAt(0)),i=new Array(o.getLength()),n=0;n<o.getLength();n+=1)i[n]=o.getAt(n);for(n=0;n<t.getLength();n+=1)i[n]^=g.gexp(g.glog(t.getAt(n))+e);return b(i,0).mod(t)}};return o}function v(){var i=[],r={writeByte:function(t){i.push(255&t)},writeShort:function(t){r.writeByte(t),r.writeByte(t>>>8)},writeBytes:function(t,e,i){e=e||0,i=i||t.length;for(var n=0;n<i;n+=1)r.writeByte(t[n+e])},writeString:function(t){for(var e=0;e<t.length;e+=1)r.writeByte(t.charCodeAt(e))},toByteArray:function(){return i},toString:function(){var t="";t+="[";for(var e=0;e<i.length;e+=1)0<e&&(t+=","),t+=i[e];return t+="]"}};return r}function x(){function i(t){a+=String.fromCharCode(e(63&t))}var n=0,r=0,o=0,a="",t={},e=function(t){if(!(t<0)){if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return t.writeByte=function(t){for(n=n<<8|255&t,r+=8,o+=1;6<=r;)i(n>>>r-6),r-=6},t.flush=function(){if(0<r&&(i(n<<6-r),r=n=0),o%3!=0)for(var t=3-o%3,e=0;e<t;e+=1)a+="="},t.toString=function(){return a},t}function w(t,e){var n=t,r=e,f=new Array(t*e),i={setPixel:function(t,e,i){f[e*n+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=o(2);t.writeByte(2);for(var i=0;255<e.length-i;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,i=1+(1<<t),n=t+1,r=m(),o=0;o<e;o+=1)r.add(String.fromCharCode(o));r.add(String.fromCharCode(e)),r.add(String.fromCharCode(i));var a,s,l,c=v(),u=(a=c,l=s=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;8<=s+e;)a.writeByte(255&(t<<s|l)),e-=8-s,t>>>=8-s,s=l=0;l|=t<<s,s+=e},flush:function(){0<s&&a.writeByte(l)}});u.write(e,n);var h=0,p=String.fromCharCode(f[h]);for(h+=1;h<f.length;){var d=String.fromCharCode(f[h]);h+=1,r.contains(p+d)?p+=d:(u.write(r.indexOf(p),n),r.size()<4095&&(r.size()==1<<n&&(n+=1),r.add(p+d)),p=d)}return u.write(r.indexOf(p),n),u.write(i,n),u.flush(),c.toByteArray()},m=function(){var e={},i=0,n={add:function(t){if(n.contains(t))throw"dup key:"+t;e[t]=i,i+=1},size:function(){return i},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return i}var k,L,C=(k=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],(L={}).getRSBlocks=function(t,e){var i=function(t,e){switch(e){case _.L:return k[4*(t-1)+0];case _.M:return k[4*(t-1)+1];case _.Q:return k[4*(t-1)+2];case _.H:return k[4*(t-1)+3];default:return}}(t,e);if(void 0===i)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var n,r,o=i.length/3,a=[],s=0;s<o;s+=1)for(var l=i[3*s+0],c=i[3*s+1],u=i[3*s+2],h=0;h<l;h+=1)a.push((n=u,r=void 0,(r={}).totalCount=c,r.dataCount=n,r));return a},L),M=function(){var i=[],n=0,r={getBuffer:function(){return i},getAt:function(t){var e=Math.floor(t/8);return 1==(i[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)r.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return n},putBit:function(t){var e=Math.floor(n/8);i.length<=e&&i.push(0),t&&(i[e]|=128>>>n%8),n+=1}};return r},S=function(t){var e=a,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+2<e.length;)t.put(r(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(r(e.substring(i,i+1)),4):e.length-i==2&&t.put(r(e.substring(i,i+2)),7))}},r=function(t){for(var e=0,i=0;i<t.length;i+=1)e=10*e+o(t.charAt(i));return e},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return i},T=function(t){var e=s,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+1<e.length;)t.put(45*r(e.charAt(i))+r(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(r(e.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return i},P=function(t){var e=r,i=o.stringToBytes(t),n={getMode:function(){return e},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return n},D=function(t){var e=l,i=o.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(){var t=i("");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var r=i(t),n={getMode:function(){return e},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,i=0;i+1<e.length;){var n=(255&e[i])<<8|255&e[i+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(i+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),i+=2}if(i<e.length)throw"illegal char at "+(i+1)}};return n},A=function(t){var i=t,n=0,r=0,o=0,e={read:function(){for(;o<8;){if(n>=i.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=i.charAt(n);if(n+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(r=r<<6|a(t.charCodeAt(0)),o+=6)}var e=r>>>o-8&255;return o-=8,e}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return e},E=function(t,e,i){for(var n=w(t,e),r=0;r<e;r+=1)for(var o=0;o<t;o+=1)n.setPixel(o,r,i(o,r));var a=v();n.write(a);for(var s=x(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return o}();a.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||57344<=n?e.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},r=[],void 0===(o="function"==typeof(n=function(){return a})?n.apply(e,r):n)||(t.exports=o)},,,function(t,e,i){i(65),i(24),i(25),i(49),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(36),i(37),i(38),i(50),i(51),i(52),t.exports=i(53)},function(t,e,i){var n,r,o;!function(){"use strict";r=[i(41)],void 0===(o="function"==typeof(n=function(Ft,jt){"use strict";var n={beforeShow:t,move:t,change:t,show:t,hide:t,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},Nt=[],Ut=!!/msie/i.exec(window.navigator.userAgent),Ht=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div");var i=e.style;i.cssText="background-color:rgba(0,0,0,.5)";return t(i.backgroundColor,"rgba")||t(i.backgroundColor,"hsla")}(),Gt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Zt=function(){var t="";if(Ut){for(var e=1;e<=6;e++){t+="<div class='sp-"+e+"'></div>"}}return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function Wt(t,e,i,n){var r=[];for(var o=0;o<t.length;o++){var a=t[o];if(a){var s=tinycolor(a);var l=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(e,a)?" sp-thumb-active":"";var c=s.toString(n.preferredFormat||"rgb");var u=Ht?"background-color:"+s.toRgbString():"filter:"+s.toFilter();r.push('<span title="'+c+'" data-color="'+s.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+u+';"></span></span>')}else{var h="sp-clear-display";r.push(Ft("<div />").append(Ft('<span data-color="" style="background-color:transparent;" class="'+h+'"></span>').attr("title",n.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+r.join("")+"</div>"}function Vt(){for(var t=0;t<Nt.length;t++){if(Nt[t]){Nt[t].hide()}}}function qt(t,e){var i=Ft.extend({},n,t);i.callbacks={move:r(i.move,e),change:r(i.change,e),show:r(i.show,e),hide:r(i.hide,e),beforeShow:r(i.beforeShow,e)};return i}function o(t,e){var c=qt(e,t),n=c.flat,i=c.showSelectionPalette,r=c.localStorageKey,o=c.theme,a=c.callbacks,s=Jt(At,10),l=false,u=false,h=0,p=0,d=0,f=0,m=0,g=0,v=0,_=0,y=0,b=0,x=0,w=1,k=[],L=[],C={},M=c.selectionPalette.slice(0),S=c.maxSelectionSize,T="sp-dragging",P=null;var D=t.ownerDocument,A=D.body,E=Ft(t),O=false,I=Ft(Zt,D).addClass(o),B=I.find(".sp-picker-container"),z=I.find(".sp-color"),R=I.find(".sp-dragger"),F=I.find(".sp-hue"),j=I.find(".sp-slider"),N=I.find(".sp-alpha-inner"),U=I.find(".sp-alpha"),H=I.find(".sp-alpha-handle"),G=I.find(".sp-input"),Z=I.find(".sp-palette"),W=I.find(".sp-initial"),V=I.find(".sp-cancel"),q=I.find(".sp-clear"),$=I.find(".sp-choose"),K=I.find(".sp-palette-toggle"),Y=E.is("input"),J=Y&&E.attr("type")==="color"&&Xt(),X=Y&&!n,Q=X?Ft(Gt).addClass(o).addClass(c.className).addClass(c.replacerClassName):Ft([]),tt=X?Q:E,et=Q.find(".sp-preview-inner"),it=c.color||Y&&E.val(),nt=false,rt=c.preferredFormat,ot=!c.showButtons||c.clickoutFiresChange,at=!it,st=c.allowEmpty&&!J;function lt(){if(c.showPaletteOnly){c.showPalette=true}K.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText);if(c.palette){k=c.palette.slice(0);L=Ft.isArray(k[0])?k:[k];C={};for(var t=0;t<L.length;t++){for(var e=0;e<L[t].length;e++){var i=tinycolor(L[t][e]).toRgbString();C[i]=true}}}I.toggleClass("sp-flat",n);I.toggleClass("sp-input-disabled",!c.showInput);I.toggleClass("sp-alpha-enabled",c.showAlpha);I.toggleClass("sp-clear-enabled",st);I.toggleClass("sp-buttons-disabled",!c.showButtons);I.toggleClass("sp-palette-buttons-disabled",!c.togglePaletteOnly);I.toggleClass("sp-palette-disabled",!c.showPalette);I.toggleClass("sp-palette-only",c.showPaletteOnly);I.toggleClass("sp-initial-disabled",!c.showInitial);I.addClass(c.className).addClass(c.containerClassName);At()}function ct(){if(Ut){I.find("*:not(input)").attr("unselectable","on")}lt();if(X){E.after(Q).hide()}if(!st){q.hide()}if(n){E.after(I).hide()}else{var t=c.appendTo==="parent"?E.parent():Ft(c.appendTo);if(t.length!==1){t=Ft("body")}t.append(I)}ut();tt.on("click.spectrum touchstart.spectrum",function(t){if(!O){_t()}t.stopPropagation();if(!Ft(t.target).is("input")){t.preventDefault()}});if(E.is(":disabled")||c.disabled===true){Bt()}I.click(Kt);G.change(vt);G.on("paste",function(){setTimeout(vt,1)});G.keydown(function(t){if(t.keyCode==13){vt()}});V.text(c.cancelText);V.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();kt();wt()});q.attr("title",c.clearText);q.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();at=true;St();if(n){Dt(true)}});$.text(c.chooseText);$.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();if(Ut&&G.is(":focus")){G.trigger("change")}if(Mt()){Dt(true);wt()}});K.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText);K.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();c.showPaletteOnly=!c.showPaletteOnly;if(!c.showPaletteOnly&&!n){I.css("left","-="+(B.outerWidth(true)+5))}lt()});Yt(U,function(t,e,i){w=t/g;at=false;if(i.shiftKey){w=Math.round(w*10)/10}St()},mt,gt);Yt(F,function(t,e){y=parseFloat(e/f);at=false;if(!c.showAlpha){w=1}St()},mt,gt);Yt(z,function(t,e,i){if(!i.shiftKey){P=null}else if(!P){var n=b*h;var r=p-x*p;var o=Math.abs(t-n)>Math.abs(e-r);P=o?"x":"y"}var a=!P||P==="x";var s=!P||P==="y";if(a){b=parseFloat(t/h)}if(s){x=parseFloat((p-e)/p)}at=false;if(!c.showAlpha){w=1}St()},mt,gt);if(!!it){Lt(it);Tt();rt=c.preferredFormat||tinycolor(it).format;ht(it)}else{Tt()}if(n){yt()}function e(t){if(t.data&&t.data.ignore){Lt(Ft(t.target).closest(".sp-thumb-el").data("color"));St()}else{Lt(Ft(t.target).closest(".sp-thumb-el").data("color"));St();if(c.hideAfterPaletteSelect){Dt(true);wt()}else{Dt()}}return false}var i=Ut?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Z.on(i,".sp-thumb-el",e);W.on(i,".sp-thumb-el:nth-child(1)",{ignore:true},e)}function ut(){if(r&&window.localStorage){try{var t=window.localStorage[r].split(",#");if(t.length>1){delete window.localStorage[r];Ft.each(t,function(t,e){ht(e)})}}catch(t){}try{M=window.localStorage[r].split(";")}catch(t){}}}function ht(t){if(i){var e=tinycolor(t).toRgbString();if(!C[e]&&Ft.inArray(e,M)===-1){M.push(e);while(M.length>S){M.shift()}}if(r&&window.localStorage){try{window.localStorage[r]=M.join(";")}catch(t){}}}}function pt(){var t=[];if(c.showPalette){for(var e=0;e<M.length;e++){var i=tinycolor(M[e]).toRgbString();if(!C[i]){t.push(M[e])}}}return t.reverse().slice(0,c.maxSelectionSize)}function dt(){var i=Ct();var t=Ft.map(L,function(t,e){return Wt(t,i,"sp-palette-row sp-palette-row-"+e,c)});ut();if(M){t.push(Wt(pt(),i,"sp-palette-row sp-palette-row-selection",c))}Z.html(t.join(""))}function ft(){if(c.showInitial){var t=nt;var e=Ct();W.html(Wt([t,e],e,"sp-palette-row-initial",c))}}function mt(){if(p<=0||h<=0||f<=0){At()}u=true;I.addClass(T);P=null;E.trigger("dragstart.spectrum",[Ct()])}function gt(){u=false;I.removeClass(T);E.trigger("dragstop.spectrum",[Ct()])}function vt(){var t=G.val();if((t===null||t==="")&&st){Lt(null);St();Dt()}else{var e=tinycolor(t);if(e.isValid()){Lt(e);St();Dt()}else{G.addClass("sp-validation-error")}}}function _t(){if(l){wt()}else{yt()}}function yt(){var t=Ft.Event("beforeShow.spectrum");if(l){At();return}E.trigger(t,[Ct()]);if(a.beforeShow(Ct())===false||t.isDefaultPrevented()){return}Vt();l=true;Ft(D).on("keydown.spectrum",bt);Ft(D).on("click.spectrum",xt);Ft(window).on("resize.spectrum",s);Q.addClass("sp-active");I.removeClass("sp-hidden");At();Tt();nt=Ct();ft();a.show(nt);E.trigger("show.spectrum",[nt])}function bt(t){if(t.keyCode===27){wt()}}function xt(t){if(t.button==2){return}if(u){return}if(ot){Dt(true)}else{kt()}wt()}function wt(){if(!l||n){return}l=false;Ft(D).off("keydown.spectrum",bt);Ft(D).off("click.spectrum",xt);Ft(window).off("resize.spectrum",s);Q.removeClass("sp-active");I.addClass("sp-hidden");a.hide(Ct());E.trigger("hide.spectrum",[Ct()])}function kt(){Lt(nt,true);Dt(true)}function Lt(t,e){if(tinycolor.equals(t,Ct())){Tt();return}var i,n;if(!t&&st){at=true}else{at=false;i=tinycolor(t);n=i.toHsv();y=n.h%360/360;b=n.s;x=n.v;w=n.a}Tt();if(i&&i.isValid()&&!e){rt=c.preferredFormat||i.getFormat()}}function Ct(t){t=t||{};if(st&&at){return null}return tinycolor.fromRatio({h:y,s:b,v:x,a:Math.round(w*1e3)/1e3},{format:t.format||rt})}function Mt(){return!G.hasClass("sp-validation-error")}function St(){Tt();a.move(Ct());E.trigger("move.spectrum",[Ct()])}function Tt(){G.removeClass("sp-validation-error");Pt();var t=tinycolor.fromRatio({h:y,s:1,v:1});z.css("background-color",t.toHexString());var e=rt;if(w<1&&!(w===0&&e==="name")){if(e==="hex"||e==="hex3"||e==="hex6"||e==="name"){e="rgb"}}var i=Ct({format:e}),n="";et.removeClass("sp-clear-display");et.css("background-color","transparent");if(!i&&st){et.addClass("sp-clear-display")}else{var r=i.toHexString(),o=i.toRgbString();if(Ht||i.alpha===1){et.css("background-color",o)}else{et.css("background-color","transparent");et.css("filter",i.toFilter())}if(c.showAlpha){var a=i.toRgb();a.a=0;var s=tinycolor(a).toRgbString();var l="linear-gradient(left, "+s+", "+r+")";if(Ut){N.css("filter",tinycolor(s).toFilter({gradientType:1},r))}else{N.css("background","-webkit-"+l);N.css("background","-moz-"+l);N.css("background","-ms-"+l);N.css("background","linear-gradient(to right, "+s+", "+r+")")}}n=i.toString(e)}if(c.showInput){G.val(n)}if(c.showPalette){dt()}ft()}function Pt(){var t=b;var e=x;if(st&&at){H.hide();j.hide();R.hide()}else{H.show();j.show();R.show();var i=t*h;var n=p-e*p;i=Math.max(-d,Math.min(h-d,i-d));n=Math.max(-d,Math.min(p-d,n-d));R.css({top:n+"px",left:i+"px"});var r=w*g;H.css({left:r-v/2+"px"});var o=y*f;j.css({top:o-_+"px"})}}function Dt(t){var e=Ct(),i="",n=!tinycolor.equals(e,nt);if(e){i=e.toString(rt);ht(e)}if(Y){E.val(i)}if(t&&n){a.change(e);E.trigger("change",[e])}}function At(){if(!l){return}h=z.width();p=z.height();d=R.height();m=F.width();f=F.height();_=j.height();g=U.width();v=H.width();if(!n){I.css("position","absolute");if(c.offset){I.offset(c.offset)}else{I.offset($t(I,tt))}}Pt();if(c.showPalette){dt()}E.trigger("reflow.spectrum")}function Et(){E.show();tt.off("click.spectrum touchstart.spectrum");I.remove();Q.remove();Nt[Rt.id]=null}function Ot(t,e){if(t===jt){return Ft.extend({},c)}if(e===jt){return c[t]}c[t]=e;if(t==="preferredFormat"){rt=c.preferredFormat}lt()}function It(){O=false;E.attr("disabled",false);tt.removeClass("sp-disabled")}function Bt(){wt();O=true;E.attr("disabled",true);tt.addClass("sp-disabled")}function zt(t){c.offset=t;At()}ct();var Rt={show:yt,hide:wt,toggle:_t,reflow:At,option:Ot,enable:It,disable:Bt,offset:zt,set:function(t){Lt(t);Dt()},get:Ct,destroy:Et,container:I};Rt.id=Nt.push(Rt)-1;return Rt}function $t(t,e){var i=0;var n=t.outerWidth();var r=t.outerHeight();var o=e.outerHeight();var a=t[0].ownerDocument;var s=a.documentElement;var l=s.clientWidth+Ft(a).scrollLeft();var c=s.clientHeight+Ft(a).scrollTop();var u=e.offset();var h=u.left;var p=u.top;p+=o;h-=Math.min(h,h+n>l&&l>n?Math.abs(h+n-l):0);p-=Math.min(p,p+r>c&&c>r?Math.abs(r+o-i):i);return{top:p,bottom:u.bottom,left:h,right:u.right,width:u.width,height:u.height}}function t(){}function Kt(t){t.stopPropagation()}function r(t,e){var i=Array.prototype.slice;var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function Yt(a,s,i,t){s=s||function(){};i=i||function(){};t=t||function(){};var l=document;var c=false;var u={};var h=0;var p=0;var d="ontouchstart"in window;var n={};n["selectstart"]=f;n["dragstart"]=f;n["touchmove mousemove"]=r;n["touchend mouseup"]=m;function f(t){if(t.stopPropagation){t.stopPropagation()}if(t.preventDefault){t.preventDefault()}t.returnValue=false}function r(t){if(c){if(Ut&&l.documentMode<9&&!t.button){return m()}var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0];var i=e&&e.pageX||t.pageX;var n=e&&e.pageY||t.pageY;var r=Math.max(0,Math.min(i-u.left,p));var o=Math.max(0,Math.min(n-u.top,h));if(d){f(t)}s.apply(a,[r,o,t])}}function e(t){var e=t.which?t.which==3:t.button==2;if(!e&&!c){if(i.apply(a,arguments)!==false){c=true;h=Ft(a).height();p=Ft(a).width();u=Ft(a).offset();Ft(l).on(n);Ft(l.body).addClass("sp-dragging");r(t);f(t)}}}function m(){if(c){Ft(l).off(n);Ft(l.body).removeClass("sp-dragging");setTimeout(function(){t.apply(a,arguments)},0)}c=false}Ft(a).on("touchstart mousedown",e)}function Jt(n,r,o){var a;return function(){var t=this,e=arguments;var i=function(){a=null;n.apply(t,e)};if(o)clearTimeout(a);if(o||!a)a=setTimeout(i,r)}}function Xt(){return Ft.fn.spectrum.inputTypeColorSupport()}var a="spectrum.id";Ft.fn.spectrum=function(i,t){if(typeof i=="string"){var n=this;var r=Array.prototype.slice.call(arguments,1);this.each(function(){var t=Nt[Ft(this).data(a)];if(t){var e=t[i];if(!e){throw new Error("Spectrum: no such method: '"+i+"'")}if(i=="get"){n=t.get()}else if(i=="container"){n=t.container}else if(i=="option"){n=t.option.apply(t,r)}else if(i=="destroy"){t.destroy();Ft(this).removeData(a)}else{e.apply(t,r)}}});return n}return this.spectrum("destroy").each(function(){var t=Ft.extend({},Ft(this).data(),i);var e=o(this,t);Ft(this).data(a,e.id)})},Ft.fn.spectrum.load=true,Ft.fn.spectrum.loadOpts={},Ft.fn.spectrum.draggable=Yt,Ft.fn.spectrum.defaults=n,Ft.fn.spectrum.inputTypeColorSupport=function t(){if(typeof t._cachedResult==="undefined"){var e=Ft("<input type='color'/>")[0];t._cachedResult=e.type==="color"&&e.value!==""}return t._cachedResult},Ft.spectrum={},Ft.spectrum.localization={},Ft.spectrum.palettes={},Ft.fn.spectrum.processNativeColorInputs=function(){var t=Ft("input[type=color]");if(t.length&&!Xt()){t.spectrum({preferredFormat:"hex6"})}},function(){var n=/^[\s,#]+/,r=/\s+$/,o=0,p=Math,a=p.round,c=p.min,u=p.max,t=p.random;var h=function(t,e){t=t?t:"";e=e||{};if(t instanceof h){return t}if(!(this instanceof h)){return new h(t,e)}var i=s(t);this._originalInput=t;this._r=i.r;this._g=i.g;this._b=i.b;this._a=i.a;this._roundA=a(1e3*this._a)/1e3;this._format=e.format||i.format;this._gradientType=e.gradientType;if(this._r<1){this._r=a(this._r)}if(this._g<1){this._g=a(this._g)}if(this._b<1){this._b=a(this._b)}this._ok=i.ok;this._tc_id=o++};h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},setAlpha:function(t){this._a=O(t);this._roundA=a(1e3*this._a)/1e3;return this},toHsv:function(){var t=m(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=m(this._r,this._g,this._b);var e=a(t.h*360),i=a(t.s*100),n=a(t.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b);var e=a(t.h*360),i=a(t.s*100),n=a(t.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return v(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(I(this._r,255)*100)+"%",g:a(I(this._g,255)*100)+"%",b:a(I(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(I(this._r,255)*100)+"%, "+a(I(this._g,255)*100)+"%, "+a(I(this._b,255)*100)+"%)":"rgba("+a(I(this._r,255)*100)+"%, "+a(I(this._g,255)*100)+"%, "+a(I(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return A[e(this._r,this._g,this._b,true)]||false},toFilter:function(t){var e="#"+v(this._r,this._g,this._b,this._a);var i=e;var n=this._gradientType?"GradientType = 1, ":"";if(t){var r=h(t);i=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=false;var n=this._a<1&&this._a>=0;var r=!e&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="name");if(r){if(t==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(t==="rgb"){i=this.toRgbString()}if(t==="prgb"){i=this.toPercentageRgbString()}if(t==="hex"||t==="hex6"){i=this.toHexString()}if(t==="hex3"){i=this.toHexString(true)}if(t==="hex8"){i=this.toHex8String()}if(t==="name"){i=this.toName()}if(t==="hsl"){i=this.toHslString()}if(t==="hsv"){i=this.toHsvString()}return i||this.toHexString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));this._r=i._r;this._g=i._g;this._b=i._b;this.setAlpha(i._a);return this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(i,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}};h.fromRatio=function(t,e){if(typeof t=="object"){var i={};for(var n in t){if(t.hasOwnProperty(n)){if(n==="a"){i[n]=t[n]}else{i[n]=N(t[n])}}}t=i}return h(t,e)};function s(t){var e={r:0,g:0,b:0};var i=1;var n=false;var r=false;if(typeof t=="string"){t=Z(t)}if(typeof t=="object"){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")){e=l(t.r,t.g,t.b);n=true;r=String(t.r).substr(-1)==="%"?"prgb":"rgb"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")){t.s=N(t.s);t.v=N(t.v);e=g(t.h,t.s,t.v);n=true;r="hsv"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")){t.s=N(t.s);t.l=N(t.l);e=f(t.h,t.s,t.l);n=true;r="hsl"}if(t.hasOwnProperty("a")){i=t.a}}i=O(i);return{ok:n,format:t.format||r,r:c(255,u(e.r,0)),g:c(255,u(e.g,0)),b:c(255,u(e.b,0)),a:i}}function l(t,e,i){return{r:I(t,255)*255,g:I(e,255)*255,b:I(i,255)*255}}function d(t,e,i){t=I(t,255);e=I(e,255);i=I(i,255);var n=u(t,e,i),r=c(t,e,i);var o,a,s=(n+r)/2;if(n==r){o=a=0}else{var l=n-r;a=s>.5?l/(2-n-r):l/(n+r);switch(n){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return{h:o,s:a,l:s}}function f(t,e,i){var n,r,o;t=I(t,360);e=I(e,100);i=I(i,100);function a(t,e,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return t+(e-t)*6*i;if(i<1/2)return e;if(i<2/3)return t+(e-t)*(2/3-i)*6;return t}if(e===0){n=r=o=i}else{var s=i<.5?i*(1+e):i+e-i*e;var l=2*i-s;n=a(l,s,t+1/3);r=a(l,s,t);o=a(l,s,t-1/3)}return{r:n*255,g:r*255,b:o*255}}function m(t,e,i){t=I(t,255);e=I(e,255);i=I(i,255);var n=u(t,e,i),r=c(t,e,i);var o,a,s=n;var l=n-r;a=n===0?0:l/n;if(n==r){o=0}else{switch(n){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return{h:o,s:a,v:s}}function g(t,e,i){t=I(t,360)*6;e=I(e,100);i=I(i,100);var n=p.floor(t),r=t-n,o=i*(1-e),a=i*(1-r*e),s=i*(1-(1-r)*e),l=n%6,c=[i,a,o,o,s,i][l],u=[s,i,i,a,o,o][l],h=[o,o,s,i,i,a][l];return{r:c*255,g:u*255,b:h*255}}function e(t,e,i,n){var r=[j(a(t).toString(16)),j(a(e).toString(16)),j(a(i).toString(16))];if(n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)){return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)}return r.join("")}function v(t,e,i,n){var r=[j(U(n)),j(a(t).toString(16)),j(a(e).toString(16)),j(a(i).toString(16))];return r.join("")}h.equals=function(t,e){if(!t||!e){return false}return h(t).toRgbString()==h(e).toRgbString()};h.random=function(){return h.fromRatio({r:t(),g:t(),b:t()})};function i(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.s-=e/100;i.s=B(i.s);return h(i)}function _(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.s+=e/100;i.s=B(i.s);return h(i)}function y(t){return h(t).desaturate(100)}function b(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.l+=e/100;i.l=B(i.l);return h(i)}function x(t,e){e=e===0?0:e||10;var i=h(t).toRgb();i.r=u(0,c(255,i.r-a(255*-(e/100))));i.g=u(0,c(255,i.g-a(255*-(e/100))));i.b=u(0,c(255,i.b-a(255*-(e/100))));return h(i)}function w(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.l-=e/100;i.l=B(i.l);return h(i)}function k(t,e){var i=h(t).toHsl();var n=(a(i.h)+e)%360;i.h=n<0?360+n:n;return h(i)}function L(t){var e=h(t).toHsl();e.h=(e.h+180)%360;return h(e)}function C(t){var e=h(t).toHsl();var i=e.h;return[h(t),h({h:(i+120)%360,s:e.s,l:e.l}),h({h:(i+240)%360,s:e.s,l:e.l})]}function M(t){var e=h(t).toHsl();var i=e.h;return[h(t),h({h:(i+90)%360,s:e.s,l:e.l}),h({h:(i+180)%360,s:e.s,l:e.l}),h({h:(i+270)%360,s:e.s,l:e.l})]}function S(t){var e=h(t).toHsl();var i=e.h;return[h(t),h({h:(i+72)%360,s:e.s,l:e.l}),h({h:(i+216)%360,s:e.s,l:e.l})]}function T(t,e,i){e=e||6;i=i||30;var n=h(t).toHsl();var r=360/i;var o=[h(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;){n.h=(n.h+r)%360;o.push(h(n))}return o}function P(t,e){e=e||6;var i=h(t).toHsv();var n=i.h,r=i.s,o=i.v;var a=[];var s=1/e;while(e--){a.push(h({h:n,s:r,v:o}));o=(o+s)%1}return a}h.mix=function(t,e,i){i=i===0?0:i||50;var n=h(t).toRgb();var r=h(e).toRgb();var o=i/100;var a=o*2-1;var s=r.a-n.a;var l;if(a*s==-1){l=a}else{l=(a+s)/(1+a*s)}l=(l+1)/2;var c=1-l;var u={r:r.r*l+n.r*c,g:r.g*l+n.g*c,b:r.b*l+n.b*c,a:r.a*o+n.a*(1-o)};return h(u)};h.readability=function(t,e){var i=h(t);var n=h(e);var r=i.toRgb();var o=n.toRgb();var a=i.getBrightness();var s=n.getBrightness();var l=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:l}};h.isReadable=function(t,e){var i=h.readability(t,e);return i.brightness>125&&i.color>500};h.mostReadable=function(t,e){var i=null;var n=0;var r=false;for(var o=0;o<e.length;o++){var a=h.readability(t,e[o]);var s=a.brightness>125&&a.color>500;var l=3*(a.brightness/125)+a.color/500;if(s&&!r||s&&r&&l>n||!s&&!r&&l>n){r=s;n=l;i=h(e[o])}}return i};var D=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var A=h.hexNames=E(D);function E(t){var e={};for(var i in t){if(t.hasOwnProperty(i)){e[t[i]]=i}}return e}function O(t){t=parseFloat(t);if(isNaN(t)||t<0||t>1){t=1}return t}function I(t,e){if(R(t)){t="100%"}var i=F(t);t=c(e,u(0,parseFloat(t)));if(i){t=parseInt(t*e,10)/100}if(p.abs(t-e)<1e-6){return 1}return t%e/parseFloat(e)}function B(t){return c(1,u(0,t))}function z(t){return parseInt(t,16)}function R(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function F(t){return typeof t==="string"&&t.indexOf("%")!=-1}function j(t){return t.length==1?"0"+t:""+t}function N(t){if(t<=1){t=t*100+"%"}return t}function U(t){return Math.round(parseFloat(t)*255).toString(16)}function H(t){return z(t)/255}var G=function(){var t="[-\\+]?\\d+%?";var e="[-\\+]?\\d*\\.\\d+%?";var i="(?:"+e+")|(?:"+t+")";var n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";var r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Z(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e=false;if(D[t]){t=D[t];e=true}else if(t=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var i;if(i=G.rgb.exec(t)){return{r:i[1],g:i[2],b:i[3]}}if(i=G.rgba.exec(t)){return{r:i[1],g:i[2],b:i[3],a:i[4]}}if(i=G.hsl.exec(t)){return{h:i[1],s:i[2],l:i[3]}}if(i=G.hsla.exec(t)){return{h:i[1],s:i[2],l:i[3],a:i[4]}}if(i=G.hsv.exec(t)){return{h:i[1],s:i[2],v:i[3]}}if(i=G.hsva.exec(t)){return{h:i[1],s:i[2],v:i[3],a:i[4]}}if(i=G.hex8.exec(t)){return{a:H(i[1]),r:z(i[2]),g:z(i[3]),b:z(i[4]),format:e?"name":"hex8"}}if(i=G.hex6.exec(t)){return{r:z(i[1]),g:z(i[2]),b:z(i[3]),format:e?"name":"hex"}}if(i=G.hex3.exec(t)){return{r:z(i[1]+""+i[1]),g:z(i[2]+""+i[2]),b:z(i[3]+""+i[3]),format:e?"name":"hex"}}return false}window.tinycolor=h}(),Ft(function(){if(Ft.fn.spectrum.load){Ft.fn.spectrum.processNativeColorInputs()}})})?n.apply(e,r):n)||(t.exports=o)}()},function(t,e){function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,n;n={},r.m=i=[function(t,e,i){var r=i(127);t.exports=function(t,e,i){var n=null==t?void 0:r(t,e);return void 0===n?i:n}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,i){var n=i(27),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var i=Array.isArray;t.exports=i},function(t,o,e){"use strict";function s(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return 0!==i.id&&!i.id||(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,i){return void 0===i&&(i={}),s({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,i)}function a(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,i)}function l(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function c(t,e,i){return void 0===i&&(i={}),s({type:"MultiLineString",coordinates:t},e,i)}function u(t,e,i){return void 0===i&&(i={}),s({type:"MultiPoint",coordinates:t},e,i)}function h(t,e,i){return void 0===i&&(i={}),s({type:"MultiPolygon",coordinates:t},e,i)}function p(t,e){void 0===e&&(e="kilometers");var i=o.factors[e];if(!i)throw new Error(e+" units is invalid");return t*i}function d(t,e){void 0===e&&(e="kilometers");var i=o.factors[e];if(!i)throw new Error(e+" units is invalid");return t/i}function i(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=s,o.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return n(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return c(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},o.point=n,o.points=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return n(t,e)}),i)},o.polygon=r,o.polygons=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return r(t,e)}),i)},o.lineString=a,o.lineStrings=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return a(t,e)}),i)},o.featureCollection=l,o.multiLineString=c,o.multiPoint=u,o.multiPolygon=h,o.geometryCollection=function(t,e,i){return void 0===i&&(i={}),s({type:"GeometryCollection",geometries:t},e,i)},o.round=function(t,e){if(void 0===e&&(e=0),e&&!(0<=e))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},o.radiansToLength=p,o.lengthToRadians=d,o.lengthToDegrees=function(t,e){return i(d(t,e))},o.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},o.radiansToDegrees=i,o.degreesToRadians=function(t){return t%360*Math.PI/180},o.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("length must be a positive number");return p(d(t,e),i)},o.convertArea=function(t,e,i){if(void 0===e&&(e="meters"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("area must be a positive number");var n=o.areaFactors[e];if(!n)throw new Error("invalid original units");var r=o.areaFactors[i];if(!r)throw new Error("invalid final units");return t/n*r},o.isNumber=f,o.isObject=function(t){return!!t&&t.constructor===Object},o.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!f(t))throw new Error("bbox must only contain numbers")})},o.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},o.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},o.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},o.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},o.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},o.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},o.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},o.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=i(5);e.default=function(t){var e,i,_={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)e=[i.coordinates];else if("MultiLineString"===i.type)e=i.coordinates;else if("MultiPolygon"===i.type)e=[].concat.apply([],i.coordinates);else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=i.coordinates}return e.forEach(function(v){e.forEach(function(t){for(var e,i,n,r,o,a,s,l,c,u,h,p,d,f=0;f<v.length-1;f++)for(var m=f;m<t.length-1;m++){if(v===t){if(1===Math.abs(f-m))continue;if(0===f&&m===v.length-2&&v[f][0]===v[v.length-1][0]&&v[f][1]===v[v.length-1][1])continue}var g=(e=v[f][0],i=v[f][1],n=v[f+1][0],r=v[f+1][1],o=t[m][0],a=t[m][1],s=t[m+1][0],l=t[m+1][1],d=p=h=u=c=void 0,d={x:null,y:null,onLine1:!1,onLine2:!1},0==(c=(l-a)*(n-e)-(s-o)*(r-i))?null!==d.x&&null!==d.y&&d:(p=(n-e)*(u=i-a)-(r-i)*(h=e-o),u=((s-o)*u-(l-a)*h)/c,h=p/c,d.x=e+u*(n-e),d.y=i+u*(r-i),0<=u&&u<=1&&(d.onLine1=!0),0<=h&&h<=1&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y]));g&&_.features.push(y.point([g[0],g[1]]))}})}),_}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var v=i(5),_=i(40),s=n(i(138)),l=i(14),c=n(i(139));function u(t,e){var i=_.getCoords(t),n=_.getCoords(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=i[0][0],o=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],c=n[0][1],u=n[1][0],h=n[1][1],p=(h-c)*(a-r)-(u-l)*(s-o);if(0==p)return null;var d=((u-l)*(o-c)-(h-c)*(r-l))/p,f=((a-r)*(o-c)-(s-o)*(r-l))/p;if(0<=d&&d<=1&&0<=f&&f<=1){var m=r+d*(a-r),g=o+d*(s-o);return v.point([m,g])}return null}e.default=function(t,e){var r={},o=[];if("LineString"===t.type&&(t=v.feature(t)),"LineString"===e.type&&(e=v.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=u(t,e);return i&&o.push(i),v.featureCollection(o)}var a=c.default();return a.load(s.default(e)),l.featureEach(s.default(t),function(n){l.featureEach(a.search(n),function(t){var e,i=u(n,t);i&&(e=_.getCoords(i).join(","),r[e]||(r[e]=!0,o.push(i)))})}),v.featureCollection(o)}},function(t,e,i){var n=i(17),r=i(75),o=i(76),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(a&&a in Object(t)?r:o)(t)}},function(t,e,i){var n=i(63),r=i(64),o=i(65),a=i(66),s=i(67);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(11);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,i){var n=i(15)(Object,"create");t.exports=n},function(t,e,i){var n=i(89);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m=i(5);function w(t,e,i){if(null!==t)for(var n,r,o,a,s,l,c,u,h=0,p=t.type,d="FeatureCollection"===p,f="Feature"===p,m=d?t.features.length:1,g=0;g<m;g++){s=(u=!!(c=d?t.features[g].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var _=0,y=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type,x=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===e(l,h,g,_,y))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],h,g,_,y))return!1;h++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(r=0;r<l[n].length-x;r++){if(!1===e(l[n][r],h,g,_,y))return!1;h++}"MultiLineString"===b&&_++,"Polygon"===b&&y++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(r=y=0;r<l[n].length;r++){for(o=0;o<l[n][r].length-x;o++){if(!1===e(l[n][r][o],h,g,_,y))return!1;h++}y++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===w(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function n(t,e){for(var i,n,r,o,a,s,l,c,u,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,f=p?t.features.length:1,m=0;m<f;m++){for(a=p?t.features[m].geometry:d?t.geometry:t,l=p?t.features[m].properties:d?t.properties:{},c=p?t.features[m].bbox:d?t.bbox:void 0,u=p?t.features[m].id:d?t.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<o;n++)if(null!==(r=s?a.geometries[n]:a))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,h,l,c,u))return!1;break;case"GeometryCollection":for(i=0;i<r.geometries.length;i++)if(!1===e(r.geometries[i],h,l,c,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return!1;h++}}function s(t,c){n(t,function(t,e,i,n,r){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==c(m.feature(t,i,{bbox:n,id:r}),e,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<t.coordinates.length;s++){var l={type:o,coordinates:t.coordinates[s]};if(!1===c(m.feature(l,i),e,s))return!1}})}function r(t,f){s(t,function(a,s,l){var c=0;if(a.geometry){var t=a.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var u,h=0,p=0,d=0;return!1!==w(a,function(t,e,i,n,r){if(void 0===u||h<s||p<n||d<r)return u=t,h=s,p=n,d=r,void(c=0);var o=m.lineString([u,t],a.properties);if(!1===f(o,s,l,r,c))return!1;c++,u=t})&&void 0}}})}function l(t,a){if(!t)throw new Error("geojson is required");s(t,function(t,e,i){if(null!==t.geometry){var n=t.geometry.type,r=t.geometry.coordinates;switch(n){case"LineString":if(!1===a(t,e,i,0,0))return!1;break;case"Polygon":for(var o=0;o<r.length;o++)if(!1===a(m.lineString(r[o],t.properties),e,i,o))return!1}}})}e.coordEach=w,e.coordReduce=function(t,o,a,e){var s=a;return w(t,function(t,e,i,n,r){s=0===e&&void 0===a?t:o(s,t,e,i,n,r)},e),s},e.propEach=o,e.propReduce=function(t,i,n){var r=n;return o(t,function(t,e){r=0===e&&void 0===n?t:i(r,t,e)}),r},e.featureEach=a,e.featureReduce=function(t,i,n){var r=n;return a(t,function(t,e){r=0===e&&void 0===n?t:i(r,t,e)}),r},e.coordAll=function(t){var e=[];return w(t,function(t){e.push(t)}),e},e.geomEach=n,e.geomReduce=function(t,o,a){var s=a;return n(t,function(t,e,i,n,r){s=0===e&&void 0===a?t:o(s,t,e,i,n,r)}),s},e.flattenEach=s,e.flattenReduce=function(t,n,r){var o=r;return s(t,function(t,e,i){o=0===e&&0===i&&void 0===r?t:n(o,t,e,i)}),o},e.segmentEach=r,e.segmentReduce=function(t,o,a){var s=a,l=!1;return r(t,function(t,e,i,n,r){s=!1===l&&void 0===a?t:o(s,t,e,i,n,r),l=!0}),s},e.lineEach=l,e.lineReduce=function(t,r,o){var a=o;return l(t,function(t,e,i,n){a=0===e&&void 0===o?t:r(a,t,e,i,n)}),a},e.findSegment=function(t,e){if(e=e||{},!m.isObject(e))throw new Error("options is invalid");var i,n=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),s=s||t.features[n].properties,i=t.features[n].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),m.lineString([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),m.lineString([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return r<0&&(r=l.length+r),a<0&&(a=l[r].length+a-1),m.lineString([l[r][a],l[r][a+1]],s,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),a<0&&(a=l[r][o].length-a-1),m.lineString([l[r][o][a],l[r][o][a+1]],s,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!m.isObject(e))throw new Error("options is invalid");var i,n=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),s=s||t.features[n].properties,i=t.features[n].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":return m.point(l,s,e);case"MultiPoint":return r<0&&(r=l.length+r),m.point(l[r],s,e);case"LineString":return a<0&&(a=l.length+a),m.point(l[a],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),m.point(l[o][a],s,e);case"MultiLineString":return r<0&&(r=l.length+r),a<0&&(a=l[r].length+a),m.point(l[r][a],s,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),a<0&&(a=l[r][o].length-a),m.point(l[r][o][a],s,e)}throw new Error("geojson is invalid")}},function(t,e,i){var n=i(73),r=i(80);t.exports=function(t,e){var i=r(t,e);return n(i)?i:void 0}},function(t,e,i){var n=i(8),r=i(1);t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,i){var n=i(2).Symbol;t.exports=n},function(t,e,i){var n=i(30);t.exports=function(t,e,i){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var n=i(104),r=i(3),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,i){var n=i(16),r=i(22);t.exports=function(t){return null!=t&&r(t.length)&&!n(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&-1<t&&t%1==0&&t<e}},function(t,e,i){var n=i(8),r=i(3);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==n(t)}},function(t,e,i){(function(K){t.exports=function(){"use strict";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var u=function t(e,i){l(this,t),this.next=null,this.key=e,this.data=i,this.left=null,this.right=null};function e(t,e){return e<t?1:t<e?-1:0}function c(t,e,i){for(var n=new u(null,null),r=n,o=n;;){var a=i(t,e.key);if(a<0){if(null===e.left)break;if(i(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,e=(o=e).left}else{if(!(0<a))break;if(null===e.right)break;if(0<i(t,e.right.key)){var l=e.right;if(e.right=l.left,l.left=e,null===(e=l).right)break}r.right=e,e=(r=e).right}}return r.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function h(t,e,i,n){var r=new u(t,e);if(null===i)return r.left=r.right=null,r;var o=n(t,(i=c(t,i,n)).key);return o<0?(r.left=i.left,(r.right=i).left=null):0<=o&&(r.right=i.right,(r.left=i).right=null),r}function p(t,e,i){var n,r=null,o=null;return e&&(0===(n=i((e=c(t,e,i)).key,t))?(r=e.left,o=e.right):n<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)),{left:r,right:o}}function d(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y}function P(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}}var D=(t(i,[{key:"insert",value:function(t,e){return this._size++,this._root=h(t,e,this._root,this._comparator)}},{key:"add",value:function(t,e){var i=new u(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var n=this._comparator,r=c(t,this._root,n),o=n(t,r.key);return 0===o?this._root=r:(o<0?(i.left=r.left,(i.right=r).left=null):0<o&&(i.right=r.right,(i.left=r).right=null),this._size++,this._root=i),this._root}},{key:"remove",value:function(t){this._root=this._remove(t,this._root,this._comparator)}},{key:"_remove",value:function(t,e,i){var n;return null===e?null:0===i(t,(e=c(t,e,i)).key)?(null===e.left?n=e.right:(n=c(t,e.left,i)).right=e.right,this._size--,n):e}},{key:"pop",value:function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=c(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null}},{key:"findStatic",value:function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null}},{key:"find",value:function(t){return this._root&&(this._root=c(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root}},{key:"contains",value:function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1}},{key:"forEach",value:function(t,e){for(var i=this._root,n=[],r=!1;!r;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):r=!0;return this}},{key:"range",value:function(t,e,i,n){for(var r=[],o=this._comparator,a=this._root;0!==r.length||a;)if(a)r.push(a),a=a.left;else{if(0<o((a=r.pop()).key,e))break;if(0<=o(a.key,t)&&i.call(n,a))return this;a=a.right}return this}},{key:"keys",value:function(){var i=[];return this.forEach(function(t){var e=t.key;return i.push(e)}),i}},{key:"values",value:function(){var i=[];return this.forEach(function(t){var e=t.data;return i.push(e)}),i}},{key:"min",value:function(){return this._root?this.minNode(this._root).key:null}},{key:"max",value:function(){return this._root?this.maxNode(this._root).key:null}},{key:"minNode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.left;)t=t.left;return t}},{key:"maxNode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.right;)t=t.right;return t}},{key:"at",value:function(t){for(var e=this._root,i=!1,n=0,r=[];!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null}},{key:"next",value:function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;e=r<0?(i=e).left:e.right}return i}},{key:"prev",value:function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;e=r<0?e.left:(i=e).right}return i}},{key:"clear",value:function(){return this._root=null,this._size=0,this}},{key:"toList",value:function(){return function(t){for(var e=t,i=[],n=!1,r=new u(null,null),o=r;!n;)e?(i.push(e),e=e.left):0<i.length?e=(e=o=o.next=i.pop()).right:n=!0;return o.next=null,r.next}(this._root)}},{key:"load",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=t.length,o=this._comparator;return n&&function t(e,i,n,r,o){if(!(r<=n)){for(var a=e[n+r>>1],s=n-1,l=r+1;;){for(;o(e[++s],a)<0;);for(;0<o(e[--l],a););if(l<=s)break;var c=e[s];e[s]=e[l],e[l]=c,c=i[s],i[s]=i[l],i[l]=c}t(e,i,n,l,o),t(e,i,l+1,r,o)}}(t,i,0,r-1,o),null===this._root?(this._root=function t(e,i,n,r){var o=r-n;if(0<o){var a=n+Math.floor(o/2),s=e[a],l=i[a],c=new u(s,l);return c.left=t(e,i,n,a),c.right=t(e,i,a+1,r),c}return null}(t,i,0,r),this._size=r):(e=function(t,e,i){for(var n=new u(null,null),r=n,o=t,a=e;null!==o&&null!==a;)i(o.key,a.key)<0?o=(r.next=o).next:a=(r.next=a).next,r=r.next;return null!==o?r.next=o:null!==a&&(r.next=a),n.next}(this.toList(),function(t,e){for(var i=new u(null,null),n=i,r=0;r<t.length;r++)n=n.next=new u(t[r],e[r]);return n.next=null,i.next}(t,i),o),r=this._size+r,this._root=function t(e,i,n){var r=n-i;if(0<r){var o=i+Math.floor(r/2),a=t(e,i,o),s=e.head;return s.left=a,e.head=e.head.next,s.right=t(e,o+1,n),s}return null}({head:e},0,r)),this}},{key:"isEmpty",value:function(){return null===this._root}},{key:"toString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(t){return String(t.key)},e=[];return function t(e,i,n,r,o){var a;e&&(r("".concat(i).concat(n?" ":" ").concat(o(e),"\n")),a=i+(n?"    ":"   "),e.left&&t(e.left,a,!1,r,o),e.right&&t(e.right,a,!0,r,o))}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")}},{key:"update",value:function(t,e,i){var n,r,o=this._comparator,a=p(t,this._root,o),s=a.left,l=a.right;o(t,e)<0?l=h(e,i,l,o):s=h(e,i,s,o),this._root=(n=s,null===(r=l)?n:(null===n||((r=c(n.key,r,o)).left=n),r))}},{key:"split",value:function(t){return p(t,this._root,this._comparator)}},{key:"size",get:function(){return this._size}},{key:"root",get:function(){return this._root}}]),i),r=Number.EPSILON;function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:e;l(this,i),this._root=null,this._size=0,this._comparator=t}void 0===r&&(r=Math.pow(2,-52));function a(t,e){if(-r<t&&t<r&&-r<e&&e<r)return 0;var i=t-e;return i*i<o*t*e?0:t<e?-1:1}function m(t,e){return t.x*e.y-t.y*e.x}function g(t,e){return t.x*e.x+t.y*e.y}function f(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y},o=m(n,r);return a(o,0)}function v(t){return Math.sqrt(g(t,t))}function _(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}}function y(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}}var o=r*r,s=(t($,[{key:"reset",value:function(){this.xRounder=new b,this.yRounder=new b}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),$),b=(t(q,[{key:"round",value:function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===a(e.key,i.key))return this.tree.remove(t),i.key;var n=this.tree.next(e);return null!==n&&0===a(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),q),A=new s,E=(t(V,null,[{key:"compare",value:function(t,e){var i=V.comparePoints(t.point,e.point);return 0!==i?i:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:w.compare(t.segment,e.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),t(V,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var r=e[i];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var n=e+1;n<t;n++){var r=this.point.events[n];void 0===r.consumedBy&&i.otherSE.point.events===r.otherSE.point.events&&i.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(p){function l(t){var e,i,n,r,o,a,s,l,c,u,h=t.otherSE;f.set(t,{sine:(a=d.point,s=p.point,l=h.point,c={x:s.x-a.x,y:s.y-a.y},u={x:l.x-a.x,y:l.y-a.y},m(u,c)/v(u)/v(c)),cosine:(e=d.point,i=p.point,n=h.point,r={x:i.x-e.x,y:i.y-e.y},o={x:n.x-e.x,y:n.y-e.y},g(o,r)/v(o)/v(r))})}var d=this,f=new Map;return function(t,e){f.has(t)||l(t),f.has(e)||l(e);var i=f.get(t),n=i.sine,r=i.cosine,o=f.get(e),a=o.sine,s=o.cosine;return 0<=n&&0<=a?r<s?1:s<r?-1:0:n<0&&a<0?r<s?-1:s<r?1:0:a<n?-1:n<a?1:0}}}]),V),x=0,w=(t(W,null,[{key:"compare",value:function(t,e){var i=t.leftSE.point.x,n=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<i)return 1;if(r<n)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(i<n){if(s<a&&s<l)return 1;if(a<s&&l<s)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(0<u)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n<i){if(a<s&&a<c)return-1;if(s<a&&c<a)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return!(d<0)&&0<d?-1:1}if(a<s)return-1;if(s<a)return 1;if(r<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(o<r){var m=t.comparePoint(e.rightSE.point);if(m<0)return 1;if(0<m)return-1}if(r!==o){var g=l-a,v=r-i,_=c-s,y=o-n;if(v<g&&_<y)return 1;if(g<v&&y<_)return-1}return o<r?1:r<o||l<c?-1:c<l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),t(W,[{key:"replaceRightSE",value:function(t){this.rightSE=t,(this.rightSE.segment=this).rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:e<t?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/n.y,o=e.x+r*n.x;if(t.x===o)return 0;var a=(t.x-e.x)/n.x,s=e.y+a*n.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),i=t.bbox(),n=P(e,i);if(null===n)return null;var r=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=d(e,a)&&0===this.comparePoint(a),c=d(i,r)&&0===t.comparePoint(r),u=d(e,s)&&0===this.comparePoint(s),h=d(i,o)&&0===t.comparePoint(o);if(c&&l)return h&&!u?o:!h&&u?s:null;if(c)return u&&r.x===s.x&&r.y===s.y?null:r;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&u)return null;if(h)return o;if(u)return s;var p=function(t,e,i,n){if(0===e.x)return y(i,n,t.x);if(0===n.x)return y(t,e,i.x);if(0===e.y)return _(i,n,t.y);if(0===n.y)return _(t,e,i.y);var r=m(e,n);if(0==r)return null;var o={x:i.x-t.x,y:i.y-t.y},a=m(o,e)/r,s=m(o,n)/r;return{x:(t.x+s*e.x+(i.x+a*n.x))/2,y:(t.y+s*e.y+(i.y+a*n.y))/2}}(r,this.vector(),a,t.vector());return null!==p&&d(n,p)?A.round(p.x,p.y):null}},{key:"split",value:function(t){var e=[],i=void 0!==t.events,n=new E(t,!0),r=new E(t,!1),o=this.rightSE;this.replaceRightSE(r),e.push(r),e.push(n);var a=new W(n,o,this.rings.slice(),this.windings.slice());return 0<E.comparePoints(a.leftSE.point,a.rightSE.point)&&a.swapEvents(),0<E.comparePoints(this.leftSE.point,this.rightSE.point)&&this.swapEvents(),i&&(n.checkForConsuming(),r.checkForConsuming()),e}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var e=this,i=t;e.consumedBy;)e=e.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var n,r,o=W.compare(e,i);if(0!==o){0<o&&(n=e,e=i,i=n),e.prev===i&&(r=e,e=i,i=r);for(var a=0,s=i.rings.length;a<s;a++){var l=i.rings[a],c=i.windings[a],u=e.rings.indexOf(l);-1===u?(e.rings.push(l),e.windings.push(c)):e.windings[u]+=c}i.rings=null,i.windings=null,i.consumedBy=e,i.leftSE.consumedBy=e.leftSE,i.rightSE.consumedBy=e.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this.prev?(t=this.prev.consumedBy||this.prev,this._beforeState=t.afterState()):this._beforeState={rings:[],windings:[],multiPolys:[]}),this._beforeState;var t}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var a=this.rings[r],s=this.windings[r],l=e.indexOf(a);-1===l?(e.push(a),i.push(s)):i[l]+=s}for(var c,u,h,p=[],d=[],f=0,m=e.length;f<m;f++){0!==i[f]&&(u=(c=e[f]).poly,-1===d.indexOf(u)&&(c.isExterior?p.push(u):(-1===d.indexOf(u)&&d.push(u),-1!==(h=p.indexOf(c.poly))&&p.splice(h,1))))}for(var g=0,v=p.length;g<v;g++){var _=p[g].multiPoly;-1===n.indexOf(_)&&n.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(j.type){case"union":var i=0===t.length,n=0===e.length;this._isInResult=i!=n;break;case"intersection":var r,o=t.length<e.length?(r=t.length,e.length):(r=e.length,t.length);this._isInResult=o===j.numMultiPolys&&r<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(j.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,e,i){var n,r,o,a=E.comparePoints(t,e);if(a<0)n=t,r=e,o=1;else{if(!(0<a))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));n=e,r=t,o=-1}return new W(new E(n,!0),new E(r,!1),[i],[o])}}]),W),k=(t(Z,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),Z),L=(t(G,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var n=this.interiorRings[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}}]),G),O=(t(H,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var n=this.polys[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}}]),H),I=(t(U,null,[{key:"factory",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(r.isInResult()&&!r.ringOut){for(var o,a=r.leftSE,s=r.rightSE,l=[a],c=a.point,u=[];o=a,a=s,l.push(a),a.point!==c;)for(;;){var h=a.getAvailableLinkedEvents();if(0===h.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===h.length){s=h[0].otherSE;break}for(var f=null,m=0,g=u.length;m<g;m++)if(u[m].point===a.point){f=m;break}if(null===f){u.push({index:l.length,point:a.point});var v=a.getLeftmostComparator(o),s=h.sort(v)[0].otherSE;break}var _=u.splice(f)[0],y=l.splice(_.index);y.unshift(y[0].otherSE),e.push(new U(y.reverse()))}e.push(new U(l))}}return e}}]),t(U,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var r=this.events[i].point,o=this.events[i+1].point;0!==f(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var a=e[0],s=e[1];0===f(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,h=[],p=c;p!=u;p+=l)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){var t;return void 0===this._isExteriorRing&&(t=this.enclosingRing(),this._isExteriorRing=!t||!t.isExteriorRing()),this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var n=this.events[e];0<E.compare(t,n)&&(t=n)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();o=(r=o.prevInResult())?r.prevInResult():null}}}]),U),C=(t(N,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),N),B=(t(T,[{key:"getGeom",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r,o=t[i];o.poly||(o.isExteriorRing()?e.push(new C(o)):((r=o.enclosingRing()).poly||e.push(new C(r)),r.poly.addInterior(o)))}return e}}]),T),z=(t(S,[{key:"process",value:function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=n,o=n,a=void 0,s=void 0;void 0===a;)null===(r=this.tree.prev(r))?a=null:void 0===r.key.consumedBy&&(a=r.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var u=this._splitSafely(a,c),h=0,p=u.length;h<p;h++)i.push(u[h])}var d=null;if(s){var f=s.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!s.isAnEndpoint(f)))for(var m=this._splitSafely(s,f),g=0,v=m.length;g<v;g++)i.push(m[g])}if(null!==l||null!==d){var _=null,_=null!==l&&(null===d||E.comparePoints(l,d)<=0)?l:d;this.queue.remove(e.rightSE),i.push(e.rightSE);for(var y=e.split(_),b=0,x=y.length;b<x;b++)i.push(y[b])}0<i.length?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var k=this._splitSafely(a,w),L=0,C=k.length;L<C;L++)i.push(k[L]);if(!s.isAnEndpoint(w))for(var M=this._splitSafely(s,w),S=0,T=M.length;S<T;S++)i.push(M[S])}}this.tree.remove(e)}return i}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var n=t.split(e);return n.push(i),void 0===t.consumedBy&&this.tree.insert(t),n}}]),S),R=void 0!==K&&K.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,F=void 0!==K&&K.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,j=(t(M,[{key:"run",value:function(t,e,i){j.type=t,A.reset();for(var n=[new O(e,!0)],r=0,o=i.length;r<o;r++)n.push(new O(i[r],!1));if(j.numMultiPolys=n.length,"difference"===j.type)for(var a=n[0],s=1;s<n.length;)null!==P(n[s].bbox,a.bbox)?s++:n.splice(s,1);if("intersection"===j.type)for(var l=0,c=n.length;l<c;l++)for(var u=n[l],h=l+1,p=n.length;h<p;h++)if(null===P(u.bbox,n[h].bbox))return[];for(var d=new D(E.compare),f=0,m=n.length;f<m;f++)for(var g=n[f].getSweepEvents(),v=0,_=g.length;v<_;v++)if(d.insert(g[v]),d.size>R)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var y=new z(d),b=d.size,x=d.pop();x;){var w=x.key;if(d.size===b){var k=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(k.id," ")+"[".concat(k.leftSE.point.x,", ").concat(k.leftSE.point.y,"] -> ")+"[".concat(k.rightSE.point.x,", ").concat(k.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>R)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(y.segments.length>F)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var L=y.process(w),C=0,M=L.length;C<M;C++){var S=L[C];void 0===S.consumedBy&&d.insert(S)}b=d.size,x=d.pop()}A.reset();var T=I.factory(y.segments);return new B(T).getGeom()}}]),new M);function M(){l(this,M)}function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:w.compare;l(this,S),this.queue=t,this.tree=new D(e),this.segments=[]}function T(t){l(this,T),this.rings=t,this.polys=this._composePolys(t)}function N(t){l(this,N),((this.exteriorRing=t).poly=this).interiorRings=[]}function U(t){l(this,U);for(var e=0,i=(this.events=t).length;e<i;e++)t[e].segment.ringOut=this;this.poly=null}function H(t,e){if(l(this,H),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,n=t.length;i<n;i++){var r=new L(t[i],this);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}function G(t,e){if(l(this,G),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new k(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,n=t.length;i<n;i++){var r=new k(t[i],this,!1);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}function Z(t,e,i){if(l(this,Z),!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=i,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var n=A.round(t[0][0],t[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};for(var r=n,o=1,a=t.length;o<a;o++){if("number"!=typeof t[o][0]||"number"!=typeof t[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var s=A.round(t[o][0],t[o][1]);s.x===r.x&&s.y===r.y||(this.segments.push(w.fromRing(r,s,this)),s.x<this.bbox.ll.x&&(this.bbox.ll.x=s.x),s.y<this.bbox.ll.y&&(this.bbox.ll.y=s.y),s.x>this.bbox.ur.x&&(this.bbox.ur.x=s.x),s.y>this.bbox.ur.y&&(this.bbox.ur.y=s.y),r=s)}n.x===r.x&&n.y===r.y||this.segments.push(w.fromRing(r,n,this))}function W(t,e,i,n){l(this,W),this.id=++x,(this.leftSE=t).segment=this,t.otherSE=e,(this.rightSE=e).segment=this,e.otherSE=t,this.rings=i,this.windings=n}function V(t,e){l(this,V),void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}function q(){l(this,q),this.tree=new D,this.round(0)}function $(){l(this,$),this.reset()}return{union:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return j.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return j.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return j.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return j.run("difference",t,i)}}}()}).call(this,i(137))},function(t,e,i){var n=i(15)(i(2),"Map");t.exports=n},function(i,t,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;i.exports=e}).call(this,e(74))},function(t,e,i){var n=i(81),r=i(88),o=i(90),a=i(91),s=i(92);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(18),r=i(11);t.exports=function(t,e,i){(void 0===i||r(t[e],i))&&(void 0!==i||e in t)||n(t,e,i)}},function(t,e,i){var n=i(15),r=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},function(t,e,i){var n=i(103)(Object.getPrototypeOf,Object);t.exports=n},function(t,e){var i=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},function(t,s,l){(function(t){var e=l(2),i=l(106),n=s&&!s.nodeType&&s,r=n&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===n?e.Buffer:void 0,a=(o?o.isBuffer:void 0)||i;t.exports=a}).call(this,l(19)(t))},function(t,e,i){var n=i(108),r=i(109),o=i(110),a=o&&o.isTypedArray,s=a?r(a):n;t.exports=s},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,i){var n=i(114),r=i(116),o=i(21);t.exports=function(t){return o(t)?n(t,!0):r(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,i){var n=i(4),r=i(128),o=i(129),a=i(132);t.exports=function(t,e){return n(t)?t:r(t,e)?[t]:o(a(t))}},function(t,e,i){var n=i(24);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&2<=t.length&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(1<e.length&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,i){if(!e||!i)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var n=0,r=t.features;n<r.length;n++){var o=r[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t){t.exports=JSON.parse('{"a":"2.7.0"}')},function(t,e,i){var n=i(61),r=i(118)(function(t,e,i){n(t,e,i)});t.exports=r},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex lschen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer lschen","drawCircleMarkerButton":"Kreismarker zeichnen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l\'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cherchio"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Adaug un punct","firstVertex":"Apas aici pentru a aduga primul Vertex","continueLine":"Apas aici pentru a continua desenul","finishLine":"Apas pe orice obiect pentru a finisa desenul","finishPoly":"Apas pe primul obiect pentru a finisa","finishRect":"Apas pentru a finisa","startCircle":"Apas pentru a desena un cerc","finishCircle":"Apas pentru a finisa un cerc","placeCircleMarker":"Adaug un punct"},"actions":{"finish":"Termin","cancel":"Anuleaz","removeLastVertex":"terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug o bulin","drawPolyButton":"Deseneaz un poligon","drawLineButton":"Deseneaz o linie","drawCircleButton":"Deseneaz un cerc","drawRectButton":"Deseneaz un dreptunghi","editButton":"Editeaz straturile","dragButton":"Mut straturile","cutButton":"Taie straturile","deleteButton":"terge straturile","placeCircleMarker":"Adaug o bulin"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":",   ","firstVertex":",    ","continueLine":",   ","finishLine":"     ","finishPoly":"  ,  ","finishRect":",  ","startCircle":",    ","finishCircle":",   ","placeCircleMarker":",    "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"       ","pinningButton":"   "}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer vrtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del circulo","finishCircle":"Presiona para finalizar el circulo","placeCircleMarker":"Presiona para colocar un marcador de circulo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ultimo vrtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Polgono","drawLineButton":"Dibujar Lnea","drawCircleButton":"Dibujar Circulo","drawRectButton":"Dibujar Rectngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Remover Capas","drawCircleMarkerButton":"Dibujar Marcador de Circulo"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te beindigen","finishPoly":"Klik op het eerst punt om te beindigen","finishRect":"Klik om te beindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te beindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer  dessiner","finishLine":"Cliquez sur n\'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"diter des calques","dragButton":"Dplacer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"","firstVertex":"","continueLine":"","finishLine":"","finishPoly":"","finishRect":"","startCircle":"","finishCircle":""},"actions":{"finish":"","cancel":"","removeLastVertex":""},"buttonTitles":{"drawMarkerButton":"","drawPolyButton":"","drawLineButton":"","drawCircleButton":"","drawRectButton":"","editButton":"","dragButton":"","cutButton":"","deleteButton":""}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro vrtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o polgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do crculo","finishCircle":"Clique para fechar o crculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ltimo vrtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um polgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um crculo","drawRectButton":"Desenhar um retngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi znacznik","firstVertex":"Kliknij, aby ustawi pierwszy punkt","continueLine":"Kliknij, aby kontynuowa rysowanie","finishLine":"Kliknij dowolny punkt, aby zakoczy","finishPoly":"Kliknij pierwszy punkt, aby zakoczy","finishRect":"Kliknij, aby zakoczy","startCircle":"Kliknij, aby ustawi rodek koa","finishCircle":"Kliknij, aby zakoczy rysowanie koa","placeCircleMarker":"Kliknij, aby ustawi okrgy znacznik"},"actions":{"finish":"Zakocz","cancel":"Anuluj","removeLastVertex":"Usu ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielokt","drawLineButton":"Narysuj ciek","drawCircleButton":"Narysuj koo","drawRectButton":"Narysuj prostokt","editButton":"Edytuj","dragButton":"Przesu","cutButton":"Wytnij","deleteButton":"Usu","drawCircleMarkerButton":"Narysuj okrgy znacznik"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klicka fr att placera markr","firstVertex":"Klicka fr att placera frsta hrnet","continueLine":"Klicka fr att fortstta rita","finishLine":"Klicka p en existerande punkt fr att slutfra","finishPoly":"Klicka p den frsta punkten fr att slutfra","finishRect":"Klicka fr att slutfra","startCircle":"Klicka fr att placera cirkelns centrum","finishCircle":"Klicka fr att slutfra cirkeln","placeCircleMarker":"Klicka fr att placera cirkelmarkr"},"actions":{"finish":"Slutfr","cancel":"Avbryt","removeLastVertex":"Ta bort sista hrnet"},"buttonTitles":{"drawMarkerButton":"Rita Markr","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmarkr"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"     ","firstVertex":"       ","continueLine":"      ","finishLine":"        ","finishPoly":"       ","finishRect":"    ","startCircle":"      ","finishCircle":"      ","placeCircleMarker":"      "},"actions":{"finish":"","cancel":"","removeLastVertex":"  "},"buttonTitles":{"drawMarkerButton":" ","drawPolyButton":" ","drawLineButton":" ","drawCircleButton":" ","drawRectButton":" ","editButton":" ","dragButton":" ","cutButton":" ","deleteButton":" ","drawCircleMarkerButton":"  ","snappingButton":"        ","pinningButton":"   "}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jell elhelyezshez","firstVertex":"Kattintson az els pont elhelyezshez","continueLine":"Kattintson a kvetkez pont elhelyezshez","finishLine":"A befejezshez kattintson egy meglv pontra","finishPoly":"A befejezshez kattintson az els pontra","finishRect":"Kattintson a befejezshez","startCircle":"Kattintson a kr kzppontjnak elhelyezshez","finishCircle":"Kattintson a kr befejezshez","placeCircleMarker":"Kattintson a krjell elhelyezshez"},"actions":{"finish":"Befejezs","cancel":"Mgse","removeLastVertex":"Utols pont eltvoltsa"},"buttonTitles":{"drawMarkerButton":"Jell rajzolsa","drawPolyButton":"Poligon rajzolsa","drawLineButton":"Vonal rajzolsa","drawCircleButton":"Kr rajzolsa","drawRectButton":"Ngyzet rajzolsa","editButton":"Elemek szerkesztse","dragButton":"Elemek mozgatsa","cutButton":"Elemek vgsa","deleteButton":"Elemek trlse","drawCircleMarkerButton":"Kr jell rajzolsa","snappingButton":"Kapcsolja a jelltt msik elemhez vagy ponthoz","pinningButton":"Kzs pontok sszektse"}}')},function(t,e,i){var n=i(135),r=i(136);t.exports=function(t,e){return null!=t&&r(t,e,n)}},function(t,e,i){t.exports=i(145)},function(t,e){Array.prototype.findIndex=Array.prototype.findIndex||function(t){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=0;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},Array.prototype.find=Array.prototype.find||function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return o}},"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0==n)return!1;for(var r,o,a=0|e,s=Math.max(0<=a?a:n-Math.abs(a),0);s<n;){if((r=i[s])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;s++}return!1}})},function(t,e,i){var c=i(62),u=i(29),h=i(93),p=i(95),d=i(1),f=i(36),m=i(35);t.exports=function n(r,o,a,s,l){r!==o&&h(o,function(t,e){var i;l=l||new c,d(t)?p(r,o,e,a,n,s,l):(void 0===(i=s?s(m(r,e),t,e+"",r,o,l):void 0)&&(i=t),u(r,e,i))},f)}},function(t,e,i){var n=i(9),r=i(68),o=i(69),a=i(70),s=i(71),l=i(72);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,i){var n=i(10),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0||(i==e.length-1?e.pop():r.call(e,i,1),--this.size,0))}},function(t,e,i){var n=i(10);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},function(t,e,i){var n=i(10);t.exports=function(t){return-1<n(this.__data__,t)}},function(t,e,i){var r=i(10);t.exports=function(t,e){var i=this.__data__,n=r(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}},function(t,e,i){var n=i(9);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,i){var r=i(9),o=i(26),a=i(28);t.exports=function(t,e){var i=this.__data__;if(i instanceof r){var n=i.__data__;if(!o||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new a(n)}return i.set(t,e),this.size=i.size,this}},function(t,e,i){var n=i(16),r=i(77),o=i(1),a=i(79),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,p=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(n(t)?p:s).test(a(t))}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(17),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),i=t[s];try{var n=!(t[s]=void 0)}catch(t){}var r=a.call(t);return n&&(e?t[s]=i:delete t[s]),r}},function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},function(t,e,i){var n,r=i(78),o=(n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!o&&o in t}},function(t,e,i){var n=i(2)["__core-js_shared__"];t.exports=n},function(t,e){var i=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,i){var n=i(82),r=i(9),o=i(26);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||r),string:new n}}},function(t,e,i){var n=i(83),r=i(84),o=i(85),a=i(86),s=i(87);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(12);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,i){var n=i(12),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(e,t)?e[t]:void 0}},function(t,e,i){var n=i(12),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:r.call(e,t)}},function(t,e,i){var n=i(12);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,i){var n=i(13);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,i){var n=i(13);t.exports=function(t){return n(this,t).get(t)}},function(t,e,i){var n=i(13);t.exports=function(t){return n(this,t).has(t)}},function(t,e,i){var r=i(13);t.exports=function(t,e){var i=r(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}},function(t,e,i){var n=i(94)();t.exports=n},function(t,e){t.exports=function(l){return function(t,e,i){for(var n=-1,r=Object(t),o=i(t),a=o.length;a--;){var s=o[l?a:++n];if(!1===e(r[s],s,r))break}return t}}},function(t,e,i){var m=i(29),g=i(96),v=i(97),_=i(100),y=i(101),b=i(20),x=i(4),w=i(105),k=i(33),L=i(16),C=i(1),M=i(107),S=i(34),T=i(35),P=i(111);t.exports=function(t,e,i,n,r,o,a){var s,l,c,u,h,p=T(t,i),d=T(e,i),f=a.get(d);f?m(t,i,f):((s=void 0===(h=o?o(p,d,i+"",t,e,a):void 0))&&(c=!(l=x(d))&&k(d),u=!l&&!c&&S(d),h=d,l||c||u?h=x(p)?p:w(p)?_(p):c?g(d,!(s=!1)):u?v(d,!(s=!1)):[]:M(d)||b(d)?b(h=p)?h=P(p):C(p)&&!L(p)||(h=y(d)):s=!1),s&&(a.set(d,h),r(h,d,n,o,a),a.delete(d)),m(t,i,h))}},function(t,a,s){(function(t){var e=s(2),i=a&&!a.nodeType&&a,n=i&&"object"==typeof t&&t&&!t.nodeType&&t,r=n&&n.exports===i?e.Buffer:void 0,o=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=o?o(i):new t.constructor(i);return t.copy(n),n}}).call(this,s(19)(t))},function(t,e,i){var n=i(98);t.exports=function(t,e){var i=e?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},function(t,e,i){var n=i(99);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},function(t,e,i){var n=i(2).Uint8Array;t.exports=n},function(t,e){t.exports=function(t,e){var i=-1,n=t.length;for(e=e||Array(n);++i<n;)e[i]=t[i];return e}},function(t,e,i){var n=i(102),r=i(31),o=i(32);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:n(r(t))}},function(t,e,i){var n=i(1),r=Object.create;function o(){}t.exports=function(t){if(!n(t))return{};if(r)return r(t);o.prototype=t;var e=new o;return o.prototype=void 0,e}},function(t,e){t.exports=function(e,i){return function(t){return e(i(t))}}},function(t,e,i){var n=i(8),r=i(3);t.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}},function(t,e,i){var n=i(21),r=i(3);t.exports=function(t){return r(t)&&n(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,i){var n=i(8),r=i(31),o=i(3),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=n(t))return!1;var e=r(t);if(null===e)return!0;var i=c.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==u}},function(t,e,i){var n=i(8),r=i(22),o=i(3),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!a[n(t)]}},function(t,e){t.exports=function(e){return function(t){return e(t)}}},function(t,a,s){(function(t){var e=s(27),i=a&&!a.nodeType&&a,n=i&&"object"==typeof t&&t&&!t.nodeType&&t,r=n&&n.exports===i&&e.process,o=function(){try{return n&&n.require&&n.require("util").types||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=o}).call(this,s(19)(t))},function(t,e,i){var n=i(112),r=i(36);t.exports=function(t){return n(t,r(t))}},function(t,e,i){var c=i(113),u=i(18);t.exports=function(t,e,i,n){var r=!i;i=i||{};for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(i[s],t[s],s,i,t):void 0;void 0===l&&(l=t[s]),(r?u:c)(i,s,l)}return i}},function(t,e,i){var r=i(18),o=i(11),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var n=t[e];a.call(t,e)&&o(n,i)&&(void 0!==i||e in t)||r(t,e,i)}},function(t,e,i){var u=i(115),h=i(20),p=i(4),d=i(33),f=i(23),m=i(34),g=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=p(t),n=!i&&h(t),r=!i&&!n&&d(t),o=!i&&!n&&!r&&m(t),a=i||n||r||o,s=a?u(t.length,String):[],l=s.length;for(var c in t)!e&&!g.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||f(c,l))||s.push(c);return s}},function(t,e){t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},function(t,e,i){var r=i(1),o=i(32),a=i(117),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=o(t),i=[];for(var n in t)("constructor"!=n||!e&&s.call(t,n))&&i.push(n);return i}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},function(t,e,i){var n=i(119),l=i(126);t.exports=function(s){return n(function(t,e){var i=-1,n=e.length,r=1<n?e[n-1]:void 0,o=2<n?e[2]:void 0,r=3<s.length&&"function"==typeof r?(n--,r):void 0;for(o&&l(e[0],e[1],o)&&(r=n<3?void 0:r,n=1),t=Object(t);++i<n;){var a=e[i];a&&s(t,a,i,r)}return t})}},function(t,e,i){var n=i(37),r=i(120),o=i(122);t.exports=function(t,e){return o(r(t,e,n),t+"")}},function(t,e,i){var l=i(121),c=Math.max;t.exports=function(o,a,s){return a=c(void 0===a?o.length-1:a,0),function(){for(var t=arguments,e=-1,i=c(t.length-a,0),n=Array(i);++e<i;)n[e]=t[a+e];e=-1;for(var r=Array(a+1);++e<a;)r[e]=t[e];return r[a]=s(n),l(o,this,r)}}},function(t,e){t.exports=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}},function(t,e,i){var n=i(123),r=i(125)(n);t.exports=r},function(t,e,i){var n=i(124),r=i(30),o=i(37),a=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var o=Date.now;t.exports=function(i){var n=0,r=0;return function(){var t=o(),e=16-(t-r);if(r=t,0<e){if(800<=++n)return arguments[0]}else n=0;return i.apply(void 0,arguments)}}},function(t,e,i){var r=i(11),o=i(21),a=i(23),s=i(1);t.exports=function(t,e,i){if(!s(i))return!1;var n=typeof e;return!!("number"==n?o(i)&&a(e,i.length):"string"==n&&e in i)&&r(i[e],t)}},function(t,e,i){var r=i(38),o=i(39);t.exports=function(t,e){for(var i=0,n=(e=r(e,t)).length;null!=t&&i<n;)t=t[o(e[i++])];return i&&i==n?t:void 0}},function(t,e,i){var n=i(4),r=i(24),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!r(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,i){var n=i(130),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=n(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(o,function(t,e,i,n){r.push(i?n.replace(a,"$1"):e||t)}),r});t.exports=r},function(t,e,i){var n=i(131);t.exports=function(t){var e=n(t,function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}},function(t,e,i){var n=i(28);function s(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],i=a.cache;if(i.has(e))return i.get(e);var n=r.apply(this,t);return a.cache=i.set(e,n)||i,n};return a.cache=new(s.Cache||n),a}s.Cache=n,t.exports=s},function(t,e,i){var n=i(133);t.exports=function(t){return null==t?"":n(t)}},function(t,e,i){var n=i(17),r=i(134),o=i(4),a=i(24),s=n?n.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return r(e,t)+"";if(a(e))return l?l.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i}},function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}},function(t,e){var i=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&i.call(t,e)}},function(t,e,i){var s=i(38),l=i(20),c=i(4),u=i(23),h=i(22),p=i(39);t.exports=function(t,e,i){for(var n=-1,r=(e=s(e,t)).length,o=!1;++n<r;){var a=p(e[n]);if(!(o=null!=t&&i(t,a)))break;t=t[a]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&h(r)&&u(a,r)&&(c(t)||l(t))}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var t=s(p);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=i(5),r=i(40),n=i(14);e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return n.flattenEach(t,function(t){!function(e,i){var t=[],n=e.geometry;if(null!==n){switch(n.type){case"Polygon":t=r.getCoords(n);break;case"LineString":t=[r.getCoords(n)]}t.forEach(function(t){var s,l;s=e.properties,l=[],t.reduce(function(t,e){var i,n,r,o,a=c.lineString([t,e],s);return a.bbox=(i=t[0],n=t[1],r=e[0],o=e[1],[i<r?i:r,n<o?n:o,r<i?i:r,o<n?n:o]),l.push(a),e}),l.forEach(function(t){t.id=i.length,i.push(t)})})}}(t,e)}),c.featureCollection(e)}},function(t,e,i){var n=i(140),r=i(5),o=i(14),a=i(142).default,s=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection);function c(t){var e=n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)}):s(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)}),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return l(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},function(t,e,i){"use strict";t.exports=n,t.exports.default=n;var s=i(141);function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function d(t,e){v(t,0,t.children.length,e,t)}function v(t,e,i,n,r){(r=r||f(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],u(r,t.leaf?n(o):o);return r}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function a(t,e){return t.minY-e.minY}function _(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,i,n,r){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(o=e+Math.ceil((i-e)/n/2)*n,s(t,o,e,i,r),a.push(e,o,o,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!c(t,e))return i;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],c(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):p(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!c(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],c(t,a=e.leaf?i(o):o)){if(e.leaf||p(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!p(a,s)?n?(i++,a=n.children[i],o=!1):a=null:(l.push(a),c.push(i),i=0,a=(n=a).children[0])}return this},toBBox:function(t){return t},compareMinX:o,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return d(r=f(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=f([])).leaf=!1,r.height=n;var s,l,c,u,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(m(t,e,i,p,this.compareMinX),s=e;s<=i;s+=p)for(m(t,s,c=Math.min(s+p-1,i),h,this.compareMinY),l=s;l<=c;l+=h)u=Math.min(l+h-1,c),r.children.push(this._build(t,l,u,n-1));return d(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,l,c,u,h,p,d;n.push(e),!e.leaf&&n.length-1!==i;){for(u=h=1/0,r=0,o=e.children.length;r<o;r++)l=_(a=e.children[r]),p=t,d=a,(c=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<h?(h=c,u=l<u?l:u,s=a):c===h&&l<u&&(u=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),u(a,r);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=f(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,d(i,this.toBBox),d(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var n,r,o,a,s,l,c,u,h,p,d,f,m=s=1/0,g=e;g<=i-e;g++)c=n=v(t,0,g,this.toBBox),u=r=v(t,g,i,this.toBBox),h=Math.max(c.minX,u.minX),p=Math.max(c.minY,u.minY),d=Math.min(c.maxX,u.maxX),f=Math.min(c.maxY,u.maxY),o=Math.max(0,d-h)*Math.max(0,f-p),a=_(n)+_(r),o<m?(m=o,l=g,s=a<s?a:s):o===m&&a<s&&(s=a,l=g);return l},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:o,r=t.leaf?this.compareMinY:a;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);for(var r,o=this.toBBox,a=v(t,0,e,o),s=v(t,i-e,i,o),l=h(a)+h(s),c=e;c<i-e;c++)r=t.children[c],u(a,t.leaf?o(r):r),l+=h(a);for(c=i-e-1;e<=c;c--)r=t.children[c],u(s,t.leaf?o(r):r),l+=h(s);return l},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)u(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():d(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){t.exports=function(){"use strict";function f(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function o(t,e){return t<e?-1:e<t?1:0}return function(t,e,i,n,r){!function t(e,i,n,r,o){for(;n<r;){var a,s,l,c,u;600<r-n&&(a=r-n+1,s=i-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1),t(e,i,Math.max(n,Math.floor(i-s*c/a+u)),Math.min(r,Math.floor(i+(a-s)*c/a+u)),o));var h=e[i],p=n,d=r;for(f(e,n,i),0<o(e[r],h)&&f(e,n,r);p<d;){for(f(e,p,d),p++,d--;o(e[p],h)<0;)p++;for(;0<o(e[d],h);)d--}0===o(e[n],h)?f(e,n,d):f(e,++d,r),d<=i&&(n=d+1),i<=d&&(r=d-1)}}(t,e,i||0,n||t.length-1,r||o)}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(14);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e),i(60);var n=i(41),r=i(42),o=i.n(r),a=i(43),s=i(44),l=i(45),c=i(46),u=i(47),h=i(48),p=i(49),d=i(50),f=i(51),m=i(52),g={en:a,de:s,it:l,id:c,ro:u,ru:h,es:p,nl:d,fr:f,pt_br:i(53),zh:m,pl:i(54),sv:i(55),el:i(56),hu:i(57)},v=i(0),_=i.n(v),y=i(58),b=i.n(y);function x(t){var e=L.PM.activeLang;return b()(g,e)||(e="en"),_()(g[e],t)}function w(t,e,i,n){for(var r,o,a=[],s=0;s<i;s+=1)r=function(t,e,i){for(var n,r,o,a=6356752.3142,s=1/298.257223563,l=t.lng,c=t.lat,u=i,h=Math.PI,p=e*h/180,d=Math.sin(p),f=Math.cos(p),m=(1-s)*Math.tan(c*h/180),g=1/Math.sqrt(1+m*m),v=m*g,_=Math.atan2(m,f),y=g*d,b=1-y*y,x=272331606681.9453*b/(a*a),w=1+x/16384*(4096+x*(x*(320-175*x)-768)),k=x/1024*(256+x*(x*(74-47*x)-128)),C=u/(a*w),M=2*Math.PI;1e-12<Math.abs(C-M);)n=Math.cos(2*_+C),M=C,C=u/(a*w)+k*(r=Math.sin(C))*(n+k/4*((o=Math.cos(C))*(2*n*n-1)-k/6*n*(4*r*r-3)*(4*n*n-3)));var S=v*r-g*o*f,T=Math.atan2(v*o+g*r*f,(1-s)*Math.sqrt(y*y+S*S)),P=s/16*b*(4+s*(4-3*b)),D=l+180*(Math.atan2(r*d,g*o-v*r*f)-(1-P)*s*y*(C+P*r*(n+P*o*(2*n*n-1))))/h,A=180*T/h;return L.latLng(D,A)}(t,360*s/i+n,e),o=L.latLng(r.lng,r.lat),a.push(o);return a}var k={calcMiddleLatLng:function(t,e,i){var n=t.project(e),r=t.project(i);return t.unproject(n._add(r)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer(function(t){(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.Circle||t instanceof L.CircleMarker)&&e.push(t)}),e=(e=e.filter(function(t){return!!t.pm})).filter(function(t){return!t._pmTempLayer})},circleToPolygon:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:60,i=w(t.getLatLng(),t.getRadius(),e,0),n=[],r=0;r<i.length;r+=1){var o=[i[r].lat,i[r].lng];n.push(o)}return L.polygon(n,t.options)},createGeodesicPolygon:w,getTranslation:x};function C(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function M(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?C(Object(o),!0).forEach(function(t){var e,i,n;e=r,n=o[i=t],i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):C(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}var S=k.findLayers,T={_globalEditMode:!1,globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditMode},setGlobalEditStatus:function(t){this._globalEditMode=t,this._fireEditModeEvent(this._globalEditMode)},enableGlobalEditMode:function(t){var e=M({snappable:this._globalSnappingEnabled},t);this.Toolbar.toggleButton("editMode",!0),S(this.map).forEach(function(t){t.pm.enable(e)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this.map.on("layeradd",this.throttledReInitEdit,this),this.setGlobalEditStatus(!0)},disableGlobalEditMode:function(){S(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeroff",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",!1),this.setGlobalEditStatus(!1)},toggleGlobalEditMode:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(t){var e=t.layer;e.pm&&!e._pmTempLayer&&this.globalEditModeEnabled()&&e.pm.enable(M(M({},this.globalOptions),{},{snappable:this._globalSnappingEnabled}))},_fireEditModeEvent:function(t){this.map.fire("pm:globaleditmodetoggled",{enabled:t,map:this.map})}},P=k.findLayers,D={globalDragModeEnabled:function(){return!!this._globalDragMode},enableGlobalDragMode:function(){var t=P(this.map);this._globalDragMode=!0,t.forEach(function(t){t.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this._globalDragMode),this._fireDragModeEvent(!0)},disableGlobalDragMode:function(){var t=P(this.map);this._globalDragMode=!1,t.forEach(function(t){t.pm.disableLayerDrag()}),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this._globalDragMode),this._fireDragModeEvent(!1)},_fireDragModeEvent:function(t){this.map.fire("pm:globaldragmodetoggled",{enabled:t,map:this.map})},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(t){var e=t.layer;e.pm&&!e._pmTempLayer&&this.globalDragModeEnabled()&&(this.disableGlobalDragMode(),this.enableGlobalDragMode())}},A={disableGlobalRemovalMode:function(){var e=this;this._globalRemovalMode=!1,this.map.eachLayer(function(t){t.off("click",e.removeLayer,e)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("deleteLayer",this._globalRemovalMode),this._fireRemovalModeEvent(!1)},enableGlobalRemovalMode:function(){var e=this;this._globalRemovalMode=!0,this.map.eachLayer(function(t){!t.pm||t instanceof L.LayerGroup||(t.pm.disable(),t.on("click",e.removeLayer,e))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("deleteLayer",this._globalRemovalMode),this._fireRemovalModeEvent(!0)},_fireRemovalModeEvent:function(t){this.map.fire("pm:globalremovalmodetoggled",{enabled:t,map:this.map})},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalMode},removeLayer:function(t){var e=t.target;e._pmTempLayer||e.pm&&e.pm.dragging()||(e.remove(),e instanceof L.LayerGroup?(e.fire("pm:remove",{layer:e,shape:void 0}),this.map.fire("pm:remove",{layer:e,shape:void 0})):(e.fire("pm:remove",{layer:e,shape:e.pm.getShape()}),this.map.fire("pm:remove",{layer:e,shape:e.pm.getShape()})))},reinitGlobalRemovalMode:function(t){var e=t.layer;e.pm&&!e._pmTempLayer&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())}};function E(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function O(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?E(Object(o),!0).forEach(function(t){var e,i,n;e=r,n=o[i=t],i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}var I=k.findLayers,B=L.Class.extend({includes:[T,D,A],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this._globalRemovalMode=!1,this.globalOptions={snappable:!0}},setLang:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en",e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"en",n=L.PM.activeLang;e&&(g[t]=o()(g[i],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this.map.fire("pm:langchange",{oldLang:n,activeLang:t,fallback:i,translations:g[t]})},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Polygon",e=1<arguments.length?arguments[1]:void 0;"Poly"===t&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Polygon";"Poly"===t&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(e){var i=this,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).ignoreShapes||[];this.map.pm.Draw.shapes.forEach(function(t){-1===n.indexOf(t)&&i.map.pm.Draw[t].setPathOptions(e)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,i=O(O({},this.globalOptions),t);this.map.pm.Draw.shapes.forEach(function(t){e.map.pm.Draw[t].setOptions(i)}),I(this.map).forEach(function(t){t.pm.setOptions(i)}),this.applyGlobalOptions(),this.globalOptions=i},applyGlobalOptions:function(){I(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){return I(this.map)},getGeomanDrawLayers:function(){return I(this.map).filter(function(t){return!0===t._drawnByGeoman})}}),z=L.Control.extend({options:{position:"topleft"},initialize:function(t){this._button=Object.assign({},this.options,t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):"edit"===this._button.tool?this._container=this._map.pm.Toolbar.editContainer:"options"===this._button.tool?this._container=this._map.pm.Toolbar.optionsContainer:"custom"===this._button.tool?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus="boolean"==typeof t?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},_triggerClick:function(t){this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t})},_makeButton:function(e){var n=this,r=-1<this.options.position.indexOf("right")?"pos-right":"",t=L.DomUtil.create("div","button-container",this._container),i=L.DomUtil.create("a","leaflet-buttons-control-button",t),o=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(r),t),a=e.actions,s={cancel:{text:x("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:x("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:x("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[e.jsClass]._removeLastVertex()}},finish:{text:x("actions.finish"),onClick:function(t){this._map.pm.Draw[e.jsClass]._finishShape(t)}}};a.forEach(function(t){var e;if(s[t])e=s[t];else{if(!t.text)return;e=t}var i=L.DomUtil.create("a","leaflet-pm-action ".concat(r," action-").concat(t),o);i.innerHTML=e.text,e.onClick&&L.DomEvent.addListener(i,"click",e.onClick,n),L.DomEvent.disableClickPropagation(i)}),e.toggleStatus&&L.DomUtil.addClass(t,"active");var l=L.DomUtil.create("div","control-icon",i);return e.title&&l.setAttribute("title",e.title),e.iconUrl&&l.setAttribute("src",e.iconUrl),e.className&&L.DomUtil.addClass(l,e.className),L.DomEvent.addListener(i,"click",function(){n._button.disableOtherButtons&&n._map.pm.Toolbar.triggerClickOnToggledButtons(n)}),L.DomEvent.addListener(i,"click",this._triggerClick,this),L.DomEvent.disableClickPropagation(i),t},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&!1!==this._button.cssToggle?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_clicked:function(){this._button.doToggle&&this.toggle()}});function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}L.Control.PMButton=z;var F=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;void 0!==t.editPolygon&&(t.editMode=t.editPolygon),void 0!==t.deleteLayer&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this._showHideButtons(),this.isVisible=!0},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete"}};for(var i in t){var n=t[i];L.Util.setOptions(n,{className:e.geomanIcons[i]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){var e=["snappingOption"];for(var i in this.buttons)!e.includes(i)&&this.buttons[i]!==t&&this.buttons[i].toggled()&&this.buttons[i]._triggerClick()},toggleButton:function(t,e){return"editPolygon"===t&&(t="editMode"),"deleteLayer"===t&&(t="removalMode"),2<arguments.length&&void 0!==arguments[2]&&!arguments[2]||this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var i=this,t={className:"control-icon leaflet-pm-icon-marker",title:x("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},e={title:x("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},n={className:"control-icon leaflet-pm-icon-polyline",title:x("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},r={title:x("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},o={title:x("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:x("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},s={title:x("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){i.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},l={title:x("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){i.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},c={title:x("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},u={title:x("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){i.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]};this._addButton("drawMarker",new L.Control.PMButton(t)),this._addButton("drawPolyline",new L.Control.PMButton(n)),this._addButton("drawRectangle",new L.Control.PMButton(a)),this._addButton("drawPolygon",new L.Control.PMButton(e)),this._addButton("drawCircle",new L.Control.PMButton(r)),this._addButton("drawCircleMarker",new L.Control.PMButton(o)),this._addButton("editMode",new L.Control.PMButton(s)),this._addButton("dragMode",new L.Control.PMButton(l)),this._addButton("cutPolygon",new L.Control.PMButton(c)),this._addButton("removalMode",new L.Control.PMButton(u))},_showHideButtons:function(){this.removeControls();var t,e=this.getButtons(),i=[];for(var n in!1===this.options.drawControls&&(i=i.concat(Object.keys(e).filter(function(t){return!e[t]._button.tool}))),!1===this.options.editControls&&(i=i.concat(Object.keys(e).filter(function(t){return"edit"===e[t]._button.tool}))),!1===this.options.optionsControls&&(i=i.concat(Object.keys(e).filter(function(t){return"options"===e[t]._button.tool}))),!1===this.options.customControls&&(i=i.concat(Object.keys(e).filter(function(t){return"custom"===e[t]._button.tool}))),e){this.options[n]&&-1===i.indexOf(n)&&(t=(t=e[n]._button.tool)||"draw",e[n].setPosition(this._getBtnPosition(t)),e[n].addTo(this.map))}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");"object"!==R(e)&&(e={name:e});var i={Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode"},n=i[t]?i[t]:t;if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var r=this.map.pm.Draw.createNewDrawInstance(e.name,n),o=this.buttons[n]._button;return e=Object.assign({},o,e),{drawInstance:r,control:this.createCustomControl(e)}},createCustomControl:function(t){if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),!1!==t.toggle&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&"draw"!==t.block||(t.block=""),-1===t.className.indexOf("control-icon")&&(t.className="control-icon ".concat(t.className));var e={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:!0,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[]};!1!==this.options[t.name]&&(this.options[t.name]=!0);var i=this._addButton(t.name,new L.Control.PMButton(e));return this.changeControlOrder(),i},changeControlOrder:function(){var e={Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode"},i=[];(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){e[t]?i.push(e[t]):i.push(t)});var n=this.getButtons(),r={};i.forEach(function(t){n[t]&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return!n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return"edit"===n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return"options"===n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return"custom"===n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),this.map.pm.Toolbar.buttons=r,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var i in t)e.push(i);return e},changeActionsOfControl:function(t,e){var i={Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode"},n=i[t]?i[t]:t;if(!n)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[n])throw new TypeError("Button with this name not exists");this.buttons[n]._button.actions=e,this.changeControlOrder()}}),j={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach(function(t){Array.isArray(t)?e._assignEvents(t):(t.off("drag",e._handleSnapping,e),t.on("drag",e._handleSnapping,e),t.off("dragend",e._cleanupSnapping,e),t.on("dragend",e._cleanupSnapping,e))})},_unsnap:function(){delete this._snapLatLng},_cleanupSnapping:function(){delete this._snapList,this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(t){t.remove()})},_handleSnapLayerRemoval:function(t){var e=t.layer,i=this._snapList.findIndex(function(t){return t._leaflet_id===e._leaflet_id});this._snapList.splice(i,1)},_handleSnapping:function(t){function e(){return L.Util.throttle(this._createSnapList,100,this)}if(t.originalEvent.altKey)return!1;if(void 0===this._snapList&&(this._createSnapList(),this._map.off("layeradd",e,this),this._map.on("layeradd",e,this)),this._snapList.length<=0)return!1;var i=t.target,n=this._calcClosestLayer(i.getLatLng(),this._snapList);if(0===Object.keys(n).length)return!1;var r,o,a=n.layer instanceof L.Marker||n.layer instanceof L.CircleMarker?n.latlng:this._checkPrioritiySnapping(n),s=this.options.snapDistance,l={marker:i,shape:this._shape,snapLatLng:a,segment:n.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:n.layer,distance:n.distance};return l.marker.fire("pm:snapdrag",l),this._layer.fire("pm:snapdrag",l),n.distance<s?(i.setLatLng(a),i._snapped=!0,(r=this._snapLatLng||{}).lat===(o=a||{}).lat&&r.lng===o.lng||(this._snapLatLng=a,i.fire("pm:snap",l),this._layer.fire("pm:snap",l))):this._snapLatLng&&(this._unsnap(l),i._snapped=!1,l.marker.fire("pm:unsnap",l),this._layer.fire("pm:unsnap",l)),!0},_checkPrioritiySnapping:function(t){var e,i,n,r=this._map,o=t.segment[0],a=t.segment[1],s=t.latlng,l=this._getDistance(r,o,s),c=this._getDistance(r,a,s),u=l<c?o:a,h=l<c?l:c;return this.options.snapMiddle&&(i=k.calcMiddleLatLng(r,o,a),(n=this._getDistance(r,i,s))<l&&n<c&&(u=i,h=n)),e=h<this.options.snapDistance?u:s,Object.assign({},e)},_createSnapList:function(){var e=this,i=[],n=[],t=this._map;t.off("pm:remove",this._handleSnapLayerRemoval,this),t.on("pm:remove",this._handleSnapLayerRemoval,this),t.eachLayer(function(t){var e;(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.CircleMarker)&&!0!==t.options.snapIgnore&&((t instanceof L.Circle||t instanceof L.CircleMarker)&&t.pm._hiddenPolyCircle&&i.push(t.pm._hiddenPolyCircle),i.push(t),(e=L.polyline([],{color:"red",pmIgnore:!0}))._pmTempLayer=!0,n.push(e),(t instanceof L.Circle||t instanceof L.CircleMarker)&&n.push(e))}),i=(i=(i=i.filter(function(t){return e._layer!==t})).filter(function(t){return t._latlng||t._latlngs&&0<t._latlngs.length})).filter(function(t){return!t._pmTempLayer}),this._otherSnapLayers?this._snapList=i.concat(this._otherSnapLayers):this._snapList=i,this.debugIndicatorLines=n},_calcClosestLayer:function(n,t){var r=this,o={};return t.forEach(function(t,e){var i;t._parentCopy&&t._parentCopy===r._layer||(i=r._calcLayerDistances(n,t),r.debugIndicatorLines[e].setLatLngs([n,i.latlng]),(void 0===o.distance||i.distance<o.distance)&&((o=i).layer=t))}),o},_calcLayerDistances:function(t,e){var l,c,u=this,h=this._map,i=e instanceof L.Marker||e instanceof L.CircleMarker,p=e instanceof L.Polygon,d=t,n=i?e.getLatLng():e.getLatLngs();if(i)return{latlng:Object.assign({},n),distance:this._getDistance(h,n,d)};!function a(s){s.forEach(function(t,e){var i,n,r,o;Array.isArray(t)?a(t):(i=t,n=p?e+1===s.length?0:e+1:e+1===s.length?void 0:e+1,(r=s[n])&&(o=u._getDistanceToSegment(h,d,i,r),(void 0===c||o<c)&&(c=o,l=[i,r])))})}(n);var r=this._getClosestPointOnSegment(h,t,l[0],l[1]);return{latlng:Object.assign({},r),segment:l,distance:c}},_getClosestPointOnSegment:function(t,e,i,n){var r=t.getMaxZoom();r===1/0&&(r=t.getZoom());var o=t.project(e,r),a=t.project(i,r),s=t.project(n,r),l=L.LineUtil.closestPointOnSegment(o,a,s);return t.unproject(l,r)},_getDistanceToSegment:function(t,e,i,n){var r=t.latLngToLayerPoint(e),o=t.latLngToLayerPoint(i),a=t.latLngToLayerPoint(n);return L.LineUtil.pointToSegmentDistance(r,o,a)},_getDistance:function(t,e,i){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(i))}},N=L.Class.extend({includes:[j],options:{snappable:!0,snapDistance:20,tooltips:!0,cursorMarker:!0,finishOnDoubleClick:!1,finishOn:null,allowSelfIntersection:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},markerStyle:{draggable:!0}},setOptions:function(t){L.Util.setOptions(this,t)},initialize:function(t){var e=this;this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut"],this.shapes.forEach(function(t){e[t]=new L.PM.Draw[t](e._map)})},setPathOptions:function(t){this.options.pathOptions=t},getShapes:function(){return this.shapes},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var e=this;this.shapes.forEach(function(t){e[t].disable()})},addControls:function(){var e=this;this.shapes.forEach(function(t){e[t].addButton()})},getActiveShape:function(){var e,i=this;return this.shapes.forEach(function(t){i[t]._enabled&&(e=t)}),e},_setGlobalDrawMode:function(){"Cut"===this._shape?this._map.fire("pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map}):this._map.fire("pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map})},createNewDrawInstance:function(t,e){var i=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[i])throw new TypeError("There is no class L.PM.Draw.".concat(i));return this[t]=new L.PM.Draw[i](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal"};return e[t]?e[t]:this[t]?this[t]._shape:t},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setShapeForFinishLayer:function(t){t.pm._shape=this._shape}});N.Marker=N.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(x("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode(),this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.enable()})},disable:function(){var e=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.disable()}),this._map.fire("pm:drawend",{shape:this._shape}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_createMarker:function(t){var e,i;t.latlng&&(this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng),e=this._hintMarker.getLatLng(),i=new L.Marker(e,this.options.markerStyle),this._setShapeForFinishLayer(i),this._addDrawnLayerProp(i),i.addTo(this._map),i.pm.enable(),this._map.fire("pm:create",{shape:this._shape,marker:i,layer:i}),this._cleanupSnapping())},_syncHintMarker:function(t){var e;this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((e=t).target=this._hintMarker,this._handleSnapping(e))}});var U=i(6),H=i.n(U);N.Line=N.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this.options.finishOnDoubleClick&&!this.options.finishOn&&(this.options.finishOn="dblclick"),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(x("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this._map.on(this.options.finishOn,this._finishShape,this),"dblclick"===this.options.finishOn&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[]},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.fire("pm:drawend",{shape:this._shape}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},hasSelfIntersection:function(){return 0<H()(this._layer.toGeoJSON(15)).features.length},_syncHintLine:function(){var t,e=this._layer.getLatLngs();0<e.length&&(t=e[e.length-1],this._hintline.setLatLngs([t,this._hintMarker.getLatLng()]))},_syncHintMarker:function(t){var e;this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((e=t).target=this._hintMarker,this._handleSnapping(e)),this.options.allowSelfIntersection||this._handleSelfIntersection(!0,t.latlng)},_handleSelfIntersection:function(t,e){var i=L.polyline(this._layer.getLatLngs());t&&(e=e||this._hintMarker.getLatLng(),i.addLatLng(e));var n=H()(i.toGeoJSON(15));this._doesSelfIntersect=0<n.features.length,this._doesSelfIntersect?this._hintline.setStyle({color:"red"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_removeLastVertex:function(){var t,e=this._layer.getLatLngs(),i=e.pop();e.length<1?this.disable():(t=this._layerGroup.getLayers().filter(function(t){return t instanceof L.Marker}).filter(function(t){return!L.DomUtil.hasClass(t._icon,"cursor-marker")}).find(function(t){return t.getLatLng()===i}),this._layerGroup.removeLayer(t),this._layer.setLatLngs(e),this._syncHintLine())},_createVertex:function(t){var e,i,n;!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,t.latlng),this._doesSelfIntersect)||(this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng),(e=this._hintMarker.getLatLng()).equals(this._layer.getLatLngs()[0])?this._finishShape(t):(i=0===this._layer.getLatLngs().length,this._layer.addLatLng(e),n=this._createMarker(e,i),this._hintline.setLatLngs([e,e]),this._layer.fire("pm:vertexadded",{shape:this._shape,workingLayer:this._layer,marker:n,latlng:e})))},_finishShape:function(){var t,e;!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||((t=this._layer.getLatLngs()).length<=1||(e=L.polyline(t,this.options.pathOptions).addTo(this._map),this._setShapeForFinishLayer(e),this._addDrawnLayerProp(e),this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:e}),this.options.snappable&&this._cleanupSnapping()))},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return i._pmTempLayer=!0,this._layerGroup.addLayer(i),i.on("click",this._finishShape,this),e&&this._hintMarker.setTooltipContent(x("tooltips.continueLine")),2===this._layer.getLatLngs().length&&this._hintMarker.setTooltipContent(x("tooltips.finishLine")),i}}),N.Polygon=N.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},_finishShape:function(t){var e,i;!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||((e=this._layer.getLatLngs()).length<=2||(i=L.polygon(e,this.options.pathOptions).addTo(this._map),this._setShapeForFinishLayer(i),this._addDrawnLayerProp(i),this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:i}),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex))},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return i._pmTempLayer=!0,this._layerGroup.addLayer(i),e?(i.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(i)-1,this.options.snappable&&this._cleanupSnapping()):i.on("click",function(){return 1}),e&&this._hintMarker.setTooltipContent(x("tooltips.continueLine")),3===this._layer.getLatLngs().length&&this._hintMarker.setTooltipContent(x("tooltips.finishPoly")),i}}),N.Rectangle=N.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:100,opacity:this.options.cursorMarker?1:0}),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.tooltips&&this._hintMarker.bindTooltip(x("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var e=0;e<2;e+=1){var i=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});i._pmTempLayer=!0,this._layerGroup.addLayer(i),this._styleMarkers.push(i)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[]},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.fire("pm:drawend",{shape:this._shape}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(t){L.DomUtil.addClass(t._icon,"visible"),t.setLatLng(e)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(x("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){var e;this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((e=t).target=this._hintMarker,this._handleSnapping(e))},_syncRectangleSize:function(){var t,e,i=this,n=this._startMarker.getLatLng(),r=this._hintMarker.getLatLng();this._layer.setBounds([n,r]),this.options.cursorMarker&&this._styleMarkers&&(t=this._findCorners(),e=[],t.forEach(function(t){t.equals(i._startMarker.getLatLng())||t.equals(i._hintMarker.getLatLng())||e.push(t)}),e.forEach(function(t,e){i._styleMarkers[e].setLatLng(t)}))},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=this._startMarker.getLatLng(),n=L.rectangle([i,e],this.options.pathOptions).addTo(this._map);this._setShapeForFinishLayer(n),this._addDrawnLayerProp(n),this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:n})},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),N.Circle=N.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],this.options.templineStyle),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(x("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[]},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.fire("pm:drawend",{shape:this._shape}),this._setGlobalDrawMode(),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng();this._hintline.setLatLngs([t,this._hintMarker.getLatLng()])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=t.distanceTo(e);this._layer.setRadius(i)},_syncHintMarker:function(t){var e;this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((e=t).target=this._hintMarker,this._handleSnapping(e))},_placeCenterMarker:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(x("tooltips.finishCircle")),this._layer.fire("pm:centerplaced",{workingLayer:this._layer,latlng:t,shape:this._shape}))},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng(),n=e.distanceTo(i),r=Object.assign({},this.options.pathOptions,{radius:n}),o=L.circle(e,r).addTo(this._map);this._setShapeForFinishLayer(o),this._addDrawnLayerProp(o),o.pm._updateHiddenPolyCircle(),this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:o})},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return e._pmTempLayer=!0,this._layerGroup.addLayer(e),e}}),N.CircleMarker=N.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable?(this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker([0,0],this.options.templineStyle),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(x("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"):(this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker([0,0],this.options.templineStyle),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(x("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip()),this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode(),this.options.editable||this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.enable()})},disable:function(){var e=this;this._enabled&&(this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawend",{shape:this._shape}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._enabled=!1)},_placeCenterMarker:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(x("tooltips.finishCircle")),this._layer.fire("pm:centerplaced",{shape:this._shape,workingLayer:this._layer,latlng:t}))},_syncHintLine:function(){var t=this._centerMarker.getLatLng();this._hintline.setLatLngs([t,this._hintMarker.getLatLng()])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this._layer.setRadius(i)},_syncHintMarker:function(t){var e;this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((e=t).target=this._hintMarker,this._handleSnapping(e))},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){var e,i;t.latlng&&(this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng),e=this._hintMarker.getLatLng(),i=L.circleMarker(e,this.options.pathOptions),this._setShapeForFinishLayer(i),this._addDrawnLayerProp(i),i.addTo(this._map),i.pm.enable(),this._map.fire("pm:create",{shape:this._shape,marker:i,layer:i}),this._cleanupSnapping())},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng(),n=this._map.project(e).distanceTo(this._map.project(i)),r=Object.assign({},this.options.pathOptions,{radius:n}),o=L.circleMarker(e,r).addTo(this._map);this._setShapeForFinishLayer(o),this._addDrawnLayerProp(o),o.pm._updateHiddenPolyCircle(),this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:o})}});var G=i(25),Z=i.n(G);function W(t){var e={type:"Feature"};return e.geometry=t,e}function V(t){return"Feature"===t.type?t.geometry:t}function q(t){return W({type:"Polygon",coordinates:t})}function $(t){return W({type:"MultiPolygon",coordinates:t})}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}N.Cut=N.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_cut:function(u){var h=this,e=this._map._layers;Object.keys(e).map(function(t){return e[t]}).filter(function(t){return t.pm}).filter(function(t){return t instanceof L.Polygon}).filter(function(t){return t!==u}).filter(function(t){try{return e=u.toGeoJSON(15),i=t.toGeoJSON(15),n=V(e),r=V(i),!(0===(o=Z.a.intersection(n.coordinates,r.coordinates)).length||(1===o.length?!q(o[0]):!$(o)))}catch(t){return console.error("You cant cut polygons with self-intersections"),!1}var e,i,n,r,o}).forEach(function(t){var e,i,n,r,o,a,s=(e=t.toGeoJSON(15),i=u.toGeoJSON(15),n=V(e),r=V(i),0===(o=Z.a.difference(n.coordinates,r.coordinates)).length?null:1===o.length?q(o[0]):$(o)),l=L.geoJSON(s,t.options);1===l.getLayers().length&&(l=(function(t){if(Array.isArray(t))return t}(a=l.getLayers())||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(e.push(o.value),1!==e.length);i=!0);}catch(t){n=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e}}(a)||function(t){if(t){if("string"==typeof t)return K(t,1);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?K(t,1):void 0}}(a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]);var c=l.addTo(h._map);c.pm.enable(h.options),c.pm.disable(),t._pmTempLayer=!0,u._pmTempLayer=!0,t.remove(),u.remove(),c.getLayers&&0===c.getLayers().length&&h._map.pm.removeLayer({target:c}),h._addDrawnLayerProp(c),h._editedLayers.push({layer:c,originalLayer:t})})},_finishShape:function(){var t,e,n=this;this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||(t=this._layer.getLatLngs(),e=L.polygon(t,this.options.pathOptions),this._cut(e),this.disable(),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(t){var e=t.layer,i=t.originalLayer;i.fire("pm:cut",{shape:n._shape,layer:e,originalLayer:i}),n._map.fire("pm:cut",{shape:n._shape,layer:e,originalLayer:i}),i.fire("pm:edit",{layer:i,shape:i.pm.getShape()})}),this._editedLayers=[])}});var Y={enableLayerDrag:function(){if(this.disable(),this._map||(this._map=this._layer._map),this._layer instanceof L.Marker)return this._layer.on("dragstart",this._fireDragStart,this),this._layer.on("drag",this._fireDrag,this),this._layer.on("dragend",this._fireDragEnd,this),this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),void(this._layer.dragging&&this._layer.dragging.enable());this._tempDragCoord=null,this._layer._map.options.preferCanvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0,this._layer.on("mousedown",this._dragMixinOnMouseDown,this)},disableLayerDrag:function(){if(this._layer instanceof L.Marker)return this._layer.off("dragstart",this._fireDragStart,this),this._layer.off("drag",this._fireDrag,this),this._layer.off("dragend",this._fireDragEnd,this),void(this._layer.dragging&&this._layer.dragging.disable());this._layer._map.options.preferCanvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._safeToCacheDragState=!1,this._layer.off("mousedown",this._dragMixinOnMouseDown,this)},_dragMixinOnMouseUp:function(){var t=this,e=this._layer._path?this._layer._path:this._layer._renderer._container;return this._originalMapDragState&&this._layer._map.dragging.enable(),this._safeToCacheDragState=!0,this._layer._map.off("mousemove",this._dragMixinOnMouseMove,this),this._layer._map.off("mouseup",this._dragMixinOnMouseUp,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),window.setTimeout(function(){t._dragging=!1,L.DomUtil.removeClass(e,"leaflet-pm-dragging"),t._fireDragEnd(),t._fireEdit()},10),!0)},_dragMixinOnMouseMove:function(t){var e=this._layer._path?this._layer._path:this._layer._renderer._container;this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer.bringToFront(),this._originalMapDragState&&this._layer._map.dragging.disable(),this._fireDragStart()),this._onLayerDrag(t)},_dragMixinOnMouseDown:function(t){0<t.originalEvent.button||(this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,this._layer._map.on("mouseup",this._dragMixinOnMouseUp,this),this._layer._map.on("mousemove",this._dragMixinOnMouseMove,this))},dragging:function(){return this._dragging},_onLayerDrag:function(t){function e(t){return t.map(function(t){return Array.isArray(t)?e(t):{lat:t.lat+o,lng:t.lng+a}})}var i,n,r=t.latlng,o=r.lat-this._tempDragCoord.lat,a=r.lng-this._tempDragCoord.lng;this._layer instanceof L.CircleMarker?(i=e([this._layer.getLatLng()]),this._layer.setLatLng(i[0])):(n=e(this._layer.getLatLngs()),this._layer.setLatLngs(n)),this._tempDragCoord=r,t.layer=this._layer,this._fireDrag(t)},_fireDragStart:function(){this._layer.fire("pm:dragstart",{layer:this._layer,shape:this.getShape()})},_fireDrag:function(t){this._layer.fire("pm:drag",Object.assign({},t,{shape:this.getShape()}))},_fireDragEnd:function(){this._layer.fire("pm:dragend",{layer:this._layer,shape:this.getShape()})},addDraggingClass:function(){var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable")}},J=L.Class.extend({includes:[Y,j],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,draggable:!0,limitMarkersToCount:-1,preventMarkerRemoval:!1,hideMiddleMarkers:!1},setOptions:function(t){L.Util.setOptions(this,t)},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape}});J.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.findLayers(),this._layers.forEach(function(t){return e._initLayer(t)}),this._layerGroup.on("layeradd",function(t){t.target._pmTempLayer||(e._layers=e.findLayers(),t.layer.pm&&e._initLayer(t.layer),t.target.pm.enabled()&&e.enable(e.getOptions()))}),this._layerGroup.on("layerremove",function(t){t.target._pmTempLayer||(e._layers=e.findLayers())})},findLayers:function(){return this._layerGroup.getLayers().filter(function(t){return!(t instanceof L.LayerGroup)}).filter(function(t){return!!t.pm}).filter(function(t){return!t._pmTempLayer})},_initLayer:function(e){var i=this;["pm:edit","pm:update","pm:enable","pm:disable","pm:remove","pm:dragstart","pm:drag","pm:dragend","pm:snap","pm:unsnap","pm:cut","pm:intersect","pm:markerdragend","pm:markerdragstart","pm:vertexadded","pm:vertexremoved","pm:centerplaced"].forEach(function(t){e.on(t,i._fireEvent,i)}),e.pm._layerGroup=this._layerGroup},_fireEvent:function(t){this._layerGroup.fireEvent(t.type,t)},toggleEdit:function(e){this._options=e,this._layers.forEach(function(t){t.pm.toggleEdit(e)})},enable:function(e){this._options=e,this._layers.forEach(function(t){t.pm.enable(e)})},disable:function(){this._layers.forEach(function(t){t.pm.disable()})},enabled:function(){return!!this._layers.find(function(t){return t.pm.enabled()})},dragging:function(){return!!this._layers.find(function(t){return t.pm.dragging()})},getOptions:function(){return this._options}}),J.Marker=J.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this.enabled()||(this._enabled=!0,this._layer.fire("pm:enable",{layer:this._layer,shape:this.getShape()}),this.applyOptions())},enabled:function(){return this._enabled},disable:function(){this._enabled=!1,this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.fire("pm:disable",{layer:this._layer,shape:this.getShape()}),this._layerEdited&&this._layer.fire("pm:update",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!1},_removeMarker:function(t){var e=t.target;e.remove(),e.fire("pm:remove",{layer:e,shape:this.getShape()}),this._map.fire("pm:remove",{layer:e,shape:this.getShape()})},_onDragEnd:function(t){t.target.fire("pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,t.off("drag",this._handleSnapping,this),t.on("drag",this._handleSnapping,this),t.off("dragend",this._cleanupSnapping,this),t.on("dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("drag",this._handleSnapping,this),t.off("dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});var X=i(7),Q=i.n(X);function tt(t){return function(t){if(Array.isArray(t))return et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t){if(t){if("string"==typeof t)return et(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?et(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var it={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),-1<this.options.limitMarkersToCount&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.applyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.applyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(tt(this._markerGroup.getLayers()),tt(this.markerCache));this.markerCache=t.filter(function(t,e,i){return i.indexOf(t)===e})},renderLimits:function(e){var i=this;this.markerCache.forEach(function(t){e.includes(t)?i._markerGroup.addLayer(t):i._markerGroup.removeLayer(t)})},applyLimitFilters:function(t){var e=t.latlng,i=void 0===e?{lat:0,lng:0}:e,n=tt(this._filterClosestMarkers(i));this.renderLimits(n)},_filterClosestMarkers:function(i){var t=tt(this.markerCache),n=this.options.limitMarkersToCount;return t.sort(function(t,e){return t._latlng.distanceTo(i)-e._latlng.distanceTo(i)}),t.filter(function(t,e){return!(-1<n)||e<n})}};function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}J.Line=J.extend({includes:[it],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.fire("pm:enable",{layer:this._layer,shape:this.getShape()}),this._layer.on("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.cachedColor=void 0,this.options.allowSelfIntersection||(this.cachedColor=this._layer.options.color,this.isRed=!1,this._handleLayerStyle()))},_onLayerRemove:function(t){this.disable(t.target)},enabled:function(){return this._enabled},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;if(!this.enabled())return!1;if(t.pm._dragging)return!1;t.pm._enabled=!1,t.pm._markerGroup.clearLayers(),t.pm._markerGroup.removeFrom(this._map),t.off("mousedown"),t.off("mouseup"),this._layer.off("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var e=t._path?t._path:this._layer._renderer._container;return L.DomUtil.removeClass(e,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(e,"leaflet-pm-invalid"),this._layer.fire("pm:disable",{layer:this._layer,shape:this.getShape()}),this._layerEdited&&this._layer.fire("pm:update",{layer:this._layer,shape:this.getShape()}),!(this._layerEdited=!1)},hasSelfIntersection:function(){return 0<H()(this._layer.toGeoJSON(15)).features.length},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this,i=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?(i.setStyle({color:"red"}),this.isRed=!0,window.setTimeout(function(){i.setStyle({color:e.cachedColor}),e.isRed=!1},200)):(i.setStyle({color:"red"}),this.isRed=!0),this._layer.fire("pm:intersect",{layer:this._layer,intersection:H()(this._layer.toGeoJSON(15)),shape:this.getShape()})}else i.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_updateDisabledMarkerStyle:function(t,e){var i=this;t.forEach(function(t){return Array.isArray(t)?i._updateDisabledMarkerStyle(t,e):void(t._icon&&(e&&!i._checkMarkerAllowedToDrag(t)?L.DomUtil.addClass(t._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(t._icon,"vertexmarker-disabled")))})},_initMarkers:function(){var o=this,t=this._map,e=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,this._markers=function t(n){if(Array.isArray(n[0]))return n.map(t,o);var r=n.map(o._createMarker,o);return!0!==o.options.hideMiddleMarkers&&n.map(function(t,e){var i=o.isPolygon()?(e+1)%n.length:e+1;return o._createMiddleMarker(r[e],r[i])}),r}(e),this.filterMarkerGroup(),t.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on("contextmenu",this._removeMarker,this),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(e,i){var n=this;if(!e||!i)return!1;var t=k.calcMiddleLatLng(this._map,e.getLatLng(),i.getLatLng()),r=this._createMarker(t),o=L.divIcon({className:"marker-icon marker-icon-middle"});return r.setIcon(o),e._middleMarkerNext=r,(i._middleMarkerPrev=r).on("click",function(){var t=L.divIcon({className:"marker-icon"});r.setIcon(t),n._addMarker(r,e,i)}),r.on("movestart",function(){r.on("moveend",function(){var t=L.divIcon({className:"marker-icon"});r.setIcon(t),r.off("moveend")}),n._addMarker(r,e,i)}),r},_addMarker:function(t,e,i){t.off("movestart"),t.off("click");var n=t.getLatLng(),r=this._layer._latlngs,o=this.findDeepMarkerIndex(this._markers,e),a=o.indexPath,s=o.index,l=o.parentPath,c=1<a.length?_()(r,l):r,u=1<a.length?_()(this._markers,l):this._markers;c.splice(s+1,0,n),u.splice(s+1,0,t),this._layer.setLatLngs(r),!0!==this.options.hideMiddleMarkers&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,i)),this._fireEdit(),this._layer.fire("pm:vertexadded",{layer:this._layer,marker:t,indexPath:this.findDeepMarkerIndex(this._markers,t).indexPath,latlng:n,shape:this.getShape()}),this.options.snappable&&this._initSnappableMarkers()},_removeMarker:function(t){var e;this.options.allowSelfIntersection||(e=this._layer.getLatLngs(),this._coordsBeforeEdit=JSON.parse(JSON.stringify(e)));var i,n,r,o,a,s,l=t.target,c=this._layer.getLatLngs(),u=this.findDeepMarkerIndex(this._markers,l),h=u.indexPath,p=u.index,d=u.parentPath;h&&(r=1<h.length?_()(c,d):c,o=1<h.length?_()(this._markers,d):this._markers,r.splice(p,1),this._layer.setLatLngs(c),this.isPolygon()&&r.length<=2&&r.splice(0,r.length),r.length<=1&&(r.splice(0,r.length),this._layer.setLatLngs(c),this.disable(),this.enable(this.options)),function i(t){return t.filter(function(t){return![null,"",void 0].includes(t)}).reduce(function(t,e){return t.concat(Array.isArray(e)?i(e):e)},[])}(c).length||this._layer.remove(),l._middleMarkerPrev&&this._markerGroup.removeLayer(l._middleMarkerPrev),l._middleMarkerNext&&this._markerGroup.removeLayer(l._middleMarkerNext),this._markerGroup.removeLayer(l),this.isPolygon()?(i=(p+1)%o.length,n=(p+(o.length-1))%o.length):(n=p-1<0?void 0:p-1,i=p+1>=o.length?void 0:p+1),i!==n&&(a=o[n],s=o[i],!0!==this.options.hideMiddleMarkers&&this._createMiddleMarker(a,s)),o.splice(p,1),this._fireEdit(),this._layer.fire("pm:vertexremoved",{layer:this._layer,marker:l,indexPath:h,shape:this.getShape()}))},findDeepMarkerIndex:function(t,o){var a;t.some(function n(r){return function(t,e){var i=r.concat(e);return t._leaflet_id===o._leaflet_id?(a=i,!0):Array.isArray(t)&&t.some(n(i))}}([]));var e={};return a&&(e={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),e},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),i=t.getLatLng(),n=this.findDeepMarkerIndex(this._markers,t),r=n.indexPath,o=n.index,a=n.parentPath;(1<r.length?_()(e,a):e).splice(o,1,i),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=this.findDeepMarkerIndex(this._markers,t),i=e.indexPath,n=e.index,r=e.parentPath,o=1<i.length?_()(this._markers,r):this._markers,a=(n+1)%o.length;return{prevMarker:o[(n+(o.length-1))%o.length],nextMarker:o[a]}},_onMarkerDrag:function(t){var e=t.target,i=this.findDeepMarkerIndex(this._markers,e),n=i.indexPath,r=i.index,o=i.parentPath;if(n){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&!1===this._markerAllowedToDrag)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var a,s,l=1<n.length?_()(this._markers,o):this._markers,c=(r+1)%l.length,u=(r+(l.length-1))%l.length,h=e.getLatLng(),p=l[u].getLatLng(),d=l[c].getLatLng();e._middleMarkerNext&&(a=k.calcMiddleLatLng(this._map,h,d),e._middleMarkerNext.setLatLng(a)),e._middleMarkerPrev&&(s=k.calcMiddleLatLng(this._map,h,p),e._middleMarkerPrev.setLatLng(s)),this.options.allowSelfIntersection||this._handleLayerStyle()}},_onMarkerDragEnd:function(t){var e=t.target,i=this.findDeepMarkerIndex(this._markers,e).indexPath;this._layer.fire("pm:markerdragend",{layer:this._layer,markerEvent:t,indexPath:i,shape:this.getShape()});var n=this.hasSelfIntersection();if(n&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(n=!1),!this.options.allowSelfIntersection&&n)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),void this._handleLayerStyle();!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit()},_onMarkerDragStart:function(t){var e=t.target,i=this.findDeepMarkerIndex(this._markers,e).indexPath;this._layer.fire("pm:markerdragstart",{layer:this._layer,markerEvent:t,indexPath:i,shape:this.getShape()}),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs()),this.cachedColor||(this.cachedColor=this._layer.options.color),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,n=e.nextMarker,r=L.polyline([i.getLatLng(),t.getLatLng()]),o=L.polyline([t.getLatLng(),n.getLatLng()]),a=Q()(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.length,s=Q()(this._layer.toGeoJSON(15),o.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?s+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(a+=1),!(a<=2&&s<=2)},_fireEdit:function(){this._layerEdited=!0,this._layer.fire("pm:edit",{layer:this._layer,shape:this.getShape()})}}),J.Polygon=J.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,n=e.nextMarker,r=L.polyline([i.getLatLng(),t.getLatLng()]),o=L.polyline([t.getLatLng(),n.getLatLng()]),a=Q()(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.length,s=Q()(this._layer.toGeoJSON(15),o.toGeoJSON(15)).features.length;return!(a<=2&&s<=2)}}),J.Rectangle=J.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this._map,e=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,t.addLayer(this._markerGroup),this._markers=[],this._markers[0]=e.map(this._createMarker,this);var i,n=function(t){if(Array.isArray(t))return t}(i=this._markers)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(e.push(o.value),1!==e.length);i=!0);}catch(t){n=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e}}(i)||function(t){if(t){if("string"==typeof t)return nt(t,1);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?nt(t,1):void 0}}(i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();this._cornerMarkers=n[0],this.options.snappable&&this._initSnappableMarkers()},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return i._origLatLng=t,i._index=e,i._pmTempLayer=!0,i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),i.on("pm:snap",this._adjustRectangleForMarkerSnap,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this),this._markerGroup.addLayer(i),i},_removeMarker:function(){return null},_onMarkerDragStart:function(t){var e=t.target,i=this._findCorners();e._oppositeCornerLatLng=i[(e._index+2)%4],e._snapped=!1,this._layer.fire("pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_onMarkerDrag:function(t){var e=t.target;void 0!==e._index&&(e._snapped||this._adjustRectangleForMarkerMove(e))},_onMarkerDragEnd:function(t){var e=this._findCorners();this._adjustAllMarkers(e),this._cornerMarkers.forEach(function(t){delete t._oppositeCornerLatLng}),this._layer.setLatLngs(e),this._layer.fire("pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0}),this._fireEdit()},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=t.getLatLng();this._layer.setBounds(L.latLngBounds(e,t._oppositeCornerLatLng)),this._adjustAdjacentMarkers(t),this._layer.redraw()},_adjustRectangleForMarkerSnap:function(t){var e;this.options.snappable&&(e=t.target,this._adjustRectangleForMarkerMove(e))},_adjustAllMarkers:function(i){i.length&&4===i.length?this._cornerMarkers.forEach(function(t,e){t.setLatLng(i[e])}):console.error("_adjustAllMarkers() requires an array of EXACTLY 4 LatLng coordinates")},_adjustAdjacentMarkers:function(t){var i,n,r,o;t&&t.getLatLng&&t._oppositeCornerLatLng?(i=t.getLatLng(),n=t._oppositeCornerLatLng,r=[],this._findCorners().forEach(function(t){t.equals(i)||t.equals(n)||r.push(t)}),o=0,2===r.length&&this._cornerMarkers.forEach(function(t){var e=t.getLatLng();e.equals(i)||e.equals(n)||(t.setLatLng(r[o]),o+=1)})):console.error("_adjustAdjacentMarkers() requires a valid Marker object")},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),J.Circle=J.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_disableSnapping:function(){var e=this;this._markers.forEach(function(t){t.off("move",e._syncHintLine,e),t.off("move",e._syncCircleRadius,e),t.off("drag",e._handleSnapping,e),t.off("dragend",e._cleanupSnapping,e)}),this._layer.off("pm:dragstart",this._unsnap,this)},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(t){var e=this;L.Util.setOptions(this,t),this._map=this._layer._map,this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.fire("pm:enable",{layer:this._layer,shape:this.getShape()}),this._layer.on("remove",function(t){e.disable(t.target)}),this._updateHiddenPolyCircle()},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;if(!this.enabled())return!1;if(t.pm._dragging)return!1;this._centerMarker.off("dragstart",this._fireDragStart,this),this._centerMarker.off("drag",this._fireDrag,this),this._centerMarker.off("dragend",this._fireDragEnd,this),t.pm._enabled=!1,t.pm._helperLayers.clearLayers(),t.off("mousedown"),t.off("mouseup");var e=t._path?t._path:this._layer._renderer._container;return L.DomUtil.removeClass(e,"leaflet-pm-draggable"),this._layer.fire("pm:disable",{layer:this._layer,shape:this.getShape()}),this._layerEdited&&this._layer.fire("pm:update",{layer:this._layer,shape:this.getShape()}),!(this._layerEdited=!1)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var i=this._map.project(t),n=L.point(i.x+e,i.y);return this._map.unproject(n)},_resizeCircle:function(){this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){var e=t.latlng;this._layer.setLatLng(e);var i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._outerMarker.setLatLng(n),this._syncHintLine(),this._updateHiddenPolyCircle(),this._layer.fire("pm:centerplaced",{layer:this._layer,latlng:e,shape:this.getShape()})},_onMarkerDragStart:function(t){this._layer.fire("pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_onMarkerDragEnd:function(t){this._fireEdit(),this._layer.fire("pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=t.distanceTo(e);this._layer.setRadius(i),this._updateHiddenPolyCircle()},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_createHintLine:function(t,e){var i=t.getLatLng(),n=e.getLatLng();this._hintline=L.polyline([i,n],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._fireDragStart,this),e.on("drag",this._fireDrag,this),e.on("dragend",this._fireDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_fireEdit:function(){this._layer.fire("pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0},_fireDragStart:function(){this._layer.fire("pm:dragstart",{layer:this._layer,shape:this.getShape()})},_fireDrag:function(t){this._layer.fire("pm:drag",Object.assign({},t,{shape:this.getShape()}))},_fireDragEnd:function(){this._layer.fire("pm:dragend",{layer:this._layer,shape:this.getShape()})},_updateHiddenPolyCircle:function(){this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(k.circleToPolygon(this._layer,200).getLatLngs()):this._hiddenPolyCircle=k.circleToPolygon(this._layer,200),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}}),J.CircleMarker=J.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.enabled()||this.disable(),this.applyOptions(),this._layer.fire("pm:enable",{layer:this._layer,shape:this.getShape()}),this._enabled=!0,this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle())},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;return!(t.pm._dragging||(t.pm._helperLayers&&t.pm._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this.options.editable?this._map.off("move",this._syncMarkers,this):this._map.off("move",this._updateHiddenPolyCircle,this),this.disableLayerDrag(),this.enabled()||(this._layer.fire("pm:disable",{layer:this._layer,shape:this.getShape()}),this._layerEdited&&this._layer.fire("pm:update",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!1),this._layer.off("contextmenu",this._removeMarker,this),t.pm._enabled=!1))},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var i=this._map.project(t),n=L.point(i.x+e,i.y);return this._map.unproject(n)},_createHintLine:function(t,e){var i=t.getLatLng(),n=e.getLatLng();this._hintline=L.polyline([i,n],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?(L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this)):e.dragging.disable(),e},_moveCircle:function(t){var e=t.latlng;this._layer.setLatLng(e);var i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._outerMarker.setLatLng(n),this._syncHintLine(),this._layer.fire("pm:centerplaced",{layer:this._layer,latlng:e,shape:this.getShape()})},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,i=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(i),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this._layer.setRadius(i),this._updateHiddenPolyCircle()},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_moveMarker:function(t){var e=t.latlng;this._layer.setLatLng(e).redraw()},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._layer.fire("pm:remove",{layer:this._layer,shape:this.getShape()}),this._map.fire("pm:remove",{layer:this._layer,shape:this.getShape()})},_onMarkerDragStart:function(t){this._layer.fire("pm:markerdragstart",{markerEvent:t,layer:this._layer,shape:this.getShape(),indexPath:void 0})},_fireEdit:function(){this._layer.fire("pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0},_onMarkerDragEnd:function(t){this._layer.fire("pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t,e,i,n,r=this._layer._map||this._map;r&&(t=r.project(this._layer.getLatLng()),e=L.point(t.x+this._layer.getRadius(),t.y),i=this._layer.getLatLng().distanceTo(r.unproject(e)),(n=L.circle(this._layer.getLatLng(),this._layer.options)).setRadius(i),this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(k.circleToPolygon(n,200).getLatLngs()):this._hiddenPolyCircle=k.circleToPolygon(n,200),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer))}}),i(143),i(144),L.PM=L.PM||{version:n.a,Map:B,Toolbar:F,Draw:N,Edit:J,Utils:k,activeLang:"en",initialize:function(t){this.addInitHooks(t)},addInitHooks:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};L.Map.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this))}),L.LayerGroup.addInitHook(function(){this.pm=new L.PM.Edit.LayerGroup(this)}),L.Marker.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,t.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))})}},L.PM.initialize()}],r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=59)},function(t,e,i){
/* flatpickr v4.6.6, @license MIT */
t.exports=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Ct=function(){Ct=Object.assign||function t(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o))e[o]=i[o]}return e};return Ct.apply(this,arguments)};function Mt(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<i;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)n[r]=o[a];return n}var St=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Tt={_disable:[],_enable:[],allowInput:false,allowInvalidPreload:false,altFormat:"F j, Y",altInput:false,altInputClass:"form-control input",animate:typeof window==="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:true,clickOpens:true,closeOnSelect:true,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:false,enable:[],enableSeconds:false,enableTime:false,errorHandler:function(t){return typeof console!=="undefined"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0);e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:false,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:false,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:undefined,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:false,showMonths:1,static:false,time_24hr:false,weekNumbers:false,wrap:false},Pt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:false},Dt=function(t,e){if(e===void 0){e=2}return("000"+t).slice(e*-1)},At=function(t){return t===true?1:0};function Et(i,n,r){if(r===void 0){r=false}var o;return function(){var t=this,e=arguments;o!==null&&clearTimeout(o);o=window.setTimeout(function(){o=null;if(!r)i.apply(t,e)},n);if(r&&!o)i.apply(t,e)}}var Ot=function(t){return t instanceof Array?t:[t]};function It(t,e,i){if(i===true)return t.classList.add(e);t.classList.remove(e)}function Bt(t,e,i){var n=window.document.createElement(t);e=e||"";i=i||"";n.className=e;if(i!==undefined)n.textContent=i;return n}function zt(t){while(t.firstChild)t.removeChild(t.firstChild)}function Rt(t,e){if(e(t))return t;else if(t.parentNode)return Rt(t.parentNode,e);return undefined}function Ft(t,e){var i=Bt("div","numInputWrapper"),n=Bt("input","numInput "+t),r=Bt("span","arrowUp"),o=Bt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1){n.type="number"}else{n.type="text";n.pattern="\\d*"}if(e!==undefined)for(var a in e)n.setAttribute(a,e[a]);i.appendChild(n);i.appendChild(r);i.appendChild(o);return i}function jt(e){try{if(typeof e.composedPath==="function"){var t=e.composedPath();return t[0]}return e.target}catch(t){return e.target}}var t=function(){return undefined},Nt=function(t,e,i){return i.months[e?"shorthand":"longhand"][t]},b={D:t,F:function(t,e,i){t.setMonth(i.months.longhand.indexOf(e))},G:function(t,e){t.setHours(parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,i){t.setHours(t.getHours()%12+12*At(new RegExp(i.amPM[1],"i").test(e)))},M:function(t,e,i){t.setMonth(i.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,i){var n=parseInt(e);var r=new Date(t.getFullYear(),0,2+(n-1)*7,0,0,0,0);r.setDate(r.getDate()-r.getDay()+i.firstDayOfWeek);return r},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours(parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:t,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:t,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},Ut={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},l={Z:function(t){return t.toISOString()},D:function(t,e,i){return e.weekdays.shorthand[l.w(t,e,i)]},F:function(t,e,i){return Nt(l.n(t,e,i)-1,false,e)},G:function(t,e,i){return Dt(l.h(t,e,i))},H:function(t){return Dt(t.getHours())},J:function(t,e){return e.ordinal!==undefined?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[At(t.getHours()>11)]},M:function(t,e){return Nt(t.getMonth(),true,e)},S:function(t){return Dt(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,i){return i.getWeek(t)},Y:function(t){return Dt(t.getFullYear(),4)},d:function(t){return Dt(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return Dt(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return Dt(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},Ht=function(t){var e=t.config,o=e===void 0?Tt:e,i=t.l10n,a=i===void 0?Pt:i,n=t.isMobile,s=n===void 0?false:n;return function(n,t,e){var r=e||a;if(o.formatDate!==undefined&&!s){return o.formatDate(n,t,r)}return t.split("").map(function(t,e,i){return l[t]&&i[e-1]!=="\\"?l[t](n,r,o):t!=="\\"?t:""}).join("")}},Gt=function(t){var e=t.config,_=e===void 0?Tt:e,i=t.l10n,y=i===void 0?Pt:i;return function(t,e,i,n){if(t!==0&&!t)return undefined;var r=n||y;var o;var a=t;if(t instanceof Date)o=new Date(t.getTime());else if(typeof t!=="string"&&t.toFixed!==undefined)o=new Date(t);else if(typeof t==="string"){var s=e||(_||Tt).dateFormat;var l=String(t).trim();if(l==="today"){o=new Date;i=true}else if(/Z$/.test(l)||/GMT$/.test(l))o=new Date(t);else if(_&&_.parseDate)o=_.parseDate(t,s);else{o=!_||!_.noCalendar?new Date((new Date).getFullYear(),0,1,0,0,0,0):new Date((new Date).setHours(0,0,0,0));var c=void 0,u=[];for(var h=0,p=0,d="";h<s.length;h++){var f=s[h];var m=f==="\\";var g=s[h-1]==="\\"||m;if(Ut[f]&&!g){d+=Ut[f];var v=new RegExp(d).exec(t);if(v&&(c=true)){u[f!=="Y"?"push":"unshift"]({fn:b[f],val:v[++p]})}}else if(!m)d+=".";u.forEach(function(t){var e=t.fn,i=t.val;return o=e(o,i,r)||o})}o=c?o:undefined}}if(!(o instanceof Date&&!isNaN(o.getTime()))){_.errorHandler(new Error("Invalid date provided: "+a));return undefined}if(i===true)o.setHours(0,0,0,0);return o}};function Zt(t,e,i){if(i===void 0){i=true}if(i!==false){return new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0)}return t.getTime()-e.getTime()}var Wt=function(t,e,i){return t>Math.min(e,i)&&t<Math.max(e,i)},Vt={DAY:864e5};if(typeof Object.assign!=="function"){Object.assign=function(i){var t=[];for(var e=1;e<arguments.length;e++){t[e-1]=arguments[e]}if(!i){throw TypeError("Cannot convert undefined or null to object")}var n=function(e){if(e){Object.keys(e).forEach(function(t){return i[t]=e[t]})}};for(var r=0,o=t;r<o.length;r++){var a=o[r];n(a)}return i}}var qt=300;function a(p,u){var L={config:Ct(Ct({},Tt),$t.defaultConfig),l10n:Pt};L.parseDate=Gt({config:L.config,l10n:L.l10n});L._handlers=[];L.pluginElements=[];L.loadedPlugins=[];L._bind=a;L._setHoursFromDate=o;L._positionCalendar=et;L.changeMonth=R;L.changeYear=G;L.clear=F;L.close=j;L._createElement=Bt;L.destroy=N;L.isEnabled=Z;L.jumpToDate=v;L.open=Y;L.redraw=rt;L.set=lt;L.setDate=ut;L.toggle=mt;function e(){L.utils={getDaysInMonth:function(t,e){if(t===void 0){t=L.currentMonth}if(e===void 0){e=L.currentYear}if(t===1&&(e%4===0&&e%100!==0||e%400===0))return 29;return L.l10n.daysInMonth[t]}}}function t(){L.element=L.input=p;L.isOpen=false;X();tt();dt();pt();e();if(!L.isMobile)b();g();if(L.selectedDates.length||L.config.noCalendar){if(L.config.enableTime){o(L.config.noCalendar?L.latestSelectedDateObj||L.config.minDate:undefined)}wt(false)}i();var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(!L.isMobile&&t){et()}gt("onReady")}function h(t){return t.bind(L)}function i(){var e=L.config;if(e.weekNumbers===false&&e.showMonths===1){return}else if(e.noCalendar!==true){window.requestAnimationFrame(function(){if(L.calendarContainer!==undefined){L.calendarContainer.style.visibility="hidden";L.calendarContainer.style.display="block"}if(L.daysContainer!==undefined){var t=(L.days.offsetWidth+1)*e.showMonths;L.daysContainer.style.width=t+"px";L.calendarContainer.style.width=t+(L.weekWrapper!==undefined?L.weekWrapper.offsetWidth:0)+"px";L.calendarContainer.style.removeProperty("visibility");L.calendarContainer.style.removeProperty("display")}})}}function d(t){if(L.selectedDates.length===0){var e=L.config.minDate!==undefined?new Date(L.config.minDate.getTime()):new Date;var i=l(),n=i.hours,r=i.minutes,o=i.seconds;e.setHours(n,r,o,0);L.setDate(e,false)}if(t!==undefined&&t.type!=="blur"){Lt(t)}var a=L._input.value;f();wt();if(L._input.value!==a){L._debouncedChange()}}function s(t,e){return t%12+12*At(e===L.l10n.amPM[1])}function r(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}function f(){if(L.hourElement===undefined||L.minuteElement===undefined)return;var t=(parseInt(L.hourElement.value.slice(-2),10)||0)%24,e=(parseInt(L.minuteElement.value,10)||0)%60,i=L.secondElement!==undefined?(parseInt(L.secondElement.value,10)||0)%60:0;if(L.amPM!==undefined){t=s(t,L.amPM.textContent)}var n=L.config.minTime!==undefined||L.config.minDate&&L.minDateHasTime&&L.latestSelectedDateObj&&Zt(L.latestSelectedDateObj,L.config.minDate,true)===0;var r=L.config.maxTime!==undefined||L.config.maxDate&&L.maxDateHasTime&&L.latestSelectedDateObj&&Zt(L.latestSelectedDateObj,L.config.maxDate,true)===0;if(r){var o=L.config.maxTime!==undefined?L.config.maxTime:L.config.maxDate;t=Math.min(t,o.getHours());if(t===o.getHours())e=Math.min(e,o.getMinutes());if(e===o.getMinutes())i=Math.min(i,o.getSeconds())}if(n){var a=L.config.minTime!==undefined?L.config.minTime:L.config.minDate;t=Math.max(t,a.getHours());if(t===a.getHours())e=Math.max(e,a.getMinutes());if(e===a.getMinutes())i=Math.max(i,a.getSeconds())}c(t,e,i)}function o(t){var e=t||L.latestSelectedDateObj;if(e){c(e.getHours(),e.getMinutes(),e.getSeconds())}}function l(){var t=L.config.defaultHour;var e=L.config.defaultMinute;var i=L.config.defaultSeconds;if(L.config.minDate!==undefined){var n=L.config.minDate.getHours();var r=L.config.minDate.getMinutes();t=Math.max(t,n);if(t===n)e=Math.max(r,e);if(t===n&&e===r)i=L.config.minDate.getSeconds()}if(L.config.maxDate!==undefined){var o=L.config.maxDate.getHours();var a=L.config.maxDate.getMinutes();t=Math.min(t,o);if(t===o)e=Math.min(a,e);if(t===o&&e===a)i=L.config.maxDate.getSeconds()}return{hours:t,minutes:e,seconds:i}}function c(t,e,i){if(L.latestSelectedDateObj!==undefined){L.latestSelectedDateObj.setHours(t%24,e,i||0,0)}if(!L.hourElement||!L.minuteElement||L.isMobile)return;L.hourElement.value=Dt(!L.config.time_24hr?(12+t)%12+12*At(t%12===0):t);L.minuteElement.value=Dt(e);if(L.amPM!==undefined)L.amPM.textContent=L.l10n.amPM[At(t>=12)];if(L.secondElement!==undefined)L.secondElement.value=Dt(i)}function n(t){var e=jt(t);var i=parseInt(e.value)+(t.delta||0);if(i/1e3>1||t.key==="Enter"&&!/[^\d]/.test(i.toString())){G(i)}}function a(e,i,n,r){if(i instanceof Array)return i.forEach(function(t){return a(e,t,n,r)});if(e instanceof Array)return e.forEach(function(t){return a(t,i,n,r)});e.addEventListener(i,n,r);L._handlers.push({element:e,event:i,handler:n,options:r})}function m(){gt("onChange")}function g(){if(L.config.wrap){["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(L.element.querySelectorAll("[data-"+e+"]"),function(t){return a(t,"click",L[e])})})}if(L.isMobile){ft();return}var t=Et(K,50);L._debouncedChange=Et(m,qt);if(L.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent))a(L.daysContainer,"mouseover",function(t){if(L.config.mode==="range")$(jt(t))});a(window.document.body,"keydown",q);if(!L.config.inline&&!L.config.static)a(window,"resize",t);if(window.ontouchstart!==undefined)a(window.document,"touchstart",H);else a(window.document,"click",H);a(window.document,"focus",H,{capture:true});if(L.config.clickOpens===true){a(L._input,"focus",L.open);a(L._input,"click",L.open)}if(L.daysContainer!==undefined){a(L.monthNav,"click",kt);a(L.monthNav,["keyup","increment"],n);a(L.daysContainer,"click",at)}if(L.timeContainer!==undefined&&L.minuteElement!==undefined&&L.hourElement!==undefined){var e=function(t){return jt(t).select()};a(L.timeContainer,["increment"],d);a(L.timeContainer,"blur",d,{capture:true});a(L.timeContainer,"click",_);a([L.hourElement,L.minuteElement],["focus","click"],e);if(L.secondElement!==undefined)a(L.secondElement,"focus",function(){return L.secondElement&&L.secondElement.select()});if(L.amPM!==undefined){a(L.amPM,"click",function(t){d(t);m()})}}if(L.config.allowInput)a(L._input,"blur",V)}function v(t,e){var i=t!==undefined?L.parseDate(t):L.latestSelectedDateObj||(L.config.minDate&&L.config.minDate>L.now?L.config.minDate:L.config.maxDate&&L.config.maxDate<L.now?L.config.maxDate:L.now);var n=L.currentYear;var r=L.currentMonth;try{if(i!==undefined){L.currentYear=i.getFullYear();L.currentMonth=i.getMonth()}}catch(t){t.message="Invalid date supplied: "+i;L.config.errorHandler(t)}if(e&&L.currentYear!==n){gt("onYearChange");P()}if(e&&(L.currentYear!==n||L.currentMonth!==r)){gt("onMonthChange")}L.redraw()}function _(t){var e=jt(t);if(~e.className.indexOf("arrow"))y(t,e.classList.contains("arrowUp")?1:-1)}function y(t,e,i){var n=t&&jt(t);var r=i||n&&n.parentNode&&n.parentNode.firstChild;var o=vt("increment");o.delta=e;r&&r.dispatchEvent(o)}function b(){var t=window.document.createDocumentFragment();L.calendarContainer=Bt("div","flatpickr-calendar");L.calendarContainer.tabIndex=-1;if(!L.config.noCalendar){t.appendChild(E());L.innerContainer=Bt("div","flatpickr-innerContainer");if(L.config.weekNumbers){var e=z(),i=e.weekWrapper,n=e.weekNumbers;L.innerContainer.appendChild(i);L.weekNumbers=n;L.weekWrapper=i}L.rContainer=Bt("div","flatpickr-rContainer");L.rContainer.appendChild(I());if(!L.daysContainer){L.daysContainer=Bt("div","flatpickr-days");L.daysContainer.tabIndex=-1}T();L.rContainer.appendChild(L.daysContainer);L.innerContainer.appendChild(L.rContainer);t.appendChild(L.innerContainer)}if(L.config.enableTime){t.appendChild(O())}It(L.calendarContainer,"rangeMode",L.config.mode==="range");It(L.calendarContainer,"animate",L.config.animate===true);It(L.calendarContainer,"multiMonth",L.config.showMonths>1);L.calendarContainer.appendChild(t);var r=L.config.appendTo!==undefined&&L.config.appendTo.nodeType!==undefined;if(L.config.inline||L.config.static){L.calendarContainer.classList.add(L.config.inline?"inline":"static");if(L.config.inline){if(!r&&L.element.parentNode)L.element.parentNode.insertBefore(L.calendarContainer,L._input.nextSibling);else if(L.config.appendTo!==undefined)L.config.appendTo.appendChild(L.calendarContainer)}if(L.config.static){var o=Bt("div","flatpickr-wrapper");if(L.element.parentNode)L.element.parentNode.insertBefore(o,L.element);o.appendChild(L.element);if(L.altInput)o.appendChild(L.altInput);o.appendChild(L.calendarContainer)}}if(!L.config.static&&!L.config.inline)(L.config.appendTo!==undefined?L.config.appendTo:window.document.body).appendChild(L.calendarContainer)}function x(t,e,i,n){var r=Z(e,true),o=Bt("span","flatpickr-day "+t,e.getDate().toString());o.dateObj=e;o.$i=n;o.setAttribute("aria-label",L.formatDate(e,L.config.ariaDateFormat));if(t.indexOf("hidden")===-1&&Zt(e,L.now)===0){L.todayDateElem=o;o.classList.add("today");o.setAttribute("aria-current","date")}if(r){o.tabIndex=-1;if(_t(e)){o.classList.add("selected");L.selectedDateElem=o;if(L.config.mode==="range"){It(o,"startRange",L.selectedDates[0]&&Zt(e,L.selectedDates[0],true)===0);It(o,"endRange",L.selectedDates[1]&&Zt(e,L.selectedDates[1],true)===0);if(t==="nextMonthDay")o.classList.add("inRange")}}}else{o.classList.add("flatpickr-disabled")}if(L.config.mode==="range"){if(yt(e)&&!_t(e))o.classList.add("inRange")}if(L.weekNumbers&&L.config.showMonths===1&&t!=="prevMonthDay"&&i%7===1){L.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+L.config.getWeek(e)+"</span>")}gt("onDayCreate",o);return o}function w(t){t.focus();if(L.config.mode==="range")$(t)}function k(t){var e=t>0?0:L.config.showMonths-1;var i=t>0?L.config.showMonths:-1;for(var n=e;n!=i;n+=t){var r=L.daysContainer.children[n];var o=t>0?0:r.children.length-1;var a=t>0?r.children.length:-1;for(var s=o;s!=a;s+=t){var l=r.children[s];if(l.className.indexOf("hidden")===-1&&Z(l.dateObj))return l}}return undefined}function C(t,e){var i=t.className.indexOf("Month")===-1?t.dateObj.getMonth():L.currentMonth;var n=e>0?L.config.showMonths:-1;var r=e>0?1:-1;for(var o=i-L.currentMonth;o!=n;o+=r){var a=L.daysContainer.children[o];var s=i-L.currentMonth===o?t.$i+e:e<0?a.children.length-1:0;var l=a.children.length;for(var c=s;c>=0&&c<l&&c!=(e>0?l:-1);c+=r){var u=a.children[c];if(u.className.indexOf("hidden")===-1&&Z(u.dateObj)&&Math.abs(t.$i-c)>=Math.abs(e))return w(u)}}L.changeMonth(r);M(k(r),0);return undefined}function M(t,e){var i=W(document.activeElement||document.body);var n=t!==undefined?t:i?document.activeElement:L.selectedDateElem!==undefined&&W(L.selectedDateElem)?L.selectedDateElem:L.todayDateElem!==undefined&&W(L.todayDateElem)?L.todayDateElem:k(e>0?1:-1);if(n===undefined){L._input.focus()}else if(!i){w(n)}else{C(n,e)}}function S(t,e){var i=(new Date(t,e,1).getDay()-L.l10n.firstDayOfWeek+7)%7;var n=L.utils.getDaysInMonth((e-1+12)%12,t);var r=L.utils.getDaysInMonth(e,t),o=window.document.createDocumentFragment(),a=L.config.showMonths>1,s=a?"prevMonthDay hidden":"prevMonthDay",l=a?"nextMonthDay hidden":"nextMonthDay";var c=n+1-i,u=0;for(;c<=n;c++,u++){o.appendChild(x(s,new Date(t,e-1,c),c,u))}for(c=1;c<=r;c++,u++){o.appendChild(x("",new Date(t,e,c),c,u))}for(var h=r+1;h<=42-i&&(L.config.showMonths===1||u%7!==0);h++,u++){o.appendChild(x(l,new Date(t,e+1,h%r),h,u))}var p=Bt("div","dayContainer");p.appendChild(o);return p}function T(){if(L.daysContainer===undefined){return}zt(L.daysContainer);if(L.weekNumbers)zt(L.weekNumbers);var t=document.createDocumentFragment();for(var e=0;e<L.config.showMonths;e++){var i=new Date(L.currentYear,L.currentMonth,1);i.setMonth(L.currentMonth+e);t.appendChild(S(i.getFullYear(),i.getMonth()))}L.daysContainer.appendChild(t);L.days=L.daysContainer.firstChild;if(L.config.mode==="range"&&L.selectedDates.length===1){$()}}function P(){if(L.config.showMonths>1||L.config.monthSelectorType!=="dropdown")return;var t=function(t){if(L.config.minDate!==undefined&&L.currentYear===L.config.minDate.getFullYear()&&t<L.config.minDate.getMonth()){return false}return!(L.config.maxDate!==undefined&&L.currentYear===L.config.maxDate.getFullYear()&&t>L.config.maxDate.getMonth())};L.monthsDropdownContainer.tabIndex=-1;L.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++){if(!t(e))continue;var i=Bt("option","flatpickr-monthDropdown-month");i.value=new Date(L.currentYear,e).getMonth().toString();i.textContent=Nt(e,L.config.shorthandCurrentMonth,L.l10n);i.tabIndex=-1;if(L.currentMonth===e){i.selected=true}L.monthsDropdownContainer.appendChild(i)}}function D(){var t=Bt("div","flatpickr-month");var e=window.document.createDocumentFragment();var i;if(L.config.showMonths>1||L.config.monthSelectorType==="static"){i=Bt("span","cur-month")}else{L.monthsDropdownContainer=Bt("select","flatpickr-monthDropdown-months");L.monthsDropdownContainer.setAttribute("aria-label",L.l10n.monthAriaLabel);a(L.monthsDropdownContainer,"change",function(t){var e=jt(t);var i=parseInt(e.value,10);L.changeMonth(i-L.currentMonth);gt("onMonthChange")});P();i=L.monthsDropdownContainer}var n=Ft("cur-year",{tabindex:"-1"});var r=n.getElementsByTagName("input")[0];r.setAttribute("aria-label",L.l10n.yearAriaLabel);if(L.config.minDate){r.setAttribute("min",L.config.minDate.getFullYear().toString())}if(L.config.maxDate){r.setAttribute("max",L.config.maxDate.getFullYear().toString());r.disabled=!!L.config.minDate&&L.config.minDate.getFullYear()===L.config.maxDate.getFullYear()}var o=Bt("div","flatpickr-current-month");o.appendChild(i);o.appendChild(n);e.appendChild(o);t.appendChild(e);return{container:t,yearElement:r,monthElement:i}}function A(){zt(L.monthNav);L.monthNav.appendChild(L.prevMonthNav);if(L.config.showMonths){L.yearElements=[];L.monthElements=[]}for(var t=L.config.showMonths;t--;){var e=D();L.yearElements.push(e.yearElement);L.monthElements.push(e.monthElement);L.monthNav.appendChild(e.container)}L.monthNav.appendChild(L.nextMonthNav)}function E(){L.monthNav=Bt("div","flatpickr-months");L.yearElements=[];L.monthElements=[];L.prevMonthNav=Bt("span","flatpickr-prev-month");L.prevMonthNav.innerHTML=L.config.prevArrow;L.nextMonthNav=Bt("span","flatpickr-next-month");L.nextMonthNav.innerHTML=L.config.nextArrow;A();Object.defineProperty(L,"_hidePrevMonthArrow",{get:function(){return L.__hidePrevMonthArrow},set:function(t){if(L.__hidePrevMonthArrow!==t){It(L.prevMonthNav,"flatpickr-disabled",t);L.__hidePrevMonthArrow=t}}});Object.defineProperty(L,"_hideNextMonthArrow",{get:function(){return L.__hideNextMonthArrow},set:function(t){if(L.__hideNextMonthArrow!==t){It(L.nextMonthNav,"flatpickr-disabled",t);L.__hideNextMonthArrow=t}}});L.currentYearElement=L.yearElements[0];bt();return L.monthNav}function O(){L.calendarContainer.classList.add("hasTime");if(L.config.noCalendar)L.calendarContainer.classList.add("noCalendar");L.timeContainer=Bt("div","flatpickr-time");L.timeContainer.tabIndex=-1;var t=Bt("span","flatpickr-time-separator",":");var e=Ft("flatpickr-hour",{"aria-label":L.l10n.hourAriaLabel});L.hourElement=e.getElementsByTagName("input")[0];var i=Ft("flatpickr-minute",{"aria-label":L.l10n.minuteAriaLabel});L.minuteElement=i.getElementsByTagName("input")[0];L.hourElement.tabIndex=L.minuteElement.tabIndex=-1;L.hourElement.value=Dt(L.latestSelectedDateObj?L.latestSelectedDateObj.getHours():L.config.time_24hr?L.config.defaultHour:r(L.config.defaultHour));L.minuteElement.value=Dt(L.latestSelectedDateObj?L.latestSelectedDateObj.getMinutes():L.config.defaultMinute);L.hourElement.setAttribute("step",L.config.hourIncrement.toString());L.minuteElement.setAttribute("step",L.config.minuteIncrement.toString());L.hourElement.setAttribute("min",L.config.time_24hr?"0":"1");L.hourElement.setAttribute("max",L.config.time_24hr?"23":"12");L.minuteElement.setAttribute("min","0");L.minuteElement.setAttribute("max","59");L.timeContainer.appendChild(e);L.timeContainer.appendChild(t);L.timeContainer.appendChild(i);if(L.config.time_24hr)L.timeContainer.classList.add("time24hr");if(L.config.enableSeconds){L.timeContainer.classList.add("hasSeconds");var n=Ft("flatpickr-second");L.secondElement=n.getElementsByTagName("input")[0];L.secondElement.value=Dt(L.latestSelectedDateObj?L.latestSelectedDateObj.getSeconds():L.config.defaultSeconds);L.secondElement.setAttribute("step",L.minuteElement.getAttribute("step"));L.secondElement.setAttribute("min","0");L.secondElement.setAttribute("max","59");L.timeContainer.appendChild(Bt("span","flatpickr-time-separator",":"));L.timeContainer.appendChild(n)}if(!L.config.time_24hr){L.amPM=Bt("span","flatpickr-am-pm",L.l10n.amPM[At((L.latestSelectedDateObj?L.hourElement.value:L.config.defaultHour)>11)]);L.amPM.title=L.l10n.toggleTitle;L.amPM.tabIndex=-1;L.timeContainer.appendChild(L.amPM)}return L.timeContainer}function I(){if(!L.weekdayContainer)L.weekdayContainer=Bt("div","flatpickr-weekdays");else zt(L.weekdayContainer);for(var t=L.config.showMonths;t--;){var e=Bt("div","flatpickr-weekdaycontainer");L.weekdayContainer.appendChild(e)}B();return L.weekdayContainer}function B(){if(!L.weekdayContainer){return}var t=L.l10n.firstDayOfWeek;var e=Mt(L.l10n.weekdays.shorthand);if(t>0&&t<e.length){e=Mt(e.splice(t,e.length),e.splice(0,t))}for(var i=L.config.showMonths;i--;){L.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+e.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function z(){L.calendarContainer.classList.add("hasWeeks");var t=Bt("div","flatpickr-weekwrapper");t.appendChild(Bt("span","flatpickr-weekday",L.l10n.weekAbbreviation));var e=Bt("div","flatpickr-weeks");t.appendChild(e);return{weekWrapper:t,weekNumbers:e}}function R(t,e){if(e===void 0){e=true}var i=e?t:t-L.currentMonth;if(i<0&&L._hidePrevMonthArrow===true||i>0&&L._hideNextMonthArrow===true)return;L.currentMonth+=i;if(L.currentMonth<0||L.currentMonth>11){L.currentYear+=L.currentMonth>11?1:-1;L.currentMonth=(L.currentMonth+12)%12;gt("onYearChange");P()}T();gt("onMonthChange");bt()}function F(t,e){if(t===void 0){t=true}if(e===void 0){e=true}L.input.value="";if(L.altInput!==undefined)L.altInput.value="";if(L.mobileInput!==undefined)L.mobileInput.value="";L.selectedDates=[];L.latestSelectedDateObj=undefined;if(e===true){L.currentYear=L._initialDate.getFullYear();L.currentMonth=L._initialDate.getMonth()}if(L.config.enableTime===true){var i=l(),n=i.hours,r=i.minutes,o=i.seconds;c(n,r,o)}L.redraw();if(t)gt("onChange")}function j(){L.isOpen=false;if(!L.isMobile){if(L.calendarContainer!==undefined){L.calendarContainer.classList.remove("open")}if(L._input!==undefined){L._input.classList.remove("active")}}gt("onClose")}function N(){if(L.config!==undefined)gt("onDestroy");for(var t=L._handlers.length;t--;){var e=L._handlers[t];e.element.removeEventListener(e.event,e.handler,e.options)}L._handlers=[];if(L.mobileInput){if(L.mobileInput.parentNode)L.mobileInput.parentNode.removeChild(L.mobileInput);L.mobileInput=undefined}else if(L.calendarContainer&&L.calendarContainer.parentNode){if(L.config.static&&L.calendarContainer.parentNode){var i=L.calendarContainer.parentNode;i.lastChild&&i.removeChild(i.lastChild);if(i.parentNode){while(i.firstChild)i.parentNode.insertBefore(i.firstChild,i);i.parentNode.removeChild(i)}}else L.calendarContainer.parentNode.removeChild(L.calendarContainer)}if(L.altInput){L.input.type="text";if(L.altInput.parentNode)L.altInput.parentNode.removeChild(L.altInput);delete L.altInput}if(L.input){L.input.type=L.input._type;L.input.classList.remove("flatpickr-input");L.input.removeAttribute("readonly")}["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(t){try{delete L[t]}catch(t){}})}function U(t){if(L.config.appendTo&&L.config.appendTo.contains(t))return true;return L.calendarContainer.contains(t)}function H(t){if(L.isOpen&&!L.config.inline){var e=jt(t);var i=U(e);var n=e===L.input||e===L.altInput||L.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(L.input)||~t.path.indexOf(L.altInput));var r=t.type==="blur"?n&&t.relatedTarget&&!U(t.relatedTarget):!n&&!i&&!U(t.relatedTarget);var o=!L.config.ignoredFocusElements.some(function(t){return t.contains(e)});if(r&&o){if(L.timeContainer!==undefined&&L.minuteElement!==undefined&&L.hourElement!==undefined&&L.input.value!==""&&L.input.value!==undefined){d()}L.close();if(L.config&&L.config.mode==="range"&&L.selectedDates.length===1){L.clear(false);L.redraw()}}}}function G(t){if(!t||L.config.minDate&&t<L.config.minDate.getFullYear()||L.config.maxDate&&t>L.config.maxDate.getFullYear())return;var e=t,i=L.currentYear!==e;L.currentYear=e||L.currentYear;if(L.config.maxDate&&L.currentYear===L.config.maxDate.getFullYear()){L.currentMonth=Math.min(L.config.maxDate.getMonth(),L.currentMonth)}else if(L.config.minDate&&L.currentYear===L.config.minDate.getFullYear()){L.currentMonth=Math.max(L.config.minDate.getMonth(),L.currentMonth)}if(i){L.redraw();gt("onYearChange");P()}}function Z(t,e){if(e===void 0){e=true}var i=L.parseDate(t,undefined,e);if(L.config.minDate&&i&&Zt(i,L.config.minDate,e!==undefined?e:!L.minDateHasTime)<0||L.config.maxDate&&i&&Zt(i,L.config.maxDate,e!==undefined?e:!L.maxDateHasTime)>0)return false;if(L.config.enable.length===0&&L.config.disable.length===0)return true;if(i===undefined)return false;var n=L.config.enable.length>0,r=n?L.config.enable:L.config.disable;for(var o=0,a=void 0;o<r.length;o++){a=r[o];if(typeof a==="function"&&a(i))return n;else if(a instanceof Date&&i!==undefined&&a.getTime()===i.getTime())return n;else if(typeof a==="string"&&i!==undefined){var s=L.parseDate(a,undefined,true);return s&&s.getTime()===i.getTime()?n:!n}else if(typeof a==="object"&&i!==undefined&&a.from&&a.to&&i.getTime()>=a.from.getTime()&&i.getTime()<=a.to.getTime())return n}return!n}function W(t){if(L.daysContainer!==undefined)return t.className.indexOf("hidden")===-1&&t.className.indexOf("flatpickr-disabled")===-1&&L.daysContainer.contains(t);return false}function V(t){var e=t.target===L._input;if(e&&!(t.relatedTarget&&U(t.relatedTarget))){L.setDate(L._input.value,true,t.target===L.altInput?L.config.altFormat:L.config.dateFormat)}}function q(t){var e=jt(t);var i=L.config.wrap?p.contains(e):e===L._input;var n=L.config.allowInput;var r=L.isOpen&&(!n||!i);var o=L.config.inline&&i&&!n;if(t.keyCode===13&&i){if(n){L.setDate(L._input.value,true,e===L.altInput?L.config.altFormat:L.config.dateFormat);return e.blur()}else{L.open()}}else if(U(e)||r||o){var a=!!L.timeContainer&&L.timeContainer.contains(e);switch(t.keyCode){case 13:if(a){t.preventDefault();d();ot()}else at(t);break;case 27:t.preventDefault();ot();break;case 8:case 46:if(i&&!L.config.allowInput){t.preventDefault();L.clear()}break;case 37:case 39:if(!a&&!i){t.preventDefault();if(L.daysContainer!==undefined&&(n===false||document.activeElement&&W(document.activeElement))){var s=t.keyCode===39?1:-1;if(!t.ctrlKey)M(undefined,s);else{t.stopPropagation();R(s);M(k(1),0)}}}else if(L.hourElement)L.hourElement.focus();break;case 38:case 40:t.preventDefault();var l=t.keyCode===40?1:-1;if(L.daysContainer&&e.$i!==undefined||e===L.input||e===L.altInput){if(t.ctrlKey){t.stopPropagation();G(L.currentYear-l);M(k(1),0)}else if(!a)M(undefined,l*7)}else if(e===L.currentYearElement){G(L.currentYear-l)}else if(L.config.enableTime){if(!a&&L.hourElement)L.hourElement.focus();d(t);L._debouncedChange()}break;case 9:if(a){var c=[L.hourElement,L.minuteElement,L.secondElement,L.amPM].concat(L.pluginElements).filter(function(t){return t});var u=c.indexOf(e);if(u!==-1){var h=c[u+(t.shiftKey?-1:1)];t.preventDefault();(h||L._input).focus()}}else if(!L.config.noCalendar&&L.daysContainer&&L.daysContainer.contains(e)&&t.shiftKey){t.preventDefault();L._input.focus()}break}}if(L.amPM!==undefined&&e===L.amPM){switch(t.key){case L.l10n.amPM[0].charAt(0):case L.l10n.amPM[0].charAt(0).toLowerCase():L.amPM.textContent=L.l10n.amPM[0];f();wt();break;case L.l10n.amPM[1].charAt(0):case L.l10n.amPM[1].charAt(0).toLowerCase():L.amPM.textContent=L.l10n.amPM[1];f();wt();break}}if(i||U(e)){gt("onKeyDown",t)}}function $(a){if(L.selectedDates.length!==1||a&&(!a.classList.contains("flatpickr-day")||a.classList.contains("flatpickr-disabled")))return;var s=a?a.dateObj.getTime():L.days.firstElementChild.dateObj.getTime(),l=L.parseDate(L.selectedDates[0],undefined,true).getTime(),t=Math.min(s,L.selectedDates[0].getTime()),e=Math.max(s,L.selectedDates[0].getTime());var c=false;var u=0,h=0;for(var i=t;i<e;i+=Vt.DAY){if(!Z(new Date(i),true)){c=c||i>t&&i<e;if(i<l&&(!u||i>u))u=i;else if(i>l&&(!h||i<h))h=i}}for(var n=0;n<L.config.showMonths;n++){var p=L.daysContainer.children[n];var r=function(t,e){var i=p.children[t],n=i.dateObj;var r=n.getTime();var o=u>0&&r<u||h>0&&r>h;if(o){i.classList.add("notAllowed");["inRange","startRange","endRange"].forEach(function(t){i.classList.remove(t)});return"continue"}else if(c&&!o)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(t){i.classList.remove(t)});if(a!==undefined){a.classList.add(s<=L.selectedDates[0].getTime()?"startRange":"endRange");if(l<s&&r===l)i.classList.add("startRange");else if(l>s&&r===l)i.classList.add("endRange");if(r>=u&&(h===0||r<=h)&&Wt(r,l,s))i.classList.add("inRange")}};for(var o=0,d=p.children.length;o<d;o++){r(o,d)}}}function K(){if(L.isOpen&&!L.config.static&&!L.config.inline)et()}function Y(t,e){if(e===void 0){e=L._positionElement}if(L.isMobile===true){if(t){t.preventDefault();var i=jt(t);i&&i.blur()}if(L.mobileInput!==undefined){L.mobileInput.focus();L.mobileInput.click()}gt("onOpen");return}if(L._input.disabled||L.config.inline)return;var n=L.isOpen;L.isOpen=true;if(!n){L.calendarContainer.classList.add("open");L._input.classList.add("active");gt("onOpen");et(e)}if(L.config.enableTime===true&&L.config.noCalendar===true){if(L.config.allowInput===false&&(t===undefined||!L.timeContainer.contains(t.relatedTarget))){setTimeout(function(){return L.hourElement.select()},50)}}}function J(n){return function(t){var e=L.config["_"+n+"Date"]=L.parseDate(t,L.config.dateFormat);var i=L.config["_"+(n==="min"?"max":"min")+"Date"];if(e!==undefined){L[n==="min"?"minDateHasTime":"maxDateHasTime"]=e.getHours()>0||e.getMinutes()>0||e.getSeconds()>0}if(L.selectedDates){L.selectedDates=L.selectedDates.filter(function(t){return Z(t)});if(!L.selectedDates.length&&n==="min")o(e);wt()}if(L.daysContainer){rt();if(e!==undefined)L.currentYearElement[n]=e.getFullYear().toString();else L.currentYearElement.removeAttribute(n);L.currentYearElement.disabled=!!i&&e!==undefined&&i.getFullYear()===e.getFullYear()}}}function X(){var t=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"];var e=Ct(Ct({},JSON.parse(JSON.stringify(p.dataset||{}))),u);var i={};L.config.parseDate=e.parseDate;L.config.formatDate=e.formatDate;Object.defineProperty(L.config,"enable",{get:function(){return L.config._enable},set:function(t){L.config._enable=ht(t)}});Object.defineProperty(L.config,"disable",{get:function(){return L.config._disable},set:function(t){L.config._disable=ht(t)}});var n=e.mode==="time";if(!e.dateFormat&&(e.enableTime||n)){var r=$t.defaultConfig.dateFormat||Tt.dateFormat;i.dateFormat=e.noCalendar||n?"H:i"+(e.enableSeconds?":S":""):r+" H:i"+(e.enableSeconds?":S":"")}if(e.altInput&&(e.enableTime||n)&&!e.altFormat){var o=$t.defaultConfig.altFormat||Tt.altFormat;i.altFormat=e.noCalendar||n?"h:i"+(e.enableSeconds?":S K":" K"):o+(" h:i"+(e.enableSeconds?":S":"")+" K")}Object.defineProperty(L.config,"minDate",{get:function(){return L.config._minDate},set:J("min")});Object.defineProperty(L.config,"maxDate",{get:function(){return L.config._maxDate},set:J("max")});var a=function(e){return function(t){L.config[e==="min"?"_minTime":"_maxTime"]=L.parseDate(t,"H:i:S")}};Object.defineProperty(L.config,"minTime",{get:function(){return L.config._minTime},set:a("min")});Object.defineProperty(L.config,"maxTime",{get:function(){return L.config._maxTime},set:a("max")});if(e.mode==="time"){L.config.noCalendar=true;L.config.enableTime=true}Object.assign(L.config,i,e);for(var s=0;s<t.length;s++)L.config[t[s]]=L.config[t[s]]===true||L.config[t[s]]==="true";St.filter(function(t){return L.config[t]!==undefined}).forEach(function(t){L.config[t]=Ot(L.config[t]||[]).map(h)});L.isMobile=!L.config.disableMobile&&!L.config.inline&&L.config.mode==="single"&&!L.config.disable.length&&!L.config.enable.length&&!L.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var s=0;s<L.config.plugins.length;s++){var l=L.config.plugins[s](L)||{};for(var c in l){if(St.indexOf(c)>-1){L.config[c]=Ot(l[c]).map(h).concat(L.config[c])}else if(typeof e[c]==="undefined")L.config[c]=l[c]}}if(!e.altInputClass){L.config.altInputClass=Q().className+" "+L.config.altInputClass}gt("onParseConfig")}function Q(){return L.config.wrap?p.querySelector("[data-input]"):p}function tt(){if(typeof L.config.locale!=="object"&&typeof $t.l10ns[L.config.locale]==="undefined")L.config.errorHandler(new Error("flatpickr: invalid locale "+L.config.locale));L.l10n=Ct(Ct({},$t.l10ns.default),typeof L.config.locale==="object"?L.config.locale:L.config.locale!=="default"?$t.l10ns[L.config.locale]:undefined);Ut.K="("+L.l10n.amPM[0]+"|"+L.l10n.amPM[1]+"|"+L.l10n.amPM[0].toLowerCase()+"|"+L.l10n.amPM[1].toLowerCase()+")";var t=Ct(Ct({},u),JSON.parse(JSON.stringify(p.dataset||{})));if(t.time_24hr===undefined&&$t.defaultConfig.time_24hr===undefined){L.config.time_24hr=L.l10n.time_24hr}L.formatDate=Ht(L);L.parseDate=Gt({config:L.config,l10n:L.l10n})}function et(t){if(L.calendarContainer===undefined)return;gt("onPreCalendarPosition");var e=t||L._positionElement;var i=Array.prototype.reduce.call(L.calendarContainer.children,function(t,e){return t+e.offsetHeight},0),n=L.calendarContainer.offsetWidth,r=L.config.position.split(" "),o=r[0],a=r.length>1?r[1]:null,s=e.getBoundingClientRect(),l=window.innerHeight-s.bottom,c=o==="above"||o!=="below"&&l<i&&s.top>i;var u=window.pageYOffset+s.top+(!c?e.offsetHeight+2:-i-2);It(L.calendarContainer,"arrowTop",!c);It(L.calendarContainer,"arrowBottom",c);if(L.config.inline)return;var h=window.pageXOffset+s.left;var p=false;var d=false;if(a==="center"){h-=(n-s.width)/2;p=true}else if(a==="right"){h-=n-s.width;d=true}It(L.calendarContainer,"arrowLeft",!p&&!d);It(L.calendarContainer,"arrowCenter",p);It(L.calendarContainer,"arrowRight",d);var f=window.document.body.offsetWidth-(window.pageXOffset+s.right);var m=h+n>window.document.body.offsetWidth;var g=f+n>window.document.body.offsetWidth;It(L.calendarContainer,"rightMost",m);if(L.config.static)return;L.calendarContainer.style.top=u+"px";if(!m){L.calendarContainer.style.left=h+"px";L.calendarContainer.style.right="auto"}else if(!g){L.calendarContainer.style.left="auto";L.calendarContainer.style.right=f+"px"}else{var v=it();if(v===undefined)return;var _=window.document.body.offsetWidth;var y=Math.max(0,_/2-n/2);var b=".flatpickr-calendar.centerMost:before";var x=".flatpickr-calendar.centerMost:after";var w=v.cssRules.length;var k="{left:"+s.left+"px;right:auto;}";It(L.calendarContainer,"rightMost",false);It(L.calendarContainer,"centerMost",true);v.insertRule(b+","+x+k,w);L.calendarContainer.style.left=y+"px";L.calendarContainer.style.right="auto"}}function it(){var t=null;for(var e=0;e<document.styleSheets.length;e++){var i=document.styleSheets[e];try{i.cssRules}catch(t){continue}t=i;break}return t!=null?t:nt()}function nt(){var t=document.createElement("style");document.head.appendChild(t);return t.sheet}function rt(){if(L.config.noCalendar||L.isMobile)return;P();bt();T()}function ot(){L._input.focus();if(window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==undefined){setTimeout(L.close,0)}else{L.close()}}function at(t){t.preventDefault();t.stopPropagation();var e=function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")};var i=Rt(jt(t),e);if(i===undefined)return;var n=i;var r=L.latestSelectedDateObj=new Date(n.dateObj.getTime());var o=(r.getMonth()<L.currentMonth||r.getMonth()>L.currentMonth+L.config.showMonths-1)&&L.config.mode!=="range";L.selectedDateElem=n;if(L.config.mode==="single")L.selectedDates=[r];else if(L.config.mode==="multiple"){var a=_t(r);if(a)L.selectedDates.splice(parseInt(a),1);else L.selectedDates.push(r)}else if(L.config.mode==="range"){if(L.selectedDates.length===2){L.clear(false,false)}L.latestSelectedDateObj=r;L.selectedDates.push(r);if(Zt(r,L.selectedDates[0],true)!==0)L.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()})}f();if(o){var s=L.currentYear!==r.getFullYear();L.currentYear=r.getFullYear();L.currentMonth=r.getMonth();if(s){gt("onYearChange");P()}gt("onMonthChange")}bt();T();wt();if(!o&&L.config.mode!=="range"&&L.config.showMonths===1)w(n);else if(L.selectedDateElem!==undefined&&L.hourElement===undefined){L.selectedDateElem&&L.selectedDateElem.focus()}if(L.hourElement!==undefined)L.hourElement!==undefined&&L.hourElement.focus();if(L.config.closeOnSelect){var l=L.config.mode==="single"&&!L.config.enableTime;var c=L.config.mode==="range"&&L.selectedDates.length===2&&!L.config.enableTime;if(l||c){ot()}}m()}var st={locale:[tt,B],showMonths:[A,i,I],minDate:[v],maxDate:[v]};function lt(t,e){if(t!==null&&typeof t==="object"){Object.assign(L.config,t);for(var i in t){if(st[i]!==undefined)st[i].forEach(function(t){return t()})}}else{L.config[t]=e;if(st[t]!==undefined)st[t].forEach(function(t){return t()});else if(St.indexOf(t)>-1)L.config[t]=Ot(e)}L.redraw();wt(true)}function ct(t,e){var i=[];if(t instanceof Array)i=t.map(function(t){return L.parseDate(t,e)});else if(t instanceof Date||typeof t==="number")i=[L.parseDate(t,e)];else if(typeof t==="string"){switch(L.config.mode){case"single":case"time":i=[L.parseDate(t,e)];break;case"multiple":i=t.split(L.config.conjunction).map(function(t){return L.parseDate(t,e)});break;case"range":i=t.split(L.l10n.rangeSeparator).map(function(t){return L.parseDate(t,e)});break}}else L.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));L.selectedDates=L.config.allowInvalidPreload?i:i.filter(function(t){return t instanceof Date&&Z(t,false)});if(L.config.mode==="range")L.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()})}function ut(t,e,i){if(e===void 0){e=false}if(i===void 0){i=L.config.dateFormat}if(t!==0&&!t||t instanceof Array&&t.length===0)return L.clear(e);ct(t,i);L.latestSelectedDateObj=L.selectedDates[L.selectedDates.length-1];L.redraw();v(undefined,e);o();if(L.selectedDates.length===0){L.clear(false)}wt(e);if(e)gt("onChange")}function ht(t){return t.slice().map(function(t){if(typeof t==="string"||typeof t==="number"||t instanceof Date){return L.parseDate(t,undefined,true)}else if(t&&typeof t==="object"&&t.from&&t.to)return{from:L.parseDate(t.from,undefined),to:L.parseDate(t.to,undefined)};return t}).filter(function(t){return t})}function pt(){L.selectedDates=[];L.now=L.parseDate(L.config.now)||new Date;var t=L.config.defaultDate||((L.input.nodeName==="INPUT"||L.input.nodeName==="TEXTAREA")&&L.input.placeholder&&L.input.value===L.input.placeholder?null:L.input.value);if(t)ct(t,L.config.dateFormat);L._initialDate=L.selectedDates.length>0?L.selectedDates[0]:L.config.minDate&&L.config.minDate.getTime()>L.now.getTime()?L.config.minDate:L.config.maxDate&&L.config.maxDate.getTime()<L.now.getTime()?L.config.maxDate:L.now;L.currentYear=L._initialDate.getFullYear();L.currentMonth=L._initialDate.getMonth();if(L.selectedDates.length>0)L.latestSelectedDateObj=L.selectedDates[0];if(L.config.minTime!==undefined)L.config.minTime=L.parseDate(L.config.minTime,"H:i");if(L.config.maxTime!==undefined)L.config.maxTime=L.parseDate(L.config.maxTime,"H:i");L.minDateHasTime=!!L.config.minDate&&(L.config.minDate.getHours()>0||L.config.minDate.getMinutes()>0||L.config.minDate.getSeconds()>0);L.maxDateHasTime=!!L.config.maxDate&&(L.config.maxDate.getHours()>0||L.config.maxDate.getMinutes()>0||L.config.maxDate.getSeconds()>0)}function dt(){L.input=Q();if(!L.input){L.config.errorHandler(new Error("Invalid input element specified"));return}L.input._type=L.input.type;L.input.type="text";L.input.classList.add("flatpickr-input");L._input=L.input;if(L.config.altInput){L.altInput=Bt(L.input.nodeName,L.config.altInputClass);L._input=L.altInput;L.altInput.placeholder=L.input.placeholder;L.altInput.disabled=L.input.disabled;L.altInput.required=L.input.required;L.altInput.tabIndex=L.input.tabIndex;L.altInput.type="text";L.input.setAttribute("type","hidden");if(!L.config.static&&L.input.parentNode)L.input.parentNode.insertBefore(L.altInput,L.input.nextSibling)}if(!L.config.allowInput)L._input.setAttribute("readonly","readonly");L._positionElement=L.config.positionElement||L._input}function ft(){var t=L.config.enableTime?L.config.noCalendar?"time":"datetime-local":"date";L.mobileInput=Bt("input",L.input.className+" flatpickr-mobile");L.mobileInput.tabIndex=1;L.mobileInput.type=t;L.mobileInput.disabled=L.input.disabled;L.mobileInput.required=L.input.required;L.mobileInput.placeholder=L.input.placeholder;L.mobileFormatStr=t==="datetime-local"?"Y-m-d\\TH:i:S":t==="date"?"Y-m-d":"H:i:S";if(L.selectedDates.length>0){L.mobileInput.defaultValue=L.mobileInput.value=L.formatDate(L.selectedDates[0],L.mobileFormatStr)}if(L.config.minDate)L.mobileInput.min=L.formatDate(L.config.minDate,"Y-m-d");if(L.config.maxDate)L.mobileInput.max=L.formatDate(L.config.maxDate,"Y-m-d");if(L.input.getAttribute("step"))L.mobileInput.step=String(L.input.getAttribute("step"));L.input.type="hidden";if(L.altInput!==undefined)L.altInput.type="hidden";try{if(L.input.parentNode)L.input.parentNode.insertBefore(L.mobileInput,L.input.nextSibling)}catch(t){}a(L.mobileInput,"change",function(t){L.setDate(jt(t).value,false,L.mobileFormatStr);gt("onChange");gt("onClose")})}function mt(t){if(L.isOpen===true)return L.close();L.open(t)}function gt(t,e){if(L.config===undefined)return;var i=L.config[t];if(i!==undefined&&i.length>0){for(var n=0;i[n]&&n<i.length;n++)i[n](L.selectedDates,L.input.value,L,e)}if(t==="onChange"){L.input.dispatchEvent(vt("change"));L.input.dispatchEvent(vt("input"))}}function vt(t){var e=document.createEvent("Event");e.initEvent(t,true,true);return e}function _t(t){for(var e=0;e<L.selectedDates.length;e++){if(Zt(L.selectedDates[e],t)===0)return""+e}return false}function yt(t){if(L.config.mode!=="range"||L.selectedDates.length<2)return false;return Zt(t,L.selectedDates[0])>=0&&Zt(t,L.selectedDates[1])<=0}function bt(){if(L.config.noCalendar||L.isMobile||!L.monthNav)return;L.yearElements.forEach(function(t,e){var i=new Date(L.currentYear,L.currentMonth,1);i.setMonth(L.currentMonth+e);if(L.config.showMonths>1||L.config.monthSelectorType==="static"){L.monthElements[e].textContent=Nt(i.getMonth(),L.config.shorthandCurrentMonth,L.l10n)+" "}else{L.monthsDropdownContainer.value=i.getMonth().toString()}t.value=i.getFullYear().toString()});L._hidePrevMonthArrow=L.config.minDate!==undefined&&(L.currentYear===L.config.minDate.getFullYear()?L.currentMonth<=L.config.minDate.getMonth():L.currentYear<L.config.minDate.getFullYear());L._hideNextMonthArrow=L.config.maxDate!==undefined&&(L.currentYear===L.config.maxDate.getFullYear()?L.currentMonth+1>L.config.maxDate.getMonth():L.currentYear>L.config.maxDate.getFullYear())}function xt(e){return L.selectedDates.map(function(t){return L.formatDate(t,e)}).filter(function(t,e,i){return L.config.mode!=="range"||L.config.enableTime||i.indexOf(t)===e}).join(L.config.mode!=="range"?L.config.conjunction:L.l10n.rangeSeparator)}function wt(t){if(t===void 0){t=true}if(L.mobileInput!==undefined&&L.mobileFormatStr){L.mobileInput.value=L.latestSelectedDateObj!==undefined?L.formatDate(L.latestSelectedDateObj,L.mobileFormatStr):""}L.input.value=xt(L.config.dateFormat);if(L.altInput!==undefined){L.altInput.value=xt(L.config.altFormat)}if(t!==false)gt("onValueUpdate")}function kt(t){var e=jt(t);var i=L.prevMonthNav.contains(e);var n=L.nextMonthNav.contains(e);if(i||n){R(i?-1:1)}else if(L.yearElements.indexOf(e)>=0){e.select()}else if(e.classList.contains("arrowUp")){L.changeYear(L.currentYear+1)}else if(e.classList.contains("arrowDown")){L.changeYear(L.currentYear-1)}}function Lt(t){t.preventDefault();var e=t.type==="keydown",i=jt(t),n=i;if(L.amPM!==undefined&&i===L.amPM){L.amPM.textContent=L.l10n.amPM[At(L.amPM.textContent===L.l10n.amPM[0])]}var r=parseFloat(n.getAttribute("min")),o=parseFloat(n.getAttribute("max")),a=parseFloat(n.getAttribute("step")),s=parseInt(n.value,10),l=t.delta||(e?t.which===38?1:-1:0);var c=s+a*l;if(typeof n.value!=="undefined"&&n.value.length===2){var u=n===L.hourElement,h=n===L.minuteElement;if(c<r){c=o+c+At(!u)+(At(u)&&At(!L.amPM));if(h)y(undefined,-1,L.hourElement)}else if(c>o){c=n===L.hourElement?c-o-At(!L.amPM):r;if(h)y(undefined,1,L.hourElement)}if(L.amPM&&u&&(a===1?c+s===23:Math.abs(c-s)>a)){L.amPM.textContent=L.l10n.amPM[At(L.amPM.textContent===L.l10n.amPM[0])]}n.value=Dt(c)}}t();return L}function i(t,e){var i=Array.prototype.slice.call(t).filter(function(t){return t instanceof HTMLElement});var n=[];for(var r=0;r<i.length;r++){var o=i[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;if(o._flatpickr!==undefined){o._flatpickr.destroy();o._flatpickr=undefined}o._flatpickr=a(o,e||{});n.push(o._flatpickr)}catch(t){console.error(t)}}return n.length===1?n[0]:n}if(typeof HTMLElement!=="undefined"&&typeof HTMLCollection!=="undefined"&&typeof NodeList!=="undefined"){HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return i(this,t)};HTMLElement.prototype.flatpickr=function(t){return i([this],t)}}var $t=function(t,e){if(typeof t==="string"){return i(window.document.querySelectorAll(t),e)}else if(t instanceof Node){return i([t],e)}else{return i(t,e)}};if($t.defaultConfig={},$t.l10ns={en:Ct({},Pt),default:Ct({},Pt)},$t.localize=function(t){$t.l10ns.default=Ct(Ct({},$t.l10ns.default),t)},$t.setDefaults=function(t){$t.defaultConfig=Ct(Ct({},$t.defaultConfig),t)},$t.parseDate=Gt({}),$t.formatDate=Ht({}),$t.compareDates=Zt,typeof jQuery!=="undefined"&&typeof jQuery.fn!=="undefined"){jQuery.fn.flatpickr=function(t){return i(this,t)}}if(Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t==="string"?parseInt(t,10):t))},typeof window!=="undefined"){window.flatpickr=$t}return $t}()},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);i(10);var n=i(5),r=(i(40),i(46),i(4),i(0)),I=i.n(r);i(47);jQuery.fn.algoliaAutocomplete=jQuery.fn.autocomplete.noConflict();var B=function(t,e,i,n,r){var d=this;this.type=t,this.provider=e,this.options=i,this.typinginterval=n,this.minChars=r,this.providers={algolia:{resultsKey:"hits",geoKey:"_geoloc",footer:d.options.algolia.footer,getUrl:function(){var t=d.options[d.provider],e="https://places-dsn.algolia.net/1/places/query?query={query}&hitsPerPage=10";return t.appId&&(e+="&x-algolia-application-id="+t.appId),t.apiKey&&(e+="&x-algolia-api-key="+t.apiKey),e+="&language="+t.language,t.countries&&(e+="&countries="+t.countries),e+="&aroundLatLngViaIP="+(t.aroundLatLngViaIP?"true":"false"),t.aroundLatLng&&(e+="&aroundLatLng="+t.aroundLatLng),e},format:function(t){var e=d.options[d.provider].language,i=t.administrative,n=t.city,r=t.country,o="";void 0!==t._highlightResult.locale_names[e]&&t._highlightResult.locale_names[e].length?o=t._highlightResult.locale_names[e][0].value:void 0!==t._highlightResult.locale_names&&t._highlightResult.locale_names.length&&(o=t._highlightResult.locale_names[0].value),n=n?t._highlightResult.city[0].value:null,i=i&&void 0!==t._highlightResult.administrative?t._highlightResult.administrative[0].value:null,r=r?t._highlightResult.country.value:null;var a=t._tags,s=d.getUnifiedType(["country","city","address"],a),l=s.charAt(0).toUpperCase()+s.slice(1);return'<span class="ap-suggestion-icon ap-'+s+'" title="'+l+'"></span><span class="ap-name">'+o+'</span><span class="ap-address">'+((i?", "+i:"")+(n?", "+n:"")+(r?", "+r:""))+"</span>"},beforeSend:function(t){jQuery("#geocodingError").empty();var e=d.options[d.provider];e.appId&&e.apiKey&&(t.setRequestHeader("X-Algolia-Application-Id",e.appId),t.setRequestHeader("X-Algolia-API-Key",e.apiKey))},displayError:function(t,e){200!==e.status&&(jQuery("#address").css("background","#ffc"),jQuery("#geocodingError").html("Algolia Places error "+t.status+": "+t.message))}},photon:{resultsKey:"features",geoKey:"geometry.coordinates",footer:d.options.photon.footer,getUrl:function(){var t=d.options[d.provider],e="https://photon.mapsmarker.com/pro/api?q={query}&limit=10";return t.language&&(e+="&lang="+t.language),t.locationbiaslat&&(e+="&lat="+t.locationbiaslat),t.locationbiaslon&&(e+="&lon="+t.locationbiaslon),t.bounds&&(e+="&bbox="+[t.lon1,t.lat1,t.lon2,t.lat2].join(",")),t.filter&&(e+="&osm_tag="+t.filter),e},format:function(t,e){var i=t.properties.country,n=t.properties.city,r=t.properties.housenumber,o=t.properties.street,a=t.properties.postcode,s=t.properties.state,l=void 0!==t.properties.name?t.properties.name.replace(e,"<em>"+e+"</em>"):"",c=(c=(o?", "+o+(r?" "+r:""):"")+(a?" "+a:"")+(n?", "+n:"")+(s?", "+s:"")+(i?", "+i:"")).replace(e,"<em>"+e+"</em>"),u=t.properties.osm_value,h=d.getUnifiedType(["country","state","city","address"],u),p=h.charAt(0).toUpperCase()+h.slice(1);return'<span class="ap-suggestion-icon ap-'+h+'" title="'+p+'"></span><span class="ap-name">'+l+'</span><span class="ap-address">'+c+"</span>"},displayError:function(t,e){var i=JSON.parse(e.responseText);200!=e.status&&(jQuery("#address").css("background","#ffc"),jQuery("#geocodingError").html("Photon@MapsMarker error: "+i.message))}},locationiq:{resultsKey:null,geoKey:null,footer:d.options.locationiq.footer,getUrl:function(){var t=d.options[d.provider],e="https://api.locationiq.com/v1/autocomplete.php?q={query}&normalizecity=1&limit=10";return t.apiKey&&(e+="&key="+t.apiKey),t.bounds&&(e+="&viewbox="+[t.lon1,t.lat1,t.lon2,t.lat2].join(",")),e+="&accept-language="+t.language},format:function(t,e){var i=t.address.country,n=t.address.city,r=t.address.housenumber,o=t.address.road,a=t.address.postcode,s=t.address.state,l=void 0!==t.address.name?t.address.name.replace(e,"<em>"+e+"</em>"):"",c=(c=(o?", "+o+(r?" "+r:""):"")+(a?" "+a:"")+(n?", "+n:"")+(s?", "+s:"")+(i?", "+i:"")).replace(e,"<em>"+e+"</em>"),u=t.type.toLowerCase(),h=d.getUnifiedType(["country","state","city","address"],u),p=h.charAt(0).toUpperCase()+h.slice(1);return'<span class="ap-suggestion-icon ap-'+h+'" title="'+p+'"></span><span class="ap-name">'+l+'</span><span class="ap-address">'+c+"</span>"},displayError:function(t,e){200!==e.status&&(jQuery("#address").css("background","#ffc"),jQuery("#geocodingError").html("LocationIQ error "+t.status+": "+t.message))}},mapquest:{resultsKey:"results.locations",geoKey:"latLng",footer:d.options.mapquest.footer,getUrl:function(){var t=d.options[d.provider],e="https://www.mapquestapi.com/geocoding/v1/address?location={query}&maxResults=10";return t.api_key&&(e+="&key="+t.api_key),t.boundingBox&&(e+="&boundingBox="+[t.lat1,t.lon1,t.lat2,t.lon2].join(",")),e},format:function(t,e){var i="";i+=void 0!==t.street&&t.street?t.street+", ":"",i+=void 0!==t.adminArea5&&t.adminArea5?t.adminArea5+", ":"",i+=void 0!==t.adminArea4&&t.adminArea4?t.adminArea4+", ":"",i+=void 0!==t.adminArea3&&t.adminArea3?t.adminArea3+", ":"",i+=void 0!==t.adminArea2&&t.adminArea2?t.adminArea2+", ":"",i+=void 0!==t.adminArea1&&t.adminArea1?t.adminArea1:"";var n=t.geocodeQuality.toLowerCase(),r=d.getUnifiedType(["country","city","address"],n),o=r.charAt(0).toUpperCase()+r.slice(1);return'<span class="ap-suggestion-icon ap-'+r+'" title="'+o+'"></span><span class="ap-name">'+i.replace(e,"<em>"+e+"</em>")+"</span>"},displayError:function(t,e){200!==e.status&&(jQuery("#address").css("background","#ffc"),jQuery("#geocodingError").html("MapQuest error "+t.status+": "+t.message))}},google:{resultsKey:"results",geoKey:"geometry.location",footer:d.options.google.footer,getUrl:function(){var t=d.options[d.provider],e=mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&address={query}";return t.nonce&&(e+="&nonce="+t.nonce),e},format:function(t,e){var i=t.types,n=d.getUnifiedType(["country","locality","street_address"],i),r=n.charAt(0).toUpperCase()+n.slice(1);return'<span class="ap-suggestion-icon ap-'+n+'" title="'+r+'"></span><span class="ap-name">'+t.address.replace(e,"<em>"+e+"</em>")+"</span>"},displayError:function(t){"OK"!==t.status&&"ZERO_RESULTS"!=t.status&&(jQuery("#address").css("background","#ffc"),jQuery("#geocodingError").html("Google Geocoding error: "+t.status))}},tomtom:{resultsKey:"results",geoKey:"position",footer:d.options.tomtom.footer,getUrl:function(){var t=d.options[d.provider],e="https://api.tomtom.com/search/2/geocode/{query}.JSON?limit=10";return t.apiKey&&(e+="&key="+t.apiKey),t.language&&(e+="&language="+t.language),t.countrySet&&(e+="&countrySet="+t.countrySet),t.lat&&(e+="&lat="+t.lat),t.lon&&(e+="&lon="+t.lon),t.radius&&(e+="&radius="+t.radius),e},format:function(t,e){var i=t.address.freeformAddress;i+=i!==t.address.country?", "+t.address.country:"";var n=t.type,r=(n="Geography"===n?"Municipality"===t.entityType?"city":"Country"===t.entityType?"country":"address":"address").charAt(0).toUpperCase()+n.slice(1);return'<span class="ap-suggestion-icon ap-'+n+'" title="'+r+'"></span><span class="ap-name">'+i.replace(e,"<em>"+e+"</em>")+"</span>"},displayError:function(t,e){200!==e.status&&(jQuery("#address").css("background","#ffc"),jQuery("#geocodingError").html("TomTom Geocoding error "+t.status+": "+t.message))}}},this.init=function(){jQuery("#address").algoliaAutocomplete({minLength:d.minChars,hint:!1,autoselect:!0,openOnFocus:!1,debug:!1},[{source:function(t,r){d.query=jQuery("#address").val(),jQuery.ajax({url:d.providers[d.provider].getUrl().replace("{query}",d.query),type:"GET",beforeSend:function(t){jQuery("#geocodingError").empty(),jQuery("#address").addClass("results-loading"),"function"==typeof d.providers[d.provider].beforeSend&&d.providers[d.provider].beforeSend(t)}}).done(function(i,t,e){var n;"GOOGLE_ERROR"===i.status?(jQuery("#geocodingError").html("Google Geocoding error: "+i.results.status+": "+i.results.error_message),jQuery("#address").removeClass("results-loading"),jQuery("#address").css("background","#ffc")):"ZERO_RESULTS"===i.status?jQuery("#address").removeClass("results-loading"):("locationiq"===d.provider&&i.length?(jQuery.each(i,function(t,e){i[t].name=jQuery(d.providers[d.provider].format(e,d.query)).text().trim()}),r(i,i)):"mapquest"===d.provider&&i.results[0].locations.length?(jQuery.each(i.results[0].locations,function(t,e){i.results[0].locations[t].name=jQuery(d.providers[d.provider].format(e,d.query)).text().trim()}),r(i.results[0].locations,i)):i[d.providers[d.provider].resultsKey].length&&(n=d.providers[d.provider].resultsKey,jQuery.each(i[n],function(t,e){i[n][t].name=jQuery(d.providers[d.provider].format(e,d.query)).text().trim()}),r(i[n],i)),jQuery("#address").removeClass("results-loading"),"function"==typeof d.providers[d.provider].displayError&&d.providers[d.provider].displayError(i,e))}).fail(function(t){"function"==typeof d.providers[d.provider].displayError&&d.providers[d.provider].displayError(t.responseJSON,t),jQuery("#address").removeClass("results-loading"),jQuery("#address").css("background","#ffc")})},displayKey:"name",templates:{suggestion:function(t){var e=jQuery("#address").val();return d.providers[d.provider].format(t,e)},footer:d.providers[d.provider].footer,header:'<div id="geocoding-results-header-div">'+d.options.header+'</div><div id="geocoding-results-header-image-div"><img src="'+mmpVars.pluginUrl+'images/geocoding/icon-key-enter.png" /></div><div style="clear:both; border-bottom:1px solid #ccc;"></div>'},debounce:d.typinginterval}]).on("autocomplete:selected",function(t,e){var i;"google"!==d.provider?"locationiq"===d.provider?d.selected(parseFloat(e.lat),parseFloat(e.lon)):-1!==(i=d.providers[d.provider].geoKey).indexOf(".")?(i=i.split("."),"photon"===d.provider?d.selected(e[i[0]][i[1]][1],e[i[0]][i[1]][0]):d.selected(e[i[0]][i[1]].lat,e[i[0]][i[1]].lng)):"tomtom"===d.provider?d.selected(e[i].lat,e[i].lon):d.selected(e[i].lat,e[i].lng):d.googleSelected(e.place_id)})},this.selected=function(t,e){"map"===d.type?(mapsMarkerPro.admin.map.panTo([t,e]),jQuery("#lat").val(t.toFixed(6)),jQuery("#lng").val(e.toFixed(6))):"marker"===d.type&&(editMarker.marker.setLatLng([t,e]),editMarker.map.panTo(editMarker.marker.getLatLng()),jQuery("#lat").val(editMarker.marker.getLatLng().lat.toFixed(6)),jQuery("#lng").val(editMarker.marker.getLatLng().lng.toFixed(6)))},this.googleSelected=function(t){var e=mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&place_id={place_id}&nonce={wpnonce}";jQuery.ajax({url:e.replace("{place_id}",t).replace("{wpnonce}",d.options[d.provider].nonce),type:"GET",beforeSend:function(t){jQuery("#geocodingError").empty(),jQuery("#address").addClass("results-loading"),"function"==typeof d.providers[d.provider].beforeSend&&d.providers[d.provider].beforeSend(t)}}).done(function(t,e,i){jQuery("#address").removeClass("results-loading"),"OK"===t.status&&d.selected(t.results.geometry.location.lat,t.results.geometry.location.lng)})},this.getUnifiedType=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(-1!==e.indexOf(n))break}switch(n){case"address":case"street_address":return"address";case"city":case"locality":case"venue":return"city";case"state":case"country":return"country";default:return"address"}}};function o(){jQuery(document).ready(function(d){var f=mapsMarkerPro.admin,e=d("#mapSettings").serialize(),i=wp.media({title:mmpAdminL10n.map.chooseGpx,button:{text:mmpAdminL10n.map.choose},library:{type:["application/gpx","application/gpx+xml"]},multiple:!1}),t=new B("map",d("#geocodingProvider").val(),mmpGeocoding,400,3);function n(){var t=d("#advancedSettings").prop("checked");d(".mmp-advanced").each(function(){t?d(this).show():d(this).hide()})}function r(){d("#filtersAllMarkers").prop("checked")?d("#filtersWrap").hide():d("#filtersWrap").show()}function m(){var t=C();f.loadResources().then(function(){f.geoJson[f.id]=f.parseGeoJson(t),f.drawGeoJson(),f.loadControls(),M()})}function o(t){f.settings.panelColor=t,f.loadPanel()}function a(t){f.settings.gpxTrackColor=t,f.setTrackStyle()}function s(t){f.settings.gpxWaypointsColor=t,f.setWaypointStyle()}function l(t){f.settings.gpxWaypointsFillColor=t,f.setWaypointStyle()}function c(t){f.settings.gpxChartLocatorColor=t,f.setChartStyle()}function u(t){f.settings.gpxChartLocatorFillColor=t,f.setChartStyle()}function h(){var e=[];d(".mmp-basemap").each(function(){e.push(d(this).data("id").toString())}),d("#basemapsList option").each(function(){var t=-1!==d.inArray(d(this).val().toString(),e);d(this).prop("disabled",t)}),d("#basemapsList option").each(function(){if(!d(this).prop("disabled"))return d(this).prop("selected",!0),!1}),d("#basemapsList option:enabled").length?d("#basemapsAdd").prop("disabled",!1):d("#basemapsAdd").prop("disabled",!0)}function p(){var e=[];d("#basemapList li").each(function(t){e.push(d(this).data("id").toString())}),f.settings.basemaps=e,f.loadBasemaps(),f.loadControls()}function g(){var e=[];d(".mmp-overlay").each(function(){e.push(d(this).data("id").toString())}),d("#overlaysList option").each(function(){var t=-1!==d.inArray(d(this).val().toString(),e);d(this).prop("disabled",t)}),d("#overlaysList option").each(function(){if(!d(this).prop("disabled"))return d(this).prop("selected",!0),!1}),d("#overlaysList option:enabled").length?d("#overlaysAdd").prop("disabled",!1):d("#overlaysAdd").prop("disabled",!0)}function v(){var e=[];d("#overlayList li").each(function(t){e.push(d(this).data("id").toString())}),f.settings.overlays=e,f.loadOverlays(),f.loadControls()}function _(){f.settings.overlaysActive=[],d('input[name="overlaysActive[]"]:checked').each(function(){f.settings.overlaysActive.push(d(this).val())})}function y(t,e){var i=void 0===e.active||!!e.active,n=e.icon||"",r=e.name||"",o=d('<li class="mmp-filter" data-id="'+t+'"></li>'),a=d("<div></div>");o.append(a);var s=d('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');a.append(s);var l=d('<label class="mmp-align-middle"><div class="switch"><input type="checkbox" name="filtersList['+t+'][active]"'+(i?' checked="checked"':"")+' /><span class="slider"></span></div></label>');d("input",l).change(function(){var t=d(this).closest("li").data("id"),e=d(this).prop("checked");d(".mmp-control-filters-selector[value="+t+"]").prop("checked",e),void 0!==f.groups[t]&&(f.groups[t].active=e),f.drawMarkers(),f.drawGeoJson()}),a.append(" ").append(l);var c=d('<input type="hidden" name="filtersList['+t+'][icon]" value="" />');a.append(c);var u=n?mmpVars.iconsUrl+n:mmpVars.pluginUrl+"images/leaflet/marker.png",h=d('<img class="mmp-filter-icon mmp-align-middle" src="'+u+'" />');h.click(function(){d("#iconTarget").val(d(this).parent().parent().data("id")),d("#icons").show()}),a.append(" ").append(h),(r=d('<input type="text" class="mmp-align-middle" name="filtersList['+t+'][name]" value="'+r+'" />')).change(function(){x(),f.loadControls()}),a.append(" ").append(r);var p=d('<i class="dashicons dashicons-no mmp-remove-filter"></i>');p.click(function(){d(this).parent().parent().remove(),b(),x(),m()}),a.append(" ").append(p),d("#filterList").append(o)}function b(){var e=[];d(".mmp-filter").each(function(){e.push(d(this).data("id"))}),d("#filtersMapList option").each(function(){var t=d(this).val()==f.id||-1!==d.inArray(parseInt(d(this).val()),e);d(this).prop("disabled",t)});var t=!1;d("#filtersMapList option").each(function(){if(!d(this).prop("disabled"))return t=!0,d(this).prop("selected",!0),!1}),t?d("#filtersAdd").prop("disabled",!1):(d("#filtersAdd").prop("disabled",!0),d("#filtersMapList option").prop("selected",!1)),d("#filtersMapList").select2({width:"300px"})}function x(){var i={};d("#filterList li").each(function(t){var e=d(this).data("id");i[e]={index:t,active:d('input[name="filtersList['+e+'][active]"]').prop("checked"),name:d('input[name="filtersList['+e+'][name]"]').val(),icon:d('input[name="filtersList['+e+'][icon]"]').val()}}),f.settings.filtersDetails=i}function w(){f.settings.gpxStartIcon=d("#gpxStartIcon").val(),f.settings.gpxEndIcon=d("#gpxEndIcon").val(),f.setTrackIcons()}function k(t){void 0!==f.map.pm&&(t?(f.settings.filtersGeoJson=!1,m(),f.map.pm.addControls({position:"topleft",drawMarker:!1,drawCircleMarker:!1})):(f.settings.filtersGeoJson=d("#filtersGeoJson").prop("checked"),m(),f.map.pm.removeControls()))}function L(){void 0!==f.map.pm&&f.map.pm.setPathOptions({stroke:d("#drawStroke").prop("checked"),color:d("#drawStrokeColor").val(),weight:parseInt(d("#drawStrokeWeight").val()),opacity:parseFloat(d("#drawStrokeOpacity").val()),lineCap:d("#drawLineCap").val(),lineJoin:d("#drawLineJoin").val(),fill:d("#drawFill").prop("checked"),fillColor:d("#drawFillColor").val(),fillOpacity:parseFloat(d("#drawFillOpacity").val()),fillRule:d("#drawFillRule").val()})}function C(){var r={type:"FeatureCollection",features:[]};return f.geoJson[f.id].eachLayer(function(t){var e=t.toGeoJSON();if((!(t instanceof I.a.Polyline)||e.geometry.coordinates.length)&&(!(t instanceof I.a.Polygon)||e.geometry.coordinates.length&&e.geometry.coordinates[0].length&&null!==e.geometry.coordinates[0][0])){void 0===e.properties&&(e.properties={}),t instanceof I.a.Circle?e.properties.radius=t.getRadius():t instanceof I.a.Rectangle&&(e.properties.rectangle=!0);for(var i=["name","stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule","popup"],n=0;n<i.length;n++)void 0!==t.options[i[n]]&&(e.properties[i[n]]=t.options[i[n]]);r.features.push(e)}}),r}function M(){d("#geoJson").empty(),d("#shapesSelectAll").prop("checked",!1),f.geoJson[f.id].eachLayer(T),d('input[name="shapesSelected[]"]').length?d("#shapesList").show():d("#shapesList").hide(),d('input[name="shapesSelected[]"]').change(function(){var i=!0;d('input[name="shapesSelected[]"]').each(function(t,e){i=i&&d(e).prop("checked")}),d("#shapesSelectAll").prop("checked",i)})}function S(t){var e=!1;return t instanceof I.a.Circle?e="Circle":t instanceof I.a.Rectangle?e="Rectangle":t instanceof I.a.Polygon?e="Polygon":t instanceof I.a.Polyline&&(e="Polyline"),e}function T(t){var e=I.a.stamp(t),i=S(t),n=d('<li class="mmp-shape" data-id="'+e+'"></li>'),r=d("<div></div>");n.append(r);var o=d('<input type="checkbox" name="shapesSelected[]" value="'+e+'" />');r.append(o);var a=d('<img class="mmp-align-middle" src="'+mmpVars.pluginUrl+"images/icons/geojson-"+i.toLowerCase()+'.png" />');r.append(a);var s=d('<input type="text" class="mmp-align-middle" value="'+t.options.name+'" />');s.change(function(){var t=d(this).parent().parent().data("id"),e=f.geoJson[f.id].getLayer(t);void 0!==e&&(e.options.name=d(this).val(),f.updatePopup(e,!0))}),r.append(" ").append(s);var l=d('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/jump-to.png" />');l.click(function(){f.fitGeoJson(e)}),r.append(" ").append(l);var c=d('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');c.click(function(){E(),d("#shapeId").val(e);var t=f.geoJson[f.id].getLayer(d("#shapeId").val());void 0!==t&&(A(t.options),d("#shapeBackup").val(JSON.stringify(D())),d("#editShape").appendTo(d(this).parent()),d("#editShape").slideDown(500))}),r.append(" ").append(c),d("#geoJson").append(n)}function P(){var t=f.geoJson[f.id].getLayer(d("#shapeId").val());void 0!==t&&t.setStyle(D())}function D(){return{stroke:d("#editDrawStroke").prop("checked"),color:d("#editDrawStrokeColor").val(),weight:parseInt(d("#editDrawStrokeWeight").val()),opacity:parseFloat(d("#editDrawStrokeOpacity").val()),lineCap:d("#editDrawLineCap").val(),lineJoin:d("#editDrawLineJoin").val(),fill:d("#editDrawFill").prop("checked"),fillColor:d("#editDrawFillColor").val(),fillOpacity:parseFloat(d("#editDrawFillOpacity").val()),fillRule:d("#editDrawFillRule").val(),popup:d("#editDrawPopup").val()}}function A(t){d("#editDrawStroke").prop("checked",t.stroke),d("#editDrawStrokeColor").spectrum("set",t.color),d("#editDrawStrokeWeight").val(t.weight),d("#editDrawStrokeOpacity").val(t.opacity),d('#editDrawLineCap option[value="'+t.lineCap+'"]').prop("selected",!0),d('#editDrawLineJoin option[value="'+t.lineJoin+'"]').prop("selected",!0),d("#editDrawFill").prop("checked",t.fill),d("#editDrawFillColor").spectrum("set",t.fillColor),d("#editDrawFillOpacity").val(t.fillOpacity),d('#editDrawFillRule option[value="'+t.fillRule+'"]').prop("selected",!0),d("#editDrawPopup").val(t.popup)}function E(){var t=d("#shapeBackup").val();t&&(A(JSON.parse(t)),P(),d("#shapeBackup").val(""))}function O(t){void 0!==t[0]&&f.map.fitBounds(t[0].getBounds(),{padding:[10,10]})}i.on("select",function(){var t=i.state().get("selection").first().toJSON();d("#gpxUrl").val(t.url),d("#updateGpx").click()}),f.on("settingsloaded",function(e){d("#filterList").empty(),Object.keys(e.filtersDetails).forEach(function(t){y(t,e.filtersDetails[t])}),b(),x()}),f.on("basemapsloaded",function(t){var i;d("input[name=basemapDefault]:checked").length||(d.each(t,function(t,e){if(f.map.hasLayer(e))return i=t,!1}),i&&d(".mmp-basemap").each(function(t,e){if(d("input[type=text]",e).val()===i)return d("input[type=radio]",e).prop("checked",!0),!1}))}),f.on("maploaded",function(){f.map.on("moveend",function(){d("#lat").val(f.map.getCenter().lat.toFixed(6)),d("#lng").val(f.map.getCenter().lng.toFixed(6))}),f.map.on("zoomend",function(){d("#zoom").val(f.map.getZoom().toFixed(1))}),f.on("controlsloaded",function(){e=d("#mapSettings").serialize(),d(".leaflet-control-layers-base .leaflet-control-layers-selector").change(function(){d(".mmp-basemap").each(function(t,e){var i=d("input[type=text]",e).val();if(f.map.hasLayer(f.basemaps[i]))return d("input[type=radio]",e).prop("checked",!0),!1})}),d(".leaflet-control-layers-overlays .leaflet-control-layers-selector").change(function(){d(".mmp-overlay").each(function(t,e){var i=d("input[type=text]",e).val(),n=f.map.hasLayer(f.overlays[i]);d("input[type=checkbox]",e).prop("checked",n)})}),d(".mmp-control-filters-selector").change(function(){var t=d(this).val(),e=d(this).prop("checked");d('input[name="filtersList['+t+'][active]"]').prop("checked",e)})}),f.map.on("pm:create",function(t){E(),d("#editShape").hide(),d("#editShape").appendTo(d("#mmp-tabDraw-settings"));var e=S(t.layer).toLowerCase();t.layer.options.name=mmpAdminL10n.geoJson[e],f.geoJson[f.id].addLayer(t.layer),M()}),f.map.on("pm:remove",function(t){E(),d("#editShape").hide(),d("#editShape").appendTo(d("#mmp-tabDraw-settings")),f.geoJson[f.id].removeLayer(t.layer),M()}),f.map.on("pm:cut",function(i){E(),d("#editShape").hide(),d("#editShape").appendTo(d("#mmp-tabDraw-settings")),f.geoJson[f.id].removeLayer(i.originalLayer),i.layer.eachLayer(function(t){var e=i.originalLayer.options.name||"";t.options.name=e,f.geoJson[f.id].addLayer(t)}),M()}),r(),L()}),f.on("geojsonloaded",function(){M()}),d("#chooseGpx").click(function(){i.open()}),d("#tabMap, #tabLayers, #tabControl, #tabMarker, #tabFilter, #tabList, #tabShare, #tabInteraction, #tabGpx, #tabDraw").click(function(){!function(t){var e=d(".mmp-tablink.active").first().attr("id");d(".mmp-tab").each(function(){d(this).hide()}),d(".mmp-tablink").each(function(){d(this).removeClass("active")}),d("#mmp-"+t.attr("id")+"-settings").show(),t.addClass("active");var i="tabDraw"===t.attr("id");i&&"tabDraw"!==e?k(!0):i||"tabDraw"!==e||k(!1)}(d(this))}),d("#tabMap").trigger("click"),d("#advancedSettings").change(function(){d.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_advanced_map_settings_state",nonce:d("#nonce").val(),state:d("#advancedSettings").prop("checked")?1:0},beforeSend:n})}),d("#deleteMap").click(function(t){d.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:d("#nonce").val(),con:0,id:d("#id").val()}}).done(function(t){if(t.success){if(!confirm(t.response.message))return;d.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:d("#nonce").val(),con:1,id:t.response.id}}).done(function(t){t.success&&(e=d("#mapSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_maps")})}})}),d("#panelColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d(this).data("changed",!1),d("#panel").prop("checked",!0),d("#panel").trigger("change")},move:function(t){o(t.toHexString("hex3"))},change:function(t){d(this).data("changed",!0),o(t.toHexString("hex3"))},hide:function(t){d(this).data("changed")?o(t.toHexString("hex3")):o(d(this).val())}}),d("#gpxTrackColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){a(t.toHexString("hex3"))},change:function(t){d(this).data("changed",!0),a(t.toHexString("hex3"))},hide:function(t){d(this).data("changed")?a(t.toHexString("hex3")):a(d(this).val())}}),d("#gpxWaypointsColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d(this).data("changed",!1),d("#gpxWaypoints").prop("checked",!0),d("#gpxWaypoints").trigger("change"),d("#gpxWaypointsStroke").prop("checked",!0),d("#gpxWaypointsStroke").trigger("change")},move:function(t){s(t.toHexString("hex3"))},change:function(t){d(this).data("changed",!0),s(t.toHexString("hex3"))},hide:function(t){d(this).data("changed")?s(t.toHexString("hex3")):s(d(this).val())}}),d("#gpxWaypointsFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d(this).data("changed",!1),d("#gpxWaypoints").prop("checked",!0),d("#gpxWaypoints").trigger("change")},move:function(t){l(t.toHexString("hex3"))},change:function(t){d(this).data("changed",!0),l(t.toHexString("hex3"))},hide:function(t){d(this).data("changed")?l(t.toHexString("hex3")):l(d(this).val())}}),d("#mapSettings").submit(function(t){t.preventDefault(),t.stopPropagation(),d.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map",settings:d("#mapSettings").serialize(),geoJson:JSON.stringify(C())},beforeSend:function(){var t;t=d("#save"),d("#save").prop("disabled",!0),d(t).addClass("mmp-button-loading")}}).done(function(t){t.success?(e=d("#mapSettings").serialize(),"new"==d("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+t.response.id):d('<div class="notice notice-success"><p>'+t.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){d(this).remove()})):d('<div class="notice notice-error"><p>'+t.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){d(this).remove()})}).always(function(){var t;t=d("#save"),d(t).removeClass("mmp-button-loading"),d("#save").prop("disabled",!1)})}),d("#saveDefaultsLink").click(function(t){t.preventDefault(),t.stopPropagation(),d(this).hide(),d(".mmp-save-defaults").show()}),d("#saveDefaultsConfirm").click(function(t){d.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map_defaults",settings:d("#mapSettings").serialize()},beforeSend:function(){d("#saveDefaultsConfirm").prop("disabled",!0),d("#saveDefaultsCancel").prop("disabled",!0),d(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always(function(){d(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),d(".mmp-save-defaults").fadeOut(500,function(){d("#saveDefaultsConfirm").prop("disabled",!1),d("#saveDefaultsCancel").prop("disabled",!1),d("#saveDefaultsLink").show()})})}),d("#saveDefaultsCancel").click(function(t){d(".mmp-save-defaults").hide(),d("#saveDefaultsLink").show()}),d("#fitMarkers").click(function(){f.fitVisibleMarkers()}),d("#name").change(function(){f.settings.name=d(this).val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f.loadPanel()}),d("#width, input[name=widthUnit], #height, input[name=heightUnit]").change(function(){d("#widthUnitPct").prop("checked")&&100<d("#width").val()&&d("#width").val(100),f.settings.width=parseInt(d("#width").val()),f.settings.widthUnit=d("input[name=widthUnit]:checked").val(),f.settings.height=parseInt(d("#height").val()),f.settings.heightUnit=d("input[name=heightUnit]:checked").val(),f.setLayout()}),d("#lat, #lng").change(function(){var t=parseFloat(d("#lat").val()),e=parseFloat(d("#lng").val());f.map.panTo([t,e])}),d("#zoom, #minZoom, #maxZoom, #zoomStep").change(function(){f.map.options.minZoom=parseFloat(d("#minZoom").val()),f.map.options.maxZoom=parseFloat(d("#maxZoom").val()),f.map.options.zoomSnap=parseFloat(d("#zoomStep").val()),f.map.options.zoomDelta=parseFloat(d("#zoomStep").val()),f.map.setZoom(parseFloat(d("#zoom").val()))}),d("#maxBounds").change(function(){f.map.setMaxBounds(f.strToBounds(d("#maxBounds").val()))}),d("#restrictView").click(function(){d("#minZoom").val(f.map.getZoom()),f.map.options.minZoom=parseFloat(d("#minZoom").val()),d("#maxBounds").val(f.boundsToStr(f.map.getBounds())),f.map.setMaxBounds(f.strToBounds(d("#maxBounds").val()))}),d("#panel").change(function(){f.settings.panel=d(this).prop("checked"),f.loadPanel()}),d("#panelFs, #panelGpx, #panelGeoJson, #panelKml, #panelGeoRss").change(function(){f.settings[d(this).attr("id")]=d(this).prop("checked"),f.loadPanel()}),d("#basemapList").sortable({handle:".mmp-handle",update:p}),d("#basemapsAdd").click(function(){!function(t,e){var i=d('<li class="mmp-basemap" data-id="'+t+'"></li>'),n=d("<div></div>");i.append(n);var r=d('<input type="hidden" name="basemaps[]" value="'+t+'" />');n.append(r);var o=d('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');n.append(o);var a=d('<input type="radio" name="basemapDefault" value="'+t+'" />');a.change(function(){f.settings.basemapDefault=d(this).val(),f.loadBasemaps(),f.loadControls()}),n.append(" ").append(a);var s=d('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />');n.append(" ").append(s);var l=d('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');l.click(function(){d(this).parent().parent().remove(),h(),p()}),n.append(" ").append(l),d("#basemapList").append(i)}(d("#basemapsList").val(),d("#basemapsList option:checked").text()),h(),p()}),d(".mmp-remove-basemap").click(function(){d(this).parent().parent().remove(),h(),p()}),h(),d("input[name=basemapDefault]").change(function(){f.settings.basemapDefault=d(this).val(),f.loadBasemaps(),f.loadControls()}),d("#overlayList").sortable({handle:".mmp-handle",update:v}),d("#overlaysAdd").click(function(){!function(t,e){var i=d('<li class="mmp-overlay" data-id="'+t+'"></li>'),n=d("<div></div>");i.append(n);var r=d('<input type="hidden" name="overlays[]" value="'+t+'" />');n.append(r);var o=d('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');n.append(o);var a=d('<input type="checkbox" name="overlaysActive[]" value="'+t+'" />');a.change(function(){_(),f.loadOverlays(),f.loadControls()}),n.append(" ").append(a);var s=d('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />');n.append(" ").append(s);var l=d('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');l.click(function(){d(this).parent().parent().remove(),g(),v()}),n.append(" ").append(l),d("#overlayList").append(i)}(d("#overlaysList").val(),d("#overlaysList option:checked").text()),g(),v()}),d(".mmp-remove-overlay").click(function(){d(this).parent().parent().remove(),g(),v()}),g(),d('input[name="overlaysActive[]"]').change(function(){_(),f.loadOverlays(),f.loadControls()}),d("input[name=attributionPosition], #attributionCondensed").change(function(){f.settings.attributionPosition=d("input[name=attributionPosition]:checked").val(),f.settings.attributionCondensed=d("#attributionCondensed").prop("checked"),f.loadControls()}),d("input[name=zoomControlPosition]").change(function(){f.settings.zoomControlPosition=d("input[name=zoomControlPosition]:checked").val(),f.loadControls()}),d("input[name=fullscreenPosition]").change(function(){f.settings.fullscreenPosition=d("input[name=fullscreenPosition]:checked").val(),f.loadControls()}),d("input[name=resetPosition], #resetOnDemand").change(function(){f.settings.resetPosition=d("input[name=resetPosition]:checked").val(),f.settings.resetOnDemand=d("#resetOnDemand").prop("checked"),f.loadControls()}),d("input[name=locatePosition]").change(function(){f.settings.locatePosition=d("input[name=locatePosition]:checked").val(),f.loadControls()}),d("input[name=scalePosition]").change(function(){f.settings.scalePosition=d("input[name=scalePosition]:checked").val(),f.loadControls()}),d("#scaleMaxWidth, #scaleMetric, #scaleImperial").change(function(){f.settings.scaleMaxWidth=d("#scaleMaxWidth").val(),f.settings.scaleMetric=d("#scaleMetric").prop("checked"),f.settings.scaleImperial=d("#scaleImperial").prop("checked"),f.loadControls()}),d("input[name=layersPosition], #layersCollapsed").change(function(){f.settings.layersPosition=d("input[name=layersPosition]:checked").val(),f.settings.layersCollapsed=d("#layersCollapsed").val(),f.loadControls()}),d("input[name=filtersPosition], #filtersCollapsed, #filtersOrderBy, #filtersSortOrder").change(function(){d("#filtersSortOrder").prop("disabled","custom"==d("#filtersOrderBy").val()),f.settings.filtersPosition=d("input[name=filtersPosition]:checked").val(),f.settings.filtersCollapsed=d("#filtersCollapsed").val(),f.settings.filtersOrderBy=d("#filtersOrderBy").val(),f.settings.filtersSortOrder=d("#filtersSortOrder").val(),f.loadControls()}),d("input[name=gpxControlPosition], #gpxControlCollapsed").change(function(){f.settings.gpxControlPosition=d("input[name=gpxControlPosition]:checked").val(),f.settings.gpxControlCollapsed=d("#gpxControlCollapsed").val(),f.loadControls()}),d("#filtersButtons, #filtersIcon, #filtersName, #filtersCount").change(function(){f.settings[d(this).attr("id")]=d(this).prop("checked"),f.loadControls()}),d("input[name=minimapPosition], #minimapWidth, #minimapHeight, #minimapCollapsedWidth, #minimapCollapsedHeight, #minimapZoomLevelOffset, #minimapZoomLevelFixed, #minimapMinimized").change(function(){f.settings.minimapPosition=d("input[name=minimapPosition]:checked").val(),f.settings.minimapWidth=d("#minimapWidth").val(),f.settings.minimapHeight=d("#minimapHeight").val(),f.settings.minimapCollapsedWidth=d("#minimapCollapsedWidth").val(),f.settings.minimapCollapsedHeight=d("#minimapCollapsedHeight").val(),f.settings.minimapZoomLevelOffset=parseFloat(d("#minimapZoomLevelOffset").val()),f.settings.minimapZoomLevelFixed=parseFloat(d("#minimapZoomLevelFixed").val())||null,f.settings.minimapMinimized=d("#minimapMinimized").val(),f.loadControls()}),d("#filtersAllMarkers").change(function(){f.settings.filtersAllMarkers=d(this).prop("checked"),r(),m()}),d("#filtersGeoJson").change(function(){f.settings.filtersGeoJson=d(this).prop("checked"),m()}),d("#filterList").sortable({handle:".mmp-handle",update:function(){x(),f.loadControls()}}),d(".mmp-gpx-start-icon").click(function(){d("#iconTarget").val("gpx-start"),d("#icons").show()}),d(".mmp-gpx-end-icon").click(function(){d("#iconTarget").val("gpx-end"),d("#icons").show()}),d("#iconsList img").click(function(){var t=d("#iconTarget").val(),e=d(this).attr("src"),i=d(this).data("icon");"gpx-start"===t?(d("#gpxStartIcon").val(i),d(".mmp-gpx-start-icon").attr("src",e),w()):"gpx-end"===t?(d("#gpxEndIcon").val(i),d(".mmp-gpx-end-icon").attr("src",e),w()):(d('input[name="filtersList['+t+'][icon]"]').val(i),d('.mmp-filter[data-id="'+t+'"] .mmp-filter-icon').attr("src",e),x(),f.loadControls()),d("#icons").hide()}),d("#filtersAdd").click(function(){var t=d("#filtersMapList option:checked").text().replace(/\[(.+)\] /,"").replace(/ \((.+)\)$/,"");y(d("#filtersMapList").val(),{name:t}),b(),x(),m()}),b(),d(".mmp-remove-filter").click(function(){d(this).parent().parent().remove(),b(),x()}),d("#markerOpacity").change(function(){Object.keys(f.markers).forEach(function(t){f.markers[t].setOpacity(parseFloat(d("#markerOpacity").val()))})}),d("#tooltip").change(function(){var e=d(this).prop("checked");Object.keys(f.markers).forEach(function(t){f.markers[t].unbindTooltip(),e&&void 0!==f.tooltips[t]&&f.markers[t].bindTooltip(f.tooltips[t],f.tooltip)})}),d("#tooltipDirection, #tooltipPermanent, #tooltipSticky, #tooltipOpacity").change(function(){f.tooltip.direction=d("#tooltipDirection").val(),f.tooltip.permanent=d("#tooltipPermanent").prop("checked"),f.tooltip.sticky=d("#tooltipSticky").prop("checked"),f.tooltip.opacity=parseFloat(d("#tooltipOpacity").val()),d("#tooltip").trigger("change")}),d("#popupCenterOnMap, #popupMarkername, #popupAddress, #popupCoordinates, #popupDirections, #popupShare, #popupMinWidth, #popupMaxWidth, #popupMaxHeight").change(function(){f.settings.popupCenterOnMap=d("#popupCenterOnMap").prop("checked"),f.settings.popupMarkername=d("#popupMarkername").prop("checked"),f.settings.popupAddress=d("#popupAddress").prop("checked"),f.settings.popupCoordinates=d("#popupCoordinates").prop("checked"),f.settings.popupDirections=d("#popupDirections").prop("checked"),f.settings.popupShare=d("#popupShare").prop("checked"),f.settings.popupMinWidth=parseInt(d("#popupMinWidth").val()),f.settings.popupMaxWidth=parseInt(d("#popupMaxWidth").val()),f.settings.popupMaxHeight=parseInt(d("#popupMaxHeight").val()),f.updatePopups()}),d("#showCoverageOnHover, #spiderfyDistanceMultiplier").change(function(){f.settings.clustering&&(f.markerGroup.remove(),f.markerGroup.options.showCoverageOnHover=d("#showCoverageOnHover").prop("checked"),f.markerGroup.options.spiderfyDistanceMultiplier=parseFloat(d("#spiderfyDistanceMultiplier").val()),f.markerGroup.addTo(f.map))}),d("#listSearch, #listIcon, #listName, #listPopup, #listAddress, #listDistance").change(function(){f.settings[d(this).attr("id")]=d(this).prop("checked"),f.getList()}),d("#listDir, #listFs, #listShare").change(function(){f.settings.listDir=d("#listDir").prop("checked"),f.settings.listFs=d("#listFs").prop("checked"),f.settings.listShare=d("#listShare").prop("checked"),f.getList()}),d("#listDistanceUnit, #listDistancePrecision, #listOrderBy, #listSortOrder, #listLimit, #listAction").change(function(){f.settings.listDistanceUnit=d("#listDistanceUnit").val(),f.settings.listDistancePrecision=parseInt(d("#listDistancePrecision").val()),f.settings.listOrderBy=d("#listOrderBy").val(),f.settings.listSortOrder=d("#listSortOrder").val(),f.settings.listLimit=parseInt(d("#listLimit").val()),f.settings.listAction=d("#listAction").val(),f.getList()}),d("#listOrderById, #listOrderByName, #listOrderByAddress, #listOrderByDistance, #listOrderByIcon, #listOrderByCreated, #listOrderByUpdated").change(function(){f.settings[d(this).attr("id")]=d(this).prop("checked"),f.getList()}),d("#shareUrl, #shareText, #shareFacebook, #shareTwitter, #shareLinkedIn, #shareWhatsApp, #shareEmail").change(function(){f.settings.shareUrl=d("#shareUrl").val(),f.settings.shareText=d("#shareText").val(),f.settings.popupShare=d("#popupShare").prop("checked"),f.settings.listShare=d("#listShare").prop("checked"),f.settings.shareFacebook=d("#shareFacebook").prop("checked"),f.settings.shareTwitter=d("#shareTwitter").prop("checked"),f.settings.shareLinkedIn=d("#shareLinkedIn").prop("checked"),f.settings.shareWhatsApp=d("#shareWhatsApp").prop("checked"),f.settings.shareEmail=d("#shareEmail").prop("checked")}),d("#responsive").change(function(){f.settings.responsive=d(this).prop("checked"),f.setLayout()}),d("#boxZoom").change(function(){d(this).prop("checked")?f.map.boxZoom.enable():f.map.boxZoom.disable()}),d("#doubleClickZoom").change(function(){d(this).prop("checked")?f.map.doubleClickZoom.enable():f.map.doubleClickZoom.disable()}),d("#dragging").change(function(){d(this).prop("checked")?f.map.dragging.enable():f.map.dragging.disable()}),d("#inertia, #inertiaDeceleration, #inertiaMaxSpeed").change(function(){f.map.options.inertia=d("#inertia").prop("checked"),f.map.options.inertiaDeceleration=parseInt(d("#inertiaDeceleration").val()),f.map.options.inertiaMaxSpeed=parseInt(d("#inertiaMaxSpeed").val())}),d("#keyboard").change(function(){d(this).prop("checked")?f.map.keyboard.enable():f.map.keyboard.disable()}),d("#scrollWheelZoom").change(function(){d(this).prop("checked")?f.map.scrollWheelZoom.enable():f.map.scrollWheelZoom.disable()}),d("#touchZoom").change(function(){d(this).prop("checked")?f.map.touchZoom.enable():f.map.touchZoom.disable()}),d("#updateGpx").click(function(){var t=d("#gpxUrl").val();(f.settings.gpxUrl=t)?(f.on("gpxloaded",O),f.getGpx().then(f.loadControls)):(f.off("gpxloaded",O),f.gpx={},f.addGpx(),f.loadControls())}),d("#gpxShowStartIcon, #gpxShowEndIcon").change(function(){f.settings.gpxShowStartIcon=d("#gpxShowStartIcon").prop("checked"),f.settings.gpxShowEndIcon=d("#gpxShowEndIcon").prop("checked"),f.setTrackIcons()}),d("#gpxIntervalMarkers").change(function(){f.settings.gpxIntervalMarkers=d(this).prop("checked"),f.setIntervalMarkers()}),d("#gpxTrackWeight").change(function(){f.settings.gpxTrackWeight=parseInt(d(this).val()),f.setTrackStyle()}),d("#gpxTrackOpacity").change(function(){f.settings.gpxTrackOpacity=parseFloat(d(this).val()),f.setTrackStyle()}),d("#gpxMeta, #gpxMetaUnits, #gpxMetaHideMissing").change(function(){f.settings.gpxMeta=d("#gpxMeta").prop("checked"),f.settings.gpxMetaUnits=d("#gpxMetaUnits").val(),f.settings.gpxMetaHideMissing=d("#gpxMetaHideMissing").prop("checked"),f.setTrackMeta()}),d("#gpxMetaName, #gpxMetaDesc, #gpxMetaStart, #gpxMetaEnd, #gpxMetaTotal, #gpxMetaMoving, #gpxMetaDistance, #gpxMetaPace, #gpxMetaHeartRate, #gpxMetaElevation, #gpxMetaDownload").change(function(){f.settings[d(this).attr("id")]=d(this).prop("checked"),f.setTrackMeta()}),d("#gpxWaypoints").change(function(){f.settings.gpxWaypoints=d(this).prop("checked"),f.setWaypoints()}),d("#gpxWaypointsRadius").change(function(){f.settings.gpxWaypointsRadius=parseInt(d(this).val()),f.setWaypointStyle()}),d("#gpxWaypointsStroke").change(function(){f.settings.gpxWaypointsStroke=d(this).prop("checked"),f.setWaypointStyle()}),d("#gpxWaypointsWeight").change(function(){f.settings.gpxWaypointsWeight=parseInt(d(this).val()),f.setWaypointStyle()}),d("#gpxWaypointsFillOpacity").change(function(){f.settings.gpxWaypointsFillOpacity=parseFloat(d(this).val()),f.setWaypointStyle()}),d("#gpxChart").change(function(){f.settings.gpxChart=d(this).prop("checked"),f.loadChart(),f.addElevationChart()}),d("#gpxChartUnits, #gpxChartYOffset").change(function(){f.settings.gpxChartUnits=d(this).val(),f.settings.gpxChartYOffset=d("#gpxChartYOffset").val(),f.updateElevationChart(!0)}),d("#gpxChartHeight").change(function(){var t=parseInt(d(this).val());f.settings.gpxChartHeight=t,void 0!==f.containers.chartWrap&&(f.containers.chartWrap.style.height=t+"px")}),d("#gpxChartReverseX, #gpxChartReverseY").change(function(){f.settings.gpxChartReverseX=d("#gpxChartReverseX").prop("checked"),f.settings.gpxChartReverseY=d("#gpxChartReverseY").prop("checked"),f.updateElevationChart()}),d("#gpxChartYMin, #gpxChartYMax").change(function(){f.settings.gpxChartYMin=d("#gpxChartYMin").val(),f.settings.gpxChartYMax=d("#gpxChartYMax").val(),f.updateElevationChart()}),d("#gpxChartBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartBgColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartBgColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartBgColor=t.toRgbString():f.settings.gpxChartBgColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartGridLinesColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartGridLinesColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartGridLinesColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartGridLinesColor=t.toRgbString():f.settings.gpxChartGridLinesColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartTicksFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartTicksFontColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartTicksFontColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartTicksFontColor=t.toRgbString():f.settings.gpxChartTicksFontColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartLineWidth").change(function(){f.settings.gpxChartLineWidth=parseInt(d(this).val()),f.updateElevationChartThrottled()}),d("#gpxChartLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartLineColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartLineColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartLineColor=t.toRgbString():f.settings.gpxChartLineColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartFill").change(function(){f.settings.gpxChartFill=d(this).prop("checked"),f.updateElevationChartThrottled()}),d("#gpxChartFillColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartFillColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartFillColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartFillColor=t.toRgbString():f.settings.gpxChartFillColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartTooltipBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartTooltipBgColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartTooltipBgColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartTooltipBgColor=t.toRgbString():f.settings.gpxChartTooltipBgColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartTooltipFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartTooltipFontColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartTooltipFontColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartTooltipFontColor=t.toRgbString():f.settings.gpxChartTooltipFontColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartIndicatorLineWidth").change(function(){f.settings.gpxChartIndicatorLineWidth=parseInt(d(this).val()),f.updateElevationChartThrottled()}),d("#gpxChartIndicatorLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){f.settings.gpxChartIndicatorLineColor=t.toRgbString(),f.updateElevationChartThrottled()},change:function(t){d(this).data("changed",!0),f.settings.gpxChartIndicatorLineColor=t.toRgbString(),f.updateElevationChartThrottled()},hide:function(t){d(this).data("changed")?f.settings.gpxChartIndicatorLineColor=t.toRgbString():f.settings.gpxChartIndicatorLineColor=d(this).val(),f.updateElevationChartThrottled()}}),d("#gpxChartLocator").change(function(){f.settings.gpxChartLocator=d(this).prop("checked")}),d("#gpxChartLocatorRadius").change(function(){f.settings.gpxChartLocatorRadius=parseInt(d(this).val()),f.setChartStyle()}),d("#gpxChartLocatorStroke").change(function(){f.settings.gpxChartLocatorStroke=d(this).prop("checked"),f.setChartStyle()}),d("#gpxChartLocatorColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){c(t.toHexString("hex3"))},change:function(t){d(this).data("changed",!0),c(t.toHexString("hex3"))},hide:function(t){d(this).data("changed")?c(t.toHexString("hex3")):c(d(this).val())}}),d("#gpxChartLocatorWeight").change(function(){f.settings.gpxChartLocatorWeight=parseInt(d(this).val()),f.setChartStyle()}),d("#gpxChartLocatorFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d(this).data("changed",!1)},move:function(t){u(t.toHexString("hex3"))},change:function(t){d(this).data("changed",!0),u(t.toHexString("hex3"))},hide:function(t){d(this).data("changed")?u(t.toHexString("hex3")):u(d(this).val())}}),d("#gpxChartLocatorFillOpacity").change(function(){f.settings.gpxChartLocatorFillOpacity=parseFloat(d(this).val()),f.setChartStyle()}),d("#addGeoJson").click(function(){d("#geoJsonModal").slideDown(500)}),d("#geoJsonCancel").click(function(){d(".mmp-json-error").remove(),d("#geoJsonText").val(""),d("#geoJsonModal").slideUp(500)}),d("#geoJsonSave").click(function(){d(".mmp-json-error").remove();var t,e=d("#geoJsonText").val(),i=f.checkJson(e);if(!1!==i){try{t=i,I.a.geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return I.a.circle(e,t.properties.radius)},style:function(t){for(var e=D(),i=["stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule"],n=0;n<i.length;n++){var r=i[n];if(void 0!==t.properties[r])switch(r){case"weight":e[r]=parseInt(t.properties[r]);break;case"opacity":case"fillOpacity":e[r]=parseFloat(t.properties[r]);break;default:e[r]=t.properties[r]}}return e},onEachFeature:function(t,e){var i=S(e);!1!==i&&(e.options.name=t.properties.name||mmpAdminL10n.geoJson[i.toLowerCase()],e.options.popup=t.properties.popup||"",e.addTo(f.map),e.addTo(f.geoJson[f.id]))}}),M()}catch(t){return void d('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidGeoJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,function(){d(this).remove()})}d("#geoJsonText").val(""),d("#geoJsonModal").slideUp(500)}else d('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,function(){d(this).remove()})}),d("#drawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d("#drawStroke").prop("checked",!0),d("#drawStroke").trigger("change")},change:function(t){d("#drawStrokeColor").val(t.toHexString("hex3")),L()}}),d("#editDrawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d("#editDrawStroke").prop("checked",!0),d("#editDrawStroke").trigger("change")},move:function(t){d("#editDrawStrokeColor").val(t.toHexString("hex3")),P()},change:function(t){d("#editDrawStrokeColor").val(t.toHexString("hex3")),P()},hide:function(t){d("#editDrawStrokeColor").val(t.toHexString("hex3")),P()}}),d("#drawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d("#drawFill").prop("checked",!0),d("#drawFill").trigger("change")},change:function(t){d("#drawFillColor").val(t.toHexString("hex3")),L()}}),d("#editDrawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){d("#editDrawFill").prop("checked",!0),d("#editDrawFill").trigger("change")},move:function(t){d("#editDrawFillColor").val(t.toHexString("hex3")),P()},change:function(t){d("#editDrawFillColor").val(t.toHexString("hex3")),P()},hide:function(t){d("#editDrawFillColor").val(t.toHexString("hex3")),P()}}),d("#drawStroke, #drawStrokeWeight, #drawStrokeOpacity, #drawLineCap, #drawLineJoin, #drawFill, #drawFillOpacity, #drawFillRule").change(function(){L()}),d("#editDrawStroke, #editDrawStrokeWeight, #editDrawStrokeOpacity, #editDrawLineCap, #editDrawLineJoin, #editDrawFill, #editDrawFillOpacity, #editDrawFillRule").change(function(){P()}),d("#editDrawCancel").click(function(){E(),d("#editShape").slideUp(500)}),d("#editDrawSave").click(function(){P();var t=f.geoJson[f.id].getLayer(d("#shapeId").val());void 0!==t&&(t.options.popup=d("#editDrawPopup").val(),f.updatePopup(t,!0)),d("#shapeBackup").val(""),d("#editShape").slideUp(500)}),d("#editDrawDelete").click(function(){E();var t=f.geoJson[f.id].getLayer(d("#shapeId").val());void 0!==t&&(d("#editShape").hide(),d("#editShape").appendTo(d("#mmp-tabDraw-settings")),f.geoJson[f.id].removeLayer(t),M())}),d("#shapesSelectAll").click(function(){d('input[name="shapesSelected[]"]').each(function(t,e){d(e).prop("checked",d("#shapesSelectAll").prop("checked"))})}),d("#shapesDeleteSelected").click(function(){E(),d("#editShape").hide(),d("#editShape").appendTo(d("#mmp-tabDraw-settings")),d('input[name="shapesSelected[]"]:checked').each(function(t,e){f.geoJson[f.id].removeLayer(d(e).val())}),M()}),d(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&d("#icons").hide()}),d("#geocodingProvider").change(function(){d("#address").algoliaAutocomplete("destroy"),d("#address").off("autocomplete:selected"),(t=new B("map",d("#geocodingProvider").val(),mmpGeocoding,400,3)).init()}),d(".mmp-shortcode").click(function(){d(this).select()}),n(),t.init(),window.onbeforeunload=function(){return e!==d("#mapSettings").serialize()?"":null},localStorage.getItem("saved")&&(d('<div class="notice notice-success"><p>'+mmpAdminL10n.map.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){d(this).remove()}),localStorage.removeItem("saved")),d("#save").prop("disabled",!1)})}var a=i(42),l=i.n(a);function s(){jQuery(document).ready(function(s){function o(t){s("#pagination_top button, #pagination_bottom button").prop("disabled",t),s("#page_top, #page_bottom").prop("disabled",t),s("#perpage_top, #perpage_bottom").prop("disabled",t),s("#search_top, #search_bottom").prop("disabled",t)}function a(t,e,i,n,r){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_map_list",nonce:s("#mapListNonce").val(),page:t,limit:e,search:i,sort:n,order:r},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0),s("#map_list").empty(),s("#map_list").addClass("mmp-page-loading")}}).done(function(t){s("#mapcount_top, #mapcount_bottom").html(t.total),s("#previous_top, #previous_bottom").val(t.page-1),s("#next_top, #next_bottom").val(t.page+1),s("#last_top, #last_bottom").val(Math.ceil(t.total/t.limit)),s("#page_top, #page_bottom").val(t.page),s("#pagecount_top, #pagecount_bottom").html(Math.ceil(t.total/t.limit)),s("#perpage_top, #perpage_bottom").val(t.limit),s("#search_top, #search_botom").val(t.search),s("#map_list").html(t.html),s('.mmp-sortable[data-orderby="'+t.sort+'"]').addClass("mmp-sorted-"+t.order),s("#selectAll").click(function(){s('input[name="selected[]"]').each(function(t,e){s(e).prop("checked",s("#selectAll").prop("checked"))})}),s('input[name="selected[]"]').change(function(){var i=!0;s('input[name="selected[]"]').each(function(t,e){i=i&&s(e).prop("checked")}),s("#selectAll").prop("checked",i)}),s(".mmp-sortable").click(function(t){t.preventDefault(),t.stopPropagation();var e=s("#sortorder").val(),e=s("#orderby").val()==s(this).data("orderby")&&"asc"==e?"desc":"asc";s("#sortorder").val(e),s("#orderby").val(s(this).data("orderby")),a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s(".mmp-table td:nth-child(3)").mouseenter(function(){s(".mmp-action",s(this)).css("visibility","visible")}),s(".mmp-table td:nth-child(3)").mouseleave(function(){s(".mmp-action",s(this)).css("visibility","hidden")}),s(".mmp-delete").click(function(t){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:s("#mapListNonce").val(),con:0,id:s(this).data("id")},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){if(t.success){if(!confirm(t.data.message))return;s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:s("#mapListNonce").val(),con:1,id:t.data.id},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){t.success&&a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){o(!1),s("#bulkActionSubmit").prop("disabled",!1)})}}).always(function(){o(!1),s("#bulkActionSubmit").prop("disabled",!1)})}),s(".mmp-shortcode").click(function(){s(this).select()}),s(".mmp-qrcode-link").click(function(t){t.preventDefault(),t.stopPropagation();var e=l()(0,"H"),i=s(this).data("url");e.addData(i),e.make();var n=e.createDataURL(8,0),r=s(this).data("id"),o=s("#qrcode_"+r),a=s('<a href="'+n+'" download="qr-code-map-'+r+'.gif"><img src="'+n+'" /></a>');o.html(a),s("img",o).click()})}).always(function(){o(!1),s("input[name=bulkAction]").prop("checked",!1),s("#map_list").removeClass("mmp-page-loading")})}s("input[name=bulkAction]").change(function(){s("#bulkActionSubmit").prop("disabled",!1)}),s("#pagination_top button").click(function(){a(s(this).val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#pagination_bottom button").click(function(){a(s(this).val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_top, #perpage_top").change(function(){a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_bottom, #perpage_bottom").change(function(){a(s("#page_bottom").val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_top").change(function(){a(1,s("#perpage_top").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_bottom").change(function(){a(1,s("#perpage_bottom").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#mapList").submit(function(t){var e;switch(t.preventDefault(),t.stopPropagation(),s("input[name=bulkAction]:checked").val()){case"duplicate":e=mmpAdminL10n.maps.bulkDuplicate;break;case"duplicate-assign":e=mmpAdminL10n.maps.bulkDuplicateAssign;break;case"delete":e=mmpAdminL10n.maps.bulkDelete;break;case"delete-assign":e=mmpAdminL10n.maps.bulkDeleteAssign.replace("{map}",s("#assignTarget").val());break;default:return}confirm(e)&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_maps",nonce:s("#bulkNonce").val(),data:s("#mapList").serialize()},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){o(!1),s("input[name=bulkAction]").prop("checked",!1)})}),s("#mmp-maps-screen-options-apply").click(function(){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_maps_screen_options",nonce:s("#screenoptionnonce").val(),hiddenColumns:s(".mmp-maps-column").not(":checked").map(function(){return this.value}).get(),perPage:s("#mmp-maps-per-page").val()},beforeSend:function(){o(!0)}}).done(function(t){s("#show-settings-link").click(),a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){o(!1)})}),a()})}i(48);var h=i(1);i(6),i(7),i(8),i(9);function c(){var u=this;this.currentValues,this.map,this.basemaps={},this.marker,this.icon,this.geoJson=I.a.geoJSON(null,{pointToLayer:function(t,e){return I.a.marker(e,{pmIgnore:!0,interactive:!1,icon:I.a.icon({iconUrl:t.properties.icon,iconSize:[32,37],iconAnchor:[17,36],popupAnchor:[-1,-32],shadowUrl:mmpVars.pluginUrl+"images/leaflet/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[16,43]})})}}),jQuery(document).ready(function(a){function t(t){t=t||mmpL10n.popup.info,"undefined"!=typeof switchEditors&&(t=switchEditors.wpautop(t)),u.marker.setPopupContent(t)}function e(){window.open(a("#link").val(),"_blank")}function s(){"popup"===a("input[name=action]:checked").val()?(a("#link").val(""),a("#link_settings").hide(),a("#editor").show(),void 0!==u.marker&&(u.marker.bindPopup("",u.popup),u.marker.openPopup(),u.marker.off("click",e),t(a("#popup").val()))):(a("#editor").hide(),a("#link_settings").show(),void 0!==u.marker&&(u.marker.closePopup(),u.marker.unbindPopup(),u.marker.on("click",e)))}function l(t){var e=t.lat,i=t.lng;e<-90?e=-90:90<e&&(e=90),i<-180?i=-180:180<i&&(i=180),u.marker.setLatLng([e,i]),u.map.panTo(u.marker.getLatLng()),a("#lat").val(u.marker.getLatLng().lat.toFixed(6)),a("#lng").val(u.marker.getLatLng().lng.toFixed(6))}function c(){a("#iconTarget").val(a("input[name=icon]:checked").val()),u.icon.options.iconUrl=a("input[name=icon]:checked+img").attr("src"),u.marker.setIcon(u.icon),a("#uploadFile").val(""),a("#iconSearch").val(""),a("#iconList .mmp-radio").show(),a("#icons").hide()}function i(i){var t;u.currentValues=a("#markerSettings").serialize(),u.map=I.a.map("maps-marker-pro-marker",{center:[i.lat,i.lng],zoom:i.zoom,minZoom:0,maxZoom:23,zoomSnap:.5,zoomDelta:.5,maxBounds:[[-90,-180],[90,180]],attributionControl:!1}),u.attributionControl=I.a.control.attribution({prefix:i.attributionPrefix}).addTo(u.map),u.attributionControl._esriAttributionAdded=!0,a.each(i.availableBasemaps,function(t,e){1!==e.type&&3!==e.type&&4!==e.type&&5!==e.type&&6!==e.type||(e.options.minZoom=0,e.options.maxZoom=23,e.options.noWrap=!0,e.options.bounds=e.options.bounds||[[-90,-180],[90,180]]),1==e.type?e.wms?u.basemaps[t]=I.a.tileLayer.wms(e.url,e.options):u.basemaps[t]=I.a.tileLayer(e.url,e.options):2==e.type&&i.googleApiKey?u.basemaps[t]=new I.a.gridLayer.googleMutant(e.options):3==e.type&&i.bingApiKey?(e.options.bingMapsKey=i.bingApiKey,e.options.culture=i.bingCulture,u.basemaps[t]=I.a.tileLayer.bing(e.options)):4==e.type&&(i.hereApiKey||i.hereAppId&&i.hereAppCode)?(e.options.apiKey=i.hereApiKey,e.options.appId=i.hereAppId,e.options.appCode=i.hereAppCode,u.basemaps[t]=I.a.tileLayer.here(e.options)):5==e.type&&i.tomApiKey?(e.options.apiKey=i.tomApiKey,u.basemaps[t]=I.a.tileLayer.tomTom(e.options)):6==e.type&&(e.labels?u.basemaps[t]=I.a.layerGroup([h.c(e.key,e.options),h.c(e.labels,e.options)]):u.basemaps[t]=h.c(e.key,e.options))}),void 0!==u.basemaps[i.basemap]?u.basemaps[i.basemap].addTo(u.map):(t=Object.keys(u.basemaps)).length&&u.basemaps[t[0]].addTo(u.map),u.geoJson.addTo(u.map),u.icon=I.a.icon({iconUrl:i.icon?mmpVars.iconsUrl+i.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:[32,37],iconAnchor:[17,36],popupAnchor:[-1,-32],shadowUrl:mmpVars.pluginUrl+"images/leaflet/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[16,43]}),u.popup={maxWidth:400,minWidth:200,maxHeight:400,className:"mmp-popup"},u.marker=I.a.marker([i.lat,i.lng],{icon:u.icon,draggable:!0}).addTo(u.map),s(),u.map.on("click",function(t){l(t.latlng)}),u.map.on("zoomend",function(){a("#zoom").val(u.map.getZoom().toFixed(1))}),u.marker.on("dragend",function(t){l(u.marker.getLatLng())});var e={enableTime:!0,time_24hr:!/a(?!\\)/i.test(mmpAdminL10n.global.timeFormat.replace(/\\\\/g,"")),altInput:!0,altFormat:(mmpAdminL10n.global.dateFormat+" "+mmpAdminL10n.global.timeFormat).replace(/G(?!\\)/g,"H").replace(/h(?!\\)/g,"G").replace(/g(?!\\)/g,"h").replace(/S(?!\\)/g,"J").replace(/s(?!\\)/g,"S").replace(/a(?!\\)/g,"K").replace(/A(?!\\)/g,"K"),dateFormat:"Y-m-d H:i:S"},n=a("#scheduleFrom").flatpickr(e),r=a("#scheduleUntil").flatpickr(e);a("#scheduleFromClear").click(function(){n.clear()}),a("#scheduleUntilClear").click(function(){r.clear()}),a("#basemap").change(function(){a.each(u.basemaps,function(t,e){e.remove()}),void 0!==u.basemaps[a(this).val()]&&u.basemaps[a(this).val()].addTo(u.map)}),a("#previewMap").change(function(){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_preview_map_markers",id:a("#previewMap").val()},beforeSend:function(){u.geoJson.clearLayers()}}).done(function(t){t.features&&(u.geoJson.addData(t),a("#previewOpacity").trigger("input"))})}),a("#previewOpacity").on("input",I.a.Util.throttle(function(){var e=parseFloat(a("#previewOpacity").val());u.geoJson.eachLayer(function(t){t.setOpacity(e)})},100)),a("#lat, #lng").change(function(){var t=parseFloat(a("#lat").val()),e=parseFloat(a("#lng").val());l(I.a.latLng(t,e))}),a("#zoom").change(function(){u.map.setZoom(parseFloat(a("#zoom").val()))}),a("input[name=icon]").change(c),a("input[name=action]").change(s),a("#markerSettings").submit(function(t){t.preventDefault(),t.stopPropagation(),a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker",settings:a("#markerSettings").serialize()},beforeSend:function(){var t;t=a("#save"),a("#save").prop("disabled",!0),a(t).addClass("mmp-button-loading")}}).done(function(t){t.success?(u.currentValues=a("#markerSettings").serialize(),"new"==a("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+t.response.id):a('<div class="notice notice-success"><p>'+t.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){a(this).remove()})):a('<div class="notice notice-error"><p>'+t.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){a(this).remove()})}).always(function(){var t;t=a("#save"),a(t).removeClass("mmp-button-loading"),a("#save").prop("disabled",!1)})}),a("#saveDefaultsLink").click(function(t){t.preventDefault(),t.stopPropagation(),a(this).hide(),a(".mmp-save-defaults").show()}),a("#saveDefaultsConfirm").click(function(t){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker_defaults",settings:a("#markerSettings").serialize()},beforeSend:function(){a("#saveDefaultsConfirm").prop("disabled",!0),a("#saveDefaultsCancel").prop("disabled",!0),a(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always(function(){a(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),a(".mmp-save-defaults").fadeOut(500,function(){a("#saveDefaultsConfirm").prop("disabled",!1),a("#saveDefaultsCancel").prop("disabled",!1),a("#saveDefaultsLink").show()})})}),a("#saveDefaultsCancel").click(function(t){a(".mmp-save-defaults").hide(),a("#saveDefaultsLink").show()}),a("#assignedMaps").select2({width:"260px",placeholder:mmpAdminL10n.marker.notAssigned,templateSelection:function(t){var e=a('<a href="'+mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+t.id+'" target="_blank">'+mmpAdminL10n.marker.edit+"</a>");return e.click(function(t){t.stopPropagation()}),a("<span>"+t.text+"</span>").append(" (").append(e).append(")")}}),a("#changeIcon").click(function(){a("#iconUpload").hide(),a("#icons").show()}),a("#iconSearch").keyup(function(){var t=a(this).val();a('input[name="icon"]').each(function(){-1===a(this).val().toUpperCase().indexOf(t.toUpperCase())?a(this).parent().hide():a(this).parent().show()})}),a("#toggleUpload").click(function(){a("#iconUpload").toggle()}),a("#upload").click(function(){var t,e=a("#uploadFile").prop("files")[0];void 0!==e&&((t=new FormData).append("action","mmp_icon_upload"),t.append("nonce",a("#upload_nonce").val()),t.append("upload",e),a.ajax({type:"POST",url:ajaxurl,processData:!1,contentType:!1,context:this,data:t}).done(function(t){t.success&&(a("#iconList").prepend('<label class="mmp-radio"><input type="radio" name="icon" value="'+t.response.name+'" checked="checked" /><img class="mmp-icon" src="'+t.response.url+'" /></label>'),a("input[name=icon]").change(c),a("input[name=icon]").trigger("change"))}))});var o=new B("marker",a("#geocodingProvider").val(),mmpGeocoding,400,3);o.init(),a("#geocodingProvider").change(function(){a("#address").algoliaAutocomplete("destroy"),a("#address").off("autocomplete:selected"),(o=new B("marker",a("#geocodingProvider").val(),mmpGeocoding,400,3)).init()}),localStorage.getItem("saved")&&(a('<div class="notice notice-success"><p>'+mmpAdminL10n.marker.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){a(this).remove()}),localStorage.removeItem("saved")),a("#save").prop("disabled",!1)}a(".mmp-delete").click(function(t){confirm(mmpAdminL10n.marker.delete)&&a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker_direct",nonce:a("#nonce").val(),id:a("#id").val()}}).done(function(t){u.currentValues=a("#markerSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_markers"})}),a(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&a("#icons").hide()}),a("#popup").change(function(){t(a(this).val())}),a("#maps-marker-pro-marker").css({width:"100%",height:"480px"}),"undefined"!=typeof tinymce&&tinymce.on("AddEditor",function(t){t.editor.on("Change",function(){a("#popup").val(this.getContent()).trigger("change")})}),a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_settings",id:a("#id").val(),basemap:a("#basemap").val(),lat:a("#lat").val(),lng:a("#lng").val(),zoom:a("#zoom").val()}}).done(function(t){i(t.settings)}),window.onbeforeunload=function(){return u.currentValues!==a("#markerSettings").serialize()?"":null}})}function u(){jQuery(document).ready(function(a){function s(t){a("#pagination_top button, #pagination_bottom button").prop("disabled",t),a("#page_top, #page_bottom").prop("disabled",t),a("#perpage_top, #perpage_bottom").prop("disabled",t),a("#search_top, #search_bottom").prop("disabled",t),a("#map_top, #map_bottom").prop("disabled",t)}function l(t,e,i,n,r,o){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_list",nonce:a("#markerListNonce").val(),page:t,limit:e,search:i,map:n,sort:r,order:o},beforeSend:function(){s(!0),a("#bulkActionSubmit").prop("disabled",!0),a("#marker_list").empty(),a("#marker_list").addClass("mmp-page-loading")}}).done(function(t){a("#markercount_top, #markercount_bottom").html(t.total),a("#previous_top, #previous_bottom").val(t.page-1),a("#next_top, #next_bottom").val(t.page+1),a("#last_top, #last_bottom").val(Math.ceil(t.total/t.limit)),a("#page_top, #page_bottom").val(t.page),a("#pagecount_top, #pagecount_bottom").html(Math.ceil(t.total/t.limit)),a("#perpage_top, #perpage_bottom").val(t.limit),a("#search_top, #search_bottom").val(t.search),a("#marker_list").html(t.html),a('.mmp-sortable[data-orderby="'+t.sort+'"]').addClass("mmp-sorted-"+t.order),a("#selectAll").click(function(){a('input[name="selected[]"]').each(function(t,e){a(e).prop("checked",a("#selectAll").prop("checked"))})}),a('input[name="selected[]"]').change(function(){var i=!0;a('input[name="selected[]"]').each(function(t,e){i=i&&a(e).prop("checked")}),a("#selectAll").prop("checked",i)}),a(".mmp-sortable").click(function(t){t.preventDefault(),t.stopPropagation();var e=a("#sortorder").val(),e=a("#orderby").val()==a(this).data("orderby")&&"asc"==e?"desc":"asc";a("#sortorder").val(e),a("#orderby").val(a(this).data("orderby")),l(a("#page_top").val(),a("#perpage_top").val(),a("#search_top").val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}),a(".mmp-table td:nth-child(4)").mouseenter(function(){a(".mmp-action",a(this)).css("visibility","visible")}),a(".mmp-table td:nth-child(4)").mouseleave(function(){a(".mmp-action",a(this)).css("visibility","hidden")}),a(".mmp-delete").click(function(t){var e=a(this).data("id");confirm(mmpAdminL10n.markers.delete.replace("{marker}",e))&&a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker",nonce:a("#markerListNonce").val(),id:e},beforeSend:function(){s(!0),a("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){l(a("#page_top").val(),a("#perpage_top").val(),a("#search_top").val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}).always(function(){s(!1),a("#bulkActionSubmit").prop("disabled",!1)})})}).always(function(){s(!1),a("#bulkActionSubmit").prop("disabled",!1),a("#marker_list").removeClass("mmp-page-loading")})}a("input[name=bulkAction]").change(function(){a("#bulkActionSubmit").prop("disabled",!1)}),a("#pagination_top button").click(function(){l(a(this).val(),a("#perpage_top").val(),a("#search_top").val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}),a("#pagination_bottom button").click(function(){l(a(this).val(),a("#perpage_bottom").val(),a("#search_bottom").val(),a("#map_bottom").val(),a("#orderby").val(),a("#sortorder").val())}),a("#page_top, #perpage_top").change(function(){l(a("#page_top").val(),a("#perpage_top").val(),a("#search_top").val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}),a("#page_bottom, #perpage_bottom").change(function(){l(a("#page_bottom").val(),a("#perpage_bottom").val(),a("#search_bottom").val(),a("#map_bottom").val(),a("#orderby").val(),a("#sortorder").val())}),a("#search_top").change(function(){l(1,a("#perpage_top").val(),a(this).val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}),a("#search_bottom").change(function(){l(1,a("#perpage_bottom").val(),a(this).val(),a("#map_bottom").val(),a("#orderby").val(),a("#sortorder").val())}),a("#map_top").select2({width:"200px"}).on("select2:select",function(){a("#map_bottom").select2("val",a("#map_top").val()),l(a("#page_top").val(),a("#perpage_top").val(),a("#search_top").val(),a(this).val(),a("#orderby").val(),a("#sortorder").val())}),a("#map_bottom").select2({width:"200px"}).on("select2:select",function(){a("#map_top").select2("val",a("#map_bottom").val()),l(a("#page_bottom").val(),a("#perpage_bottom").val(),a("#search_bottom").val(),a(this).val(),a("#orderby").val(),a("#sortorder").val())}),a("#markerList").submit(function(t){var e;switch(t.preventDefault(),t.stopPropagation(),a("input[name=bulkAction]:checked").val()){case"duplicate":e=mmpAdminL10n.markers.bulkDuplicate;break;case"delete":e=mmpAdminL10n.markers.bulkDelete;break;case"assign":e=mmpAdminL10n.markers.bulkAssign.replace("{map}",a("#assignTarget").val());break;default:return}confirm(e)&&a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_markers",nonce:a("#bulkNonce").val(),data:a("#markerList").serialize()},beforeSend:function(){s(!0),a("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){l(a("#page_top").val(),a("#perpage_top").val(),a("#search_top").val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}).always(function(){s(!1),a("#bulkActionSubmit").prop("disabled",!1)})}),a("#mmp-markers-screen-options-apply").click(function(){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_markers_screen_options",nonce:a("#screenoptionnonce").val(),hiddenColumns:a(".mmp-markers-column").not(":checked").map(function(){return this.value}).get(),perPage:a("#mmp-markers-per-page").val()},beforeSend:function(){s(!0)}}).done(function(t){a("#show-settings-link").click(),l(a("#page_top").val(),a("#perpage_top").val(),a("#search_top").val(),a("#map_top").val(),a("#orderby").val(),a("#sortorder").val())}).always(function(){s(!1)})}),l()})}function p(){jQuery(document).ready(function(a){var t=document.location.toString().split("#")[1],n=a("#settings").serialize(),r={},e=[];function i(t){a(".mmp-settings-tab").hide(),a(".mmp-tablink").removeClass("active"),a("#"+t+"_link").addClass("active"),a("#"+t+"_tab").show(),window.location.hash=t}function o(t){a(t).prop("disabled",!0),a(t).addClass("mmp-button-loading")}function s(t){a(t).removeClass("mmp-button-loading"),a(t).prop("disabled",!1)}function l(){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_get_custom_layers",nonce:a("input[name=nonce]").val()}}).done(function(t){e=t;var r=a("<ul></ul>"),o=a("<ul></ul>");a.each(e,function(t,e){var i=a("<li></li>"),n=a('<img src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');n.css("margin","0 10px 0 0"),n.css("verticalAlign","middle"),n.css("cursor","pointer"),n.click(function(){var t;t=e.id,a("#customLayerId").val(t),c()}),i.append(n),i.append("[ID "+e.id+"] "+e.name),"1"==e.overlay?o.append(i):r.append(i)}),a("#custom-basemaps").html(r),a("#custom-overlays").html(o)})}function c(){var i=a("#customLayerId").val(),n={},r={};"0"!=i&&(a.each(e,function(t,e){if(e.id==i)return n=e,r=JSON.parse(e.options),!1}),"1"==n.overlay?a("#customLayerTypeOverlay").prop("checked",!0):a("#customLayerTypeBasemap").prop("checked",!0),a("#customLayerWms").prop("checked","1"==n.wms),a("#customLayerTms").prop("checked",r.tms),a("#customLayerRasterTiles").prop("checked",r.rasterTiles),a("#customLayerNoWrap").prop("checked",r.noWrap),a("#customLayerErrorTiles").prop("checked",r.errorTiles),a("#customLayerName").val(n.name),a("#customLayerUrl").val(n.url),a("#customLayerSubdomains").val(r.subdomains),a("#customLayerBounds").val(r.bounds),a("#customLayerMinZoom").val(r.minNativeZoom),a("#customLayerMaxZoom").val(r.maxNativeZoom),a("#customLayerOpacity").val(r.opacity),a("#customLayerAttribution").val(r.attribution),"1"==n.wms&&(a("#custom-layer-wms").show(),a("#customLayerTransparent").prop("checked",r.transparent),a("#customLayerUppercase").prop("checked",r.uppercase),a("#customLayerLayers").val(r.layers),a("#customLayerStyles").val(r.styles),a("#customLayerFormat").val(r.format),a("#customLayerVersion").val(r.version))),a("#mmp-custom-layer-modal").show()}a(".mmp-tablink").click(function(){i(a(this).attr("id").replace("_link",""))}),a(".mmp-settings-nav ul li").each(function(){var t=a(this).closest(".mmp-settings-nav-group").find("span").html(),e=a(this).attr("id").replace("_link",""),i=a(this).html(),n=i;a("#"+e+"_tab").find("h3, p, .mmp-settings-desc, .mmp-settings-footnote").each(function(){n=n+" "+a(this).html()}),n=n.replace(/"/g,""),void 0===r[t]&&(r[t]=[]),r[t].push({value:e,search:n,title:i})}),a("#mmp-custom-layer-add").click(function(){a("#customLayerId").val("0"),c()}),a("#customLayerWms").change(function(){a(this).prop("checked")?a("#custom-layer-wms").show():a("#custom-layer-wms").hide()}),a("#settings").submit(function(t){t.preventDefault(),t.stopPropagation();var i=a("#settings").serialize();a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_settings",settings:i},beforeSend:function(){o(a("#save"))}}).done(function(t){n=i;var e=t.success?"notice-success":"notice-error";a('<div class="notice '+e+'"><p>'+t.response+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){a(this).remove()})}).fail(function(){a('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){a(this).remove()})}).always(function(){s(a("#save"))})});var u=a("<select></select>").attr("id","mmp-select-search-tabs").css("width","300px").append("<option></option>");a.each(r,function(t,e){var n=a("<optgroup></optgroup>");n.attr("label",t),a.each(e,function(t,e){var i=a("<option></option>").attr("value",e.value).attr("data-search",e.search).html(e.title);n.append(i)}),u.append(n)}),u.appendTo("#top"),u.select2({placeholder:mmpAdminL10n.settings.search,allowClear:!0,matcher:function(i,t){if(""===a.trim(i.term))return t;if(void 0===t.text||void 0===t.children)return null;var n=[];if(a.each(t.children,function(t,e){-1===e.text.toUpperCase().indexOf(i.term.toUpperCase())&&-1===a(e.element).data("search").toUpperCase().indexOf(i.term.toUpperCase())||n.push(e)}),n.length){var e=a.extend({},t,!0);return e.children=n,e}return null}}).change(function(){i(a(this).val())}),a(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&(a("#mmp-custom-layer-modal").hide(),a("#mmp-custom-layer-form").trigger("reset"),a("#custom-layer-wms").hide())}),a("#mmp-custom-layer-delete").click(function(){a("#mmp-custom-layer-modal").hide(),a("#mmp-custom-layer-form").trigger("reset"),a("#custom-layer-wms").hide(),function(t){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_custom_layer",nonce:a("input[name=nonce]").val(),id:t}}).done(function(t){l()})}(a("#customLayerId").val())}),a("#mmp-custom-layer-save").click(function(){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_custom_layer",nonce:a("input[name=nonce]").val(),settings:a("#mmp-custom-layer-form").serialize()},beforeSend:function(){o(a("#mmp-custom-layer-save"))}}).done(function(t){a("#mmp-custom-layer-modal").hide(),a("#mmp-custom-layer-form").trigger("reset"),a("#custom-layer-wms").hide(),l()}).always(function(){s(a("#mmp-custom-layer-save"))})}),a("#icons_list").select2({width:"300px",placeholder:mmpAdminL10n.settings.selectIcons,templateResult:function(t){return t.id?a('<span><img src="'+mmpVars.iconsUrl+t.element.value+'" class="icons-list-item" /> '+t.text+"</span>"):t.text}}),a("#delete_icons").click(function(){confirm(mmpAdminL10n.settings.confirmDelete)&&a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_icons",nonce:a("input[name=nonce]").val(),icons:a("#icons_list").val()}}).done(function(){a("#icons_list option:selected").remove()})}),i(void 0!==t?t:a(".mmp-tablink").first().attr("id").replace("_link","")),l(),window.onbeforeunload=function(){return n!==a("#settings").serialize()?"":null},a("#save").prop("disabled",!1)})}function d(){jQuery(document).ready(function(p){var t=document.location.toString().split("#")[1],r=0;function i(t){p(".mmp-tools-tab").hide(),p(".mmp-tablink").removeClass("active"),p("#"+t+"_tab").addClass("active"),p("#"+t+"_tab_content").show(),window.location.hash=t}function n(t){p(t).prop("disabled",!0),p(t).addClass("mmp-button-loading")}function o(t){p(t).removeClass("mmp-button-loading"),p(t).prop("disabled",!1)}function a(t){p("#backup_log").append('<span class="mmp-error">error ('+t.status+" - "+t.statusText+")</span>")}function e(t,e,i){var n=t?"notice-success":"notice-error";i.after('<div class="notice '+n+'"><p>'+e+"</p></div>")}function c(){var e=[];p(".mmp-basemap").each(function(){e.push(p(this).data("id").toString())}),p("#basemapsList option").each(function(){var t=-1!==p.inArray(p(this).val().toString(),e);p(this).prop("disabled",t)}),p("#basemapsList option").each(function(){if(!p(this).prop("disabled"))return p(this).prop("selected",!0),!1}),p("#basemapsList option:enabled").length?p("#basemapsAdd").prop("disabled",!1):p("#basemapsAdd").prop("disabled",!0),p("input[name=basemapDefault]:checked").length||p("input[name=basemapDefault]").first().prop("checked",!0)}function u(){var e=[];p(".mmp-overlay").each(function(){e.push(p(this).data("id").toString())}),p("#overlaysList option").each(function(){var t=-1!==p.inArray(p(this).val().toString(),e);p(this).prop("disabled",t)}),p("#overlaysList option").each(function(){if(!p(this).prop("disabled"))return p(this).prop("selected",!0),!1}),p("#overlaysList option:enabled").length?p("#overlaysAdd").prop("disabled",!1):p("#overlaysAdd").prop("disabled",!0)}function s(t){for(var e=0;e<t.log.length;e++)p("#backup_log").append(t.log[e]+"<br />");t.offset+1e3<t.total[t.table]?(r+=1e3,t.offset+=1e3):(r+=t.total[t.table]-t.offset,t.table++,t.offset=0);for(var i=0,e=0;e<t.total.length;e++)i+=t.total[e];var n=(r/i*100).toFixed(0);return p("#backup_progress").css("width",n+"%"),t}function l(t){var i=p("#move_markers_source"),n=i.val(),r=p("#move_markers_target"),o=r.val(),a=p("#remove_markers_map"),s=a.val(),l=p("#assign_markers_map"),c=l.val(),u=p("#assign_map"),h=u.val();i.empty(),r.empty(),a.empty(),l.empty(),u.empty(),p.each(t,function(t,e){i.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==n)),r.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==o)),a.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==s)),l.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==c)),u.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==h))})}p(".mmp-tablink").click(function(){i(p(this).attr("id").replace("_tab",""))}),p(".mmp-batch-settings-tablink").click(function(){var t=p(this).data("target");p(".mmp-map-batch-settings-group").hide(),p(".mmp-batch-settings-tablink").removeClass("active"),p(this).addClass("active"),p("#"+t+"Content").show()}),p(".batch-settings-check").change(function(){p(this).prop("checked")?p(this).closest(".mmp-map-batch-setting").addClass("mmp-changed"):p(this).closest(".mmp-map-batch-setting").removeClass("mmp-changed"),p(".mmp-batch-settings-tablink").each(function(){var t=p(this).data("target");p(".batch-settings-check:checked",p("#"+t+"Content")).length?p(this).addClass("mmp-changed"):p(this).removeClass("mmp-changed")})}),p(".mmp-gpx-start-icon").click(function(){p("#gpxIconTarget").val("gpx-start"),p("#iconsGpx").show()}),p(".mmp-gpx-end-icon").click(function(){p("#gpxIconTarget").val("gpx-end"),p("#iconsGpx").show()}),p("#iconsListGpx img").click(function(){var t=p("#gpxIconTarget").val(),e=p(this).attr("src"),i=p(this).data("icon");"gpx-start"===t?(p("#gpxStartIcon").val(i),p(".mmp-gpx-start-icon").attr("src",e)):"gpx-end"===t&&(p("#gpxEndIcon").val(i),p(".mmp-gpx-end-icon").attr("src",e)),p("#iconsGpx").hide()}),p("#batch_settings_maps").select2({width:"400px"}),p("#save_batch_settings").click(function(){confirm(mmpAdminL10n.tools.batchSettings)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_settings",nonce:p(this).data("nonce"),settings:p("#mapSettings").serialize()},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#batch_settings_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#batch_settings_section"))}).always(function(){o(p(this))})}),p("#basemapList").sortable({handle:".mmp-handle"}),p("#basemapsAdd").click(function(){!function(t,e){var i=p('<li class="mmp-basemap" data-id="'+t+'"></li>'),n=p("<div></div>");i.append(n);var r=p('<input type="hidden" name="basemaps[]" value="'+t+'" />');n.append(r);var o=p('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');n.append(o);var a=p('<input type="radio" name="basemapDefault" value="'+t+'" />');n.append(" ").append(a);var s=p('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />');n.append(" ").append(s);var l=p('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');l.click(function(){p(this).parent().parent().remove(),c()}),n.append(" ").append(l),p("#basemapList").append(i)}(p("#basemapsList").val(),p("#basemapsList option:checked").text()),c()}),p(".mmp-remove-basemap").click(function(){p(this).parent().parent().remove(),c()}),c(),p("#overlayList").sortable({handle:".mmp-handle"}),p("#overlaysAdd").click(function(){!function(t,e){var i=p('<li class="mmp-overlay" data-id="'+t+'"></li>'),n=p("<div></div>");i.append(n);var r=p('<input type="hidden" name="overlays[]" value="'+t+'" />');n.append(r);var o=p('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');n.append(o);var a=p('<input type="checkbox" name="overlaysActive[]" value="'+t+'" />');n.append(" ").append(a);var s=p('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />');n.append(" ").append(s);var l=p('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');l.click(function(){p(this).parent().parent().remove(),u()}),n.append(" ").append(l),p("#overlayList").append(i)}(p("#overlaysList").val(),p("#overlaysList option:checked").text()),u()}),p(".mmp-remove-overlay").click(function(){p(this).parent().parent().remove(),u()}),u(),p("#batch_layers_maps").select2({width:"400px"}),p("#save_batch_layers").click(function(){confirm(mmpAdminL10n.tools.batchLayers)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_layers",nonce:p(this).data("nonce"),settings:p("#mapLayers").serialize()},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#batch_layers_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#batch_layers_section"))}).always(function(){o(p(this))})}),p("#markerIconSelection").click(function(){p("#markerIcons").show()}),p("#markerIconsList img").click(function(){var t=p(this).attr("src");p("#markerIconSelection").attr("src",t),p("#markerIcon").val(t),p("#markerIcons").hide()}),p("#batch_marker_markers").select2({width:"400px"}),p("#batch_marker_maps").select2({width:"400px"}),p("#save_batch_marker").click(function(){confirm(mmpAdminL10n.tools.batchMarker)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_marker",nonce:p(this).data("nonce"),settings:p("#markerSettings").serialize()},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#batch_marker_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#batch_marker_section"))}).always(function(){o(p(this))})}),p("#sourceIcon").click(function(){p("#replaceIcon").val("0"),p("#icons").show()}),p("#targetIcon").click(function(){p("#replaceIcon").val("1"),p("#icons").show()}),p("#iconsList img").click(function(){var t="0"==p("#replaceIcon").val()?"#sourceIcon":"#targetIcon",e=p(this).attr("src");p(t).attr("src",e),p("#icons").hide()}),p("#replace_icon").click(function(){confirm(mmpAdminL10n.tools.replaceIcon)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_replace_icon",nonce:p(this).data("nonce"),source:p("#sourceIcon").attr("src"),target:p("#targetIcon").attr("src")},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#replace_icon_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#replace_icon_section"))}).always(function(){o(p(this))})}),p("#backup_file").change(function(){var t,e;r=0,p("#backup_log").empty(),p("#backup_progress").css("width","0"),this.files.length?(t=(this.files[0].size/1024/1024).toFixed(2)+" MiB",e=p("#backup_max_size").val()/1024/1024+" MiB",p("#backup_log").append(mmpAdminL10n.tools.maxFileSize.replace("{maxFileSize}",e)+"<br />"),e<=0||this.files[0].size<=p("#backup_max_size").val()?(p("#backup_log").append('<span style="color:green;">'+mmpAdminL10n.tools.chosenFileSizeGood.replace("{chosenFileSize}",t)+"</span><br />"),p("#backup_start").prop("disabled",!0),p("#restore_start").prop("disabled",!1)):p("#backup_log").append('<span style="color:red;">'+mmpAdminL10n.tools.chosenFileSizeBad.replace("{chosenFileSize}",t)+"</span><br />")):(p("#restore_start").prop("disabled",!0),p("#backup_start").prop("disabled",!1))}),p("#backup_start").click(function(){r=0,p("#backup_start").prop("disabled",!0),p("#restore_start").prop("disabled",!0),p("#backup_start").addClass("mmp-button-loading"),function e(t,i,n,r){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_backup",nonce:p("#backup_start").data("nonce"),table:t,offset:i,total:JSON.stringify(n),filename:r||0}}).done(function(t){3<(t=s(t)).table?(p("#backup_log").append(t.message),p("#backup_start").removeClass("mmp-button-loading"),window.location=t.url):e(t.table,t.offset,t.total,t.filename)}).fail(function(t){a(t)})}(0,0,[],!1)}),p("#restore_start").click(function(){r=0,p("#restore_start").prop("disabled",!0),p("#backup_start").prop("disabled",!0),p("#restore_start").addClass("mmp-button-loading"),function e(t,i,n){var r=new FormData;if(r.append("action","mmp_restore"),r.append("nonce",p("#restore_start").data("nonce")),r.append("table",t),r.append("offset",i),r.append("total",n),!n.length){var o=p("#backup_file").prop("files")[0];if(void 0===o)return void p("#restore_start").removeClass("mmp-button-loading");r.append("upload",o)}p.ajax({type:"POST",url:ajaxurl,context:this,data:r,processData:!1,contentType:!1}).done(function(t){3<(t=s(t)).table?(l(t.maps),p("#backup_log").append(t.message),p("#restore_start").removeClass("mmp-button-loading")):e(t.table,t.offset,t.total)}).fail(function(t){a(t)})}(0,0,[])}),p("#settings").click(function(){p(this).select()}),p("#update_settings").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_settings",nonce:p(this).data("nonce"),settings:p("#settings").val()},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#update_settings_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#update_settings_section"))}).always(function(){o(p(this))})}),p("#move_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_move_markers",nonce:p(this).data("nonce"),source:p("#move_markers_source").val(),target:p("#move_markers_target").val()},beforeSend:function(){n(p(this))}}).done(function(t){t.success&&l(t.maps),e(t.success,t.message,p("#move_markers_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#move_markers_section"))}).always(function(){o(p(this))})}),p("#remove_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_remove_markers",nonce:p(this).data("nonce"),map:p("#remove_markers_map").val()},beforeSend:function(){n(p(this))}}).done(function(t){t.success&&l(t.maps),e(t.success,t.message,p("#remove_markers_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#remove_markers_section"))}).always(function(){o(p(this))})}),p("#delete_all_maps_confirm").change(function(){p(this).prop("checked")?p("#delete_all_maps").prop("disabled",!1):p("#delete_all_maps").prop("disabled",!0)}),p("#delete_all_maps").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_maps",nonce:p(this).data("nonce"),confirm:p("#delete_all_maps_confirm").prop("checked"),truncate:p("#delete_all_maps_reset_ids").prop("checked")},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#delete_all_maps_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#delete_all_maps_section"))}).always(function(){o(p(this))})}),p("#delete_all_markers_confirm").change(function(){p(this).prop("checked")?p("#delete_all_markers").prop("disabled",!1):p("#delete_all_markers").prop("disabled",!0)}),p("#delete_all_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_markers",nonce:p(this).data("nonce"),confirm:p("#delete_all_markers_confirm").prop("checked"),truncate:p("#delete_all_markers_reset_ids").prop("checked")},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#delete_all_markers_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#delete_all_markers_section"))}).always(function(){o(p(this))})}),p("#assign_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_assign_markers",nonce:p(this).data("nonce"),map:p("#assign_markers_map").val()},beforeSend:function(){n(p(this))}}).done(function(t){t.success&&l(t.maps),e(t.success,t.message,p("#assign_markers_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#assign_markers_section"))}).always(function(){o(p(this))})}),p("#register_strings").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_strings",nonce:p(this).data("nonce")},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#register_strings_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#register_strings_section"))}).always(function(){o(p(this))})}),p("input[name=test_mode]").change(function(){"on"===p(this).val()?(p("#test_mode_wrap").attr("class","mmp-test-mode-on"),p("#test_mode_status").html(mmpAdminL10n.tools.testModeOn)):(p("#test_mode_wrap").attr("class","mmp-test-mode-off"),p("#test_mode_status").html(mmpAdminL10n.tools.testModeOff))}),p("#import_file").change(function(){var t;p("#import_start").prop("disabled",!0),this.files.length?((this.files[0].size/1024/1024).toFixed(2),(t=p("#import_max_size").val())<=0||this.files[0].size<=t?(p("#import_filesize_error").hide(),p("#import_start").prop("disabled",!1)):p("#import_filesize_error").show()):p("#import_filesize_error").hide()}),p("#import_form").submit(function(t){t.preventDefault(),t.stopPropagation();var e=new FormData(this);p.ajax({type:"POST",url:ajaxurl,context:this,data:e,processData:!1,contentType:!1,beforeSend:function(){n(p("#import_start")),p("#import_log").empty()}}).done(function(t){t.success?(p("#import_log").append(t.summary+"<br />"),p.each(t.details,function(t,e){p("#import_log").append("["+(t+1)+"] "+e.message+"<br />")}),l(t.maps)):p("#import_log").append(t.message)}).fail(function(){p("#import_log").append("Failed to send request")}).always(function(){o(p("#import_start"))})}),p("#export_include, #export_exclude").select2({width:"220px"}),p("#export_form").submit(function(t){t.preventDefault(),t.stopPropagation(),p.ajax({type:"POST",url:ajaxurl,context:this,data:p(this).serialize(),beforeSend:function(){n(p("#export_start")),p("#export_log").empty()}}).done(function(t){t.success?(p("#export_log").append(t.response.message),window.location.href=t.response.url):p("#export_log").append(t.response)}).fail(function(){p("#export_log").append(mmpAdminL10n.global.ajaxError)}).always(function(){o(p("#export_start"))})}),p("#start_health_check").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_health_check",nonce:p(this).data("nonce")},beforeSend:function(){n(p(this))}}).done(function(t){t.success?p("#health_check_result").html(t.response):e(!1,t.message,p("#health_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#health_section"))}).always(function(){o(p(this))})}),p("#reset_database_confirm").change(function(){p(this).prop("checked")?p("#reset_database").prop("disabled",!1):p("#reset_database").prop("disabled",!0)}),p("#reset_database").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_database",nonce:p(this).data("nonce"),confirm:p("#reset_database_confirm").prop("checked")},beforeSend:function(){n(p(this))}}).done(function(t){t.success&&l(t.maps),e(t.success,t.message,p("#reset_database_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#reset_database_section"))}).always(function(){o(p(this))})}),p("#reset_settings_confirm").change(function(){p(this).prop("checked")?p("#reset_settings").prop("disabled",!1):p("#reset_settings").prop("disabled",!0)}),p("#reset_settings").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_settings",nonce:p(this).data("nonce"),confirm:p("#reset_settings_confirm").prop("checked"),reset:{plugin:p("#reset_plugin_settings").prop("checked"),map:p("#reset_map_settings").prop("checked"),marker:p("#reset_marker_settings").prop("checked")}},beforeSend:function(){n(p(this))}}).done(function(t){e(t.success,t.message,p("#reset_settings_section"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#reset_settings_section"))}).always(function(){o(p(this))})}),p("#data_migration_check").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_check_migration",nonce:p(this).data("nonce")},beforeSend:function(){p(this).prop("disabled",!0),p(this).addClass("mmp-button-loading")}}).done(function(t){p("#migration_log").html(t.log),p(".mmp-migration-shortcode").click(function(){p(this).select()}),p("#data_migration_start").prop("disabled",!1)}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#data_migration"))}).always(function(){p(this).removeClass("mmp-button-loading")})}),p("#data_migration_start").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_data_migration",nonce:p(this).data("nonce")},beforeSend:function(){p(this).prop("disabled",!0),p(this).addClass("mmp-button-loading")}}).done(function(t){e(t.success,t.message,p("#data_migration"))}).fail(function(){e(!1,mmpAdminL10n.global.ajaxError,p("#data_migration"))}).always(function(){p(this).removeClass("mmp-button-loading")})}),p(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&(p("#icons").hide(),p("#iconsGpx").hide())}),p(window).on("hashchange",function(t){var e=document.location.toString().split("#")[1];void 0!==e&&i(e)}),i(void 0!==t?t:p(".mmp-tablink").first().attr("id").replace("_tab","")),p(".mmp-batch-settings-tablink").first().trigger("click")})}function f(){jQuery(document).ready(function(i){function t(t){i(".mmp-license-error").remove(),i(".mmp-license-section button").prop("disabled",!0),i(t).addClass("mmp-button-loading")}function e(t){i(t).removeClass("mmp-button-loading"),i(".mmp-license-section button").prop("disabled",!1)}function n(t,e){i(t).closest(".mmp-license-section").after('<div class="notice notice-error mmp-license-error"><p>'+e+"</p></div>")}i("#update_license").click(function(){i.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_license",nonce:i(this).data("nonce"),key:i("#license_key").val(),multisite:i("#distribute_multisite").prop("checked")?1:0},beforeSend:function(){t(this)}}).done(function(t){t.success?location.reload():n(this,t.response)}).fail(function(){n(this,mmpAdminL10n.global.ajaxError)}).always(function(){e(this)})}),i("#personal_trial_submit").click(function(){i.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_personal_trial",nonce:i(this).data("nonce"),first_name:i("#personal_trial_first_name").val(),last_name:i("#personal_trial_last_name").val(),email:i("#personal_trial_email").val(),tos:i("#personal_trial_tos").prop("checked")?1:0},beforeSend:function(){t(this)}}).done(function(t){t.success?location.reload():n(this,t.response)}).fail(function(){n(this,mmpAdminL10n.global.ajaxError)}).always(function(){e(this)})}),i("#anonymous_trial_show").click(function(t){t.preventDefault(),t.stopPropagation(),i(this).remove(),i("#anonymous_trial").removeClass("mmp-hidden")}),i("#anonymous_trial_submit").click(function(){i.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_anonymous_trial",nonce:i(this).data("nonce"),tos:i("#anonymous_trial_tos").prop("checked")?1:0},beforeSend:function(){t(this)}}).done(function(t){t.success?location.reload():n(this,t.response)}).fail(function(){n(this,mmpAdminL10n.global.ajaxError)}).always(function(){e(this)})})})}window.mapsMarkerPro={callbacks:[]},window.MapsMarkerPro=n.a,window.editMapActions=o,window.listMapsActions=s,window.editMarkerActions=c,window.listMarkersActions=u,window.settingsActions=p,window.toolsActions=d,window.licenseActions=f}]);