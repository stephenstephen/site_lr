!function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=43)}([function(t,e,i){
/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e="1.7.1";function l(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){o=arguments[i];for(e in o){t[e]=o[e]}}return t}var r=Object.create||function(){function e(){}return function(t){e.prototype=t;return new e}}();function s(t,e){var i=Array.prototype.slice;if(t.bind){return t.bind.apply(t,i.call(arguments,1))}var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var i=0;function h(t){t._leaflet_id=t._leaflet_id||++i;return t._leaflet_id}function n(t,e,i){var n,o,r,a;a=function(){n=false;if(o){r.apply(i,o);o=false}};r=function(){if(n){o=arguments}else{t.apply(i,arguments);setTimeout(a,e);n=true}};return r}function o(t,e,i){var n=e[1],o=e[0],r=n-o;return t===n&&i?t:((t-o)%r+r)%r+o}function u(){return false}function a(t,e){var i=Math.pow(10,e===undefined?6:e);return Math.round(t*i)/i}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return c(t).split(/\s+/)}function p(t,e){if(!Object.prototype.hasOwnProperty.call(t,"options")){t.options=t.options?r(t.options):{}}for(var i in e){t.options[i]=e[i]}return t.options}function f(t,e,i){var n=[];for(var o in t){n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]))}return(!e||e.indexOf("?")===-1?"?":"&")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,n){return t.replace(m,function(t,e){var i=n[e];if(i===undefined){throw new Error("No value provided for variable "+t)}else if(typeof i==="function"){i=i(n)}return i})}var v=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function _(t,e){for(var i=0;i<t.length;i++){if(t[i]===e){return i}}return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,i=Math.max(0,16-(e-b));b=e+i;return window.setTimeout(t,i)}var k=window.requestAnimationFrame||x("RequestAnimationFrame")||w,M=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,i){if(i&&k===w){t.call(e)}else{return k.call(window,s(t,e))}}function T(t){if(t){M.call(window,t)}}var P={extend:l,create:r,bind:s,lastId:i,stamp:h,throttle:n,wrapNum:o,falseFn:u,formatNum:a,trim:c,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:k,cancelFn:M,requestAnimFrame:C,cancelAnimFrame:T};function S(){}function A(t){if(typeof L==="undefined"||!L||!L.Mixin){return}t=v(t)?t:[t];for(var e=0;e<t.length;e++){if(t[e]===L.Mixin.Events){console.warn("Deprecated include of L.Mixin.Events: "+"this property will be removed in future releases, "+"please inherit from L.Evented instead.",(new Error).stack)}}}S.extend=function(t){var e=function(){if(this.initialize){this.initialize.apply(this,arguments)}this.callInitHooks()};var i=e.__super__=this.prototype;var n=r(i);n.constructor=e;e.prototype=n;for(var o in this){if(Object.prototype.hasOwnProperty.call(this,o)&&o!=="prototype"&&o!=="__super__"){e[o]=this[o]}}if(t.statics){l(e,t.statics);delete t.statics}if(t.includes){A(t.includes);l.apply(null,[n].concat(t.includes));delete t.includes}if(n.options){t.options=l(r(n.options),t.options)}l(n,t);n._initHooks=[];n.callInitHooks=function(){if(this._initHooksCalled){return}if(i.callInitHooks){i.callInitHooks.call(this)}this._initHooksCalled=true;for(var t=0,e=n._initHooks.length;t<e;t++){n._initHooks[t].call(this)}};return e},S.include=function(t){l(this.prototype,t);return this},S.mergeOptions=function(t){l(this.prototype.options,t);return this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1);var i=typeof t==="function"?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i);return this};var I={on:function(t,e,i){if(typeof t==="object"){for(var n in t){this._on(n,t[n],e)}}else{t=d(t);for(var o=0,r=t.length;o<r;o++){this._on(t[o],e,i)}}return this},off:function(t,e,i){if(!t){delete this._events}else if(typeof t==="object"){for(var n in t){this._off(n,t[n],e)}}else{t=d(t);for(var o=0,r=t.length;o<r;o++){this._off(t[o],e,i)}}return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];if(!n){n=[];this._events[t]=n}if(i===this){i=undefined}var o={fn:e,ctx:i},r=n;for(var a=0,s=r.length;a<s;a++){if(r[a].fn===e&&r[a].ctx===i){return}}r.push(o)},_off:function(t,e,i){var n,o,r;if(!this._events){return}n=this._events[t];if(!n){return}if(!e){for(o=0,r=n.length;o<r;o++){n[o].fn=u}delete this._events[t];return}if(i===this){i=undefined}if(n){for(o=0,r=n.length;o<r;o++){var a=n[o];if(a.ctx!==i){continue}if(a.fn===e){a.fn=u;if(this._firingCount){this._events[t]=n=n.slice()}n.splice(o,1);return}}}},fire:function(t,e,i){if(!this.listens(t,i)){return this}var n=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var s=o[r];s.fn.call(s.ctx||this,n)}this._firingCount--}}if(i){this._propagateEvent(n)}return this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length){return true}if(e){for(var n in this._eventParents){if(this._eventParents[n].listens(t,e)){return true}}}return false},once:function(t,e,i){if(typeof t==="object"){for(var n in t){this.once(n,t[n],e)}return this}var o=s(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){this._eventParents=this._eventParents||{};this._eventParents[h(t)]=t;return this},removeEventParent:function(t){if(this._eventParents){delete this._eventParents[h(t)]}return this},_propagateEvent:function(t){for(var e in this._eventParents){this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),true)}}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var D=S.extend(I);function O(t,e,i){this.x=i?Math.round(t):t;this.y=i?Math.round(e):e}var z=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function E(t,e,i){if(t instanceof O){return t}if(v(t)){return new O(t[0],t[1])}if(t===undefined||t===null){return t}if(typeof t==="object"&&"x"in t&&"y"in t){return new O(t.x,t.y)}return new O(t,e,i)}function B(t,e){if(!t){return}var i=e?[t,e]:t;for(var n=0,o=i.length;n<o;n++){this.extend(i[n])}}function F(t,e){if(!t||t instanceof B){return t}return new B(t,e)}function R(t,e){if(!t){return}var i=e?[t,e]:t;for(var n=0,o=i.length;n<o;n++){this.extend(i[n])}}function N(t,e){if(t instanceof R){return t}return new R(t,e)}function U(t,e,i){if(isNaN(t)||isNaN(e)){throw new Error("Invalid LatLng object: ("+t+", "+e+")")}this.lat=+t;this.lng=+e;if(i!==undefined){this.alt=+i}}function Z(t,e,i){if(t instanceof U){return t}if(v(t)&&typeof t[0]!=="object"){if(t.length===3){return new U(t[0],t[1],t[2])}if(t.length===2){return new U(t[0],t[1])}return null}if(t===undefined||t===null){return t}if(typeof t==="object"&&"lat"in t){return new U(t.lat,"lng"in t?t.lng:t.lon,t.alt)}if(e===undefined){return null}return new U(t,e,i)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(E(t))},_add:function(t){this.x+=t.x;this.y+=t.y;return this},subtract:function(t){return this.clone()._subtract(E(t))},_subtract:function(t){this.x-=t.x;this.y-=t.y;return this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){this.x/=t;this.y/=t;return this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){this.x*=t;this.y*=t;return this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},trunc:function(){return this.clone()._trunc()},_trunc:function(){this.x=z(this.x);this.y=z(this.y);return this},distanceTo:function(t){t=E(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){t=E(t);return t.x===this.x&&t.y===this.y},contains:function(t){t=E(t);return Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},B.prototype={extend:function(t){t=E(t);if(!this.min&&!this.max){this.min=t.clone();this.max=t.clone()}else{this.min.x=Math.min(t.x,this.min.x);this.max.x=Math.max(t.x,this.max.x);this.min.y=Math.min(t.y,this.min.y);this.max.y=Math.max(t.y,this.max.y)}return this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;if(typeof t[0]==="number"||t instanceof O){t=E(t)}else{t=F(t)}if(t instanceof B){e=t.min;i=t.max}else{e=i=t}return e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,a=o.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>e.x&&n.x<i.x,a=o.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!!(this.min&&this.max)}},R.prototype={extend:function(t){var e=this._southWest,i=this._northEast,n,o;if(t instanceof U){n=t;o=t}else if(t instanceof R){n=t._southWest;o=t._northEast;if(!n||!o){return this}}else{return t?this.extend(Z(t)||N(t)):this}if(!e&&!i){this._southWest=new U(n.lat,n.lng);this._northEast=new U(o.lat,o.lng)}else{e.lat=Math.min(n.lat,e.lat);e.lng=Math.min(n.lng,e.lng);i.lat=Math.max(o.lat,i.lat);i.lng=Math.max(o.lng,i.lng)}return this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new R(new U(e.lat-n,e.lng-o),new U(i.lat+n,i.lng+o))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){if(typeof t[0]==="number"||t instanceof U||"lat"in t){t=Z(t)}else{t=N(t)}var e=this._southWest,i=this._northEast,n,o;if(t instanceof R){n=t.getSouthWest();o=t.getNorthEast()}else{n=o=t}return n.lat>=e.lat&&o.lat<=i.lat&&n.lng>=e.lng&&o.lng<=i.lng},intersects:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,a=o.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&n.lat<i.lat,a=o.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){if(!t){return false}t=N(t);return this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)},isValid:function(){return!!(this._southWest&&this._northEast)}},U.prototype={equals:function(t,e){if(!t){return false}t=Z(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===undefined?1e-9:e)},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return j.distance(this,Z(t))},wrap:function(){return j.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return N([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var W={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite){return null}var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),o=this.transformation.transform(e.max,i);return new B(n,o)},infinite:false,wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,true):t.lng,i=this.wrapLat?o(t.lat,this.wrapLat,true):t.lat,n=t.alt;return new U(i,e,n)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(n===0&&o===0){return t}var r=t.getSouthWest(),a=t.getNorthEast(),s=new U(r.lat-n,r.lng-o),l=new U(a.lat-n,a.lng-o);return new R(s,l)}},j=l({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=r*r+Math.cos(n)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H=6378137,G={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new O(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new U((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=H*Math.PI;return new B([-t,-t],[t,t])}()};function V(t,e,i,n){if(v(t)){this._a=t[0];this._b=t[1];this._c=t[2];this._d=t[3];return}this._a=t;this._b=e;this._c=i;this._d=n}function q(t,e,i,n){return new V(t,e,i,n)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){e=e||1;t.x=e*(this._a*t.x+this._b);t.y=e*(this._c*t.y+this._d);return t},untransform:function(t,e){e=e||1;return new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K=l({},j,{code:"EPSG:3857",projection:G,transformation:function(){var t=.5/(Math.PI*G.R);return q(t,.5,-t,.5)}()}),J=l({},K,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var i="",n,o,r,a,s,l;for(n=0,r=t.length;n<r;n++){s=t[n];for(o=0,a=s.length;o<a;o++){l=s[o];i+=(o?"L":"M")+l.x+" "+l.y}i+=e?St?"z":"x":""}return i||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,tt=$&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=It("webkit"),nt=It("android"),ot=It("android 2")||It("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=nt&&It("Google")&&rt<537&&!("AudioNode"in window),st=!!window.opera,lt=!et&&It("chrome"),ht=It("gecko")&&!it&&!st&&!$,ut=!lt&&It("safari"),ct=It("phantom"),dt="OTransition"in Q,pt=navigator.platform.indexOf("Win")===0,ft=$&&"transition"in Q,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,gt="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(ft||mt||gt)&&!dt&&!ct,_t=typeof orientation!=="undefined"||It("mobile"),yt=_t&&it,xt=_t&&mt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!!(window.PointerEvent||bt),Lt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),kt=_t&&st,Mt=_t&&ht,Ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("testPassiveEventSupport",u,e);window.removeEventListener("testPassiveEventSupport",u,e)}catch(t){}return t}(),Pt=function(){return!!document.createElement("canvas").getContext}(),St=!!(document.createElementNS&&Y("svg").createSVGRect),At=!St&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;e.style.behavior="url(#default#VML)";return e&&typeof e.adj==="object"}catch(t){return false}}();function It(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Dt={ie:$,ielt9:tt,edge:et,webkit:it,android:nt,android23:ot,androidStock:at,opera:st,chrome:lt,gecko:ht,safari:ut,phantom:ct,opera12:dt,win:pt,ie3d:ft,webkit3d:mt,gecko3d:gt,any3d:vt,mobile:_t,mobileWebkit:yt,mobileWebkit3d:xt,msPointer:bt,pointer:wt,touch:Lt,mobileOpera:kt,mobileGecko:Mt,retina:Ct,passiveEvents:Tt,canvas:Pt,svg:St,vml:At},Ot=bt?"MSPointerDown":"pointerdown",zt=bt?"MSPointerMove":"pointermove",Et=bt?"MSPointerUp":"pointerup",Bt=bt?"MSPointerCancel":"pointercancel",Ft={},Rt=false;function Nt(t,e,i,n){if(e==="touchstart"){Zt(t,i,n)}else if(e==="touchmove"){Vt(t,i,n)}else if(e==="touchend"){qt(t,i,n)}return this}function Ut(t,e,i){var n=t["_leaflet_"+e+i];if(e==="touchstart"){t.removeEventListener(Ot,n,false)}else if(e==="touchmove"){t.removeEventListener(zt,n,false)}else if(e==="touchend"){t.removeEventListener(Et,n,false);t.removeEventListener(Bt,n,false)}return this}function Zt(t,e,i){var n=s(function(t){if(t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH){je(t)}Gt(t,e)});t["_leaflet_touchstart"+i]=n;t.addEventListener(Ot,n,false);if(!Rt){document.addEventListener(Ot,Wt,true);document.addEventListener(zt,jt,true);document.addEventListener(Et,Ht,true);document.addEventListener(Bt,Ht,true);Rt=true}}function Wt(t){Ft[t.pointerId]=t}function jt(t){if(Ft[t.pointerId]){Ft[t.pointerId]=t}}function Ht(t){delete Ft[t.pointerId]}function Gt(t,e){t.touches=[];for(var i in Ft){t.touches.push(Ft[i])}t.changedTouches=[t];e(t)}function Vt(t,e,i){var n=function(t){if(t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&t.buttons===0){return}Gt(t,e)};t["_leaflet_touchmove"+i]=n;t.addEventListener(zt,n,false)}function qt(t,e,i){var n=function(t){Gt(t,e)};t["_leaflet_touchend"+i]=n;t.addEventListener(Et,n,false);t.addEventListener(Bt,n,false)}var Kt=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Jt=bt?"MSPointerUp":wt?"pointerup":"touchend",Yt="_leaflet_";function Xt(t,o,e){var r,a,s=false,n=250;function i(t){if(wt){if(!t.isPrimary){return}if(t.pointerType==="mouse"){return}}else if(t.touches.length>1){return}var e=Date.now(),i=e-(r||e);a=t.touches?t.touches[0]:t;s=i>0&&i<=n;r=e}function l(t){if(s&&!a.cancelBubble){if(wt){if(t.pointerType==="mouse"){return}var e={},i,n;for(n in a){i=a[n];e[n]=i&&i.bind?i.bind(a):i}a=e}a.type="dblclick";a.button=0;o(a);r=null}}t[Yt+Kt+e]=i;t[Yt+Jt+e]=l;t[Yt+"dblclick"+e]=o;t.addEventListener(Kt,i,Tt?{passive:false}:false);t.addEventListener(Jt,l,Tt?{passive:false}:false);t.addEventListener("dblclick",o,false);return this}function Qt(t,e){var i=t[Yt+Kt+e],n=t[Yt+Jt+e],o=t[Yt+"dblclick"+e];t.removeEventListener(Kt,i,Tt?{passive:false}:false);t.removeEventListener(Jt,n,Tt?{passive:false}:false);t.removeEventListener("dblclick",o,false);return this}var $t=be(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),te=be(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ee=te==="webkitTransition"||te==="OTransition"?te+"End":"transitionend",ie,ne,oe,re,ae;function se(t){return typeof t==="string"?document.getElementById(t):t}function le(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return i==="auto"?null:i}function he(t,e,i){var n=document.createElement(t);n.className=e||"";if(i){i.appendChild(n)}return n}function ue(t){var e=t.parentNode;if(e){e.removeChild(t)}}function ce(t){while(t.firstChild){t.removeChild(t.firstChild)}}function de(t){var e=t.parentNode;if(e&&e.lastChild!==t){e.appendChild(t)}}function pe(t){var e=t.parentNode;if(e&&e.firstChild!==t){e.insertBefore(t,e.firstChild)}}function fe(t,e){if(t.classList!==undefined){return t.classList.contains(e)}var i=_e(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function me(t,e){if(t.classList!==undefined){var i=d(e);for(var n=0,o=i.length;n<o;n++){t.classList.add(i[n])}}else if(!fe(t,e)){var r=_e(t);ve(t,(r?r+" ":"")+e)}}function ge(t,e){if(t.classList!==undefined){t.classList.remove(e)}else{ve(t,c((" "+_e(t)+" ").replace(" "+e+" "," ")))}}function ve(t,e){if(t.className.baseVal===undefined){t.className=e}else{t.className.baseVal=e}}function _e(t){if(t.correspondingElement){t=t.correspondingElement}return t.className.baseVal===undefined?t.className:t.className.baseVal}function ye(t,e){if("opacity"in t.style){t.style.opacity=e}else if("filter"in t.style){xe(t,e)}}function xe(t,e){var i=false,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(e===1){return}}e=Math.round(e*100);if(i){i.Enabled=e!==100;i.Opacity=e}else{t.style.filter+=" progid:"+n+"(opacity="+e+")"}}function be(t){var e=document.documentElement.style;for(var i=0;i<t.length;i++){if(t[i]in e){return t[i]}}return false}function we(t,e,i){var n=e||new O(0,0);t.style[$t]=(ft?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Le(t,e){t._leaflet_pos=e;if(vt){we(t,e)}else{t.style.left=e.x+"px";t.style.top=e.y+"px"}}function ke(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document){ie=function(){Oe(window,"selectstart",je)};ne=function(){Ee(window,"selectstart",je)}}else{var Me=be(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ie=function(){if(Me){var t=document.documentElement.style;oe=t[Me];t[Me]="none"}};ne=function(){if(Me){document.documentElement.style[Me]=oe;oe=undefined}}}function Ce(){Oe(window,"dragstart",je)}function Te(){Ee(window,"dragstart",je)}function Pe(t){while(t.tabIndex===-1){t=t.parentNode}if(!t.style){return}Se();re=t;ae=t.style.outline;t.style.outline="none";Oe(window,"keydown",Se)}function Se(){if(!re){return}re.style.outline=ae;re=undefined;ae=undefined;Ee(window,"keydown",Se)}function Ae(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ie(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var De={TRANSFORM:$t,TRANSITION:te,TRANSITION_END:ee,get:se,getStyle:le,create:he,remove:ue,empty:ce,toFront:de,toBack:pe,hasClass:fe,addClass:me,removeClass:ge,setClass:ve,getClass:_e,setOpacity:ye,testProp:be,setTransform:we,setPosition:Le,getPosition:ke,disableTextSelection:ie,enableTextSelection:ne,disableImageDrag:Ce,enableImageDrag:Te,preventOutline:Pe,restoreOutline:Se,getSizedParentNode:Ae,getScale:Ie};function Oe(t,e,i,n){if(typeof e==="object"){for(var o in e){Re(t,o,e[o],i)}}else{e=d(e);for(var r=0,a=e.length;r<a;r++){Re(t,e[r],i,n)}}return this}var ze="_leaflet_events";function Ee(t,e,i,n){if(typeof e==="object"){for(var o in e){Ne(t,o,e[o],i)}}else if(e){e=d(e);for(var r=0,a=e.length;r<a;r++){Ne(t,e[r],i,n)}}else{for(var s in t[ze]){Ne(t,s,t[ze][s])}delete t[ze]}return this}function Be(){if(wt){return!(et||ut)}}var Fe={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Re(e,t,i,n){var o=t+h(i)+(n?"_"+h(n):"");if(e[ze]&&e[ze][o]){return this}var r=function(t){return i.call(n||e,t||window.event)};var a=r;if(wt&&t.indexOf("touch")===0){Nt(e,t,r,o)}else if(Lt&&t==="dblclick"&&!Be()){Xt(e,r,o)}else if("addEventListener"in e){if(t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"){e.addEventListener(Fe[t]||t,r,Tt?{passive:false}:false)}else if(t==="mouseenter"||t==="mouseleave"){r=function(t){t=t||window.event;if(Xe(e,t)){a(t)}};e.addEventListener(Fe[t],r,false)}else{e.addEventListener(t,a,false)}}else if("attachEvent"in e){e.attachEvent("on"+t,r)}e[ze]=e[ze]||{};e[ze][o]=r}function Ne(t,e,i,n){var o=e+h(i)+(n?"_"+h(n):""),r=t[ze]&&t[ze][o];if(!r){return this}if(wt&&e.indexOf("touch")===0){Ut(t,e,o)}else if(Lt&&e==="dblclick"&&!Be()){Qt(t,o)}else if("removeEventListener"in t){t.removeEventListener(Fe[e]||e,r,false)}else if("detachEvent"in t){t.detachEvent("on"+e,r)}t[ze][o]=null}function Ue(t){if(t.stopPropagation){t.stopPropagation()}else if(t.originalEvent){t.originalEvent._stopped=true}else{t.cancelBubble=true}Ye(t);return this}function Ze(t){Re(t,"wheel",Ue);return this}function We(t){Oe(t,"mousedown touchstart dblclick",Ue);Re(t,"click",Je);return this}function je(t){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}return this}function He(t){je(t);Ue(t);return this}function Ge(t,e){if(!e){return new O(t.clientX,t.clientY)}var i=Ie(e),n=i.boundingClientRect;return new O((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ve=pt&&lt?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function qe(t){return et?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Ve:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}var Ke={};function Je(t){Ke[t.type]=true}function Ye(t){var e=Ke[t.type];Ke[t.type]=false;return e}function Xe(t,e){var i=e.relatedTarget;if(!i){return true}try{while(i&&i!==t){i=i.parentNode}}catch(t){return false}return i!==t}var Qe={on:Oe,off:Ee,stopPropagation:Ue,disableScrollPropagation:Ze,disableClickPropagation:We,preventDefault:je,stop:He,getMousePosition:Ge,getWheelDelta:qe,fakeStop:Je,skipped:Ye,isExternalTarget:Xe,addListener:Oe,removeListener:Ee},$e=D.extend({run:function(t,e,i,n){this.stop();this._el=t;this._inProgress=true;this._duration=i||.25;this._easeOutPower=1/Math.max(n||.5,.2);this._startPos=ke(t);this._offset=e.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step(true);this._complete()},_animate:function(){this._animId=C(this._animate,this);this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;if(e<i){this._runFrame(this._easeOut(e/i),t)}else{this._runFrame(1);this._complete()}},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));if(e){i._round()}Le(this._el,i);this.fire("step")},_complete:function(){T(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ti=D.extend({options:{crs:K,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:true,zoomAnimationThreshold:4,fadeAnimation:true,markerZoomAnimation:true,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:true},initialize:function(t,e){e=p(this,e);this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=true;this._initContainer(t);this._initLayout();this._onResize=s(this._onResize,this);this._initEvents();if(e.maxBounds){this.setMaxBounds(e.maxBounds)}if(e.zoom!==undefined){this._zoom=this._limitZoom(e.zoom)}if(e.center&&e.zoom!==undefined){this.setView(Z(e.center),e.zoom,{reset:true})}this.callInitHooks();this._zoomAnimated=te&&vt&&!kt&&this.options.zoomAnimation;if(this._zoomAnimated){this._createAnimProxy();Oe(this._proxy,ee,this._catchTransitionEnd,this)}this._addLayers(this.options.layers)},setView:function(t,e,i){e=e===undefined?this._zoom:this._limitZoom(e);t=this._limitCenter(Z(t),e,this.options.maxBounds);i=i||{};this._stop();if(this._loaded&&!i.reset&&i!==true){if(i.animate!==undefined){i.zoom=l({animate:i.animate},i.zoom);i.pan=l({animate:i.animate,duration:i.duration},i.pan)}var n=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(n){clearTimeout(this._sizeTimer);return this}}this._resetView(t,e);return this},setZoom:function(t,e){if(!this._loaded){this._zoom=t;return this}return this.setView(this.getCenter(),t,{zoom:e})},zoomIn:function(t,e){t=t||(vt?this.options.zoomDelta:1);return this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){t=t||(vt?this.options.zoomDelta:1);return this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof O?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/n),s=this.containerPointToLatLng(o.add(a));return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{};t=t.getBounds?t.getBounds():N(t);var i=E(e.paddingTopLeft||e.padding||[0,0]),n=E(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,false,i.add(n));o=typeof e.maxZoom==="number"?Math.min(e.maxZoom,o):o;if(o===Infinity){return{center:t.getCenter(),zoom:o}}var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o),l=this.unproject(a.add(s).divideBy(2).add(r),o);return{center:l,zoom:o}},fitBounds:function(t,e){t=N(t);if(!t.isValid()){throw new Error("Bounds are not valid.")}var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){t=E(t).round();e=e||{};if(!t.x&&!t.y){return this.fire("moveend")}if(e.animate!==true&&!this.getSize().contains(t)){this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom());return this}if(!this._panAnim){this._panAnim=new $e;this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(!e.noMoveStart){this.fire("movestart")}if(e.animate!==false){me(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else{this._rawPanBy(t);this.fire("move").fire("moveend")}return this},flyTo:function(i,n,t){t=t||{};if(t.animate===false||!vt){return this.setView(i,n,t)}this._stop();var o=this.project(this.getCenter()),r=this.project(i),e=this.getSize(),a=this._zoom;i=Z(i);n=n===undefined?a:n;var l=Math.max(e.x,e.y),h=l*this.getZoomScale(a,n),u=r.distanceTo(o)||1,s=1.42,c=s*s;function d(t){var e=t?-1:1,i=t?h:l,n=h*h-l*l+e*c*c*u*u,o=2*i*c*u,r=n/o,a=Math.sqrt(r*r+1)-r;var s=a<1e-9?-18:Math.log(a);return s}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/f(t)}var g=d(0);function v(t){return l*(f(g)/f(g+s*t))}function _(t){return l*(f(g)*m(g+s*t)-p(g))/c}function y(t){return 1-Math.pow(1-t,1.5)}var x=Date.now(),b=(d(1)-g)/s,w=t.duration?1e3*t.duration:1e3*b*.8;function L(){var t=(Date.now()-x)/w,e=y(t)*b;if(t<=1){this._flyToFrame=C(L,this);this._move(this.unproject(o.add(r.subtract(o).multiplyBy(_(e)/u)),a),this.getScaleZoom(l/v(e),a),{flyTo:true})}else{this._move(i,n)._moveEnd(true)}}this._moveStart(true,t.noMoveStart);L.call(this);return this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){t=N(t);if(!t.isValid()){this.options.maxBounds=null;return this.off("moveend",this._panInsideMaxBounds)}else if(this.options.maxBounds){this.off("moveend",this._panInsideMaxBounds)}this.options.maxBounds=t;if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var e=this.options.minZoom;this.options.minZoom=t;if(this._loaded&&e!==t){this.fire("zoomlevelschange");if(this.getZoom()<this.options.minZoom){return this.setZoom(t)}}return this},setMaxZoom:function(t){var e=this.options.maxZoom;this.options.maxZoom=t;if(this._loaded&&e!==t){this.fire("zoomlevelschange");if(this.getZoom()>this.options.maxZoom){return this.setZoom(t)}}return this},panInsideBounds:function(t,e){this._enforcingBounds=true;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,N(t));if(!i.equals(n)){this.panTo(n,e)}this._enforcingBounds=false;return this},panInside:function(t,e){e=e||{};var i=E(e.paddingTopLeft||e.padding||[0,0]),n=E(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),r=this.project(o),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),h=F([s.min.add(i),s.max.subtract(n)]);if(!h.contains(a)){this._enforcingBounds=true;var u=r.subtract(a),c=E(a.x+u.x,a.y+u.y);if(a.x<h.min.x||a.x>h.max.x){c.x=r.x-u.x;if(u.x>0){c.x+=l.x-i.x}else{c.x-=l.x-n.x}}if(a.y<h.min.y||a.y>h.max.y){c.y=r.y-u.y;if(u.y>0){c.y+=l.y-i.y}else{c.y-=l.y-n.y}}this.panTo(this.unproject(c),e);this._enforcingBounds=false}return this},invalidateSize:function(t){if(!this._loaded){return this}t=l({animate:false,pan:true},t===true?{animate:true}:t);var e=this.getSize();this._sizeChanged=true;this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),r=n.subtract(o);if(!r.x&&!r.y){return this}if(t.animate&&t.pan){this.panBy(r)}else{if(t.pan){this._rawPanBy(r)}this.fire("move");if(t.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:e,newSize:i})},stop:function(){this.setZoom(this._limitZoom(this._zoom));if(!this.options.zoomSnap){this.fire("viewreset")}return this._stop()},locate:function(t){t=this._locateOptions=l({timeout:1e4,watch:false},t);if(!("geolocation"in navigator)){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var e=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);if(t.watch){this._locationWatchId=navigator.geolocation.watchPosition(e,i,t)}else{navigator.geolocation.getCurrentPosition(e,i,t)}return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new U(e,i),o=n.toBounds(t.coords.accuracy*2),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(o);this.setView(n,r.maxZoom?Math.min(a,r.maxZoom):a)}var s={latlng:n,bounds:o,timestamp:t.timestamp};for(var l in t.coords){if(typeof t.coords[l]==="number"){s[l]=t.coords[l]}}this.fire("locationfound",s)},addHandler:function(t,e){if(!e){return this}var i=this[t]=new e(this);this._handlers.push(i);if(this.options[t]){i.enable()}return this},remove:function(){this._initEvents(true);this.off("moveend",this._panInsideMaxBounds);if(this._containerId!==this._container._leaflet_id){throw new Error("Map container is being reused by another instance")}try{delete this._container._leaflet_id;delete this._containerId}catch(t){this._container._leaflet_id=undefined;this._containerId=undefined}if(this._locationWatchId!==undefined){this.stopLocate()}this._stop();ue(this._mapPane);if(this._clearControlPos){this._clearControlPos()}if(this._resizeRequest){T(this._resizeRequest);this._resizeRequest=null}this._clearHandlers();if(this._loaded){this.fire("unload")}var t;for(t in this._layers){this._layers[t].remove()}for(t in this._panes){ue(this._panes[t])}this._layers=[];this._panes=[];delete this._mapPane;delete this._renderer;return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=he("div",i,e||this._mapPane);if(t){this._panes[t]=n}return n},getCenter:function(){this._checkIfLoaded();if(this._lastCenter&&!this._moved()){return this._lastCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new R(e,i)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=N(t);i=E(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),h=F(this.project(s,n),this.project(a,n)).getSize(),u=vt?this.options.zoomSnap:1,c=l.x/h.x,d=l.y/h.y,p=e?Math.max(c,d):Math.min(c,d);n=this.getScaleZoom(p,n);if(u){n=Math.round(n/(u/100))*(u/100);n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u}return Math.max(o,Math.min(r,n))},getSize:function(){if(!this._size||this._sizeChanged){this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new B(i,i.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===undefined?this.getZoom():t)},getPane:function(t){return typeof t==="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;e=e===undefined?this._zoom:e;return i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===undefined?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?Infinity:n},project:function(t,e){e=e===undefined?this._zoom:e;return this.options.crs.latLngToPoint(Z(t),e)},unproject:function(t,e){e=e===undefined?this._zoom:e;return this.options.crs.pointToLatLng(E(t),e)},layerPointToLatLng:function(t){var e=E(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(Z(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,e){return this.options.crs.distance(Z(t),Z(e))},containerPointToLayerPoint:function(t){return E(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return E(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(E(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(t)))},mouseEventToContainerPoint:function(t){return Ge(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=se(t);if(!e){throw new Error("Map container not found.")}else if(e._leaflet_id){throw new Error("Map container is already initialized.")}Oe(e,"scroll",this._onScroll,this);this._containerId=h(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt;me(t,"leaflet-container"+(Lt?" leaflet-touch":"")+(Ct?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=le(t,"position");if(e!=="absolute"&&e!=="relative"&&e!=="fixed"){t.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var t=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);Le(this._mapPane,new O(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");this.createPane("popupPane");if(!this.options.markerZoomAnimation){me(t.markerPane,"leaflet-zoom-hide");me(t.shadowPane,"leaflet-zoom-hide")}},_resetView:function(t,e){Le(this._mapPane,new O(0,0));var i=!this._loaded;this._loaded=true;e=this._limitZoom(e);this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,false)._move(t,e)._moveEnd(n);this.fire("viewreset");if(i){this.fire("load")}},_moveStart:function(t,e){if(t){this.fire("zoomstart")}if(!e){this.fire("movestart")}return this},_move:function(t,e,i){if(e===undefined){e=this._zoom}var n=this._zoom!==e;this._zoom=e;this._lastCenter=t;this._pixelOrigin=this._getNewPixelOrigin(t);if(n||i&&i.pinch){this.fire("zoom",i)}return this.fire("move",i)},_moveEnd:function(t){if(t){this.fire("zoomend")}return this.fire("moveend")},_stop:function(){T(this._flyToFrame);if(this._panAnim){this._panAnim.stop()}return this},_rawPanBy:function(t){Le(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds){this.panInsideBounds(this.options.maxBounds)}},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(t){this._targets={};this._targets[h(this._container)]=this;var e=t?Ee:Oe;e(this._container,"click dblclick mousedown mouseup "+"mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this);if(this.options.trackResize){e(window,"resize",this._onResize,this)}if(vt&&this.options.transform3DLimit){(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)}},_onResize:function(){T(this._resizeRequest);this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:true})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();if(Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit){this._resetView(this.getCenter(),this.getZoom())}},_findEventTargets:function(t,e){var i=[],n,o=e==="mouseout"||e==="mouseover",r=t.target||t.srcElement,a=false;while(r){n=this._targets[h(r)];if(n&&(e==="click"||e==="preclick")&&!t._simulated&&this._draggableMoved(n)){a=true;break}if(n&&n.listens(e,true)){if(o&&!Xe(r,t)){break}i.push(n);if(o){break}}if(r===this._container){break}r=r.parentNode}if(!i.length&&!a&&!o&&Xe(r,t)){i=[this]}return i},_handleDOMEvent:function(t){if(!this._loaded||Ye(t)){return}var e=t.type;if(e==="mousedown"||e==="keypress"||e==="keyup"||e==="keydown"){Pe(t.target||t.srcElement)}this._fireDOMEvent(t,e)},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var n=l({},t);n.type="preclick";this._fireDOMEvent(n,n.type,i)}if(t._stopped){return}i=(i||[]).concat(this._findEventTargets(t,e));if(!i.length){return}var o=i[0];if(e==="contextmenu"&&o.listens(e,true)){je(t)}var r={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var a=o.getLatLng&&(!o._radius||o._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t);r.layerPoint=this.containerPointToLayerPoint(r.containerPoint);r.latlng=a?o.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var s=0;s<i.length;s++){i[s].fire(e,r,true);if(r.originalEvent._stopped||i[s].options.bubblingMouseEvents===false&&_(this._mouseEvents,e)!==-1){return}}},_draggableMoved:function(t){t=t.dragging&&t.dragging.enabled()?t:this;return t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++){this._handlers[t].disable()}},whenReady:function(t,e){if(this._loaded){t.call(e||this,{target:this})}else{this.on("load",t,e)}return this},_getMapPanePos:function(){return ke(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==undefined?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return F([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i){return t}var n=this.project(t,e),o=this.getSize().divideBy(2),r=new B(n.subtract(o),n.add(o)),a=this._getBoundsOffset(r,i,e);if(a.round().equals([0,0])){return t}return this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e){return t}var i=this.getPixelBounds(),n=new B(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=F(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),r=n.max.subtract(t.max),a=this._rebound(o.x,-r.x),s=this._rebound(o.y,-r.y);return new O(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;if(n){t=Math.round(t/n)*n}return Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ge(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();if((e&&e.animate)!==true&&!this.getSize().contains(i)){return false}this.panBy(i,e);return true},_createAnimProxy:function(){var t=this._proxy=he("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t);this.on("zoomanim",function(t){var e=$t,i=this._proxy.style[e];we(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1));if(i===this._proxy.style[e]&&this._animatingZoom){this._onZoomTransitionEnd()}},this);this.on("load moveend",this._animMoveEnd,this);this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ue(this._proxy);this.off("load moveend",this._animMoveEnd,this);delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();we(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){if(this._animatingZoom&&t.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom){return true}i=i||{};if(!this._zoomAnimated||i.animate===false||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold){return false}var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);if(i.animate!==true&&!this.getSize().contains(o)){return false}C(function(){this._moveStart(true,false)._animateZoom(t,e,true)},this);return true},_animateZoom:function(t,e,i,n){if(!this._mapPane){return}if(i){this._animatingZoom=true;this._animateToCenter=t;this._animateToZoom=e;me(this._mapPane,"leaflet-zoom-anim")}this.fire("zoomanim",{center:t,zoom:e,noUpdate:n});setTimeout(s(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return}if(this._mapPane){ge(this._mapPane,"leaflet-zoom-anim")}this._animatingZoom=false;this._move(this._animateToCenter,this._animateToZoom);C(function(){this._moveEnd(true)},this)}});function ei(t,e){return new ti(t,e)}var ii=S.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;if(e){e.removeControl(this)}this.options.position=t;if(e){e.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(t){this.remove();this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];me(e,"leaflet-control");if(i.indexOf("bottom")!==-1){n.insertBefore(e,n.firstChild)}else{n.appendChild(e)}this._map.on("unload",this.remove,this);return this},remove:function(){if(!this._map){return this}ue(this._container);if(this.onRemove){this.onRemove(this._map)}this._map.off("unload",this.remove,this);this._map=null;return this},_refocusOnMap:function(t){if(this._map&&t&&t.screenX>0&&t.screenY>0){this._map.getContainer().focus()}}}),ni=function(t){return new ii(t)};ti.include({addControl:function(t){t.addTo(this);return this},removeControl:function(t){t.remove();return this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",r=this._controlContainer=he("div",o+"control-container",this._container);function t(t,e){var i=o+t+" "+o+e;n[t+e]=he("div",i,r)}t("top","left");t("top","right");t("bottom","left");t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners){ue(this._controlCorners[t])}ue(this._controlContainer);delete this._controlCorners;delete this._controlContainer}});var oi=ii.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false,sortLayers:false,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){p(this,i);this._layerControlInputs=[];this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var n in t){this._addLayer(t[n],n)}for(n in e){this._addLayer(e[n],n,true)}},onAdd:function(t){this._initLayout();this._update();this._map=t;t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++){this._layers[e].layer.on("add remove",this._onLayerChange,this)}return this._container},addTo:function(t){ii.prototype.addTo.call(this,t);return this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++){this._layers[t].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(t,e){this._addLayer(t,e);return this._map?this._update():this},addOverlay:function(t,e){this._addLayer(t,e,true);return this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(h(t));if(e){this._layers.splice(this._layers.indexOf(e),1)}return this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded");this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);if(t<this._section.clientHeight){me(this._section,"leaflet-control-layers-scrollbar");this._section.style.height=t+"px"}else{ge(this._section,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){ge(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=he("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",true);We(e);Ze(e);var n=this._section=he("section",t+"-list");if(i){this._map.on("click",this.collapse,this);if(!nt){Oe(e,{mouseenter:this.expand,mouseleave:this.collapse},this)}}var o=this._layersLink=he("a",t+"-toggle",e);o.href="#";o.title="Layers";if(Lt){Oe(o,"click",He);Oe(o,"click",this.expand,this)}else{Oe(o,"focus",this.expand,this)}if(!i){this.expand()}this._baseLayersList=he("div",t+"-base",n);this._separator=he("div",t+"-separator",n);this._overlaysList=he("div",t+"-overlays",n);e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++){if(this._layers[e]&&h(this._layers[e].layer)===t){return this._layers[e]}}},_addLayer:function(t,e,i){if(this._map){t.on("add remove",this._onLayerChange,this)}this._layers.push({layer:t,name:e,overlay:i});if(this.options.sortLayers){this._layers.sort(s(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this))}if(this.options.autoZIndex&&t.setZIndex){this._lastZIndex++;t.setZIndex(this._lastZIndex)}this._expandIfNotCollapsed()},_update:function(){if(!this._container){return this}ce(this._baseLayersList);ce(this._overlaysList);this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++){n=this._layers[i];this._addItem(n);e=e||n.overlay;t=t||!n.overlay;o+=!n.overlay?1:0}if(this.options.hideSingleBase){t=t&&o>1;this._baseLayersList.style.display=t?"":"none"}this._separator.style.display=e&&t?"":"none";return this},_onLayerChange:function(t){if(!this._handlingClick){this._update()}var e=this._getLayer(h(t.target));var i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;if(i){this._map.fire(i,e)}},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>";var n=document.createElement("div");n.innerHTML=i;return n.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),n;if(t.overlay){n=document.createElement("input");n.type="checkbox";n.className="leaflet-control-layers-selector";n.defaultChecked=i}else{n=this._createRadioElement("leaflet-base-layers_"+h(this),i)}this._layerControlInputs.push(n);n.layerId=h(t.layer);Oe(n,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("div");e.appendChild(r);r.appendChild(n);r.appendChild(o);var a=t.overlay?this._overlaysList:this._baseLayersList;a.appendChild(e);this._checkDisabledLayers();return e},_onInputClick:function(){var t=this._layerControlInputs,e,i;var n=[],o=[];this._handlingClick=true;for(var r=t.length-1;r>=0;r--){e=t[r];i=this._getLayer(e.layerId).layer;if(e.checked){n.push(i)}else if(!e.checked){o.push(i)}}for(r=0;r<o.length;r++){if(this._map.hasLayer(o[r])){this._map.removeLayer(o[r])}}for(r=0;r<n.length;r++){if(!this._map.hasLayer(n[r])){this._map.addLayer(n[r])}}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var t=this._layerControlInputs,e,i,n=this._map.getZoom();for(var o=t.length-1;o>=0;o--){e=t[o];i=this._getLayer(e.layerId).layer;e.disabled=i.options.minZoom!==undefined&&n<i.options.minZoom||i.options.maxZoom!==undefined&&n>i.options.maxZoom}},_expandIfNotCollapsed:function(){if(this._map&&!this.options.collapsed){this.expand()}return this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ri=function(t,e,i){return new oi(t,e,i)},ai=ii.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=he("div",e+" leaflet-bar"),n=this.options;this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn);this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut);this._updateDisabled();t.on("zoomend zoomlevelschange",this._updateDisabled,this);return i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){this._disabled=true;this._updateDisabled();return this},enable:function(){this._disabled=false;this._updateDisabled();return this},_zoomIn:function(t){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom()){this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))}},_zoomOut:function(t){if(!this._disabled&&this._map._zoom>this._map.getMinZoom()){this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))}},_createButton:function(t,e,i,n,o){var r=he("a",i,n);r.innerHTML=t;r.href="#";r.title=e;r.setAttribute("role","button");r.setAttribute("aria-label",e);We(r);Oe(r,"click",He);Oe(r,"click",o,this);Oe(r,"click",this._refocusOnMap,this);return r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ge(this._zoomInButton,e);ge(this._zoomOutButton,e);if(this._disabled||t._zoom===t.getMinZoom()){me(this._zoomOutButton,e)}if(this._disabled||t._zoom===t.getMaxZoom()){me(this._zoomInButton,e)}}});ti.mergeOptions({zoomControl:true}),ti.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new ai;this.addControl(this.zoomControl)}});var si=function(t){return new ai(t)},li=ii.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true},onAdd:function(t){var e="leaflet-control-scale",i=he("div",e),n=this.options;this._addScales(n,e+"-line",i);t.on(n.updateWhenIdle?"moveend":"move",this._update,this);t.whenReady(this._update,this);return i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){if(t.metric){this._mScale=he("div",e,i)}if(t.imperial){this._iScale=he("div",e,i)}},_update:function(){var t=this._map,e=t.getSize().y/2;var i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){if(this.options.metric&&t){this._updateMetric(t)}if(this.options.imperial&&t){this._updateImperial(t)}},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,n,o;if(e>5280){i=e/5280;n=this._getRoundNum(i);this._updateScale(this._iScale,n+" mi",n/i)}else{o=this._getRoundNum(e);this._updateScale(this._iScale,o+" ft",o/e)}},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px";t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1;return e*i}}),hi=function(t){return new li(t)},ui=ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t);this._attributions={}},onAdd:function(t){t.attributionControl=this;this._container=he("div","leaflet-control-attribution");We(this._container);for(var e in t._layers){if(t._layers[e].getAttribution){this.addAttribution(t._layers[e].getAttribution())}}this._update();return this._container},setPrefix:function(t){this.options.prefix=t;this._update();return this},addAttribution:function(t){if(!t){return this}if(!this._attributions[t]){this._attributions[t]=0}this._attributions[t]++;this._update();return this},removeAttribution:function(t){if(!t){return this}if(this._attributions[t]){this._attributions[t]--;this._update()}return this},_update:function(){if(!this._map){return}var t=[];for(var e in this._attributions){if(this._attributions[e]){t.push(e)}}var i=[];if(this.options.prefix){i.push(this.options.prefix)}if(t.length){i.push(t.join(", "))}this._container.innerHTML=i.join(" | ")}});ti.mergeOptions({attributionControl:true}),ti.addInitHook(function(){if(this.options.attributionControl){(new ui).addTo(this)}});var ci=function(t){return new ui(t)};ii.Layers=oi,ii.Zoom=ai,ii.Scale=li,ii.Attribution=ui,ni.layers=ri,ni.zoom=si,ni.scale=hi,ni.attribution=ci;var di=S.extend({initialize:function(t){this._map=t},enable:function(){if(this._enabled){return this}this._enabled=true;this.addHooks();return this},disable:function(){if(!this._enabled){return this}this._enabled=false;this.removeHooks();return this},enabled:function(){return!!this._enabled}});di.addTo=function(t,e){t.addHandler(e,this);return this};var pi={Events:I},fi=Lt?"touchstart mousedown":"mousedown",mi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},gi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},vi=D.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){p(this,n);this._element=t;this._dragStartTarget=e||t;this._preventOutline=i},enable:function(){if(this._enabled){return}Oe(this._dragStartTarget,fi,this._onDown,this);this._enabled=true},disable:function(){if(!this._enabled){return}if(vi._dragging===this){this.finishDrag()}Ee(this._dragStartTarget,fi,this._onDown,this);this._enabled=false;this._moved=false},_onDown:function(t){if(t._simulated||!this._enabled){return}this._moved=false;if(fe(this._element,"leaflet-zoom-anim")){return}if(vi._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches){return}vi._dragging=this;if(this._preventOutline){Pe(this._element)}Ce();ie();if(this._moving){return}this.fire("down");var e=t.touches?t.touches[0]:t,i=Ae(this._element);this._startPoint=new O(e.clientX,e.clientY);this._parentScale=Ie(i);Oe(document,gi[t.type],this._onMove,this);Oe(document,mi[t.type],this._onUp,this)},_onMove:function(t){if(t._simulated||!this._enabled){return}if(t.touches&&t.touches.length>1){this._moved=true;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new O(e.clientX,e.clientY)._subtract(this._startPoint);if(!i.x&&!i.y){return}if(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance){return}i.x/=this._parentScale.x;i.y/=this._parentScale.y;je(t);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=ke(this._element).subtract(i);me(document.body,"leaflet-dragging");this._lastTarget=t.target||t.srcElement;if(window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance){this._lastTarget=this._lastTarget.correspondingUseElement}me(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(i);this._moving=true;T(this._animRequest);this._lastEvent=t;this._animRequest=C(this._updatePosition,this,true)},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t);Le(this._element,this._newPos);this.fire("drag",t)},_onUp:function(t){if(t._simulated||!this._enabled){return}this.finishDrag()},finishDrag:function(){ge(document.body,"leaflet-dragging");if(this._lastTarget){ge(this._lastTarget,"leaflet-drag-target");this._lastTarget=null}for(var t in gi){Ee(document,gi[t],this._onMove,this);Ee(document,mi[t],this._onUp,this)}Te();ne();if(this._moved&&this._moving){T(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false;vi._dragging=false}}),_i;function yi(t,e){if(!e||!t.length){return t.slice()}var i=e*e;t=ki(t,i);t=wi(t,i);return t}function xi(t,e,i){return Math.sqrt(Si(t,e,i,true))}function bi(t,e,i){return Si(t,e,i)}function wi(t,e){var i=t.length,n=typeof Uint8Array!==undefined+""?Uint8Array:Array,o=new n(i);o[0]=o[i-1]=1;Li(t,o,e,0,i-1);var r,a=[];for(r=0;r<i;r++){if(o[r]){a.push(t[r])}}return a}function Li(t,e,i,n,o){var r=0,a,s,l;for(s=n+1;s<=o-1;s++){l=Si(t[s],t[n],t[o],true);if(l>r){a=s;r=l}}if(r>i){e[a]=1;Li(t,e,i,n,a);Li(t,e,i,a,o)}}function ki(t,e){var i=[t[0]];for(var n=1,o=0,r=t.length;n<r;n++){if(Pi(t[n],t[o])>e){i.push(t[n]);o=n}}if(o<r-1){i.push(t[r-1])}return i}function Mi(t,e,i,n,o){var r=n?_i:Ti(t,i),a=Ti(e,i),s,l,h;_i=a;while(true){if(!(r|a)){return[t,e]}if(r&a){return false}s=r||a;l=Ci(t,e,s,i,o);h=Ti(l,i);if(s===r){t=l;r=h}else{e=l;a=h}}}function Ci(t,e,i,n,o){var r=e.x-t.x,a=e.y-t.y,s=n.min,l=n.max,h,u;if(i&8){h=t.x+r*(l.y-t.y)/a;u=l.y}else if(i&4){h=t.x+r*(s.y-t.y)/a;u=s.y}else if(i&2){h=l.x;u=t.y+a*(l.x-t.x)/r}else if(i&1){h=s.x;u=t.y+a*(s.x-t.x)/r}return new O(h,u,o)}function Ti(t,e){var i=0;if(t.x<e.min.x){i|=1}else if(t.x>e.max.x){i|=2}if(t.y<e.min.y){i|=4}else if(t.y>e.max.y){i|=8}return i}function Pi(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Si(t,e,i,n){var o=e.x,r=e.y,a=i.x-o,s=i.y-r,l=a*a+s*s,h;if(l>0){h=((t.x-o)*a+(t.y-r)*s)/l;if(h>1){o=i.x;r=i.y}else if(h>0){o+=a*h;r+=s*h}}a=t.x-o;s=t.y-r;return n?a*a+s*s:new O(o,r)}function Ai(t){return!v(t[0])||typeof t[0][0]!=="object"&&typeof t[0][0]!=="undefined"}function Ii(t){console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead.");return Ai(t)}var Di={simplify:yi,pointToSegmentDistance:xi,closestPointOnSegment:bi,clipSegment:Mi,_getEdgeIntersection:Ci,_getBitCode:Ti,_sqClosestPointOnSegment:Si,isFlat:Ai,_flat:Ii};function Oi(t,e,i){var n,o=[1,4,2,8],r,a,s,l,h,u,c,d;for(r=0,u=t.length;r<u;r++){t[r]._code=Ti(t[r],e)}for(s=0;s<4;s++){c=o[s];n=[];for(r=0,u=t.length,a=u-1;r<u;a=r++){l=t[r];h=t[a];if(!(l._code&c)){if(h._code&c){d=Ci(h,l,c,e,i);d._code=Ti(d,e);n.push(d)}n.push(l)}else if(!(h._code&c)){d=Ci(h,l,c,e,i);d._code=Ti(d,e);n.push(d)}}t=n}return t}var zi={clipPolygon:Oi},Ei={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new U(t.y,t.x)},bounds:new B([-180,-90],[180,90])},Bi={R:6378137,R_MINOR:6356752.314245179,bounds:new B([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=r*Math.sin(n);var s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);n=-i*Math.log(Math.max(s,1e-10));return new O(t.lng*e*i,n)},unproject:function(t){var e=180/Math.PI,i=this.R,n=this.R_MINOR/i,o=Math.sqrt(1-n*n),r=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(r);for(var s=0,l=.1,h;s<15&&Math.abs(l)>1e-7;s++){h=o*Math.sin(a);h=Math.pow((1-h)/(1+h),o/2);l=Math.PI/2-2*Math.atan(r*h)-a;a+=l}return new U(a*e,t.x*e/i)}},Fi={LonLat:Ei,Mercator:Bi,SphericalMercator:G},Ri=l({},j,{code:"EPSG:3395",projection:Bi,transformation:function(){var t=.5/(Math.PI*Bi.R);return q(t,.5,-t,.5)}()}),Ni=l({},j,{code:"EPSG:4326",projection:Ei,transformation:q(1/180,1,-1/180,.5)}),Ui=l({},W,{projection:Ei,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:true});W.Earth=j,W.EPSG3395=Ri,W.EPSG3857=K,W.EPSG900913=J,W.EPSG4326=Ni,W.Simple=Ui;var Zi=D.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:true},addTo:function(t){t.addLayer(this);return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){if(t){t.removeLayer(this)}return this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){this._map._targets[h(t)]=this;return this},removeInteractiveTarget:function(t){delete this._map._targets[h(t)];return this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(!e.hasLayer(this)){return}this._map=e;this._zoomAnimated=e._zoomAnimated;if(this.getEvents){var i=this.getEvents();e.on(i,this);this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e);if(this.getAttribution&&e.attributionControl){e.attributionControl.addAttribution(this.getAttribution())}this.fire("add");e.fire("layeradd",{layer:this})}});ti.include({addLayer:function(t){if(!t._layerAdd){throw new Error("The provided object is not a Layer.")}var e=h(t);if(this._layers[e]){return this}this._layers[e]=t;t._mapToAdd=this;if(t.beforeAdd){t.beforeAdd(this)}this.whenReady(t._layerAdd,t);return this},removeLayer:function(t){var e=h(t);if(!this._layers[e]){return this}if(this._loaded){t.onRemove(this)}if(t.getAttribution&&this.attributionControl){this.attributionControl.removeAttribution(t.getAttribution())}delete this._layers[e];if(this._loaded){this.fire("layerremove",{layer:t});t.fire("remove")}t._map=t._mapToAdd=null;return this},hasLayer:function(t){return!!t&&h(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers){t.call(e,this._layers[i])}return this},_addLayers:function(t){t=t?v(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++){this.addLayer(t[e])}},_addZoomLimit:function(t){if(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom)){this._zoomBoundLayers[h(t)]=t;this._updateZoomLevels()}},_removeZoomLimit:function(t){var e=h(t);if(this._zoomBoundLayers[e]){delete this._zoomBoundLayers[e];this._updateZoomLevels()}},_updateZoomLevels:function(){var t=Infinity,e=-Infinity,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=o.minZoom===undefined?t:Math.min(t,o.minZoom);e=o.maxZoom===undefined?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-Infinity?undefined:e;this._layersMinZoom=t===Infinity?undefined:t;if(i!==this._getZoomSpan()){this.fire("zoomlevelschange")}if(this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom){this.setZoom(this._layersMaxZoom)}if(this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom){this.setZoom(this._layersMinZoom)}}});var Wi=Zi.extend({initialize:function(t,e){p(this,e);this._layers={};var i,n;if(t){for(i=0,n=t.length;i<n;i++){this.addLayer(t[i])}}},addLayer:function(t){var e=this.getLayerId(t);this._layers[e]=t;if(this._map){this._map.addLayer(t)}return this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);if(this._map&&this._layers[e]){this._map.removeLayer(this._layers[e])}delete this._layers[e];return this},hasLayer:function(t){if(!t){return false}var e=typeof t==="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers){n=this._layers[i];if(n[t]){n[t].apply(n,e)}}return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers){t.call(e,this._layers[i])}return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];this.eachLayer(t.push,t);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),ji=function(t,e){return new Wi(t,e)},Hi=Wi.extend({addLayer:function(t){if(this.hasLayer(t)){return this}t.addEventParent(this);Wi.prototype.addLayer.call(this,t);return this.fire("layeradd",{layer:t})},removeLayer:function(t){if(!this.hasLayer(t)){return this}if(t in this._layers){t=this._layers[t]}t.removeEventParent(this);Wi.prototype.removeLayer.call(this,t);return this.fire("layerremove",{layer:t})},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Gi=function(t,e){return new Hi(t,e)},Vi=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var n=this._createImg(i,e&&e.tagName==="IMG"?e:null);this._setIconStyles(n,t);return n},_setIconStyles:function(t,e){var i=this.options;var n=i[e+"Size"];if(typeof n==="number"){n=[n,n]}var o=E(n),r=E(e==="shadow"&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,true));t.className="leaflet-marker-"+e+" "+(i.className||"");if(r){t.style.marginLeft=-r.x+"px";t.style.marginTop=-r.y+"px"}if(o){t.style.width=o.x+"px";t.style.height=o.y+"px"}},_createImg:function(t,e){e=e||document.createElement("img");e.src=t;return e},_getIconUrl:function(t){return Ct&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function qi(t){return new Vi(t)}var Ki=Vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){if(!Ki.imagePath){Ki.imagePath=this._detectIconPath()}return(this.options.imagePath||Ki.imagePath)+Vi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=he("div","leaflet-default-icon-path",document.body);var e=le(t,"background-image")||le(t,"backgroundImage");document.body.removeChild(t);if(e===null||e.indexOf("url")!==0){e=""}else{e=e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}return e}}),Ji=di.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;if(!this._draggable){this._draggable=new vi(t,t,true)}this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable();me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable();if(this._marker._icon){ge(this._marker._icon,"leaflet-marker-draggable")}},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=ke(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin();var l=F(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(r)){var h=E((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:false});this._draggable._newPos._add(h);this._draggable._startPos._add(h);Le(e._icon,this._draggable._newPos);this._onDrag(t);this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup&&this._marker.closePopup();this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){if(this._marker.options.autoPan){T(this._panRequest);this._panRequest=C(this._adjustPan.bind(this,t))}},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ke(e._icon),o=e._map.layerPointToLatLng(n);if(i){Le(i,n)}e._latlng=o;t.latlng=o;t.oldLatLng=this._oldLatLng;e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest);delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",t)}}),Yi=Zi.extend({options:{icon:new Ki,interactive:true,keyboard:true,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:false,draggable:false,autoPan:false,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e);this._latlng=Z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation;if(this._zoomAnimated){t.on("zoomanim",this._animateZoom,this)}this._initIcon();this.update()},onRemove:function(t){if(this.dragging&&this.dragging.enabled()){this.options.draggable=true;this.dragging.removeHooks()}delete this.dragging;if(this._zoomAnimated){t.off("zoomanim",this._animateZoom,this)}this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;this._latlng=Z(t);this.update();return this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){this.options.zIndexOffset=t;return this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){this.options.icon=t;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup,this._popup.options)}return this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");var i=t.icon.createIcon(this._icon),n=false;if(i!==this._icon){if(this._icon){this._removeIcon()}n=true;if(t.title){i.title=t.title}if(i.tagName==="IMG"){i.alt=t.alt||""}}me(i,e);if(t.keyboard){i.tabIndex="0"}this._icon=i;if(t.riseOnHover){this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex})}var o=t.icon.createShadow(this._shadow),r=false;if(o!==this._shadow){this._removeShadow();r=true}if(o){me(o,e);o.alt=""}this._shadow=o;if(t.opacity<1){this._updateOpacity()}if(n){this.getPane().appendChild(this._icon)}this._initInteraction();if(o&&r){this.getPane(t.shadowPane).appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex})}ue(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){ue(this._shadow)}this._shadow=null},_setPos:function(t){if(this._icon){Le(this._icon,t)}if(this._shadow){Le(this._shadow,t)}this._zIndex=t.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(t){if(this._icon){this._icon.style.zIndex=this._zIndex+t}},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(!this.options.interactive){return}me(this._icon,"leaflet-interactive");this.addInteractiveTarget(this._icon);if(Ji){var t=this.options.draggable;if(this.dragging){t=this.dragging.enabled();this.dragging.disable()}this.dragging=new Ji(this);if(t){this.dragging.enable()}}},setOpacity:function(t){this.options.opacity=t;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){var t=this.options.opacity;if(this._icon){ye(this._icon,t)}if(this._shadow){ye(this._shadow,t)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xi(t,e){return new Yi(t,e)}var Qi=Zi.extend({options:{stroke:true,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:false,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:true,bubblingMouseEvents:true},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){if(this._map){this._renderer._updatePath(this)}return this},setStyle:function(t){p(this,t);if(this._renderer){this._renderer._updateStyle(this);if(this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")){this._updateBounds()}}return this},bringToFront:function(){if(this._renderer){this._renderer._bringToFront(this)}return this},bringToBack:function(){if(this._renderer){this._renderer._bringToBack(this)}return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),$i=Qi.extend({options:{fill:true,radius:10},initialize:function(t,e){p(this,e);this._latlng=Z(t);this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;this._latlng=Z(t);this.redraw();return this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){this.options.radius=this._radius=t;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;Qi.prototype.setStyle.call(this,t);this.setRadius(e);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new B(this._point.subtract(n),this._point.add(n))},_update:function(){if(this._map){this._updatePath()}},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tn(t,e){return new $i(t,e)}var en=$i.extend({initialize:function(t,e,i){if(typeof e==="number"){e=l({},i,{radius:e})}p(this,e);this._latlng=Z(t);if(isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(t){this._mRadius=t;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Qi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===j.distance){var o=Math.PI/180,r=this._mRadius/j.R/o,a=i.project([e+r,t]),s=i.project([e-r,t]),l=a.add(s).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(h*o))/(Math.cos(e*o)*Math.cos(h*o)))/o;if(isNaN(u)||u===0){u=r/Math.cos(Math.PI/180*e)}this._point=l.subtract(i.getPixelOrigin());this._radius=isNaN(u)?0:l.x-i.project([h,t-u]).x;this._radiusY=l.y-a.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng);this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});function nn(t,e,i){return new en(t,e,i)}var on=Qi.extend({options:{smoothFactor:1,noClip:false},initialize:function(t,e){p(this,e);this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){this._setLatLngs(t);return this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){var e=Infinity,i=null,n=Si,o,r;for(var a=0,s=this._parts.length;a<s;a++){var l=this._parts[a];for(var h=1,u=l.length;h<u;h++){o=l[h-1];r=l[h];var c=n(t,o,r,true);if(c<e){e=c;i=n(t,o,r)}}}if(i){i.distance=Math.sqrt(e)}return i},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var t,e,i,n,o,r,a,s=this._rings[0],l=s.length;if(!l){return null}for(t=0,e=0;t<l-1;t++){e+=s[t].distanceTo(s[t+1])/2}if(e===0){return this._map.layerPointToLatLng(s[0])}for(t=0,n=0;t<l-1;t++){o=s[t];r=s[t+1];i=o.distanceTo(r);n+=i;if(n>e){a=(n-e)/i;return this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(t,e){e=e||this._defaultShape();t=Z(t);e.push(t);this._bounds.extend(t);return this.redraw()},_setLatLngs:function(t){this._bounds=new R;this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ai(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){var e=[],i=Ai(t);for(var n=0,o=t.length;n<o;n++){if(i){e[n]=Z(t[n]);this._bounds.extend(e[n])}else{e[n]=this._convertLatLngs(t[n])}}return e},_project:function(){var t=new B;this._rings=[];this._projectLatlngs(this._latlngs,this._rings,t);if(this._bounds.isValid()&&t.isValid()){this._rawPxBounds=t;this._updateBounds()}},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new B([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n=t[0]instanceof U,o=t.length,r,a;if(n){a=[];for(r=0;r<o;r++){a[r]=this._map.latLngToLayerPoint(t[r]);i.extend(a[r])}e.push(a)}else{for(r=0;r<o;r++){this._projectLatlngs(t[r],e,i)}}},_clipPoints:function(){var t=this._renderer._bounds;this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(t)){return}if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,n,o,r,a,s,l;for(i=0,o=0,r=this._rings.length;i<r;i++){l=this._rings[i];for(n=0,a=l.length;n<a-1;n++){s=Mi(l[n],l[n+1],t,n,true);if(!s){continue}e[o]=e[o]||[];e[o].push(s[0]);if(s[1]!==l[n+1]||n===a-2){e[o].push(s[1]);o++}}}},_simplifyPoints:function(){var t=this._parts,e=this.options.smoothFactor;for(var i=0,n=t.length;i<n;i++){t[i]=yi(t[i],e)}},_update:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t)){return false}for(i=0,r=this._parts.length;i<r;i++){s=this._parts[i];for(n=0,a=s.length,o=a-1;n<a;o=n++){if(!e&&n===0){continue}if(xi(t,s[o],s[n])<=l){return true}}}return false}});function rn(t,e){return new on(t,e)}on._flat=Ii;var an=on.extend({options:{fill:true},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var t,e,i,n,o,r,a,s,l,h=this._rings[0],u=h.length;if(!u){return null}r=a=s=0;for(t=0,e=u-1;t<u;e=t++){i=h[t];n=h[e];o=i.y*n.x-n.y*i.x;a+=(i.x+n.x)*o;s+=(i.y+n.y)*o;r+=o*3}if(r===0){l=h[0]}else{l=[a/r,s/r]}return this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=on.prototype._convertLatLngs.call(this,t),i=e.length;if(i>=2&&e[0]instanceof U&&e[0].equals(e[i-1])){e.pop()}return e},_setLatLngs:function(t){on.prototype._setLatLngs.call(this,t);if(Ai(this._latlngs)){this._latlngs=[this._latlngs]}},_defaultShape:function(){return Ai(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new O(e,e);t=new B(t.min.subtract(i),t.max.add(i));this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(t)){return}if(this.options.noClip){this._parts=this._rings;return}for(var n=0,o=this._rings.length,r;n<o;n++){r=Oi(this._rings[n],t,true);if(r.length){this._parts.push(r)}}},_updatePath:function(){this._renderer._updatePoly(this,true)},_containsPoint:function(t){var e=false,i,n,o,r,a,s,l,h;if(!this._pxBounds||!this._pxBounds.contains(t)){return false}for(r=0,l=this._parts.length;r<l;r++){i=this._parts[r];for(a=0,h=i.length,s=h-1;a<h;s=a++){n=i[a];o=i[s];if(n.y>t.y!==o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x){e=!e}}}return e||on.prototype._containsPoint.call(this,t,true)}});function sn(t,e){return new an(t,e)}var ln=Hi.extend({initialize:function(t,e){p(this,e);this._layers={};if(t){this.addData(t)}},addData:function(t){var e=v(t)?t:t.features,i,n,o;if(e){for(i=0,n=e.length;i<n;i++){o=e[i];if(o.geometries||o.geometry||o.features||o.coordinates){this.addData(o)}}return this}var r=this.options;if(r.filter&&!r.filter(t)){return this}var a=hn(t,r);if(!a){return this}a.feature=gn(t);a.defaultOptions=a.options;this.resetStyle(a);if(r.onEachFeature){r.onEachFeature(t,a)}return this.addLayer(a)},resetStyle:function(t){if(t===undefined){return this.eachLayer(this.resetStyle,this)}t.options=l({},t.defaultOptions);this._setLayerStyle(t,this.options.style);return this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){if(t.setStyle){if(typeof e==="function"){e=e(t.feature)}t.setStyle(e)}}});function hn(t,e){var i=t.type==="Feature"?t.geometry:t,n=i?i.coordinates:null,o=[],r=e&&e.pointToLayer,a=e&&e.coordsToLatLng||cn,s,l,h,u;if(!n&&!i){return null}switch(i.type){case"Point":s=a(n);return un(r,t,s,e);case"MultiPoint":for(h=0,u=n.length;h<u;h++){s=a(n[h]);o.push(un(r,t,s,e))}return new Hi(o);case"LineString":case"MultiLineString":l=dn(n,i.type==="LineString"?0:1,a);return new on(l,e);case"Polygon":case"MultiPolygon":l=dn(n,i.type==="Polygon"?1:2,a);return new an(l,e);case"GeometryCollection":for(h=0,u=i.geometries.length;h<u;h++){var c=hn({geometry:i.geometries[h],type:"Feature",properties:t.properties},e);if(c){o.push(c)}}return new Hi(o);default:throw new Error("Invalid GeoJSON object.")}}function un(t,e,i,n){return t?t(e,i):new Yi(i,n&&n.markersInheritOptions&&n)}function cn(t){return new U(t[1],t[0],t[2])}function dn(t,e,i){var n=[];for(var o=0,r=t.length,a;o<r;o++){a=e?dn(t[o],e-1,i):(i||cn)(t[o]);n.push(a)}return n}function pn(t,e){e=typeof e==="number"?e:6;return t.alt!==undefined?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function fn(t,e,i,n){var o=[];for(var r=0,a=t.length;r<a;r++){o.push(e?fn(t[r],e-1,i,n):pn(t[r],n))}if(!e&&i){o.push(o[0])}return o}function mn(t,e){return t.feature?l({},t.feature,{geometry:e}):gn(e)}function gn(t){if(t.type==="Feature"||t.type==="FeatureCollection"){return t}return{type:"Feature",properties:{},geometry:t}}var vn={toGeoJSON:function(t){return mn(this,{type:"Point",coordinates:pn(this.getLatLng(),t)})}};function _n(t,e){return new ln(t,e)}Yi.include(vn),en.include(vn),$i.include(vn),on.include({toGeoJSON:function(t){var e=!Ai(this._latlngs);var i=fn(this._latlngs,e?1:0,false,t);return mn(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),an.include({toGeoJSON:function(t){var e=!Ai(this._latlngs),i=e&&!Ai(this._latlngs[0]);var n=fn(this._latlngs,i?2:e?1:0,true,t);if(!e){n=[n]}return mn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Wi.include({toMultiPoint:function(e){var i=[];this.eachLayer(function(t){i.push(t.toGeoJSON(e).geometry.coordinates)});return mn(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(n){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint"){return this.toMultiPoint(n)}var o=t==="GeometryCollection",r=[];this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(n);if(o){r.push(e.geometry)}else{var i=gn(e);if(i.type==="FeatureCollection"){r.push.apply(r,i.features)}else{r.push(i)}}}});if(o){return mn(this,{geometries:r,type:"GeometryCollection"})}return{type:"FeatureCollection",features:r}}});var yn=_n,xn=Zi.extend({options:{opacity:1,alt:"",interactive:false,crossOrigin:false,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t;this._bounds=N(e);p(this,i)},onAdd:function(){if(!this._image){this._initImage();if(this.options.opacity<1){this._updateOpacity()}}if(this.options.interactive){me(this._image,"leaflet-interactive");this.addInteractiveTarget(this._image)}this.getPane().appendChild(this._image);this._reset()},onRemove:function(){ue(this._image);if(this.options.interactive){this.removeInteractiveTarget(this._image)}},setOpacity:function(t){this.options.opacity=t;if(this._image){this._updateOpacity()}return this},setStyle:function(t){if(t.opacity){this.setOpacity(t.opacity)}return this},bringToFront:function(){if(this._map){de(this._image)}return this},bringToBack:function(){if(this._map){pe(this._image)}return this},setUrl:function(t){this._url=t;if(this._image){this._image.src=t}return this},setBounds:function(t){this._bounds=N(t);if(this._map){this._reset()}return this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};if(this._zoomAnimated){t.zoomanim=this._animateZoom}return t},setZIndex:function(t){this.options.zIndex=t;this._updateZIndex();return this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG";var e=this._image=t?this._url:he("img");me(e,"leaflet-image-layer");if(this._zoomAnimated){me(e,"leaflet-zoom-animated")}if(this.options.className){me(e,this.options.className)}e.onselectstart=u;e.onmousemove=u;e.onload=s(this.fire,this,"load");e.onerror=s(this._overlayOnError,this,"error");if(this.options.crossOrigin||this.options.crossOrigin===""){e.crossOrigin=this.options.crossOrigin===true?"":this.options.crossOrigin}if(this.options.zIndex){this._updateZIndex()}if(t){this._url=e.src;return}e.src=this._url;e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;we(this._image,i,e)},_reset:function(){var t=this._image,e=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Le(t,e.min);t.style.width=i.x+"px";t.style.height=i.y+"px"},_updateOpacity:function(){ye(this._image,this.options.opacity)},_updateZIndex:function(){if(this._image&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._image.style.zIndex=this.options.zIndex}},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;if(t&&this._url!==t){this._url=t;this._image.src=t}}}),bn=function(t,e,i){return new xn(t,e,i)},wn=xn.extend({options:{autoplay:true,loop:true,keepAspectRatio:true,muted:false},_initImage:function(){var t=this._url.tagName==="VIDEO";var e=this._image=t?this._url:he("video");me(e,"leaflet-image-layer");if(this._zoomAnimated){me(e,"leaflet-zoom-animated")}if(this.options.className){me(e,this.options.className)}e.onselectstart=u;e.onmousemove=u;e.onloadeddata=s(this.fire,this,"load");if(t){var i=e.getElementsByTagName("source");var n=[];for(var o=0;o<i.length;o++){n.push(i[o].src)}this._url=i.length>0?n:[e.src];return}if(!v(this._url)){this._url=[this._url]}if(!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")){e.style["objectFit"]="fill"}e.autoplay=!!this.options.autoplay;e.loop=!!this.options.loop;e.muted=!!this.options.muted;for(var r=0;r<this._url.length;r++){var a=he("source");a.src=this._url[r];e.appendChild(a)}}});function Ln(t,e,i){return new wn(t,e,i)}var kn=xn.extend({_initImage:function(){var t=this._image=this._url;me(t,"leaflet-image-layer");if(this._zoomAnimated){me(t,"leaflet-zoom-animated")}if(this.options.className){me(t,this.options.className)}t.onselectstart=u;t.onmousemove=u}});function Mn(t,e,i){return new kn(t,e,i)}var Cn=Zi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t);this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated;if(!this._container){this._initLayout()}if(t._fadeAnimated){ye(this._container,0)}clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();if(t._fadeAnimated){ye(this._container,1)}this.bringToFront()},onRemove:function(t){if(t._fadeAnimated){ye(this._container,0);this._removeTimeout=setTimeout(s(ue,undefined,this._container),200)}else{ue(this._container)}},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=Z(t);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(t){this._content=t;this.update();return this},getElement:function(){return this._container},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated){t.zoomanim=this._animateZoom}return t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map){de(this._container)}return this},bringToBack:function(){if(this._map){pe(this._container)}return this},_prepareOpen:function(t,e,i){if(!(e instanceof Zi)){i=e;e=t}if(e instanceof Hi){for(var n in t._layers){e=t._layers[n];break}}if(!i){if(e.getCenter){i=e.getCenter()}else if(e.getLatLng){i=e.getLatLng()}else{throw new Error("Unable to get source layer LatLng.")}}this._source=e;this.update();return i},_updateContent:function(){if(!this._content){return}var t=this._contentNode;var e=typeof this._content==="function"?this._content(this._source||this):this._content;if(typeof e==="string"){t.innerHTML=e}else{while(t.hasChildNodes()){t.removeChild(t.firstChild)}t.appendChild(e)}this.fire("contentupdate")},_updatePosition:function(){if(!this._map){return}var t=this._map.latLngToLayerPoint(this._latlng),e=E(this.options.offset),i=this._getAnchor();if(this._zoomAnimated){Le(this._container,t.add(i))}else{e=e.add(t).add(i)}var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px";this._container.style.left=o+"px"},_getAnchor:function(){return[0,0]}}),Tn=Cn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:true,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:false,closeButton:true,autoClose:true,closeOnEscapeKey:true,className:""},openOn:function(t){t.openPopup(this);return this},onAdd:function(t){Cn.prototype.onAdd.call(this,t);t.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this},true);if(!(this._source instanceof Qi)){this._source.on("preclick",Ue)}}},onRemove:function(t){Cn.prototype.onRemove.call(this,t);t.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this},true);if(!(this._source instanceof Qi)){this._source.off("preclick",Ue)}}},getEvents:function(){var t=Cn.prototype.getEvents.call(this);if(this.options.closeOnClick!==undefined?this.options.closeOnClick:this._map.options.closePopupOnClick){t.preclick=this._close}if(this.options.keepInView){t.moveend=this._adjustPan}return t},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var t="leaflet-popup",e=this._container=he("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");var i=this._wrapper=he("div",t+"-content-wrapper",e);this._contentNode=he("div",t+"-content",i);We(e);Ze(this._contentNode);Oe(e,"contextmenu",Ue);this._tipContainer=he("div",t+"-tip-container",e);this._tip=he("div",t+"-tip",this._tipContainer);if(this.options.closeButton){var n=this._closeButton=he("a",t+"-close-button",e);n.href="#close";n.innerHTML="&#215;";Oe(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="";e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth);e.width=i+1+"px";e.whiteSpace="";e.height="";var n=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";if(o&&n>o){e.height=o+"px";me(t,r)}else{ge(t,r)}this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Le(this._container,e.add(i))},_adjustPan:function(){if(!this.options.autoPan){return}if(this._map._panAnim){this._map._panAnim.stop()}var t=this._map,e=parseInt(le(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new O(this._containerLeft,-i-this._containerBottom);o._add(ke(this._container));var r=t.layerPointToContainerPoint(o),a=E(this.options.autoPanPadding),s=E(this.options.autoPanPaddingTopLeft||a),l=E(this.options.autoPanPaddingBottomRight||a),h=t.getSize(),u=0,c=0;if(r.x+n+l.x>h.x){u=r.x+n-h.x+l.x}if(r.x-u-s.x<0){u=r.x-s.x}if(r.y+i+l.y>h.y){c=r.y+i-h.y+l.y}if(r.y-c-s.y<0){c=r.y-s.y}if(u||c){t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close();He(t)},_getAnchor:function(){return E(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pn=function(t,e){return new Tn(t,e)};ti.mergeOptions({closePopupOnClick:true}),ti.include({openPopup:function(t,e,i){if(!(t instanceof Tn)){t=new Tn(i).setContent(t)}if(e){t.setLatLng(e)}if(this.hasLayer(t)){return this}if(this._popup&&this._popup.options.autoClose){this.closePopup()}this._popup=t;return this.addLayer(t)},closePopup:function(t){if(!t||t===this._popup){t=this._popup;this._popup=null}if(t){this.removeLayer(t)}return this}}),Zi.include({bindPopup:function(t,e){if(t instanceof Tn){p(t,e);this._popup=t;t._source=this}else{if(!this._popup||e){this._popup=new Tn(e,this)}this._popup.setContent(t)}if(!this._popupHandlersAdded){this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=false;this._popup=null}return this},openPopup:function(t,e){if(this._popup&&this._map){e=this._popup._prepareOpen(this,t,e);this._map.openPopup(this._popup,e)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(t){if(this._popup){if(this._popup._map){this.closePopup()}else{this.openPopup(t)}}return this},isPopupOpen:function(){return this._popup?this._popup.isOpen():false},setPopupContent:function(t){if(this._popup){this._popup.setContent(t)}return this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(!this._popup){return}if(!this._map){return}He(t);if(e instanceof Qi){this.openPopup(t.layer||t.target,t.latlng);return}if(this._map.hasLayer(this._popup)&&this._popup._source===e){this.closePopup()}else{this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){if(t.originalEvent.keyCode===13){this._openPopup(t)}}});var Sn=Cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:false,sticky:false,interactive:false,opacity:.9},onAdd:function(t){Cn.prototype.onAdd.call(this,t);this.setOpacity(this.options.opacity);t.fire("tooltipopen",{tooltip:this});if(this._source){this._source.fire("tooltipopen",{tooltip:this},true)}},onRemove:function(t){Cn.prototype.onRemove.call(this,t);t.fire("tooltipclose",{tooltip:this});if(this._source){this._source.fire("tooltipclose",{tooltip:this},true)}},getEvents:function(){var t=Cn.prototype.getEvents.call(this);if(Lt&&!this.options.permanent){t.preclick=this._close}return t},_close:function(){if(this._map){this._map.closeTooltip(this)}},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=he("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,o=this._container,r=n.latLngToContainerPoint(n.getCenter()),a=n.layerPointToContainerPoint(t),s=this.options.direction,l=o.offsetWidth,h=o.offsetHeight,u=E(this.options.offset),c=this._getAnchor();if(s==="top"){e=l/2;i=h}else if(s==="bottom"){e=l/2;i=0}else if(s==="center"){e=l/2;i=h/2}else if(s==="right"){e=0;i=h/2}else if(s==="left"){e=l;i=h/2}else if(a.x<r.x){s="right";e=0;i=h/2}else{s="left";e=l+(u.x+c.x)*2;i=h/2}t=t.subtract(E(e,i,true)).add(u).add(c);ge(o,"leaflet-tooltip-right");ge(o,"leaflet-tooltip-left");ge(o,"leaflet-tooltip-top");ge(o,"leaflet-tooltip-bottom");me(o,"leaflet-tooltip-"+s);Le(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t;if(this._container){ye(this._container,t)}},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return E(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),An=function(t,e){return new Sn(t,e)};ti.include({openTooltip:function(t,e,i){if(!(t instanceof Sn)){t=new Sn(i).setContent(t)}if(e){t.setLatLng(e)}if(this.hasLayer(t)){return this}return this.addLayer(t)},closeTooltip:function(t){if(t){this.removeLayer(t)}return this}}),Zi.include({bindTooltip:function(t,e){if(t instanceof Sn){p(t,e);this._tooltip=t;t._source=this}else{if(!this._tooltip||e){this._tooltip=new Sn(e,this)}this._tooltip.setContent(t)}this._initTooltipInteractions();if(this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)){this.openTooltip()}return this},unbindTooltip:function(){if(this._tooltip){this._initTooltipInteractions(true);this.closeTooltip();this._tooltip=null}return this},_initTooltipInteractions:function(t){if(!t&&this._tooltipHandlersAdded){return}var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent){i.mouseover=this._openTooltip;i.mouseout=this.closeTooltip;if(this._tooltip.options.sticky){i.mousemove=this._moveTooltip}if(Lt){i.click=this._openTooltip}}else{i.add=this._openTooltip}this[e](i);this._tooltipHandlersAdded=!t},openTooltip:function(t,e){if(this._tooltip&&this._map){e=this._tooltip._prepareOpen(this,t,e);this._map.openTooltip(this._tooltip,e);if(this._tooltip.options.interactive&&this._tooltip._container){me(this._tooltip._container,"leaflet-clickable");this.addInteractiveTarget(this._tooltip._container)}}return this},closeTooltip:function(){if(this._tooltip){this._tooltip._close();if(this._tooltip.options.interactive&&this._tooltip._container){ge(this._tooltip._container,"leaflet-clickable");this.removeInteractiveTarget(this._tooltip._container)}}return this},toggleTooltip:function(t){if(this._tooltip){if(this._tooltip._map){this.closeTooltip()}else{this.openTooltip(t)}}return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){if(this._tooltip){this._tooltip.setContent(t)}return this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;if(!this._tooltip||!this._map){return}this.openTooltip(e,this._tooltip.options.sticky?t.latlng:undefined)},_moveTooltip:function(t){var e=t.latlng,i,n;if(this._tooltip.options.sticky&&t.originalEvent){i=this._map.mouseEventToContainerPoint(t.originalEvent);n=this._map.containerPointToLayerPoint(i);e=this._map.layerPointToLatLng(n)}this._tooltip.setLatLng(e)}});var In=Vi.extend({options:{iconSize:[12,12],html:false,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element){ce(e);e.appendChild(i.html)}else{e.innerHTML=i.html!==false?i.html:""}if(i.bgPos){var n=E(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}this._setIconStyles(e,"icon");return e},createShadow:function(){return null}});function Dn(t){return new In(t)}Vi.Default=Ki;var On=Zi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:true,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,maxNativeZoom:undefined,minNativeZoom:undefined,noWrap:false,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles();ue(this._container);t._removeZoomLimit(this);this._container=null;this._tileZoom=undefined},bringToFront:function(){if(this._map){de(this._container);this._setAutoZIndex(Math.max)}return this},bringToBack:function(){if(this._map){pe(this._container);this._setAutoZIndex(Math.min)}return this},getContainer:function(){return this._container},setOpacity:function(t){this.options.opacity=t;this._updateOpacity();return this},setZIndex:function(t){this.options.zIndex=t;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove){this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)}t.move=this._onMove}if(this._zoomAnimated){t.zoomanim=this._animateZoom}return t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(t){var e=this.getPane().children,i=-t(-Infinity,Infinity);for(var n=0,o=e.length,r;n<o;n++){r=e[n].style.zIndex;if(e[n]!==this._container&&r){i=t(i,+r)}}if(isFinite(i)){this.options.zIndex=i+t(-1,1);this._updateZIndex()}},_updateOpacity:function(){if(!this._map){return}if(tt){return}ye(this._container,this.options.opacity);var t=+new Date,e=false,i=false;for(var n in this._tiles){var o=this._tiles[n];if(!o.current||!o.loaded){continue}var r=Math.min(1,(t-o.loaded)/200);ye(o.el,r);if(r<1){e=true}else{if(o.active){i=true}else{this._onOpaqueTile(o)}o.active=true}}if(i&&!this._noPrune){this._pruneTiles()}if(e){T(this._fadeFrame);this._fadeFrame=C(this._updateOpacity,this)}},_onOpaqueTile:u,_initContainer:function(){if(this._container){return}this._container=he("div","leaflet-layer "+(this.options.className||""));this._updateZIndex();if(this.options.opacity<1){this._updateOpacity()}this.getPane().appendChild(this._container)},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===undefined){return undefined}for(var i in this._levels){i=Number(i);if(this._levels[i].el.children.length||i===t){this._levels[i].el.style.zIndex=e-Math.abs(t-i);this._onUpdateLevel(i)}else{ue(this._levels[i].el);this._removeTilesAtZoom(i);this._onRemoveLevel(i);delete this._levels[i]}}var n=this._levels[t],o=this._map;if(!n){n=this._levels[t]={};n.el=he("div","leaflet-tile-container leaflet-zoom-animated",this._container);n.el.style.zIndex=e;n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round();n.zoom=t;this._setZoomTransform(n,o.getCenter(),o.getZoom());u(n.el.offsetWidth);this._onCreateLevel(n)}this._level=n;return n},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(!this._map){return}var t,e;var i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles){e=this._tiles[t];e.retain=e.current}for(t in this._tiles){e=this._tiles[t];if(e.current&&!e.active){var n=e.coords;if(!this._retainParent(n.x,n.y,n.z,n.z-5)){this._retainChildren(n.x,n.y,n.z,n.z+2)}}}for(t in this._tiles){if(!this._tiles[t].retain){this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles){if(this._tiles[e].coords.z!==t){continue}this._removeTile(e)}},_removeAllTiles:function(){for(var t in this._tiles){this._removeTile(t)}},_invalidateAll:function(){for(var t in this._levels){ue(this._levels[t].el);this._onRemoveLevel(Number(t));delete this._levels[t]}this._removeAllTiles();this._tileZoom=undefined},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,s=new O(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),h=this._tiles[l];if(h&&h.active){h.retain=true;return true}else if(h&&h.loaded){h.retain=true}if(a>n){return this._retainParent(o,r,a,n)}return false},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++){for(var r=2*e;r<2*e+2;r++){var a=new O(o,r);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];if(l&&l.active){l.retain=true;continue}else if(l&&l.loaded){l.retain=true}if(i+1<n){this._retainChildren(o,r,i+1,n)}}}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,true,t.noUpdate)},_clampZoom:function(t){var e=this.options;if(undefined!==e.minNativeZoom&&t<e.minNativeZoom){return e.minNativeZoom}if(undefined!==e.maxNativeZoom&&e.maxNativeZoom<t){return e.maxNativeZoom}return t},_setView:function(t,e,i,n){var o=Math.round(e);if(this.options.maxZoom!==undefined&&o>this.options.maxZoom||this.options.minZoom!==undefined&&o<this.options.minZoom){o=undefined}else{o=this._clampZoom(o)}var r=this.options.updateWhenZooming&&o!==this._tileZoom;if(!n||r){this._tileZoom=o;if(this._abortLoading){this._abortLoading()}this._updateLevels();this._resetGrid();if(o!==undefined){this._update(t)}if(!i){this._pruneTiles()}this._noPrune=!!i}this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels){this._setZoomTransform(this._levels[i],t,e)}},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();if(vt){we(t.el,o,n)}else{Le(t.el,o)}},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom;var o=this._map.getPixelWorldBounds(this._tileZoom);if(o){this._globalTileRange=this._pxBoundsToTileRange(o)}this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)];this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom){return}this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(n*2);return new B(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(!e){return}var i=this._clampZoom(e.getZoom());if(t===undefined){t=e.getCenter()}if(this._tileZoom===undefined){return}var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new B(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y))){throw new Error("Attempted to load an infinite number of tiles")}for(var h in this._tiles){var u=this._tiles[h].coords;if(u.z!==this._tileZoom||!l.contains(new O(u.x,u.y))){this._tiles[h].current=false}}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var c=o.min.y;c<=o.max.y;c++){for(var d=o.min.x;d<=o.max.x;d++){var p=new O(d,c);p.z=this._tileZoom;if(!this._isValidTile(p)){continue}var f=this._tiles[this._tileCoordsToKey(p)];if(f){f.current=true}else{a.push(p)}}}a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});if(a.length!==0){if(!this._loading){this._loading=true;this.fire("loading")}var m=document.createDocumentFragment();for(d=0;d<a.length;d++){this._addTile(a[d],m)}this._level.el.appendChild(m)}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y)){return false}}if(!this.options.bounds){return true}var n=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i),r=e.unproject(n,t.z),a=e.unproject(o,t.z);return[r,a]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new R(e[0],e[1]);if(!this.options.noWrap){i=this._map.wrapLatLngBounds(i)}return i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new O(+e[0],+e[1]);i.z=+e[2];return i},_removeTile:function(t){var e=this._tiles[t];if(!e){return}ue(e.el);delete this._tiles[t];this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)})},_initTile:function(t){me(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px";t.style.height=e.y+"px";t.onselectstart=u;t.onmousemove=u;if(tt&&this.options.opacity<1){ye(t,this.options.opacity)}if(nt&&!ot){t.style.WebkitBackfaceVisibility="hidden"}},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t);var o=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(o);if(this.createTile.length<2){C(s(this._tileReady,this,t,null,o))}Le(o,i);this._tiles[n]={el:o,coords:t,current:true};e.appendChild(o);this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(e){this.fire("tileerror",{error:e,tile:i,coords:t})}var n=this._tileCoordsToKey(t);i=this._tiles[n];if(!i){return}i.loaded=+new Date;if(this._map._fadeAnimated){ye(i.el,0);T(this._fadeFrame);this._fadeFrame=C(this._updateOpacity,this)}else{i.active=true;this._pruneTiles()}if(!e){me(i.el,"leaflet-tile-loaded");this.fire("tileload",{tile:i.el,coords:t})}if(this._noTilesToLoad()){this._loading=false;this.fire("load");if(tt||!this._map._fadeAnimated){C(this._pruneTiles,this)}else{setTimeout(s(this._pruneTiles,this),250)}}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);e.z=t.z;return e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new B(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles){if(!this._tiles[t].loaded){return false}}return true}});function zn(t){return new On(t)}var En=On.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:false,zoomReverse:false,detectRetina:false,crossOrigin:false},initialize:function(t,e){this._url=t;e=p(this,e);if(e.detectRetina&&Ct&&e.maxZoom>0){e.tileSize=Math.floor(e.tileSize/2);if(!e.zoomReverse){e.zoomOffset++;e.maxZoom--}else{e.zoomOffset--;e.minZoom++}e.minZoom=Math.max(0,e.minZoom)}if(typeof e.subdomains==="string"){e.subdomains=e.subdomains.split("")}if(!nt){this.on("tileunload",this._onTileRemove)}},setUrl:function(t,e){if(this._url===t&&e===undefined){e=true}this._url=t;if(!e){this.redraw()}return this},createTile:function(t,e){var i=document.createElement("img");Oe(i,"load",s(this._tileOnLoad,this,e,i));Oe(i,"error",s(this._tileOnError,this,e,i));if(this.options.crossOrigin||this.options.crossOrigin===""){i.crossOrigin=this.options.crossOrigin===true?"":this.options.crossOrigin}i.alt="";i.setAttribute("role","presentation");i.src=this.getTileUrl(t);return i},getTileUrl:function(t){var e={r:Ct?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;if(this.options.tms){e["y"]=i}e["-y"]=i}return g(this._url,l(e,this.options))},_tileOnLoad:function(t,e){if(tt){setTimeout(s(t,this,null,e),0)}else{t(null,e)}},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;if(n&&e.getAttribute("src")!==n){e.src=n}t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;if(i){t=e-t}return t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles){if(this._tiles[t].coords.z!==this._tileZoom){e=this._tiles[t].el;e.onload=u;e.onerror=u;if(!e.complete){e.src=y;ue(e);delete this._tiles[t]}}}},_removeTile:function(t){var e=this._tiles[t];if(!e){return}if(!at){e.el.setAttribute("src",y)}return On.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!this._map||i&&i.getAttribute("src")===y){return}return On.prototype._tileReady.call(this,t,e,i)}});function Bn(t,e){return new En(t,e)}var Fn=En.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:false,version:"1.1.1"},options:{crs:null,uppercase:false},initialize:function(t,e){this._url=t;var i=l({},this.defaultWmsParams);for(var n in e){if(!(n in this.options)){i[n]=e[n]}}e=p(this,e);var o=e.detectRetina&&Ct?2:1;var r=this.getTileSize();i.width=r.x*o;i.height=r.y*o;this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code;En.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=F(i.project(e[0]),i.project(e[1])),o=n.min,r=n.max,a=(this._wmsVersion>=1.3&&this._crs===Ni?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),s=En.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){l(this.wmsParams,t);if(!e){this.redraw()}return this}});function Rn(t,e){return new Fn(t,e)}En.WMS=Fn,Bn.wms=Rn;var Nn=Zi.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t);h(this);this._layers=this._layers||{}},onAdd:function(){if(!this._container){this._initContainer();if(this._zoomAnimated){me(this._container,"leaflet-zoom-animated")}}this.getPane().appendChild(this._container);this._update();this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this);this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};if(this._zoomAnimated){t.zoomanim=this._onAnimZoom}return t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=ke(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(r),l=o.multiplyBy(-i).add(n).add(o).subtract(s);if(vt){we(this._container,l,i)}else{Le(this._container,l)}},_reset:function(){this._update();this._updateTransform(this._center,this._zoom);for(var t in this._layers){this._layers[t]._reset()}},_onZoomEnd:function(){for(var t in this._layers){this._layers[t]._project()}},_updatePaths:function(){for(var t in this._layers){this._layers[t]._update()}},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new B(i,i.add(e.multiplyBy(1+t*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}}),Un=Nn.extend({getEvents:function(){var t=Nn.prototype.getEvents.call(this);t.viewprereset=this._onViewPreReset;return t},_onViewPreReset:function(){this._postponeUpdatePaths=true},onAdd:function(){Nn.prototype.onAdd.call(this);this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Oe(t,"mousemove",this._onMouseMove,this);Oe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this);Oe(t,"mouseout",this._handleMouseOut,this);this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest);delete this._ctx;ue(this._container);Ee(this._container);delete this._container},_updatePaths:function(){if(this._postponeUpdatePaths){return}var t;this._redrawBounds=null;for(var e in this._layers){t=this._layers[e];t._update()}this._redraw()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}Nn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Ct?2:1;Le(e,t.min);e.width=n*i.x;e.height=n*i.y;e.style.width=i.x+"px";e.style.height=i.y+"px";if(Ct){this._ctx.scale(2,2)}this._ctx.translate(-t.min.x,-t.min.y);this.fire("update")},_reset:function(){Nn.prototype._reset.call(this);if(this._postponeUpdatePaths){this._postponeUpdatePaths=false;this._updatePaths()}},_initPath:function(t){this._updateDashArray(t);this._layers[h(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};if(this._drawLast){this._drawLast.next=e}this._drawLast=e;this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order;var i=e.next;var n=e.prev;if(i){i.prev=n}else{this._drawLast=n}if(n){n.next=i}else{this._drawFirst=i}delete t._order;delete this._layers[h(t)];this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t);t._project();t._update();this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t);this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray==="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],n,o;for(o=0;o<e.length;o++){n=Number(e[o]);if(isNaN(n)){return}i.push(n)}t.options._dashArray=i}else{t.options._dashArray=t.options.dashArray}},_requestRedraw:function(t){if(!this._map){return}this._extendRedrawBounds(t);this._redrawRequest=this._redrawRequest||C(this._redraw,this)},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B;this._redrawBounds.extend(t._pxBounds.min.subtract([e,e]));this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null;if(this._redrawBounds){this._redrawBounds.min._floor();this._redrawBounds.max._ceil()}this._clear();this._draw();this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else{this._ctx.save();this._ctx.setTransform(1,0,0,1,0,0);this._ctx.clearRect(0,0,this._container.width,this._container.height);this._ctx.restore()}},_draw:function(){var t,e=this._redrawBounds;this._ctx.save();if(e){var i=e.getSize();this._ctx.beginPath();this._ctx.rect(e.min.x,e.min.y,i.x,i.y);this._ctx.clip()}this._drawing=true;for(var n=this._drawFirst;n;n=n.next){t=n.layer;if(!e||t._pxBounds&&t._pxBounds.intersects(e)){t._updatePath()}}this._drawing=false;this._ctx.restore()},_updatePoly:function(t,e){if(!this._drawing){return}var i,n,o,r,a=t._parts,s=a.length,l=this._ctx;if(!s){return}l.beginPath();for(i=0;i<s;i++){for(n=0,o=a[i].length;n<o;n++){r=a[i][n];l[n?"lineTo":"moveTo"](r.x,r.y)}if(e){l.closePath()}}this._fillStroke(l,t)},_updateCircle:function(t){if(!this._drawing||t._empty()){return}var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;if(o!==1){i.save();i.scale(1,o)}i.beginPath();i.arc(e.x,e.y/o,n,0,Math.PI*2,false);if(o!==1){i.restore()}this._fillStroke(i,t)},_fillStroke:function(t,e){var i=e.options;if(i.fill){t.globalAlpha=i.fillOpacity;t.fillStyle=i.fillColor||i.color;t.fill(i.fillRule||"evenodd")}if(i.stroke&&i.weight!==0){if(t.setLineDash){t.setLineDash(e.options&&e.options._dashArray||[])}t.globalAlpha=i.opacity;t.lineWidth=i.weight;t.strokeStyle=i.color;t.lineCap=i.lineCap;t.lineJoin=i.lineJoin;t.stroke()}},_onClick:function(t){var e=this._map.mouseEventToLayerPoint(t),i,n;for(var o=this._drawFirst;o;o=o.next){i=o.layer;if(i.options.interactive&&i._containsPoint(e)){if(!(t.type==="click"||t.type!=="preclick")||!this._map._draggableMoved(i)){n=i}}}if(n){Je(t);this._fireEvent([n],t)}},_onMouseMove:function(t){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom){return}var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)},_handleMouseOut:function(t){var e=this._hoveredLayer;if(e){ge(this._container,"leaflet-interactive");this._fireEvent([e],t,"mouseout");this._hoveredLayer=null;this._mouseHoverThrottled=false}},_handleMouseHover:function(t,e){if(this._mouseHoverThrottled){return}var i,n;for(var o=this._drawFirst;o;o=o.next){i=o.layer;if(i.options.interactive&&i._containsPoint(e)){n=i}}if(n!==this._hoveredLayer){this._handleMouseOut(t);if(n){me(this._container,"leaflet-interactive");this._fireEvent([n],t,"mouseover");this._hoveredLayer=n}}if(this._hoveredLayer){this._fireEvent([this._hoveredLayer],t)}this._mouseHoverThrottled=true;setTimeout(s(function(){this._mouseHoverThrottled=false},this),32)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(!e){return}var i=e.next;var n=e.prev;if(i){i.prev=n}else{return}if(n){n.next=i}else if(i){this._drawFirst=i}e.prev=this._drawLast;this._drawLast.next=e;e.next=null;this._drawLast=e;this._requestRedraw(t)},_bringToBack:function(t){var e=t._order;if(!e){return}var i=e.next;var n=e.prev;if(n){n.next=i}else{return}if(i){i.prev=n}else if(n){this._drawLast=n}e.prev=null;e.next=this._drawFirst;this._drawFirst.prev=e;this._drawFirst=e;this._requestRedraw(t)}});function Zn(t){return Pt?new Un(t):null}var Wn=function(){try{document.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),jn={_initContainer:function(){this._container=he("div","leaflet-vml-container")},_update:function(){if(this._map._animatingZoom){return}Nn.prototype._update.call(this);this.fire("update")},_initPath:function(t){var e=t._container=Wn("shape");me(e,"leaflet-vml-shape "+(this.options.className||""));e.coordsize="1 1";t._path=Wn("path");e.appendChild(t._path);this._updateStyle(t);this._layers[h(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e);if(t.options.interactive){t.addInteractiveTarget(e)}},_removePath:function(t){var e=t._container;ue(e);t.removeInteractiveTarget(e);delete this._layers[h(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke;o.filled=!!n.fill;if(n.stroke){if(!e){e=t._stroke=Wn("stroke")}o.appendChild(e);e.weight=n.weight+"px";e.color=n.color;e.opacity=n.opacity;if(n.dashArray){e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," ")}else{e.dashStyle=""}e.endcap=n.lineCap.replace("butt","flat");e.joinstyle=n.lineJoin}else if(e){o.removeChild(e);t._stroke=null}if(n.fill){if(!i){i=t._fill=Wn("fill")}o.appendChild(i);i.color=n.fillColor||n.color;i.opacity=n.fillOpacity}else if(i){o.removeChild(i);t._fill=null}},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){de(t._container)},_bringToBack:function(t){pe(t._container)}},Hn=At?Wn:Y,Gn=Nn.extend({getEvents:function(){var t=Nn.prototype.getEvents.call(this);t.zoomstart=this._onZoomStart;return t},_initContainer:function(){this._container=Hn("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=Hn("g");this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ue(this._container);Ee(this._container);delete this._container;delete this._rootGroup;delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}Nn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;if(!this._svgSize||!this._svgSize.equals(e)){this._svgSize=e;i.setAttribute("width",e.x);i.setAttribute("height",e.y)}Le(i,t.min);i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" "));this.fire("update")},_initPath:function(t){var e=t._path=Hn("path");if(t.options.className){me(e,t.options.className)}if(t.options.interactive){me(e,"leaflet-interactive")}this._updateStyle(t);this._layers[h(t)]=t},_addPath:function(t){if(!this._rootGroup){this._initContainer()}this._rootGroup.appendChild(t._path);t.addInteractiveTarget(t._path)},_removePath:function(t){ue(t._path);t.removeInteractiveTarget(t._path);delete this._layers[h(t)]},_updatePath:function(t){t._project();t._update()},_updateStyle:function(t){var e=t._path,i=t.options;if(!e){return}if(i.stroke){e.setAttribute("stroke",i.color);e.setAttribute("stroke-opacity",i.opacity);e.setAttribute("stroke-width",i.weight);e.setAttribute("stroke-linecap",i.lineCap);e.setAttribute("stroke-linejoin",i.lineJoin);if(i.dashArray){e.setAttribute("stroke-dasharray",i.dashArray)}else{e.removeAttribute("stroke-dasharray")}if(i.dashOffset){e.setAttribute("stroke-dashoffset",i.dashOffset)}else{e.removeAttribute("stroke-dashoffset")}}else{e.setAttribute("stroke","none")}if(i.fill){e.setAttribute("fill",i.fillColor||i.color);e.setAttribute("fill-opacity",i.fillOpacity);e.setAttribute("fill-rule",i.fillRule||"evenodd")}else{e.setAttribute("fill","none")}},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n=Math.max(Math.round(t._radiusY),1)||i,o="a"+i+","+n+" 0 1,0 ";var r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+i*2+",0 "+o+-i*2+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){de(t._path)},_bringToBack:function(t){pe(t._path)}});if(At){Gn.include(jn)}function Vn(t){return St||At?new Gn(t):null}ti.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;if(!e){e=this._renderer=this._createRenderer()}if(!this.hasLayer(e)){this.addLayer(e)}return e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===undefined){return false}var e=this._paneRenderers[t];if(e===undefined){e=this._createRenderer({pane:t});this._paneRenderers[t]=e}return e},_createRenderer:function(t){return this.options.preferCanvas&&Zn(t)||Vn(t)}});var qn=an.extend({initialize:function(t,e){an.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){t=N(t);return[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Kn(t,e){return new qn(t,e)}Gn.create=Hn,Gn.pointsToPath=X,ln.geometryToLayer=hn,ln.coordsToLatLng=cn,ln.coordsToLatLngs=dn,ln.latLngToCoords=pn,ln.latLngsToCoords=fn,ln.getFeature=mn,ln.asFeature=gn,ti.mergeOptions({boxZoom:true});var Jn=di.extend({initialize:function(t){this._map=t;this._container=t._container;this._pane=t._panes.overlayPane;this._resetStateTimeout=0;t.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ue(this._pane);delete this._pane},_resetState:function(){this._resetStateTimeout=0;this._moved=false},_clearDeferredResetState:function(){if(this._resetStateTimeout!==0){clearTimeout(this._resetStateTimeout);this._resetStateTimeout=0}},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1){return false}this._clearDeferredResetState();this._resetState();ie();Ce();this._startPoint=this._map.mouseEventToContainerPoint(t);Oe(document,{contextmenu:He,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){if(!this._moved){this._moved=true;this._box=he("div","leaflet-zoom-box",this._container);me(this._container,"leaflet-crosshair");this._map.fire("boxzoomstart")}this._point=this._map.mouseEventToContainerPoint(t);var e=new B(this._point,this._startPoint),i=e.getSize();Le(this._box,e.min);this._box.style.width=i.x+"px";this._box.style.height=i.y+"px"},_finish:function(){if(this._moved){ue(this._box);ge(this._container,"leaflet-crosshair")}ne();Te();Ee(document,{contextmenu:He,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(t.which!==1&&t.button!==1){return}this._finish();if(!this._moved){return}this._clearDeferredResetState();this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})},_onKeyDown:function(t){if(t.keyCode===27){this._finish()}}});ti.addInitHook("addHandler","boxZoom",Jn),ti.mergeOptions({doubleClickZoom:true});var Yn=di.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;if(e.options.doubleClickZoom==="center"){e.setZoom(o)}else{e.setZoomAround(t.containerPoint,o)}}});ti.addInitHook("addHandler","doubleClickZoom",Yn),ti.mergeOptions({dragging:true,inertia:!ot,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:false,maxBoundsViscosity:0});var Xn=di.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new vi(t._mapPane,t._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);if(t.options.worldCopyJump){this._draggable.on("predrag",this._onPreDragWrap,this);t.on("zoomend",this._onZoomEnd,this);t.whenReady(this._onZoomEnd,this)}}me(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){ge(this._map._container,"leaflet-grab");ge(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;t._stop();if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=N(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}t.fire("movestart").fire("dragstart");if(t.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i);this._times.push(e);this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){while(this._positions.length>1&&t-this._times[0]>50){this._positions.shift();this._times.shift()}},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit){return}var t=this._draggable._newPos.subtract(this._draggable._startPos);var e=this._offsetLimit;if(t.x<e.min.x){t.x=this._viscousLimit(t.x,e.min.x)}if(t.y<e.min.y){t.y=this._viscousLimit(t.y,e.min.y)}if(t.x>e.max.x){t.x=this._viscousLimit(t.x,e.max.x)}if(t.y>e.max.y){t.y=this._viscousLimit(t.y,e.max.y)}this._draggable._newPos=this._draggable._startPos.add(t)},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;e.fire("dragend",t);if(n){e.fire("moveend")}else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=s.multiplyBy(h/l),c=h/(i.inertiaDeceleration*a),d=u.multiplyBy(-c/2).round();if(!d.x&&!d.y){e.fire("moveend")}else{d=e._limitOffset(d,e.options.maxBounds);C(function(){e.panBy(d,{duration:c,easeLinearity:a,noMoveStart:true,animate:true})})}}}});ti.addInitHook("addHandler","dragging",Xn),ti.mergeOptions({keyboard:true,keyboardPanDelta:80});var Qn=di.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t;this._setPanDelta(t.options.keyboardPanDelta);this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;if(t.tabIndex<=0){t.tabIndex="0"}Oe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();Ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused){return}var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus();window.scrollTo(n,i)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,n,o;for(n=0,o=i.left.length;n<o;n++){e[i.left[n]]=[-1*t,0]}for(n=0,o=i.right.length;n<o;n++){e[i.right[n]]=[t,0]}for(n=0,o=i.down.length;n<o;n++){e[i.down[n]]=[0,t]}for(n=0,o=i.up.length;n<o;n++){e[i.up[n]]=[0,-1*t]}},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,n,o;for(n=0,o=i.zoomIn.length;n<o;n++){e[i.zoomIn[n]]=t}for(n=0,o=i.zoomOut.length;n<o;n++){e[i.zoomOut[n]]=-t}},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(t.altKey||t.ctrlKey||t.metaKey){return}var e=t.keyCode,i=this._map,n;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress){n=this._panKeys[e];if(t.shiftKey){n=E(n).multiplyBy(3)}i.panBy(n);if(i.options.maxBounds){i.panInsideBounds(i.options.maxBounds)}}}else if(e in this._zoomKeys){i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e])}else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey){i.closePopup()}else{return}He(t)}});ti.addInitHook("addHandler","keyboard",Qn),ti.mergeOptions({scrollWheelZoom:true,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $n=di.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qe(t);var i=this._map.options.wheelDebounceTime;this._delta+=e;this._lastMousePos=this._map.mouseEventToContainerPoint(t);if(!this._startTime){this._startTime=+new Date}var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(s(this._performZoom,this),n);He(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(o/i)*i:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0;this._startTime=null;if(!a){return}if(t.options.scrollWheelZoom==="center"){t.setZoom(e+a)}else{t.setZoomAround(this._lastMousePos,e+a)}}});ti.addInitHook("addHandler","scrollWheelZoom",$n),ti.mergeOptions({tap:true,tapTolerance:15});var to=di.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(!t.touches){return}je(t);this._fireClick=true;if(t.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return}var e=t.touches[0],i=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY);if(i.tagName&&i.tagName.toLowerCase()==="a"){me(i,"leaflet-active")}this._holdTimeout=setTimeout(s(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",e)}},this),1e3);this._simulateEvent("mousedown",e);Oe(document,{touchmove:this._onMove,touchend:this._onUp},this)},_onUp:function(t){clearTimeout(this._holdTimeout);Ee(document,{touchmove:this._onMove,touchend:this._onUp},this);if(this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;if(i&&i.tagName&&i.tagName.toLowerCase()==="a"){ge(i,"leaflet-active")}this._simulateEvent("mouseup",e);if(this._isTapValid()){this._simulateEvent("click",e)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY);this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=true;e.target._simulatedClick=true;i.initMouseEvent(t,true,true,window,1,e.screenX,e.screenY,e.clientX,e.clientY,false,false,false,false,0,null);e.target.dispatchEvent(i)}});if(Lt&&(!wt||ut)){ti.addInitHook("addHandler","tap",to)}ti.mergeOptions({touchZoom:Lt&&!ot,bounceAtZoomLimits:true});var eo=di.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom");Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ge(this._map._container,"leaflet-touch-zoom");Ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming){return}var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2);this._startLatLng=e.containerPointToLatLng(this._centerPoint);if(e.options.touchZoom!=="center"){this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))}this._startDist=i.distanceTo(n);this._startZoom=e.getZoom();this._moved=false;this._zooming=true;e._stop();Oe(document,"touchmove",this._onTouchMove,this);Oe(document,"touchend",this._onTouchEnd,this);je(t)},_onTouchMove:function(t){if(!t.touches||t.touches.length!==2||!this._zooming){return}var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;this._zoom=e.getScaleZoom(o,this._startZoom);if(!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)){this._zoom=e._limitZoom(this._zoom)}if(e.options.touchZoom==="center"){this._center=this._startLatLng;if(o===1){return}}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(o===1&&r.x===0&&r.y===0){return}this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}if(!this._moved){e._moveStart(true,false);this._moved=true}T(this._animRequest);var a=s(e._move,e,this._center,this._zoom,{pinch:true,round:false});this._animRequest=C(a,this,true);je(t)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}this._zooming=false;T(this._animRequest);Ee(document,"touchmove",this._onTouchMove,this);Ee(document,"touchend",this._onTouchEnd,this);if(this._map.options.zoomAnimation){this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),true,this._map.options.zoomSnap)}else{this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}});ti.addInitHook("addHandler","touchZoom",eo),ti.BoxZoom=Jn,ti.DoubleClickZoom=Yn,ti.Drag=Xn,ti.Keyboard=Qn,ti.ScrollWheelZoom=$n,ti.Tap=to,ti.TouchZoom=eo,t.version=e,t.Control=ii,t.control=ni,t.Browser=Dt,t.Evented=D,t.Mixin=pi,t.Util=P,t.Class=S,t.Handler=di,t.extend=l,t.bind=s,t.stamp=h,t.setOptions=p,t.DomEvent=Qe,t.DomUtil=De,t.PosAnimation=$e,t.Draggable=vi,t.LineUtil=Di,t.PolyUtil=zi,t.Point=O,t.point=E,t.Bounds=B,t.bounds=F,t.Transformation=V,t.transformation=q,t.Projection=Fi,t.LatLng=U,t.latLng=Z,t.LatLngBounds=R,t.latLngBounds=N,t.CRS=W,t.GeoJSON=ln,t.geoJSON=_n,t.geoJson=yn,t.Layer=Zi,t.LayerGroup=Wi,t.layerGroup=ji,t.FeatureGroup=Hi,t.featureGroup=Gi,t.ImageOverlay=xn,t.imageOverlay=bn,t.VideoOverlay=wn,t.videoOverlay=Ln,t.SVGOverlay=kn,t.svgOverlay=Mn,t.DivOverlay=Cn,t.Popup=Tn,t.popup=Pn,t.Tooltip=Sn,t.tooltip=An,t.Icon=Vi,t.icon=qi,t.DivIcon=In,t.divIcon=Dn,t.Marker=Yi,t.marker=Xi,t.TileLayer=En,t.tileLayer=Bn,t.GridLayer=On,t.gridLayer=zn,t.SVG=Gn,t.svg=Vn,t.Renderer=Nn,t.Canvas=Un,t.canvas=Zn,t.Path=Qi,t.CircleMarker=$i,t.circleMarker=tn,t.Circle=en,t.circle=nn,t.Polyline=on,t.polyline=rn,t.Polygon=an,t.polygon=sn,t.Rectangle=qn,t.rectangle=Kn,t.Map=ti,t.map=ei;var io=window.L;t.noConflict=function(){window.L=io;return this},window.L=t}(e)},function(t,e,i){"use strict";i.d(e,"b",function(){return W}),i.d(e,"a",function(){return st}),i.d(e,"c",function(){return lt});i(3);var n=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,o=""===document.documentElement.style.pointerEvents,s={cors:n,pointerEvents:o},r={attributionWidthOffset:55},v=i(0),a=0;function l(t){var e,i,n,o="";for(var r in t.f=t.f||"json",t){t.hasOwnProperty(r)&&(e=t[r],i=Object.prototype.toString.call(e),o.length&&(o+="&"),n="[object Array]"===i?"[object Object]"===Object.prototype.toString.call(e[0])?JSON.stringify(e):e.join(","):"[object Object]"===i?JSON.stringify(e):"[object Date]"===i?e.valueOf():e,o+=encodeURIComponent(r)+"="+encodeURIComponent(n))}return o}function h(n,o){var r=new window.XMLHttpRequest;return r.onerror=function(t){r.onreadystatechange=v.Util.falseFn,n.call(o,{error:{code:500,message:"XMLHttpRequest error"}},null)},r.onreadystatechange=function(){var e,i;if(4===r.readyState){try{e=JSON.parse(r.responseText)}catch(t){e=null,i={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!i&&e.error&&(i=e.error,e=null),r.onerror=v.Util.falseFn,n.call(o,i,e)}},r.ontimeout=function(){this.onerror()},r}function u(t,e,i,n){var o=h(i,n);return o.open("GET",t+"?"+l(e),!0),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout),o.send(null),o}function c(t,e,i,n){var o=l(e),r=h(i,n),a=(t+"?"+o).length;if(a<=2e3&&s.cors?r.open("GET",t+"?"+o):2e3<a&&s.cors&&(r.open("POST",t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=n&&void 0!==n.options&&(r.timeout=n.options.timeout),a<=2e3&&s.cors)r.send(null);else{if(!(2e3<a&&s.cors))return a<=2e3&&!s.cors?d(t,e,i,n):void f("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");r.send(o)}return r}function d(t,e,n,o){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var r="c"+a;e.callback="window._EsriLeafletCallbacks."+r,window._EsriLeafletCallbacks[r]=function(t){var e,i;!0!==window._EsriLeafletCallbacks[r]&&("[object Object]"!==(i=Object.prototype.toString.call(t))&&"[object Array]"!==i&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),n.call(o,e,t),window._EsriLeafletCallbacks[r]=!0)};var i=v.DomUtil.create("script",null,document.body);return i.type="text/javascript",i.src=t+"?"+l(e),i.id=r,i.onerror=function(t){t&&!0!==window._EsriLeafletCallbacks[r]&&(n.call(o,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[r]=!0)},v.DomUtil.addClass(i,"esri-leaflet-jsonp"),a++,{id:r,url:i.src,abort:function(){window._EsriLeafletCallbacks._callback[r]({code:0,message:"Request aborted."})}}}var p=s.cors?u:d;function f(){console&&console.warn&&console.warn.apply(console,arguments)}p.CORS=u,p.JSONP=d;function g(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(function(t,e,i,n){var o=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),r=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),a=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!=a){var s=o/a,l=r/a;if(0<=s&&s<=1&&0<=l&&l<=1)return!0}return!1}(t[i],t[i+1],e[n],e[n+1]))return!0;return!1}function _(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t}function y(t){for(var e,i=0,n=0,o=t.length,r=t[n];n<o-1;n++)i+=((e=t[n+1])[0]-r[0])*(e[1]+r[1]),r=e;return 0<=i}function m(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function x(t){for(var e,i,n=[],o=[],r=0;r<t.length;r++){var a,s=_(t[r].slice(0));s.length<4||(y(s)?(a=[s.slice().reverse()],n.push(a)):o.push(s.slice().reverse()))}for(var l,h,u,c,d=[];o.length;){i=o.pop();for(var p=!1,f=n.length-1;0<=f;f--)if(e=n[f][0],c=u=void 0,u=g(l=e,h=i),c=function(t,e){for(var i=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(t[n][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[r][0]-t[n][0])*(e[1]-t[n][1])/(t[r][1]-t[n][1])+t[n][0]&&(i=!i);return i}(l,h[0]),!(u||!c)){n[f].push(i),p=!0;break}p||d.push(i)}for(;d.length;){i=d.pop();var m=!1;for(f=n.length-1;0<=f;f--)if(e=n[f][0],g(e,i)){n[f].push(i),m=!0;break}m||n.push([i.reverse()])}return 1===n.length?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}function b(t){var e=[],i=t.slice(0),n=_(i.shift().slice(0));if(4<=n.length){y(n)||n.reverse(),e.push(n);for(var o=0;o<i.length;o++){var r=_(i[o].slice(0));4<=r.length&&(y(r)&&r.reverse(),e.push(r))}}return e}var w={request:c,get:p,post:function(t,e,i,n){var o=h(i,n);return o.open("POST",t),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(l(e)),o}},L=function t(e,i){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var o=0;o<e.features.length;o++)n.features.push(t(e.features[o],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=x(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?m(e.attributes):null,e.attributes))try{n.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<i.length;n++){var o=i[n];if(o in t&&("string"==typeof t[o]||"number"==typeof t[o]))return t[o]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},k=function t(e,i){i=i||"OBJECTID";var n,o={wkid:4326},r={};switch(e.type){case"Point":r.x=e.coordinates[0],r.y=e.coordinates[1],r.spatialReference=o;break;case"MultiPoint":r.points=e.coordinates.slice(0),r.spatialReference=o;break;case"LineString":r.paths=[e.coordinates.slice(0)],r.spatialReference=o;break;case"MultiLineString":r.paths=e.coordinates.slice(0),r.spatialReference=o;break;case"Polygon":r.rings=b(e.coordinates.slice(0)),r.spatialReference=o;break;case"MultiPolygon":r.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=b(t[i]),o=n.length-1;0<=o;o--){var r=n[o].slice(0);e.push(r)}return e}(e.coordinates.slice(0)),r.spatialReference=o;break;case"Feature":e.geometry&&(r.geometry=t(e.geometry,i)),r.attributes=e.properties?m(e.properties):{},e.id&&(r.attributes[i]=e.id);break;case"FeatureCollection":for(r=[],n=0;n<e.features.length;n++)r.push(t(e.features[n],i));break;case"GeometryCollection":for(r=[],n=0;n<e.geometries.length;n++)r.push(t(e.geometries[n],i))}return r};function M(t,e){return k(t,e)}function C(t,e){return L(t,e)}function T(t){if("NaN"===t.xmin||"NaN"===t.ymin||"NaN"===t.xmax||"NaN"===t.ymax)return null;var e=Object(v.latLng)(t.ymin,t.xmin),i=Object(v.latLng)(t.ymax,t.xmax);return Object(v.latLngBounds)(e,i)}function P(t){return{xmin:(t=Object(v.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var S=/^(OBJECTID|FID|OID|ID)$/i;function A(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(S)){e=t.fields[i].name;break}}return e}function I(t){for(var e in t.attributes)if(e.match(S))return e}function D(t,e){var i=t.features||t.results,n=i.length,o=e||A(t),r={type:"FeatureCollection",features:[]};if(n)for(var a=i.length-1;0<=a;a--){var s=C(i[a],o||I(i[a]));r.features.push(s)}return r}function O(t){return"/"!==(t=v.Util.trim(t))[t.length-1]&&(t+="/"),t}function z(t){var e;return-1!==t.url.indexOf("?")&&(t.requestParams=t.requestParams||{},e=t.url.substring(t.url.indexOf("?")+1),t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')),t.url=O(t.url.split("?")[0]),t}function E(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function B(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function F(t){return t.getSize().x-r.attributionWidthOffset+"px"}function R(e){var t,i;e.attributionControl&&!e.attributionControl._esriAttributionAdded&&(e.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>'),(t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t),v.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),(i=document.createElement("style")).type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+F(e)+";}",document.getElementsByTagName("head")[0].appendChild(i),v.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution"),e.on("resize",function(t){e.attributionControl._container.style.maxWidth=F(t.target)}),e.attributionControl._esriAttributionAdded=!0)}function N(t){var e={geometry:null,geometryType:null};return t instanceof v.LatLngBounds?(e.geometry=P(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof v.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof v.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=M(t),e.geometryType=B(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=M(t),e.geometryType=B(t.type),e):void f("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function U(t,l){s.cors&&c(t,{},v.Util.bind(function(t,e){if(!t){l._esriAttributions=[];for(var i=0;i<e.contributors.length;i++)for(var n=e.contributors[i],o=0;o<n.coverageAreas.length;o++){var r=n.coverageAreas[o],a=Object(v.latLng)(r.bbox[0],r.bbox[1]),s=Object(v.latLng)(r.bbox[2],r.bbox[3]);l._esriAttributions.push({attribution:n.attribution,score:r.score,bounds:Object(v.latLngBounds)(a,s),minZoom:r.zoomMin,maxZoom:r.zoomMax})}l._esriAttributions.sort(function(t,e){return e.score-t.score}),Z({target:l})}},this))}function Z(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var n=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(n&&i){for(var o="",r=e.getBounds(),a=Object(v.latLngBounds)(r.getSouthWest().wrap(),r.getNorthEast().wrap()),s=e.getZoom(),l=0;l<i.length;l++){var h=i[l],u=h.attribution;!o.match(u)&&h.bounds.intersects(a)&&s>=h.minZoom&&s<=h.maxZoom&&(o+=", "+u)}o=o.substr(2),n.innerHTML=o,n.style.maxWidth=F(e),e.fire("attributionupdated",{attribution:o})}}}var W={warn:f,cleanUrl:O,getUrlParams:z,isArcgisOnline:E,geojsonTypeToArcGIS:B,responseToFeatureCollection:D,geojsonToArcGIS:M,arcgisToGeoJSON:C,boundsToExtent:P,extentToBounds:T,calcAttributionWidth:F,setEsriAttribution:R,_setGeometry:N,_getAttributionData:U,_updateMapAttribution:Z,_findIdAttributeFromFeature:I,_findIdAttributeFromResponse:A},j=v.Class.extend({options:{proxy:!1,useCors:n},generateSetter:function(e,t){return v.Util.bind(function(t){return this.params[e]=t,this},t)},initialize:function(t){if(t.request&&t.options?(this._service=t,v.Util.setOptions(this,t.options)):(v.Util.setOptions(this,t),this.options.url=O(t.url)),this.params=v.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&v.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,n,o){var r=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?w[t](r,i,n,o):w.get.JSONP(r,i,n,o)}});var H=j.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=Object(v.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSr=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(i,n){return this._cleanParams(),this.options.isModern||E(this.options.url)?(this.params.f="geojson",this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e,e)},this)):this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e&&D(e),e)},this)},count:function(i,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.count,e)},t)},ids:function(i,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.objectIds,e)},t)},bounds:function(i,n){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(t,e){e&&e.extent&&T(e.extent)?i.call(n,t,T(e.extent),e):(t={message:"Invalid Bounds"},i.call(n,t,null,e))},n)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=Object(v.point)(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&f("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSr=4326;var e=N(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var G=function(t){return new H(t)},V=j.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&D(e),e)},n)}});var q=function(t){return new V(t)},K=j.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var J=K.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=P(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=Object(v.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(o,r){return this.request(function(t,e){if(t)o.call(r,t,void 0,e);else{var i=D(e);e.results=e.results.reverse();for(var n=0;n<i.features.length;n++){i.features[n].layerId=e.results[n].layerId}o.call(r,void 0,i,e)}})},_setGeometryParams:function(t){var e=N(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var Y=function(t){return new J(t)},X=K.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=Object(v.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&this._responseToGeoJSON(e),e)},this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,n=t.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(o.pixel.properties.values=t.properties.Values),i&&i.features&&(o.catalogItems=D(i),n&&n.length===o.catalogItems.features.length))for(var r=n.length-1;0<=r;r--)o.catalogItems.features[r].properties.catalogItemVisibility=n[r];return o}});var Q=function(t){return new X(t)},$=v.Evented.extend({options:{proxy:!1,useCors:n,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,v.Util.setOptions(this,t),this.options.url=O(this.options.url)},get:function(t,e,i,n){return this._request("get",t,e,i,n)},post:function(t,e,i,n){return this._request("post",t,e,i,n)},request:function(t,e,i,n){return this._request("request",t,e,i,n)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,n,o){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var r=this._createServiceCallback(t,e,i,n,o);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&v.Util.extend(i,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?w[t](a,i,r,o):w.get.JSONP(a,i,r,o)}this._requestQueue.push([t,e,i,n,o])},_createServiceCallback:function(i,n,o,r,a){return v.Util.bind(function(t,e){!t||499!==t.code&&498!==t.code||(this._authenticating=!0,this._requestQueue.push([i,n,o,r,a]),this.fire("authenticationrequired",{authenticate:v.Util.bind(this.authenticate,this)},!0),t.authenticate=v.Util.bind(this.authenticate,this)),r.call(a,t,e),t?this.fire("requesterror",{url:this.options.url+n,params:o,message:t.message,code:t.code,method:i},!0):this.fire("requestsuccess",{url:this.options.url+n,params:o,response:e,method:i},!0),this.fire("requestend",{url:this.options.url+n,params:o,method:i},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;0<=t;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var tt=$.extend({identify:function(){return Y(this)},find:function(){return q(this)},query:function(){return G(this)}});var et=function(t){return new tt(t)},it=$.extend({query:function(){return G(this)},identify:function(){return Q(this)}});var nt=function(t){return new it(t)},ot=$.extend({options:{idAttribute:"OBJECTID"},query:function(){return G(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,n,o){for(var e=t.features?t.features:[t],i=e.length-1;0<=i;i--)delete e[i].id;return t=M(t),t=1<e.length?t:[t],this.post("addFeatures",{features:t},function(t,e){var i=e&&e.addResults?1<e.addResults.length?e.addResults:e.addResults[0]:void 0;n&&n.call(o,t||e.addResults[0].error,i)},o)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,o){var e=t.features?t.features:[t];return t=M(t,this.options.idAttribute),t=1<e.length?t:[t],this.post("updateFeatures",{features:t},function(t,e){var i=e&&e.updateResults?1<e.updateResults.length?e.updateResults:e.updateResults[0]:void 0;n&&n.call(o,t||e.updateResults[0].error,i)},o)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,n,o){return this.post("deleteFeatures",{objectIds:t},function(t,e){var i=e&&e.deleteResults?1<e.deleteResults.length?e.deleteResults:e.deleteResults[0]:void 0;n&&n.call(o,t||e.deleteResults[0].error,i)},o)}});var rt=function(t){return new ot(t)},at="https:"!==window.location.protocol?"http:":"https:",st=v.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:at+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:at+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:at+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:at+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:at+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:at+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!st.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=st.TILES[t]}var n=v.Util.extend(i.options,e);v.Util.setOptions(this,n),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),v.TileLayer.prototype.initialize.call(this,i.urlTemplate,n)},onAdd:function(t){R(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&U((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",Z),v.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){t.off("moveend",Z),v.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){var t;this._map.getPane(this.options.pane)||((t=this._map.createPane(this.options.pane)).style.pointerEvents="none",t.style.zIndex=500)},getAttribution:function(){var t;return this.options.attribution&&(t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>"),t}});function lt(t,e){return new st(t,e)}var ht=v.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=z(t=v.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&0<Object.keys(t.requestParams).length?v.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=et(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),v.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return v.Util.template(this.tileUrl,v.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return v.DomEvent.on(i,"load",v.Util.bind(this._tileOnLoad,this,e,i)),v.DomEvent.on(i,"error",v.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",function(){i.src=this.getTileUrl(t)},this),i},onAdd:function(h){R(h),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){var i=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&h.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,h.attributionControl.addAttribution(this.getAttribution())),h.options.crs!==v.CRS.EPSG3857||102100!==i&&3857!==i)h.options.crs&&h.options.crs.code&&-1<h.options.crs.code.indexOf(i)||f("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var n=e.tileInfo.lods,o=ht.MercatorZoomLevels,r=0;r<n.length;r++){var a=n[r];for(var s in o){var l=o[s];if(this._withinPercentage(a.resolution,l,this.options.zoomOffsetAllowance)){this._lodMap[s]=a.level;break}}}this.fire("lodmap")}}},this),v.TileLayer.prototype.onAdd.call(this,h)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var ut=v.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,v.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===v.CRS.EPSG3857?v.ImageOverlay.prototype._reset.call(this):v.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),ct=v.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:n,attribution:null,interactive:!1,alt:""},onAdd:function(i){R(i),this.options.zIndex&&(this.options.position=null),this._update=v.Util.throttle(this._update,this.options.updateInterval,this),i.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?i.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&i.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,i.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Object(v.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._currentImage._image&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,n,e){if(this._map){if(e&&(t="data:"+e+";base64,"+t),!t)return;var o=new ut(t,n,{opacity:0,crossOrigin:this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(t){var e,i;o.off("error",r,this),this._map&&(e=t.target,i=this._currentImage,e._bounds.equals(n)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),i&&this._map&&this._map.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):this._map.removeLayer(e)),this.fire("load",{bounds:n})};o.once("error",function(){this._map.removeLayer(o),this.fire("error"),o.off("load",r,this)},this),o.once("load",r,this)}},_update:function(){var t,e,i;this._map&&(t=this._map.getZoom(),e=this._map.getBounds(),this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(t>this.options.maxZoom||t<this.options.minZoom?this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null):(i=this._buildExportParams(),v.Util.extend(i,this.options.requestParams),i?(this._requestExport(i,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null))))},_renderPopup:function(t,e,i,n){var o;t=Object(v.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)&&((o=this._popupFunction(e,i,n))&&this._popup.setLatLng(t).setContent(o).openOn(this._map))},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),n=this._map.options.crs.project(i),o=this._map.options.crs.project(e),r=Object(v.bounds)(n,o);return[r.getBottomLeft().x,r.getBottomLeft().y,r.getTopRight().x,r.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),n=this._map.unproject(t.getTopRight()),o=this._map.latLngToLayerPoint(n).y,r=this._map.latLngToLayerPoint(i).y;return(0<o||r<e.y)&&(e.y=r-o),e.x+","+e.y}});ct.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=z(t),this.service=nt(t),this.service.addEventParent(this),v.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return v.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return v.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(n){var t=v.Util.bind(function(t,e,i){t||setTimeout(v.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=this.identify().at(n.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),0!==this.options.noData&&!this.options.noData||(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,i){var e;"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),this._renderImage(e.href,i))},this):(t.f="image",e=this.options.url+"exportImage"+v.Util.getParamString(t),this.options.proxy&&(e=this.options.proxy+"?"+e),this._renderImage(e,i))}});ct.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=z(t),this.service=et(t),this.service.addEventParent(this),v.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(n){var t=v.Util.bind(function(t,e,i){t||setTimeout(v.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=this.options.popup?this.options.popup.on(this._map).at(n.latlng):this.identify().on(this._map).at(n.latlng);if(e.params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var i in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(i)&&e.layerDef(i,this.options.layerDefs[i]);e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,i){var e;"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&e.href&&(e.href+="?token="+this.options.token),this.options.proxy&&e.href&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,i):this._renderImage(e.imageData,i,e.contentType))},this):(t.f="image",e=this.options.url+"export"+v.Util.getParamString(t),this.options.proxy&&(e=this.options.proxy+"?"+e),this._renderImage(e,i))}});var dt=v.Layer.extend({options:{cellSize:512,updateWhenIdle:v.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){v.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof v.Point?t:new v.Point(t,t)},_pruneCells:function(){if(this._map){var t,e,i;for(t in this._cells)(i=this._cells[t]).retain=i.current;for(t in this._cells){(i=this._cells[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2))}for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,s=new v.Point(+o,+r);s.z=+a;var l=this._cellCoordsToKey(s),h=this._cells[l];return h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),n<a&&this._retainParent(o,r,a,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new v.Point(o,r);a.z=i+1;var s=this._cellCoordsToKey(a),l=this._cells[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);e||this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_setView:function(t,e,i,n){var o=Math.round(e);n||(this._cellZoom=o,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),n=this._cellZoom,o=this._map.getPixelWorldBounds(this._cellZoom);o&&(this._globalCellRange=this._pxBoundsToCellRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._cellZoom),o=e.project(t,this._cellZoom).floor(),r=e.getSize().divideBy(2*n);return new v.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var n=this._getCelldPixelBounds(t),o=this._pxBoundsToCellRange(n),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new v.Bounds(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var h in this._cells){var u=this._cells[h].coords;u.z===this._cellZoom&&l.contains(new v.Point(u.x,u.y))||(this._cells[h].current=!1)}if(1<Math.abs(i-this._cellZoom))this._setView(t,i);else{for(var c=o.min.y;c<=o.max.y;c++)for(var d=o.min.x;d<=o.max.x;d++){var p,f=new v.Point(d,c);f.z=this._cellZoom,this._isValidCell(f)&&((p=this._cells[this._cellCoordsToKey(f)])?p.current=!0:a.push(f))}if(a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==a.length)for(this._loading||(this._loading=!0),d=0;d<a.length;d++){var m=this._cellCoordsToKey(a[d]),g=this._keyToCellCoords(m);this._activeCells[g]?this._reuseCell(a[d]):this._createCell(a[d])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._cellCoordsToBounds(t);return Object(v.toLatLngBounds)(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_cellCoordsToBounds:function(t){var e=this._cellCoordsToNwSe(t),i=new v.LatLngBounds(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),i=new v.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeCell:function(t){var e,i,n,o=this._cells[t];o&&(e=this._keyToCellCoords(t),i=this._wrapCoords(e),n=this._cellCoordsToBounds(this._wrapCoords(e)),o.current=!1,delete this._cells[t],this._activeCells[t]=o,this.cellLeave(n,i,t),this.fire("cellleave",{key:t,coords:i,bounds:n}))},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(n,i,e),this.fire("cellenter",{key:e,coords:i,bounds:n})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(n,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:n}),this._cells[e]={coords:t,current:!0},v.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){var n=this._cellCoordsToKey(t);(i=this._cells[n])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new v.Point(this._wrapX?v.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?v.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new v.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function pt(t){this.values=[].concat(t||[])}pt.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},pt.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,n=0,o=this.values.length-1;n<=o;)if(e=(n+o)/2|0,+(i=this.values[Math.round(e)]).value<+t)n=1+e;else{if(!(+i.value>+t))return e;o=e-1}return Math.abs(~o)},pt.prototype.between=function(t,e){var i=this.getIndex(t),n=this.getIndex(e);if(0===i&&0===n)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[n+1]&&this.values[n+1].value===e;)n++;return this.values[n]&&this.values[n].value===e&&this.values[n+1]&&n++,this.values.slice(i,n)},pt.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},pt.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},pt.prototype.sort=function(){return this.values.sort(function(t,e){return e.value-t.value}).reverse(),this.dirty=!1,this};var ft=pt,mt=dt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(t){if(dt.prototype.initialize.call(this,t),t=z(t),t=v.Util.setOptions(this,t),this.service=rt(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&f("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new ft,this._endTimeIndex=new ft):this.options.timeField&&(this._timeIndex=new ft),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(o){return R(o),this.service.metadata(function(t,e){var i,n;t||(i=e.supportedQueryFormats,(n=!1)===this.service.options.isModern&&(n=!0),!n&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&o.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,o.attributionControl.addAttribution(this.getAttribution())))},this),o.on("zoomend",this._handleZoomChange,this),dt.prototype.onAdd.call(this,o)},onRemove:function(t){return t.off("zoomend",this._handleZoomChange,this),dt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(n,o,r){this._activeRequests++;var a=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:n},!0),this._buildQuery(n).run(function(t,e,i){i&&i.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===a&&(!t&&e&&e.features.length&&v.Util.requestAnimFrame(v.Util.bind(function(){this._addFeatures(e.features,o),this._postProcessFeatures(n)},this)),t||!e||e.features.length||this._postProcessFeatures(n),t&&this._postProcessFeatures(n),r&&r.call(this,t,e))},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var i;e&&(i=this._cacheKey(e),this._cache[i]=this._cache[i]||[]);for(var n=t.length-1;0<=n;n--){var o=t[n].id;-1===this._currentSnapshot.indexOf(o)&&this._currentSnapshot.push(o),void 0!==i&&-1===this._cache[i].indexOf(o)&&this._cache[i].push(o)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t){var e=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return e.params.resultType="tile",this.options.requestParams&&v.Util.extend(e.params,this.options.requestParams),this.options.simplifyFactor&&e.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&e.between(this.options.from,this.options.to),e},setWhere:function(n,o,r){this.options.where=n&&n.length?n:"1=1";for(var a=[],s=[],l=0,h=null,t=v.Util.bind(function(t,e){if(t&&(h=t),e)for(var i=e.features.length-1;0<=i;i--)s.push(e.features[i].id);--l<=0&&this._visibleZoom()&&n===this.options.where&&(this._currentSnapshot=s,v.Util.requestAnimFrame(v.Util.bind(function(){this.removeLayers(a),this.addLayers(s),o&&o.call(r,h)},this)))},this),e=this._currentSnapshot.length-1;0<=e;e--)a.push(this._currentSnapshot[e]);for(var i in this._cache={},this._cells){l++;var u=this._keyToCellCoords(i),c=this._cellCoordsToBounds(u);this._requestFeatures(c,u,t)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,i,n,o){var r=this.options.from,a=this.options.to,s=0,l=null,t=v.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(r,a,e,i),s--,n&&s<=0&&n.call(o,l)},this);if(this.options.from=e,this.options.to=i,this._filterExistingFeatures(r,a,e,i),"server"===this.options.timeFilterMode)for(var h in this._cells){s++;var u=this._keyToCellCoords(h),c=this._cellCoordsToBounds(u);this._requestFeatures(c,u,t)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,n){var o=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,r=this._getFeaturesInTimeRange(i,n);if(r.indexOf)for(var a=0;a<r.length;a++){var s=o.indexOf(r[a]);0<=s&&o.splice(s,1)}v.Util.requestAnimFrame(v.Util.bind(function(){this.removeLayers(o),this.addLayers(r)},this))},_getFeaturesInTimeRange:function(t,e){var i=[];if(this.options.timeField.start&&this.options.timeField.end)var n=this._startTimeIndex.between(t,e),o=this._endTimeIndex.between(t,e),r=n.concat(o);else{if(!this._timeIndex)return f("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];r=this._timeIndex.between(t,e)}for(var a=r.length-1;0<=a;a--)i.push(r[a].id);return i},_buildTimeIndexes:function(t){var e;if(this.options.timeField.start&&this.options.timeField.end){for(var i=[],n=[],o=t.length-1;0<=o;o--)e=t[o],i.push({id:e.id,value:new Date(e.properties[this.options.timeField.start])}),n.push({id:e.id,value:new Date(e.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(n)}else{var r=[];for(o=t.length-1;0<=o;o--)e=t[o],r.push({id:e.id,value:new Date(e.properties[this.options.timeField])});this._timeIndex.bulkAdd(r)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var n=+t.properties[this.options.timeField];return e<=n&&n<=i}if(this.options.timeField.start&&this.options.timeField.end){var o=+t.properties[this.options.timeField.start],r=+t.properties[this.options.timeField.end];return e<=o&&o<=i||e<=r&&r<=i||o<=e&&i<=r}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,i=this._cacheKey(e);this._cache[i]&&this.addLayers(this._cache[i])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(i){this._metadata?i(void 0,this._metadata):this.metadata(v.Util.bind(function(t,e){this._metadata=e,i(t,this._metadata)},this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(e,r,a){this._getMetadata(v.Util.bind(function(t,n){var o;t?r&&r.call(this,t,null):(o=e.features?e.features:[e],this.service.addFeatures(e,v.Util.bind(function(t,e){if(!t){for(var i=o.length-1;0<=i;i--)o[i].properties[n.objectIdField]=1<o.length?e[i].objectId:e.objectId,o[i].id=1<o.length?e[i].objectId:e.objectId;this._addFeatures(o)}r&&r.call(a,t,e)},this)))},this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,o){var r=t.features?t.features:[t];this.service.updateFeatures(t,function(t,e){if(!t){for(var i=r.length-1;0<=i;i--)this.removeLayers([r[i].id],!0);this._addFeatures(r)}n&&n.call(o,t,e)},this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,o,r){return this.service.deleteFeatures(t,function(t,e){var i=e.length?e:[e];if(!t&&0<i.length)for(var n=i.length-1;0<=n;n--)this.removeLayers([i[n].objectId],!0);o&&o.call(r,t,e)},this)}});mt.extend({options:{cacheLayers:!0},initialize:function(t){mt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return mt.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=v.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var i=[],n=this.options.coordsToLatLng||v.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=v.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=v.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,n),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=v.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,n),t.setLatLngs(i);break;case"MultiPolygon":i=v.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,n),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;0<=e;e--){var i,n=t[e],o=this._layers[n.id];!this._visibleZoom()||!o||this._map.hasLayer(o)||this.options.timeField&&!this._featureWithinTimeRange(n)||(this._map.addLayer(o),this.fire("addfeature",{feature:o.feature},!0)),o&&0<this.options.simplifyFactor&&(o.setLatLngs||o.setLatLng)&&this._updateLayer(o,n),o||((i=this.createNewLayer(n))?(i.feature=n,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(i)):f("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;0<=i;i--){var n=t[i],o=this._layers[n];o&&(this.fire("removefeature",{feature:o.feature,permanent:e},!0),this._map.removeLayer(o)),o&&e&&delete this._layers[n]}},cellEnter:function(t,n){this._visibleZoom()&&!this._zooming&&this._map&&v.Util.requestAnimFrame(v.Util.bind(function(){var t=this._cacheKey(n),e=this._cellCoordsToKey(n),i=this._cache[t];this._activeCells[e]&&i&&this.addLayers(i)},this))},cellLeave:function(t,s){this._zooming||v.Util.requestAnimFrame(v.Util.bind(function(){if(this._map){var t=this._cacheKey(s),e=this._cellCoordsToKey(s),i=this._cache[t],n=this._map.getBounds();if(!this._activeCells[e]&&i){for(var o=!0,r=0;r<i.length;r++){var a=this._layers[i[r]];a&&a.getBounds&&n.intersects(a.getBounds())&&(o=!1)}o&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&o&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||v.Path.prototype.options;return e&&(v.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var i=this._layers[t];return"function"==typeof e&&(e=e(i.feature)),i.setStyle&&i.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i=this._map.getBounds();for(var n in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[n].feature.id)&&("function"==typeof this._layers[n].getLatLng&&i.contains(this._layers[n].getLatLng())||"function"==typeof this._layers[n].getBounds&&i.intersects(this._layers[n].getBounds()))&&t.call(e,this._layers[n])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e,i,n=this._layers[t],o=n.feature;n&&n.setIcon&&this.options.pointToLayer&&this.options.pointToLayer&&(e=this.options.pointToLayer(o,Object(v.latLng)(o.geometry.coordinates[1],o.geometry.coordinates[0])).options.icon,n.setIcon(e)),n&&n.setStyle&&this.options.pointToLayer&&(i=this.options.pointToLayer(o,Object(v.latLng)(o.geometry.coordinates[1],o.geometry.coordinates[0])).options,this.setFeatureStyle(o.id,i)),n&&n.setStyle&&this.options.style&&this.resetStyle(o.id)}})},function(t,e,i){
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
t.exports=function(n){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){return t&&t["default"]||t}n=n&&n.hasOwnProperty("default")?n["default"]:n;var u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},h=t(function(t){var s={};for(var e in u){if(u.hasOwnProperty(e)){s[u[e]]=e}}var l=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in l){if(l.hasOwnProperty(i)){if(!("channels"in l[i])){throw new Error("missing channels property: "+i)}if(!("labels"in l[i])){throw new Error("missing channel labels property: "+i)}if(l[i].labels.length!==l[i].channels){throw new Error("channel and label counts mismatch: "+i)}var n=l[i].channels;var o=l[i].labels;delete l[i].channels;delete l[i].labels;Object.defineProperty(l[i],"channels",{value:n});Object.defineProperty(l[i],"labels",{value:o})}}l.rgb.hsl=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var o=Math.min(e,i,n);var r=Math.max(e,i,n);var a=r-o;var s;var l;var h;if(r===o){s=0}else if(e===r){s=(i-n)/a}else if(i===r){s=2+(n-e)/a}else if(n===r){s=4+(e-i)/a}s=Math.min(s*60,360);if(s<0){s+=360}h=(o+r)/2;if(r===o){l=0}else if(h<=.5){l=a/(r+o)}else{l=a/(2-r-o)}return[s,l*100,h*100]};l.rgb.hsv=function(t){var e;var i;var n;var o;var r;var a=t[0]/255;var s=t[1]/255;var l=t[2]/255;var h=Math.max(a,s,l);var u=h-Math.min(a,s,l);var c=function(t){return(h-t)/6/u+1/2};if(u===0){o=r=0}else{r=u/h;e=c(a);i=c(s);n=c(l);if(a===h){o=n-i}else if(s===h){o=1/3+e-n}else if(l===h){o=2/3+i-e}if(o<0){o+=1}else if(o>1){o-=1}}return[o*360,r*100,h*100]};l.rgb.hwb=function(t){var e=t[0];var i=t[1];var n=t[2];var o=l.rgb.hsl(t)[0];var r=1/255*Math.min(e,Math.min(i,n));n=1-1/255*Math.max(e,Math.max(i,n));return[o,r*100,n*100]};l.rgb.cmyk=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var o;var r;var a;var s;s=Math.min(1-e,1-i,1-n);o=(1-e-s)/(1-s)||0;r=(1-i-s)/(1-s)||0;a=(1-n-s)/(1-s)||0;return[o*100,r*100,a*100,s*100]};function h(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}l.rgb.keyword=function(t){var e=s[t];if(e){return e}var i=Infinity;var n;for(var o in u){if(u.hasOwnProperty(o)){var r=u[o];var a=h(t,r);if(a<i){i=a;n=o}}}return n};l.keyword.rgb=function(t){return u[t]};l.rgb.xyz=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var o=e*.4124+i*.3576+n*.1805;var r=e*.2126+i*.7152+n*.0722;var a=e*.0193+i*.1192+n*.9505;return[o*100,r*100,a*100]};l.rgb.lab=function(t){var e=l.rgb.xyz(t);var i=e[0];var n=e[1];var o=e[2];var r;var a;var s;i/=95.047;n/=100;o/=108.883;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;o=o>.008856?Math.pow(o,1/3):7.787*o+16/116;r=116*n-16;a=500*(i-n);s=200*(n-o);return[r,a,s]};l.hsl.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var o;var r;var a;var s;var l;if(i===0){l=n*255;return[l,l,l]}if(n<.5){r=n*(1+i)}else{r=n+i-n*i}o=2*n-r;s=[0,0,0];for(var h=0;h<3;h++){a=e+1/3*-(h-1);if(a<0){a++}if(a>1){a--}if(6*a<1){l=o+(r-o)*6*a}else if(2*a<1){l=r}else if(3*a<2){l=o+(r-o)*(2/3-a)*6}else{l=o}s[h]=l*255}return s};l.hsl.hsv=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var o=i;var r=Math.max(n,.01);var a;var s;n*=2;i*=n<=1?n:2-n;o*=r<=1?r:2-r;s=(n+i)/2;a=n===0?2*o/(r+o):2*i/(n+i);return[e,a*100,s*100]};l.hsv.rgb=function(t){var e=t[0]/60;var i=t[1]/100;var n=t[2]/100;var o=Math.floor(e)%6;var r=e-Math.floor(e);var a=255*n*(1-i);var s=255*n*(1-i*r);var l=255*n*(1-i*(1-r));n*=255;switch(o){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}};l.hsv.hsl=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var o=Math.max(n,.01);var r;var a;var s;s=(2-i)*n;r=(2-i)*o;a=i*o;a/=r<=1?r:2-r;a=a||0;s/=2;return[e,a*100,s*100]};l.hwb.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var o=i+n;var r;var a;var s;var l;if(o>1){i/=o;n/=o}r=Math.floor(6*e);a=1-n;s=6*e-r;if((r&1)!==0){s=1-s}l=i+s*(a-i);var h;var u;var c;switch(r){default:case 6:case 0:h=a;u=l;c=i;break;case 1:h=l;u=a;c=i;break;case 2:h=i;u=a;c=l;break;case 3:h=i;u=l;c=a;break;case 4:h=l;u=i;c=a;break;case 5:h=a;u=i;c=l;break}return[h*255,u*255,c*255]};l.cmyk.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var o=t[3]/100;var r;var a;var s;r=1-Math.min(1,e*(1-o)+o);a=1-Math.min(1,i*(1-o)+o);s=1-Math.min(1,n*(1-o)+o);return[r*255,a*255,s*255]};l.xyz.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var o;var r;var a;o=e*3.2406+i*-1.5372+n*-.4986;r=e*-.9689+i*1.8758+n*.0415;a=e*.0557+i*-.204+n*1.057;o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92;r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*12.92;a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92;o=Math.min(Math.max(0,o),1);r=Math.min(Math.max(0,r),1);a=Math.min(Math.max(0,a),1);return[o*255,r*255,a*255]};l.xyz.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;e/=95.047;i/=100;n/=108.883;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;o=116*i-16;r=500*(e-i);a=200*(i-n);return[o,r,a]};l.lab.xyz=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;r=(e+16)/116;o=i/500+r;a=r-n/200;var s=Math.pow(r,3);var l=Math.pow(o,3);var h=Math.pow(a,3);r=s>.008856?s:(r-16/116)/7.787;o=l>.008856?l:(o-16/116)/7.787;a=h>.008856?h:(a-16/116)/7.787;o*=95.047;r*=100;a*=108.883;return[o,r,a]};l.lab.lch=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;o=Math.atan2(n,i);r=o*360/2/Math.PI;if(r<0){r+=360}a=Math.sqrt(i*i+n*n);return[e,a,r]};l.lch.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;a=n/360*2*Math.PI;o=i*Math.cos(a);r=i*Math.sin(a);return[e,o,r]};l.rgb.ansi16=function(t){var e=t[0];var i=t[1];var n=t[2];var o=1 in arguments?arguments[1]:l.rgb.hsv(t)[2];o=Math.round(o/50);if(o===0){return 30}var r=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));if(o===2){r+=60}return r};l.hsv.ansi16=function(t){return l.rgb.ansi16(l.hsv.rgb(t),t[2])};l.rgb.ansi256=function(t){var e=t[0];var i=t[1];var n=t[2];if(e===i&&i===n){if(e<8){return 16}if(e>248){return 231}return Math.round((e-8)/247*24)+232}var o=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5);return o};l.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7){if(t>50){e+=3.5}e=e/10.5*255;return[e,e,e]}var i=(~~(t>50)+1)*.5;var n=(e&1)*i*255;var o=(e>>1&1)*i*255;var r=(e>>2&1)*i*255;return[n,o,r]};l.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i;var n=Math.floor(t/36)/5*255;var o=Math.floor((i=t%36)/6)/5*255;var r=i%6/5*255;return[n,o,r]};l.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255);var i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};l.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e){return[0,0,0]}var i=e[0];if(e[0].length===3){i=i.split("").map(function(t){return t+t}).join("")}var n=parseInt(i,16);var o=n>>16&255;var r=n>>8&255;var a=n&255;return[o,r,a]};l.rgb.hcg=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var o=Math.max(Math.max(e,i),n);var r=Math.min(Math.min(e,i),n);var a=o-r;var s;var l;if(a<1){s=r/(1-a)}else{s=0}if(a<=0){l=0}else if(o===e){l=(i-n)/a%6}else if(o===i){l=2+(n-e)/a}else{l=4+(e-i)/a+4}l/=6;l%=1;return[l*360,a*100,s*100]};l.hsl.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1;var o=0;if(i<.5){n=2*e*i}else{n=2*e*(1-i)}if(n<1){o=(i-.5*n)/(1-n)}return[t[0],n*100,o*100]};l.hsv.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=e*i;var o=0;if(n<1){o=(i-n)/(1-n)}return[t[0],n*100,o*100]};l.hcg.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;if(i===0){return[n*255,n*255,n*255]}var o=[0,0,0];var r=e%1*6;var a=r%1;var s=1-a;var l=0;switch(Math.floor(r)){case 0:o[0]=1;o[1]=a;o[2]=0;break;case 1:o[0]=s;o[1]=1;o[2]=0;break;case 2:o[0]=0;o[1]=1;o[2]=a;break;case 3:o[0]=0;o[1]=s;o[2]=1;break;case 4:o[0]=a;o[1]=0;o[2]=1;break;default:o[0]=1;o[1]=0;o[2]=s}l=(1-i)*n;return[(i*o[0]+l)*255,(i*o[1]+l)*255,(i*o[2]+l)*255]};l.hcg.hsv=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);var o=0;if(n>0){o=e/n}return[t[0],o*100,n*100]};l.hcg.hsl=function(t){var e=t[1]/100;var i=t[2]/100;var n=i*(1-e)+.5*e;var o=0;if(n>0&&n<.5){o=e/(2*n)}else if(n>=.5&&n<1){o=e/(2*(1-n))}return[t[0],o*100,n*100]};l.hcg.hwb=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);return[t[0],(n-e)*100,(1-n)*100]};l.hwb.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1-i;var o=n-e;var r=0;if(o<1){r=(n-o)/(1-o)}return[t[0],o*100,r*100]};l.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};l.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};l.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};l.gray.hsl=l.gray.hsv=function(t){return[0,0,t[0]]};l.gray.hwb=function(t){return[0,100,t[0]]};l.gray.cmyk=function(t){return[0,0,0,t[0]]};l.gray.lab=function(t){return[t[0],0,0]};l.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255;var i=(e<<16)+(e<<8)+e;var n=i.toString(16).toUpperCase();return"000000".substring(n.length)+n};l.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}}),i=h.rgb,o=h.hsl,r=h.hsv,a=h.hwb,s=h.cmyk,l=h.xyz,c=h.lab,d=h.lch,p=h.hex,f=h.keyword,m=h.ansi16,g=h.ansi256,v=h.hcg,_=h.apple,y=h.gray;function x(){var t={};var e=Object.keys(h);for(var i=e.length,n=0;n<i;n++){t[e[n]]={distance:-1,parent:null}}return t}function b(t){var e=x();var i=[t];e[t].distance=0;while(i.length){var n=i.pop();var o=Object.keys(h[n]);for(var r=o.length,a=0;a<r;a++){var s=o[a];var l=e[s];if(l.distance===-1){l.distance=e[n].distance+1;l.parent=n;i.unshift(s)}}}return e}function w(e,i){return function(t){return i(e(t))}}function L(t,e){var i=[e[t].parent,t];var n=h[e[t].parent][t];var o=e[t].parent;while(e[o].parent){i.unshift(e[o].parent);n=w(h[e[o].parent][o],n);o=e[o].parent}n.conversion=i;return n}var k=function(t){var e=b(t);var i={};var n=Object.keys(e);for(var o=n.length,r=0;r<o;r++){var a=n[r];var s=e[a];if(s.parent===null){continue}i[a]=L(a,e)}return i},M={},C;function T(e){var t=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}return e(t)};if("conversion"in e){t.conversion=e.conversion}return t}function P(o){var t=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}var e=o(t);if(typeof e==="object"){for(var i=e.length,n=0;n<i;n++){e[n]=Math.round(e[n])}}return e};if("conversion"in o){t.conversion=o.conversion}return t}Object.keys(h).forEach(function(i){M[i]={};Object.defineProperty(M[i],"channels",{value:h[i].channels});Object.defineProperty(M[i],"labels",{value:h[i].labels});var n=k(i);var t=Object.keys(n);t.forEach(function(t){var e=n[t];M[i][t]=P(e);M[i][t].raw=T(e)})});var S=M,A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},I={getRgba:D,getHsla:O,getRgb:E,getHsl:B,getHwb:z,getAlpha:F,hexString:R,rgbString:N,rgbaString:U,percentString:Z,percentaString:W,hslString:j,hslaString:H,hwbString:G,keyword:V};function D(t){if(!t){return}var e=/^#([a-fA-F0-9]{3,4})$/i,i=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/(\w+)/;var a=[0,0,0],s=1,l=t.match(e),h="";if(l){l=l[1];h=l[3];for(var u=0;u<a.length;u++){a[u]=parseInt(l[u]+l[u],16)}if(h){s=Math.round(parseInt(h+h,16)/255*100)/100}}else if(l=t.match(i)){h=l[2];l=l[1];for(var u=0;u<a.length;u++){a[u]=parseInt(l.slice(u*2,u*2+2),16)}if(h){s=Math.round(parseInt(h,16)/255*100)/100}}else if(l=t.match(n)){for(var u=0;u<a.length;u++){a[u]=parseInt(l[u+1])}s=parseFloat(l[4])}else if(l=t.match(o)){for(var u=0;u<a.length;u++){a[u]=Math.round(parseFloat(l[u+1])*2.55)}s=parseFloat(l[4])}else if(l=t.match(r)){if(l[1]=="transparent"){return[0,0,0,0]}a=A[l[1]];if(!a){return}}for(var u=0;u<a.length;u++){a[u]=q(a[u],0,255)}if(!s&&s!=0){s=1}else{s=q(s,0,1)}a[3]=s;return a}function O(t){if(!t){return}var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var o=q(parseInt(i[1]),0,360),r=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[o,r,a,s]}}function z(t){if(!t){return}var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var o=q(parseInt(i[1]),0,360),r=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[o,r,a,s]}}function E(t){var e=D(t);return e&&e.slice(0,3)}function B(t){var e=O(t);return e&&e.slice(0,3)}function F(t){var e=D(t);if(e){return e[3]}else if(e=O(t)){return e[3]}else if(e=z(t)){return e[3]}}function R(t,e){var e=e!==undefined&&t.length===3?e:t[3];return"#"+K(t[0])+K(t[1])+K(t[2])+(e>=0&&e<1?K(Math.round(e*255)):"")}function N(t,e){if(e<1||t[3]&&t[3]<1){return U(t,e)}return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function U(t,e){if(e===undefined){e=t[3]!==undefined?t[3]:1}return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function Z(t,e){if(e<1||t[3]&&t[3]<1){return W(t,e)}var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),o=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+o+"%)"}function W(t,e){var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),o=Math.round(t[2]/255*100);return"rgba("+i+"%, "+n+"%, "+o+"%, "+(e||t[3]||1)+")"}function j(t,e){if(e<1||t[3]&&t[3]<1){return H(t,e)}return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function H(t,e){if(e===undefined){e=t[3]!==undefined?t[3]:1}return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function G(t,e){if(e===undefined){e=t[3]!==undefined?t[3]:1}return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(e!==undefined&&e!==1?", "+e:"")+")"}function V(t){return J[t.slice(0,3)]}function q(t,e,i){return Math.min(Math.max(e,t),i)}function K(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var J={};for(var Y in A){J[A[Y]]=Y}var X=function(t){if(t instanceof X){return t}if(!(this instanceof X)){return new X(t)}this.valid=false;this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;if(typeof t==="string"){e=I.getRgba(t);if(e){this.setValues("rgb",e)}else if(e=I.getHsla(t)){this.setValues("hsl",e)}else if(e=I.getHwb(t)){this.setValues("hwb",e)}}else if(typeof t==="object"){e=t;if(e.r!==undefined||e.red!==undefined){this.setValues("rgb",e)}else if(e.l!==undefined||e.lightness!==undefined){this.setValues("hsl",e)}else if(e.v!==undefined||e.value!==undefined){this.setValues("hsv",e)}else if(e.w!==undefined||e.whiteness!==undefined){this.setValues("hwb",e)}else if(e.c!==undefined||e.cyan!==undefined){this.setValues("cmyk",e)}}};if(X.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;if(t.alpha!==1){return t.hwb.concat([t.alpha])}return t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){if(t===undefined){return this.values.alpha}this.setValues("alpha",t);return this},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){if(t){t%=360;t=t<0?360+t:t}return this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return I.hexString(this.values.rgb)},rgbString:function(){return I.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return I.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return I.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return I.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return I.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return I.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return I.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){var t=this.values.rgb;var e=[];for(var i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity();var i=t.luminosity();if(e>i){return(e+.05)/(i+.05)}return(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);if(e>=7.1){return"AAA"}return e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){var t=[];for(var e=0;e<3;e++){t[e]=255-this.values.rgb[e]}this.setValues("rgb",t);return this},lighten:function(t){var e=this.values.hsl;e[2]+=e[2]*t;this.setValues("hsl",e);return this},darken:function(t){var e=this.values.hsl;e[2]-=e[2]*t;this.setValues("hsl",e);return this},saturate:function(t){var e=this.values.hsl;e[1]+=e[1]*t;this.setValues("hsl",e);return this},desaturate:function(t){var e=this.values.hsl;e[1]-=e[1]*t;this.setValues("hsl",e);return this},whiten:function(t){var e=this.values.hwb;e[1]+=e[1]*t;this.setValues("hwb",e);return this},blacken:function(t){var e=this.values.hwb;e[2]+=e[2]*t;this.setValues("hwb",e);return this},greyscale:function(){var t=this.values.rgb;var e=t[0]*.3+t[1]*.59+t[2]*.11;this.setValues("rgb",[e,e,e]);return this},clearer:function(t){var e=this.values.alpha;this.setValues("alpha",e-e*t);return this},opaquer:function(t){var e=this.values.alpha;this.setValues("alpha",e+e*t);return this},rotate:function(t){var e=this.values.hsl;var i=(e[0]+t)%360;e[0]=i<0?360+i:i;this.setValues("hsl",e);return this},mix:function(t,e){var i=this;var n=t;var o=e===undefined?.5:e;var r=2*o-1;var a=i.alpha()-n.alpha();var s=((r*a===-1?r:(r+a)/(1+r*a))+1)/2;var l=1-s;return this.rgb(s*i.red()+l*n.red(),s*i.green()+l*n.green(),s*i.blue()+l*n.blue()).alpha(i.alpha()*o+n.alpha()*(1-o))},toJSON:function(){return this.rgb()},clone:function(){var t=new X;var e=this.values;var i=t.values;var n,o;for(var r in e){if(e.hasOwnProperty(r)){n=e[r];o={}.toString.call(n);if(o==="[object Array]"){i[r]=n.slice(0)}else if(o==="[object Number]"){i[r]=n}else{console.error("unexpected color value:",n)}}}return t}},X.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},X.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},X.prototype.getValues=function(t){var e=this.values;var i={};for(var n=0;n<t.length;n++){i[t.charAt(n)]=e[t][n]}if(e.alpha!==1){i.a=e.alpha}return i},X.prototype.setValues=function(t,e){var i=this.values;var n=this.spaces;var o=this.maxes;var r=1;var a;this.valid=true;if(t==="alpha"){r=e}else if(e.length){i[t]=e.slice(0,t.length);r=e[t.length]}else if(e[t.charAt(0)]!==undefined){for(a=0;a<t.length;a++){i[t][a]=e[t.charAt(a)]}r=e.a}else if(e[n[t][0]]!==undefined){var s=n[t];for(a=0;a<t.length;a++){i[t][a]=e[s[a]]}r=e.alpha}i.alpha=Math.max(0,Math.min(1,r===undefined?i.alpha:r));if(t==="alpha"){return false}var l;for(a=0;a<t.length;a++){l=Math.max(0,Math.min(o[t][a],i[t][a]));i[t][a]=Math.round(l)}for(var h in n){if(h!==t){i[h]=S[t][h](i[t])}}return true},X.prototype.setSpace=function(t,e){var i=e[0];if(i===undefined){return this.getValues(t)}if(typeof i==="number"){i=Array.prototype.slice.call(e)}this.setValues(t,i);return this},X.prototype.setChannel=function(t,e,i){var n=this.values[t];if(i===undefined){return n[e]}else if(i===n[e]){return this}n[e]=i;this.setValues(t,n);return this},typeof window!=="undefined"){window.Color=X}var Q=X,$={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return t===null||typeof t==="undefined"},isArray:function(t){if(Array.isArray&&Array.isArray(t)){return true}var e=Object.prototype.toString.call(t);if(e.substr(0,7)==="[object"&&e.substr(-6)==="Array]"){return true}return false},isObject:function(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"},isFinite:function(t){return(typeof t==="number"||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return typeof t==="undefined"?e:t},valueAtIndexOrDefault:function(t,e,i){return $.valueOrDefault($.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&typeof t.call==="function"){return t.apply(i,e)}},each:function(t,e,i,n){var o,r,a;if($.isArray(t)){r=t.length;if(n){for(o=r-1;o>=0;o--){e.call(i,t[o],o)}}else{for(o=0;o<r;o++){e.call(i,t[o],o)}}}else if($.isObject(t)){a=Object.keys(t);r=a.length;for(o=0;o<r;o++){e.call(i,t[a[o]],a[o])}}},arrayEquals:function(t,e){var i,n,o,r;if(!t||!e||t.length!==e.length){return false}for(i=0,n=t.length;i<n;++i){o=t[i];r=e[i];if(o instanceof Array&&r instanceof Array){if(!$.arrayEquals(o,r)){return false}}else if(o!==r){return false}}return true},clone:function(t){if($.isArray(t)){return t.map($.clone)}if($.isObject(t)){var e={};var i=Object.keys(t);var n=i.length;var o=0;for(;o<n;++o){e[i[o]]=$.clone(t[i[o]])}return e}return t},_merger:function(t,e,i,n){var o=e[t];var r=i[t];if($.isObject(o)&&$.isObject(r)){$.merge(o,r,n)}else{e[t]=$.clone(r)}},_mergerIf:function(t,e,i){var n=e[t];var o=i[t];if($.isObject(n)&&$.isObject(o)){$.mergeIf(n,o)}else if(!e.hasOwnProperty(t)){e[t]=$.clone(o)}},merge:function(t,e,i){var n=$.isArray(e)?e:[e];var o=n.length;var r,a,s,l,h;if(!$.isObject(t)){return t}i=i||{};r=i.merger||$._merger;for(a=0;a<o;++a){e=n[a];if(!$.isObject(e)){continue}s=Object.keys(e);for(h=0,l=s.length;h<l;++h){r(s[h],t,e,i)}}return t},mergeIf:function(t,e){return $.merge(t,e,{merger:$._mergerIf})},extend:Object.assign||function(t){return $.merge(t,[].slice.call(arguments,1),{merger:function(t,e,i){e[t]=i[t]}})},inherits:function(t){var e=this;var i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)};var n=function(){this.constructor=i};n.prototype=e.prototype;i.prototype=new n;i.extend=$.inherits;if(t){$.extend(i.prototype,t)}i.__super__=e.prototype;return i},_deprecated:function(t,e,i,n){if(e!==undefined){console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')}}},tt=$;$.callCallback=$.callback,$.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},$.getValueOrDefault=$.valueOrDefault,$.getValueAtIndexOrDefault=$.valueAtIndexOrDefault;var et={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){if((t/=.5)<1){return.5*t*t}return-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t=t-1)*t*t+1},easeInOutCubic:function(t){if((t/=.5)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t=t-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=.5)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t=t-1)*t*t*t*t+1},easeInOutQuint:function(t){if((t/=.5)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){if(t===0){return 0}if(t===1){return 1}if((t/=.5)<1){return.5*Math.pow(2,10*(t-1))}return.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1){return t}return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t=t-1)*t)},easeInOutCirc:function(t){if((t/=.5)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0){return 0}if(t===1){return 1}if(!i){i=.3}if(n<1){n=1;e=i/4}else{e=i/(2*Math.PI)*Math.asin(1/n)}return-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0){return 0}if(t===1){return 1}if(!i){i=.3}if(n<1){n=1;e=i/4}else{e=i/(2*Math.PI)*Math.asin(1/n)}return n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},easeInOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0){return 0}if((t/=.5)===2){return 1}if(!i){i=.45}if(n<1){n=1;e=i/4}else{e=i/(2*Math.PI)*Math.asin(1/n)}if(t<1){return-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))}return n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;if((t/=.5)<1){return.5*(t*t*(((e*=1.525)+1)*t-e))}return.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-et.easeOutBounce(1-t)},easeOutBounce:function(t){if(t<1/2.75){return 7.5625*t*t}if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}return 7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){if(t<.5){return et.easeInBounce(t*2)*.5}return et.easeOutBounce(t*2-1)*.5+.5}},it={effects:et};tt.easingEffects=et;var nt=Math.PI,ot=nt/180,rt=nt*2,at=nt/2,st=nt/4,lt=nt*2/3,ht={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,o,r){if(r){var a=Math.min(r,o/2,n/2);var s=e+a;var l=i+a;var h=e+n-a;var u=i+o-a;t.moveTo(e,l);if(s<h&&l<u){t.arc(s,l,a,-nt,-at);t.arc(h,l,a,-at,0);t.arc(h,u,a,0,at);t.arc(s,u,a,at,nt)}else if(s<h){t.moveTo(s,i);t.arc(h,l,a,-at,at);t.arc(s,l,a,at,nt+at)}else if(l<u){t.arc(s,l,a,-nt,0);t.arc(s,u,a,0,nt)}else{t.arc(s,l,a,-nt,nt)}t.closePath();t.moveTo(e,i)}else{t.rect(e,i,n,o)}},drawPoint:function(t,e,i,n,o,r){var a,s,l,h,u;var c=(r||0)*ot;if(e&&typeof e==="object"){a=e.toString();if(a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]"){t.save();t.translate(n,o);t.rotate(c);t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height);t.restore();return}}if(isNaN(i)||i<=0){return}t.beginPath();switch(e){default:t.arc(n,o,i,0,rt);t.closePath();break;case"triangle":t.moveTo(n+Math.sin(c)*i,o-Math.cos(c)*i);c+=lt;t.lineTo(n+Math.sin(c)*i,o-Math.cos(c)*i);c+=lt;t.lineTo(n+Math.sin(c)*i,o-Math.cos(c)*i);t.closePath();break;case"rectRounded":u=i*.516;h=i-u;s=Math.cos(c+st)*h;l=Math.sin(c+st)*h;t.arc(n-s,o-l,u,c-nt,c-at);t.arc(n+l,o-s,u,c-at,c);t.arc(n+s,o+l,u,c,c+at);t.arc(n-l,o+s,u,c+at,c+nt);t.closePath();break;case"rect":if(!r){h=Math.SQRT1_2*i;t.rect(n-h,o-h,2*h,2*h);break}c+=st;case"rectRot":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+l,o-s);t.lineTo(n+s,o+l);t.lineTo(n-l,o+s);t.closePath();break;case"crossRot":c+=st;case"cross":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);t.moveTo(n+l,o-s);t.lineTo(n-l,o+s);break;case"star":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);t.moveTo(n+l,o-s);t.lineTo(n-l,o+s);c+=st;s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);t.moveTo(n+l,o-s);t.lineTo(n-l,o+s);break;case"line":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);break;case"dash":t.moveTo(n,o);t.lineTo(n+Math.cos(c)*i,o+Math.sin(c)*i);break}t.fill();t.stroke()},_isPointInArea:function(t,e){var i=1e-6;return t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i},clipArea:function(t,e){t.save();t.beginPath();t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top);t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var o=i.steppedLine;if(o){if(o==="middle"){var r=(e.x+i.x)/2;t.lineTo(r,n?i.y:e.y);t.lineTo(r,n?e.y:i.y)}else if(o==="after"&&!n||o!=="after"&&n){t.lineTo(e.x,i.y)}else{t.lineTo(i.x,e.y)}t.lineTo(i.x,i.y);return}if(!i.tension){t.lineTo(i.x,i.y);return}t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y)}},ut=ht;tt.clear=ht.clear,tt.drawRoundedRectangle=function(t){t.beginPath();ht.roundedRect.apply(ht,arguments)};var ct={_set:function(t,e){return tt.merge(this[t]||(this[t]={}),e)}};ct._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:true});var dt=ct,pt=tt.valueOrDefault;function ft(t){if(!t||tt.isNullOrUndef(t.size)||tt.isNullOrUndef(t.family)){return null}return(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var mt={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||i[1]==="normal"){return e*1.2}t=+i[2];switch(i[3]){case"px":return t;case"%":t/=100;break}return e*t},toPadding:function(t){var e,i,n,o;if(tt.isObject(t)){e=+t.top||0;i=+t.right||0;n=+t.bottom||0;o=+t.left||0}else{e=i=n=o=+t||0}return{top:e,right:i,bottom:n,left:o,height:e+n,width:o+i}},_parseFont:function(t){var e=dt.global;var i=pt(t.fontSize,e.defaultFontSize);var n={family:pt(t.fontFamily,e.defaultFontFamily),lineHeight:tt.options.toLineHeight(pt(t.lineHeight,e.defaultLineHeight),i),size:i,style:pt(t.fontStyle,e.defaultFontStyle),weight:null,string:""};n.string=ft(n);return n},resolve:function(t,e,i,n){var o=true;var r,a,s;for(r=0,a=t.length;r<a;++r){s=t[r];if(s===undefined){continue}if(e!==undefined&&typeof s==="function"){s=s(e);o=false}if(i!==undefined&&tt.isArray(s)){s=s[i];o=false}if(s!==undefined){if(n&&!o){n.cacheable=false}return s}}}},gt={_factorize:function(t){var e=[];var i=Math.sqrt(t);var n;for(n=1;n<i;n++){if(t%n===0){e.push(n);e.push(t/n)}}if(i===(i|0)){e.push(i)}e.sort(function(t,e){return t-e}).pop();return e},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E;var i=Math.round(e);var n=t===Math.pow(10,i);return n?i:e}},vt=gt;tt.log10=gt.log10;var _t=function(e,i){return{x:function(t){return e+e+i-t},setWidth:function(t){i=t},textAlign:function(t){if(t==="center"){return t}return t==="right"?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}},yt=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},xt,bt,wt,Lt,kt=tt,Mt,Ct=ut,Tt=mt,Pt=vt,St={getRtlAdapter:function(t,e,i){return t?_t(e,i):yt()},overrideTextDirection:function(t,e){var i,n;if(e==="ltr"||e==="rtl"){i=t.canvas.style;n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")];i.setProperty("direction",e,"important");t.prevTextDirection=n}},restoreTextDirection:function(t){var e=t.prevTextDirection;if(e!==undefined){delete t.prevTextDirection;t.canvas.style.setProperty("direction",e[0],e[1])}}};function At(t,e,i,n){var o=Object.keys(i);var r,a,s,l,h,u,c,d,p;for(r=0,a=o.length;r<a;++r){s=o[r];u=i[s];if(!e.hasOwnProperty(s)){e[s]=u}l=e[s];if(l===u||s[0]==="_"){continue}if(!t.hasOwnProperty(s)){t[s]=l}h=t[s];c=typeof u;if(c===typeof h){if(c==="string"){d=Q(h);if(d.valid){p=Q(u);if(p.valid){e[s]=p.mix(d,n).rgbString();continue}}}else if(kt.isFinite(h)&&kt.isFinite(u)){e[s]=h+(u-h)*n;continue}}e[s]=u}}kt.easing=it,kt.canvas=Ct,kt.options=Tt,kt.math=Pt,kt.rtl=St;var It=function(t){kt.extend(this,t);this.initialize.apply(this,arguments)};kt.extend(It.prototype,{_type:undefined,initialize:function(){this.hidden=false},pivot:function(){var t=this;if(!t._view){t._view=kt.extend({},t._model)}t._start={};return t},transition:function(t){var e=this;var i=e._model;var n=e._start;var o=e._view;if(!i||t===1){e._view=kt.extend({},i);e._start=null;return e}if(!o){o=e._view={}}if(!n){n=e._start={}}At(n,o,i,t);return e},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return kt.isNumber(this._model.x)&&kt.isNumber(this._model.y)}}),It.extend=kt.inherits;var Dt=It,Ot=Dt.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),zt=Ot;Object.defineProperty(Ot.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Ot.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),dt._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:kt.noop,onComplete:kt.noop}});var Et={animations:[],request:null,addAnimation:function(t,e,i,n){var o=this.animations;var r,a;e.chart=t;e.startTime=Date.now();e.duration=i;if(!n){t.animating=true}for(r=0,a=o.length;r<a;++r){if(o[r].chart===t){o[r]=e;return}}o.push(e);if(o.length===1){this.requestAnimationFrame()}},cancelAnimation:function(e){var t=kt.findIndex(this.animations,function(t){return t.chart===e});if(t!==-1){this.animations.splice(t,1);e.animating=false}},requestAnimationFrame:function(){var t=this;if(t.request===null){t.request=kt.requestAnimFrame.call(window,function(){t.request=null;t.startDigest()})}},startDigest:function(){var t=this;t.advance();if(t.animations.length>0){t.requestAnimationFrame()}},advance:function(){var t=this.animations;var e,i,n,o;var r=0;while(r<t.length){e=t[r];i=e.chart;n=e.numSteps;o=Math.floor((Date.now()-e.startTime)/e.duration*n)+1;e.currentStep=Math.min(o,n);kt.callback(e.render,[i,e],i);kt.callback(e.onAnimationProgress,[e],i);if(e.currentStep>=n){kt.callback(e.onAnimationComplete,[e],i);i.animating=false;t.splice(r,1)}else{++r}}}},Bt=kt.options.resolve,Ft=["push","pop","shift","splice","unshift"];function Rt(o,t){if(o._chartjs){o._chartjs.listeners.push(t);return}Object.defineProperty(o,"_chartjs",{configurable:true,enumerable:false,value:{listeners:[t]}});Ft.forEach(function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1);var n=o[t];Object.defineProperty(o,t,{configurable:true,enumerable:false,value:function(){var e=Array.prototype.slice.call(arguments);var t=n.apply(this,e);kt.each(o._chartjs.listeners,function(t){if(typeof t[i]==="function"){t[i].apply(t,e)}});return t}})})}function Nt(e,t){var i=e._chartjs;if(!i){return}var n=i.listeners;var o=n.indexOf(t);if(o!==-1){n.splice(o,1)}if(n.length>0){return}Ft.forEach(function(t){delete e[t]});delete e._chartjs}var Ut=function(t,e){this.initialize(t,e)};kt.extend(Ut.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var i=this;i.chart=t;i.index=e;i.linkScales();i.addElements();i._type=i.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this;var e=t.getMeta();var i=t.chart;var n=i.scales;var o=t.getDataset();var r=i.options.scales;if(e.xAxisID===null||!(e.xAxisID in n)||o.xAxisID){e.xAxisID=o.xAxisID||r.xAxes[0].id}if(e.yAxisID===null||!(e.yAxisID in n)||o.yAxisID){e.yAxisID=o.yAxisID||r.yAxes[0].id}},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(true)},destroy:function(){if(this._data){Nt(this._data,this)}},createMetaDataset:function(){var t=this;var e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this;var i=e.dataElementType;return i&&new i({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data||[];var n=e.data;var o,r;for(o=0,r=i.length;o<r;++o){n[o]=n[o]||t.createMetaData(o)}e.dataset=e.dataset||t.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e);this.updateElement(e,t,true)},buildOrUpdateElements:function(){var t=this;var e=t.getDataset();var i=e.data||(e.data=[]);if(t._data!==i){if(t._data){Nt(t._data,t)}if(i&&Object.isExtensible(i)){Rt(i,t)}t._data=i}t.resyncElements()},_configure:function(){var t=this;t._config=kt.merge({},[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,e,i){if(t!=="_meta"&&t!=="data"){kt._merger(t,e,i)}}})},_update:function(t){var e=this;e._configure();e._cachedDataOpts=null;e.update(t)},update:kt.noop,transition:function(t){var e=this.getMeta();var i=e.data||[];var n=i.length;var o=0;for(;o<n;++o){i[o].transition(t)}if(e.dataset){e.dataset.transition(t)}},draw:function(){var t=this.getMeta();var e=t.data||[];var i=e.length;var n=0;if(t.dataset){t.dataset.draw()}for(;n<i;++n){e[n].draw()}},getStyle:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var o;e._configure();if(n&&t===undefined){o=e._resolveDatasetElementOptions(n||{})}else{t=t||0;o=e._resolveDataElementOptions(i.data[t]||{},t)}if(o.fill===false||o.fill===null){o.backgroundColor=o.borderColor}return o},_resolveDatasetElementOptions:function(t,e){var i=this;var n=i.chart;var o=i._config;var r=t.custom||{};var a=n.options.elements[i.datasetElementType.prototype._type]||{};var s=i._datasetElementOptions;var l={};var h,u,c,d;var p={chart:n,dataset:i.getDataset(),datasetIndex:i.index,hover:e};for(h=0,u=s.length;h<u;++h){c=s[h];d=e?"hover"+c.charAt(0).toUpperCase()+c.slice(1):c;l[c]=Bt([r[d],o[d],a[d]],p)}return l},_resolveDataElementOptions:function(t,e){var i=this;var n=t&&t.custom;var o=i._cachedDataOpts;if(o&&!n){return o}var r=i.chart;var a=i._config;var s=r.options.elements[i.dataElementType.prototype._type]||{};var l=i._dataElementOptions;var h={};var u={chart:r,dataIndex:e,dataset:i.getDataset(),datasetIndex:i.index};var c={cacheable:!n};var d,p,f,m;n=n||{};if(kt.isArray(l)){for(p=0,f=l.length;p<f;++p){m=l[p];h[m]=Bt([n[m],a[m],s[m]],u,e,c)}}else{d=Object.keys(l);for(p=0,f=d.length;p<f;++p){m=d[p];h[m]=Bt([n[m],a[l[m]],a[m],s[m]],u,e,c)}}if(c.cacheable){i._cachedDataOpts=Object.freeze(h)}return h},removeHoverStyle:function(t){kt.merge(t._model,t.$previousStyle||{});delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex];var i=t._index;var n=t.custom||{};var o=t._model;var r=kt.getHoverColor;t.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth};o.backgroundColor=Bt([n.hoverBackgroundColor,e.hoverBackgroundColor,r(o.backgroundColor)],undefined,i);o.borderColor=Bt([n.hoverBorderColor,e.hoverBorderColor,r(o.borderColor)],undefined,i);o.borderWidth=Bt([n.hoverBorderWidth,e.hoverBorderWidth,o.borderWidth],undefined,i)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;if(t){this.removeHoverStyle(t)}},_setDatasetHoverStyle:function(){var t=this.getMeta().dataset;var e={};var i,n,o,r,a,s;if(!t){return}s=t._model;a=this._resolveDatasetElementOptions(t,true);r=Object.keys(a);for(i=0,n=r.length;i<n;++i){o=r[i];e[o]=s[o];s[o]=a[o]}t.$previousStyle=e},resyncElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data;var n=e.data.length;var o=i.length;if(o<n){e.data.splice(o,n-o)}else if(o>n){t.insertElements(n,o-n)}},insertElements:function(t,e){for(var i=0;i<e;++i){this.addElementAndReset(t+i)}},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e);this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ut.extend=kt.inherits;var Zt=Ut,Wt=Math.PI*2;function jt(t,e){var i=e.startAngle;var n=e.endAngle;var o=e.pixelMargin;var r=o/e.outerRadius;var a=e.x;var s=e.y;t.beginPath();t.arc(a,s,e.outerRadius,i-r,n+r);if(e.innerRadius>o){r=o/e.innerRadius;t.arc(a,s,e.innerRadius-o,n+r,i-r,true)}else{t.arc(a,s,o,n+Math.PI/2,i-Math.PI/2)}t.closePath();t.clip()}function Ht(t,e,i,n){var o=i.endAngle;var r;if(n){i.endAngle=i.startAngle+Wt;jt(t,i);i.endAngle=o;if(i.endAngle===i.startAngle&&i.fullCircles){i.endAngle+=Wt;i.fullCircles--}}t.beginPath();t.arc(i.x,i.y,i.innerRadius,i.startAngle+Wt,i.startAngle,true);for(r=0;r<i.fullCircles;++r){t.stroke()}t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.startAngle+Wt);for(r=0;r<i.fullCircles;++r){t.stroke()}}function Gt(t,e,i){var n=e.borderAlign==="inner";if(n){t.lineWidth=e.borderWidth*2;t.lineJoin="round"}else{t.lineWidth=e.borderWidth;t.lineJoin="bevel"}if(i.fullCircles){Ht(t,e,i,n)}if(n){jt(t,i)}t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.endAngle);t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,true);t.closePath();t.stroke()}dt._set("global",{elements:{arc:{backgroundColor:dt.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Vt=Dt.extend({_type:"arc",inLabelRange:function(t){var e=this._view;if(e){return Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)}return false},inRange:function(t,e){var i=this._view;if(i){var n=kt.getAngleFromPoint(i,{x:t,y:e});var o=n.angle;var r=n.distance;var a=i.startAngle;var s=i.endAngle;while(s<a){s+=Wt}while(o>s){o-=Wt}while(o<a){o+=Wt}var l=o>=a&&o<=s;var h=r>=i.innerRadius&&r<=i.outerRadius;return l&&h}return false},getCenterPoint:function(){var t=this._view;var e=(t.startAngle+t.endAngle)/2;var i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view;var e=t.startAngle+(t.endAngle-t.startAngle)/2;var i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t=this._chart.ctx;var e=this._view;var i=e.borderAlign==="inner"?.33:0;var n={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-i,0),pixelMargin:i,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Wt)};var o;t.save();t.fillStyle=e.backgroundColor;t.strokeStyle=e.borderColor;if(n.fullCircles){n.endAngle=n.startAngle+Wt;t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();for(o=0;o<n.fullCircles;++o){t.fill()}n.endAngle=n.startAngle+e.circumference%Wt}t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();t.fill();if(e.borderWidth){Gt(t,e,n)}t.restore()}}),qt=kt.valueOrDefault,Kt=dt.global.defaultColor;dt._set("global",{elements:{line:{tension:.4,backgroundColor:Kt,borderWidth:3,borderColor:Kt,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:true,fill:true}}});var Jt=Dt.extend({_type:"line",draw:function(){var t=this;var e=t._view;var i=t._chart.ctx;var n=e.spanGaps;var o=t._children.slice();var r=dt.global;var a=r.elements.line;var s=-1;var l=t._loop;var h,u,c;if(!o.length){return}if(t._loop){for(h=0;h<o.length;++h){u=kt.previousItem(o,h);if(!o[h]._view.skip&&u._view.skip){o=o.slice(h).concat(o.slice(0,h));l=n;break}}if(l){o.push(o[0])}}i.save();i.lineCap=e.borderCapStyle||a.borderCapStyle;if(i.setLineDash){i.setLineDash(e.borderDash||a.borderDash)}i.lineDashOffset=qt(e.borderDashOffset,a.borderDashOffset);i.lineJoin=e.borderJoinStyle||a.borderJoinStyle;i.lineWidth=qt(e.borderWidth,a.borderWidth);i.strokeStyle=e.borderColor||r.defaultColor;i.beginPath();c=o[0]._view;if(!c.skip){i.moveTo(c.x,c.y);s=0}for(h=1;h<o.length;++h){c=o[h]._view;u=s===-1?kt.previousItem(o,h):o[s];if(!c.skip){if(s!==h-1&&!n||s===-1){i.moveTo(c.x,c.y)}else{kt.canvas.lineTo(i,u._view,c)}s=h}}if(l){i.closePath()}i.stroke();i.restore()}}),Yt=kt.valueOrDefault,Xt=dt.global.defaultColor;function Qt(t){var e=this._view;return e?Math.abs(t-e.x)<e.radius+e.hitRadius:false}function $t(t){var e=this._view;return e?Math.abs(t-e.y)<e.radius+e.hitRadius:false}dt._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Xt,borderColor:Xt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var te=Dt.extend({_type:"point",inRange:function(t,e){var i=this._view;return i?Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2):false},inLabelRange:Qt,inXRange:Qt,inYRange:$t,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view;var i=this._chart.ctx;var n=e.pointStyle;var o=e.rotation;var r=e.radius;var a=e.x;var s=e.y;var l=dt.global;var h=l.defaultColor;if(e.skip){return}if(t===undefined||kt.canvas._isPointInArea(e,t)){i.strokeStyle=e.borderColor||h;i.lineWidth=Yt(e.borderWidth,l.elements.point.borderWidth);i.fillStyle=e.backgroundColor||h;kt.canvas.drawPoint(i,n,r,a,s,o)}}}),ee=dt.global.defaultColor;function ie(t){return t&&t.width!==undefined}function ne(t){var e,i,n,o,r;if(ie(t)){r=t.width/2;e=t.x-r;i=t.x+r;n=Math.min(t.y,t.base);o=Math.max(t.y,t.base)}else{r=t.height/2;e=Math.min(t.x,t.base);i=Math.max(t.x,t.base);n=t.y-r;o=t.y+r}return{left:e,top:n,right:i,bottom:o}}function oe(t,e,i){return t===e?i:t===i?e:t}function re(t){var e=t.borderSkipped;var i={};if(!e){return i}if(t.horizontal){if(t.base>t.x){e=oe(e,"left","right")}}else if(t.base<t.y){e=oe(e,"bottom","top")}i[e]=true;return i}function ae(t,e,i){var n=t.borderWidth;var o=re(t);var r,a,s,l;if(kt.isObject(n)){r=+n.top||0;a=+n.right||0;s=+n.bottom||0;l=+n.left||0}else{r=a=s=l=+n||0}return{t:o.top||r<0?0:r>i?i:r,r:o.right||a<0?0:a>e?e:a,b:o.bottom||s<0?0:s>i?i:s,l:o.left||l<0?0:l>e?e:l}}function se(t){var e=ne(t);var i=e.right-e.left;var n=e.bottom-e.top;var o=ae(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b}}}function le(t,e,i){var n=e===null;var o=i===null;var r=!t||n&&o?false:ne(t);return r&&(n||e>=r.left&&e<=r.right)&&(o||i>=r.top&&i<=r.bottom)}dt._set("global",{elements:{rectangle:{backgroundColor:ee,borderColor:ee,borderSkipped:"bottom",borderWidth:0}}});var he=Dt.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx;var e=this._view;var i=se(e);var n=i.outer;var o=i.inner;t.fillStyle=e.backgroundColor;t.fillRect(n.x,n.y,n.w,n.h);if(n.w===o.w&&n.h===o.h){return}t.save();t.beginPath();t.rect(n.x,n.y,n.w,n.h);t.clip();t.fillStyle=e.borderColor;t.rect(o.x,o.y,o.w,o.h);t.fill("evenodd");t.restore()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return le(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return ie(i)?le(i,t,null):le(i,null,e)},inXRange:function(t){return le(this._view,t,null)},inYRange:function(t){return le(this._view,null,t)},getCenterPoint:function(){var t=this._view;var e,i;if(ie(t)){e=t.x;i=(t.y+t.base)/2}else{e=(t.x+t.base)/2;i=t.y}return{x:e,y:i}},getArea:function(){var t=this._view;return ie(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),ue={},ce,de=Jt,pe=te,fe=he;ue.Arc=Vt,ue.Line=de,ue.Point=pe,ue.Rectangle=fe;var me=kt._deprecated,ge=kt.valueOrDefault;function ve(t,e){var i=t._length;var n,o,r,a;for(r=1,a=e.length;r<a;++r){i=Math.min(i,Math.abs(e[r]-e[r-1]))}for(r=0,a=t.getTicks().length;r<a;++r){o=t.getPixelForTick(r);i=r>0?Math.min(i,Math.abs(o-n)):i;n=o}return i}function _e(t,e,i){var n=i.barThickness;var o=e.stackCount;var r=e.pixels[t];var a=kt.isNullOrUndef(n)?ve(e.scale,e.pixels):-1;var s,l;if(kt.isNullOrUndef(n)){s=a*i.categoryPercentage;l=i.barPercentage}else{s=n*o;l=1}return{chunk:s/o,ratio:l,start:r-s/2}}function ye(t,e,i){var n=e.pixels;var o=n[t];var r=t>0?n[t-1]:null;var a=t<n.length-1?n[t+1]:null;var s=i.categoryPercentage;var l,h;if(r===null){r=o-(a===null?e.end-e.start:a-o)}if(a===null){a=o+o-r}l=o-(o-Math.min(r,a))/2*s;h=Math.abs(a-r)/2*s;return{chunk:h/e.stackCount,ratio:i.barPercentage,start:l}}dt._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:true,gridLines:{offsetGridLines:true}}],yAxes:[{type:"linear"}]}}),dt._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var xe=Zt.extend({dataElementType:ue.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t=this;var e,i;Zt.prototype.initialize.apply(t,arguments);e=t.getMeta();e.stack=t.getDataset().stack;e.bar=true;i=t._getIndexScale().options;me("bar chart",i.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage");me("bar chart",i.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness");me("bar chart",i.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage");me("bar chart",t._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength");me("bar chart",i.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e=this;var i=e.getMeta().data;var n,o;e._ruler=e.getRuler();for(n=0,o=i.length;n<o;++n){e.updateElement(i[n],n,t)}},updateElement:function(t,e,i){var n=this;var o=n.getMeta();var r=n.getDataset();var a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(o.xAxisID);t._yScale=n.getScaleForId(o.yAxisID);t._datasetIndex=n.index;t._index=e;t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:r.label,label:n.chart.data.labels[e]};if(kt.isArray(r.data[e])){t._model.borderSkipped=null}n._updateElementGeometry(t,e,i,a);t.pivot()},_updateElementGeometry:function(t,e,i,n){var o=this;var r=t._model;var a=o._getValueScale();var s=a.getBasePixel();var l=a.isHorizontal();var h=o._ruler||o.getRuler();var u=o.calculateBarValuePixels(o.index,e,n);var c=o.calculateBarIndexPixels(o.index,e,h,n);r.horizontal=l;r.base=i?s:u.base;r.x=l?i?s:u.head:c.center;r.y=l?c.center:i?s:u.head;r.height=l?c.size:undefined;r.width=l?undefined:c.size},_getStacks:function(t){var e=this;var i=e._getIndexScale();var n=i._getMatchingVisibleMetas(e._type);var o=i.options.stacked;var r=n.length;var a=[];var s,l;for(s=0;s<r;++s){l=n[s];if(o===false||a.indexOf(l.stack)===-1||o===undefined&&l.stack===undefined){a.push(l.stack)}if(l.index===t){break}}return a},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t);var n=e!==undefined?i.indexOf(e):-1;return n===-1?i.length-1:n},getRuler:function(){var t=this;var e=t._getIndexScale();var i=[];var n,o;for(n=0,o=t.getMeta().data.length;n<o;++n){i.push(e.getPixelForValue(null,n,t.index))}return{pixels:i,start:e._startPixel,end:e._endPixel,stackCount:t.getStackCount(),scale:e}},calculateBarValuePixels:function(t,e,i){var n=this;var o=n.chart;var r=n._getValueScale();var a=r.isHorizontal();var s=o.data.datasets;var l=r._getMatchingVisibleMetas(n._type);var h=r._parseValue(s[t].data[e]);var u=i.minBarLength;var c=r.options.stacked;var d=n.getMeta().stack;var p=h.start===undefined?0:h.max>=0&&h.min>=0?h.min:h.max;var f=h.start===undefined?h.end:h.max>=0&&h.min>=0?h.max-h.min:h.min-h.max;var m=l.length;var g,v,_,y,x,b,w;if(c||c===undefined&&d!==undefined){for(g=0;g<m;++g){v=l[g];if(v.index===t){break}if(v.stack===d){w=r._parseValue(s[v.index].data[e]);_=w.start===undefined?w.end:w.min>=0&&w.max>=0?w.max:w.min;if(h.min<0&&_<0||h.max>=0&&_>0){p+=_}}}}y=r.getPixelForValue(p);x=r.getPixelForValue(p+f);b=x-y;if(u!==undefined&&Math.abs(b)<u){b=u;if(f>=0&&!a||f<0&&a){x=y-u}else{x=y+u}}return{size:b,base:y,head:x,center:x+b/2}},calculateBarIndexPixels:function(t,e,i,n){var o=this;var r=n.barThickness==="flex"?ye(e,i,n):_e(e,i,n);var a=o.getStackIndex(t,o.getMeta().stack);var s=r.start+r.chunk*a+r.chunk/2;var l=Math.min(ge(n.maxBarThickness,Infinity),r.chunk*r.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var t=this;var e=t.chart;var i=t._getValueScale();var n=t.getMeta().data;var o=t.getDataset();var r=n.length;var a=0;kt.canvas.clipArea(e.ctx,e.chartArea);for(;a<r;++a){var s=i._parseValue(o.data[a]);if(!isNaN(s.min)&&!isNaN(s.max)){n[a].draw()}}kt.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var t=this;var e=kt.extend({},Zt.prototype._resolveDataElementOptions.apply(t,arguments));var i=t._getIndexScale().options;var n=t._getValueScale().options;e.barPercentage=ge(i.barPercentage,e.barPercentage);e.barThickness=ge(i.barThickness,e.barThickness);e.categoryPercentage=ge(i.categoryPercentage,e.categoryPercentage);e.maxBarThickness=ge(i.maxBarThickness,e.maxBarThickness);e.minBarLength=ge(n.minBarLength,e.minBarLength);return e}}),be=kt.valueOrDefault,we=kt.options.resolve;dt._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";var n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Le=Zt.extend({dataElementType:ue.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(i){var n=this;var t=n.getMeta();var e=t.data;kt.each(e,function(t,e){n.updateElement(t,e,i)})},updateElement:function(t,e,i){var n=this;var o=n.getMeta();var r=t.custom||{};var a=n.getScaleForId(o.xAxisID);var s=n.getScaleForId(o.yAxisID);var l=n._resolveDataElementOptions(t,e);var h=n.getDataset().data[e];var u=n.index;var c=i?a.getPixelForDecimal(.5):a.getPixelForValue(typeof h==="object"?h:NaN,e,u);var d=i?s.getBasePixel():s.getPixelForValue(h,e,u);t._xScale=a;t._yScale=s;t._options=l;t._datasetIndex=u;t._index=e;t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:r.skip||isNaN(c)||isNaN(d),x:c,y:d};t.pivot()},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=kt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=be(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=be(i.hoverBorderColor,n(i.borderColor));e.borderWidth=be(i.hoverBorderWidth,i.borderWidth);e.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(t,e){var i=this;var n=i.chart;var o=i.getDataset();var r=t.custom||{};var a=o.data[e]||{};var s=Zt.prototype._resolveDataElementOptions.apply(i,arguments);var l={chart:n,dataIndex:e,dataset:o,datasetIndex:i.index};if(i._cachedDataOpts===s){s=kt.extend({},s)}s.radius=we([r.radius,a.r,i._config.radius,n.options.elements.point.radius],l,e);return s}}),ke=kt.valueOrDefault,Me=Math.PI,Ce=Me*2,Te=Me/2;dt._set("doughnut",{animation:{animateRotate:true,animateScale:false},hover:{mode:"single"},legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var o=i.labels;var r,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length){for(r=0,a=n[0].data.length;r<a;++r){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[r];if(o[r]){s.appendChild(document.createTextNode(o[r]))}}}return e.outerHTML},legend:{labels:{generateLabels:function(o){var r=o.data;if(r.labels.length&&r.datasets.length){return r.labels.map(function(t,e){var i=o.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(r.datasets[0].data[e])||i.data[e].hidden,index:e}})}return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var o,r,a;for(o=0,r=(n.data.datasets||[]).length;o<r;++o){a=n.getDatasetMeta(o);if(a.data[i]){a.data[i].hidden=!a.data[i].hidden}}n.update()}},cutoutPercentage:50,rotation:-Te,circumference:Ce,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index];var n=": "+e.datasets[t.datasetIndex].data[t.index];if(kt.isArray(i)){i=i.slice();i[0]+=n}else{i+=n}return i}}}});var Pe=Zt.extend({dataElementType:ue.Arc,linkScales:kt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){var e=0;for(var i=0;i<t;++i){if(this.chart.isDatasetVisible(i)){++e}}return e},update:function(t){var e=this;var i=e.chart;var n=i.chartArea;var o=i.options;var r=1;var a=1;var s=0;var l=0;var h=e.getMeta();var u=h.data;var c=o.cutoutPercentage/100||0;var d=o.circumference;var p=e._getRingWeight(e.index);var f,m,g,v;if(d<Ce){var _=o.rotation%Ce;_+=_>=Me?-Ce:_<-Me?Ce:0;var y=_+d;var x=Math.cos(_);var b=Math.sin(_);var w=Math.cos(y);var L=Math.sin(y);var k=_<=0&&y>=0||y>=Ce;var M=_<=Te&&y>=Te||y>=Ce+Te;var C=_===-Me||y>=Me;var T=_<=-Te&&y>=-Te||y>=Me+Te;var P=C?-1:Math.min(x,x*c,w,w*c);var S=T?-1:Math.min(b,b*c,L,L*c);var A=k?1:Math.max(x,x*c,w,w*c);var I=M?1:Math.max(b,b*c,L,L*c);r=(A-P)/2;a=(I-S)/2;s=-(A+P)/2;l=-(I+S)/2}for(g=0,v=u.length;g<v;++g){u[g]._options=e._resolveDataElementOptions(u[g],g)}i.borderWidth=e.getMaxBorderWidth();f=(n.right-n.left-i.borderWidth)/r;m=(n.bottom-n.top-i.borderWidth)/a;i.outerRadius=Math.max(Math.min(f,m)/2,0);i.innerRadius=Math.max(i.outerRadius*c,0);i.radiusLength=(i.outerRadius-i.innerRadius)/(e._getVisibleDatasetWeightTotal()||1);i.offsetX=s*i.outerRadius;i.offsetY=l*i.outerRadius;h.total=e.calculateTotal();e.outerRadius=i.outerRadius-i.radiusLength*e._getRingWeightOffset(e.index);e.innerRadius=Math.max(e.outerRadius-i.radiusLength*p,0);for(g=0,v=u.length;g<v;++g){e.updateElement(u[g],g,t)}},updateElement:function(t,e,i){var n=this;var o=n.chart;var r=o.chartArea;var a=o.options;var s=a.animation;var l=(r.left+r.right)/2;var h=(r.top+r.bottom)/2;var u=a.rotation;var c=a.rotation;var d=n.getDataset();var p=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(d.data[e])*(a.circumference/Ce);var f=i&&s.animateScale?0:n.innerRadius;var m=i&&s.animateScale?0:n.outerRadius;var g=t._options||{};kt.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:l+o.offsetX,y:h+o.offsetY,startAngle:u,endAngle:c,circumference:p,outerRadius:m,innerRadius:f,label:kt.valueAtIndexOrDefault(d.label,e,o.data.labels[e])}});var v=t._model;if(!i||!s.animateRotate){if(e===0){v.startAngle=a.rotation}else{v.startAngle=n.getMeta().data[e-1]._model.endAngle}v.endAngle=v.startAngle+v.circumference}t.pivot()},calculateTotal:function(){var i=this.getDataset();var t=this.getMeta();var n=0;var o;kt.each(t.data,function(t,e){o=i.data[e];if(!isNaN(o)&&!t.hidden){n+=Math.abs(o)}});return n},calculateCircumference:function(t){var e=this.getMeta().total;if(e>0&&!isNaN(t)){return Ce*(Math.abs(t)/e)}return 0},getMaxBorderWidth:function(t){var e=this;var i=0;var n=e.chart;var o,r,a,s,l,h,u,c;if(!t){for(o=0,r=n.data.datasets.length;o<r;++o){if(n.isDatasetVisible(o)){a=n.getDatasetMeta(o);t=a.data;if(o!==e.index){l=a.controller}break}}}if(!t){return 0}for(o=0,r=t.length;o<r;++o){s=t[o];if(l){l._configure();h=l._resolveDataElementOptions(s,o)}else{h=s._options}if(h.borderAlign!=="inner"){u=h.borderWidth;c=h.hoverBorderWidth;i=u>i?u:i;i=c>i?c:i}}return i},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=kt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=ke(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=ke(i.hoverBorderColor,n(i.borderColor));e.borderWidth=ke(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(t){var e=0;for(var i=0;i<t;++i){if(this.chart.isDatasetVisible(i)){e+=this._getRingWeight(i)}}return e},_getRingWeight:function(t){return Math.max(ke(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});dt._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:true,gridLines:{offsetGridLines:true}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),dt._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Se=xe.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ae=kt.valueOrDefault,Ie=kt.options.resolve,De=kt.canvas._isPointInArea;function Oe(t,e){var i=t&&t.options.ticks||{};var n=i.reverse;var o=i.min===undefined?e:0;var r=i.max===undefined?e:0;return{start:n?r:o,end:n?o:r}}function ze(t,e,i){var n=i/2;var o=Oe(t,n);var r=Oe(e,n);return{top:r.end,right:o.end,bottom:r.start,left:o.start}}function Ee(t){var e,i,n,o;if(kt.isObject(t)){e=t.top;i=t.right;n=t.bottom;o=t.left}else{e=i=n=o=t}return{top:e,right:i,bottom:n,left:o}}dt._set("line",{showLines:true,spanGaps:false,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Be=Zt.extend({datasetElementType:ue.Line,dataElementType:ue.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var o=i.data||[];var r=e.chart.options;var a=e._config;var s=e._showLine=Ae(a.showLine,r.showLines);var l,h;e._xScale=e.getScaleForId(i.xAxisID);e._yScale=e.getScaleForId(i.yAxisID);if(s){if(a.tension!==undefined&&a.lineTension===undefined){a.lineTension=a.tension}n._scale=e._yScale;n._datasetIndex=e.index;n._children=o;n._model=e._resolveDatasetElementOptions(n);n.pivot()}for(l=0,h=o.length;l<h;++l){e.updateElement(o[l],l,t)}if(s&&n._model.tension!==0){e.updateBezierControlPoints()}for(l=0,h=o.length;l<h;++l){o[l].pivot()}},updateElement:function(t,e,i){var n=this;var o=n.getMeta();var r=t.custom||{};var a=n.getDataset();var s=n.index;var l=a.data[e];var h=n._xScale;var u=n._yScale;var c=o.dataset._model;var d,p;var f=n._resolveDataElementOptions(t,e);d=h.getPixelForValue(typeof l==="object"?l:NaN,e,s);p=i?u.getBasePixel():n.calculatePointY(l,e,s);t._xScale=h;t._yScale=u;t._options=f;t._datasetIndex=s;t._index=e;t._model={x:d,y:p,skip:r.skip||isNaN(d)||isNaN(p),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:Ae(r.tension,c?c.tension:0),steppedLine:c?c.steppedLine:false,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this;var i=e._config;var n=t.custom||{};var o=e.chart.options;var r=o.elements.line;var a=Zt.prototype._resolveDatasetElementOptions.apply(e,arguments);a.spanGaps=Ae(i.spanGaps,o.spanGaps);a.tension=Ae(i.lineTension,r.tension);a.steppedLine=Ie([n.steppedLine,i.steppedLine,r.stepped]);a.clip=Ee(Ae(i.clip,ze(e._xScale,e._yScale,a.borderWidth)));return a},calculatePointY:function(t,e,i){var n=this;var o=n.chart;var r=n._yScale;var a=0;var s=0;var l,h,u,c,d,p,f;if(r.options.stacked){d=+r.getRightValue(t);p=o._getSortedVisibleDatasetMetas();f=p.length;for(l=0;l<f;++l){u=p[l];if(u.index===i){break}h=o.data.datasets[u.index];if(u.type==="line"&&u.yAxisID===r.id){c=+r.getRightValue(h.data[e]);if(c<0){s+=c||0}else{a+=c||0}}}if(d<0){return r.getPixelForValue(s+d)}return r.getPixelForValue(a+d)}return r.getPixelForValue(t)},updateBezierControlPoints:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.dataset._model;var o=e.chartArea;var r=i.data||[];var a,s,l,h;if(n.spanGaps){r=r.filter(function(t){return!t._model.skip})}function u(t,e,i){return Math.max(Math.min(t,i),e)}if(n.cubicInterpolationMode==="monotone"){kt.splineCurveMonotone(r)}else{for(a=0,s=r.length;a<s;++a){l=r[a]._model;h=kt.splineCurve(kt.previousItem(r,a)._model,l,kt.nextItem(r,a)._model,n.tension);l.controlPointPreviousX=h.previous.x;l.controlPointPreviousY=h.previous.y;l.controlPointNextX=h.next.x;l.controlPointNextY=h.next.y}}if(e.options.elements.line.capBezierPoints){for(a=0,s=r.length;a<s;++a){l=r[a]._model;if(De(l,o)){if(a>0&&De(r[a-1]._model,o)){l.controlPointPreviousX=u(l.controlPointPreviousX,o.left,o.right);l.controlPointPreviousY=u(l.controlPointPreviousY,o.top,o.bottom)}if(a<r.length-1&&De(r[a+1]._model,o)){l.controlPointNextX=u(l.controlPointNextX,o.left,o.right);l.controlPointNextY=u(l.controlPointNextY,o.top,o.bottom)}}}}},draw:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.data||[];var o=e.chartArea;var r=e.canvas;var a=0;var s=n.length;var l;if(t._showLine){l=i.dataset._model.clip;kt.canvas.clipArea(e.ctx,{left:l.left===false?0:o.left-l.left,right:l.right===false?r.width:o.right+l.right,top:l.top===false?0:o.top-l.top,bottom:l.bottom===false?r.height:o.bottom+l.bottom});i.dataset.draw();kt.canvas.unclipArea(e.ctx)}for(;a<s;++a){n[a].draw(o)}},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=kt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=Ae(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Ae(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Ae(i.hoverBorderWidth,i.borderWidth);e.radius=Ae(i.hoverRadius,i.radius)}}),Fe=kt.options.resolve;dt._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:false},gridLines:{circular:true},pointLabels:{display:false},ticks:{beginAtZero:true}},animation:{animateRotate:true,animateScale:true},startAngle:-.5*Math.PI,legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var o=i.labels;var r,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length){for(r=0,a=n[0].data.length;r<a;++r){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[r];if(o[r]){s.appendChild(document.createTextNode(o[r]))}}}return e.outerHTML},legend:{labels:{generateLabels:function(o){var r=o.data;if(r.labels.length&&r.datasets.length){return r.labels.map(function(t,e){var i=o.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(r.datasets[0].data[e])||i.data[e].hidden,index:e}})}return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var o,r,a;for(o=0,r=(n.data.datasets||[]).length;o<r;++o){a=n.getDatasetMeta(o);a.data[i].hidden=!a.data[i].hidden}n.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Re=Zt.extend({dataElementType:ue.Arc,linkScales:kt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getDataset();var n=e.getMeta();var o=e.chart.options.startAngle||0;var r=e._starts=[];var a=e._angles=[];var s=n.data;var l,h,u;e._updateRadius();n.count=e.countVisibleElements();for(l=0,h=i.data.length;l<h;l++){r[l]=o;u=e._computeAngle(l);a[l]=u;o+=u}for(l=0,h=s.length;l<h;++l){s[l]._options=e._resolveDataElementOptions(s[l],l);e.updateElement(s[l],l,t)}},_updateRadius:function(){var t=this;var e=t.chart;var i=e.chartArea;var n=e.options;var o=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(o/2,0);e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0);e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount();t.outerRadius=e.outerRadius-e.radiusLength*t.index;t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this;var o=n.chart;var r=n.getDataset();var a=o.options;var s=a.animation;var l=o.scale;var h=o.data.labels;var u=l.xCenter;var c=l.yCenter;var d=a.startAngle;var p=t.hidden?0:l.getDistanceFromCenterForValue(r.data[e]);var f=n._starts[e];var m=f+(t.hidden?0:n._angles[e]);var g=s.animateScale?0:l.getDistanceFromCenterForValue(r.data[e]);var v=t._options||{};kt.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:c,innerRadius:0,outerRadius:i?g:p,startAngle:i&&s.animateRotate?d:f,endAngle:i&&s.animateRotate?d:m,label:kt.valueAtIndexOrDefault(h,e,h[e])}});t.pivot()},countVisibleElements:function(){var i=this.getDataset();var t=this.getMeta();var n=0;kt.each(t.data,function(t,e){if(!isNaN(i.data[e])&&!t.hidden){n++}});return n},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=kt.getHoverColor;var o=kt.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=o(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=o(i.hoverBorderColor,n(i.borderColor));e.borderWidth=o(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(t){var e=this;var i=this.getMeta().count;var n=e.getDataset();var o=e.getMeta();if(isNaN(n.data[t])||o.data[t].hidden){return 0}var r={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return Fe([e.chart.options.elements.arc.angle,2*Math.PI/i],r,t)}});dt._set("pie",kt.clone(dt.doughnut)),dt._set("pie",{cutoutPercentage:0});var Ne=Pe,Ue=kt.valueOrDefault;dt._set("radar",{spanGaps:false,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Ze=Zt.extend({datasetElementType:ue.Line,dataElementType:ue.Point,linkScales:kt.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var o=i.data||[];var r=e.chart.scale;var a=e._config;var s,l;if(a.tension!==undefined&&a.lineTension===undefined){a.lineTension=a.tension}n._scale=r;n._datasetIndex=e.index;n._children=o;n._loop=true;n._model=e._resolveDatasetElementOptions(n);n.pivot();for(s=0,l=o.length;s<l;++s){e.updateElement(o[s],s,t)}e.updateBezierControlPoints();for(s=0,l=o.length;s<l;++s){o[s].pivot()}},updateElement:function(t,e,i){var n=this;var o=t.custom||{};var r=n.getDataset();var a=n.chart.scale;var s=a.getPointPositionForValue(e,r.data[e]);var l=n._resolveDataElementOptions(t,e);var h=n.getMeta().dataset._model;var u=i?a.xCenter:s.x;var c=i?a.yCenter:s.y;t._scale=a;t._options=l;t._datasetIndex=n.index;t._index=e;t._model={x:u,y:c,skip:o.skip||isNaN(u)||isNaN(c),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ue(o.tension,h?h.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this;var e=t._config;var i=t.chart.options;var n=Zt.prototype._resolveDatasetElementOptions.apply(t,arguments);n.spanGaps=Ue(e.spanGaps,i.spanGaps);n.tension=Ue(e.lineTension,i.elements.line.tension);return n},updateBezierControlPoints:function(){var t=this;var e=t.getMeta();var i=t.chart.chartArea;var n=e.data||[];var o,r,a,s;if(e.dataset._model.spanGaps){n=n.filter(function(t){return!t._model.skip})}function l(t,e,i){return Math.max(Math.min(t,i),e)}for(o=0,r=n.length;o<r;++o){a=n[o]._model;s=kt.splineCurve(kt.previousItem(n,o,true)._model,a,kt.nextItem(n,o,true)._model,a.tension);a.controlPointPreviousX=l(s.previous.x,i.left,i.right);a.controlPointPreviousY=l(s.previous.y,i.top,i.bottom);a.controlPointNextX=l(s.next.x,i.left,i.right);a.controlPointNextY=l(s.next.y,i.top,i.bottom)}},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=kt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=Ue(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Ue(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Ue(i.hoverBorderWidth,i.borderWidth);e.radius=Ue(i.hoverRadius,i.radius)}});dt._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),dt._set("global",{datasets:{scatter:{showLine:false}}});var We,je={bar:xe,bubble:Le,doughnut:Pe,horizontalBar:Se,line:Be,polarArea:Re,pie:Ne,radar:Ze,scatter:Be};function He(t,e){if(t.native){return{x:t.x,y:t.y}}return kt.getRelativePosition(t,e)}function Ge(t,e){var i=t._getSortedVisibleDatasetMetas();var n,o,r,a,s,l;for(o=0,a=i.length;o<a;++o){n=i[o].data;for(r=0,s=n.length;r<s;++r){l=n[r];if(!l._view.skip){e(l)}}}}function Ve(t,e){var i=[];Ge(t,function(t){if(t.inRange(e.x,e.y)){i.push(t)}});return i}function qe(t,n,o,r){var a=Number.POSITIVE_INFINITY;var s=[];Ge(t,function(t){if(o&&!t.inRange(n.x,n.y)){return}var e=t.getCenterPoint();var i=r(n,e);if(i<a){s=[t];a=i}else if(i===a){s.push(t)}});return s}function Ke(t){var o=t.indexOf("x")!==-1;var r=t.indexOf("y")!==-1;return function(t,e){var i=o?Math.abs(t.x-e.x):0;var n=r?Math.abs(t.y-e.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}function Je(t,e,i){var n=He(e,t);i.axis=i.axis||"x";var o=Ke(i.axis);var r=i.intersect?Ve(t,n):qe(t,n,false,o);var a=[];if(!r.length){return[]}t._getSortedVisibleDatasetMetas().forEach(function(t){var e=t.data[r[0]._index];if(e&&!e._view.skip){a.push(e)}});return a}var Ye={modes:{single:function(t,e){var i=He(e,t);var n=[];Ge(t,function(t){if(t.inRange(i.x,i.y)){n.push(t);return n}});return n.slice(0,1)},label:Je,index:Je,dataset:function(t,e,i){var n=He(e,t);i.axis=i.axis||"xy";var o=Ke(i.axis);var r=i.intersect?Ve(t,n):qe(t,n,false,o);if(r.length>0){r=t.getDatasetMeta(r[0]._datasetIndex).data}return r},"x-axis":function(t,e){return Je(t,e,{intersect:false})},point:function(t,e){var i=He(e,t);return Ve(t,i)},nearest:function(t,e,i){var n=He(e,t);i.axis=i.axis||"xy";var o=Ke(i.axis);return qe(t,n,i.intersect,o)},x:function(t,e,i){var n=He(e,t);var o=[];var r=false;Ge(t,function(t){if(t.inXRange(n.x)){o.push(t)}if(t.inRange(n.x,n.y)){r=true}});if(i.intersect&&!r){o=[]}return o},y:function(t,e,i){var n=He(e,t);var o=[];var r=false;Ge(t,function(t){if(t.inYRange(n.y)){o.push(t)}if(t.inRange(n.x,n.y)){r=true}});if(i.intersect&&!r){o=[]}return o}}},Xe=kt.extend;function Qe(t,e){return kt.where(t,function(t){return t.pos===e})}function $e(t,o){return t.sort(function(t,e){var i=o?e:t;var n=o?t:e;return i.weight===n.weight?i.index-n.index:i.weight-n.weight})}function ti(t){var e=[];var i,n,o;for(i=0,n=(t||[]).length;i<n;++i){o=t[i];e.push({index:i,box:o,pos:o.position,horizontal:o.isHorizontal(),weight:o.weight})}return e}function ei(t,e){var i,n,o;for(i=0,n=t.length;i<n;++i){o=t[i];o.width=o.horizontal?o.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth;o.height=o.horizontal&&e.hBoxMaxHeight}}function ii(t){var e=ti(t);var i=$e(Qe(e,"left"),true);var n=$e(Qe(e,"right"));var o=$e(Qe(e,"top"),true);var r=$e(Qe(e,"bottom"));return{leftAndTop:i.concat(o),rightAndBottom:n.concat(r),chartArea:Qe(e,"chartArea"),vertical:i.concat(n),horizontal:o.concat(r)}}function ni(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function oi(t,e,i){var n=i.box;var o=t.maxPadding;var r,a;if(i.size){t[i.pos]-=i.size}i.size=i.horizontal?n.height:n.width;t[i.pos]+=i.size;if(n.getPadding){var s=n.getPadding();o.top=Math.max(o.top,s.top);o.left=Math.max(o.left,s.left);o.bottom=Math.max(o.bottom,s.bottom);o.right=Math.max(o.right,s.right)}r=e.outerWidth-ni(o,t,"left","right");a=e.outerHeight-ni(o,t,"top","bottom");if(r!==t.w||a!==t.h){t.w=r;t.h=a;return i.horizontal?r!==t.w:a!==t.h}}function ri(i){var n=i.maxPadding;function t(t){var e=Math.max(n[t]-i[t],0);i[t]+=e;return e}i.y+=t("top");i.x+=t("left");t("right");t("bottom")}function ai(t,i){var n=i.maxPadding;function e(t){var e={left:0,top:0,right:0,bottom:0};t.forEach(function(t){e[t]=Math.max(i[t],n[t])});return e}return t?e(["left","right"]):e(["top","bottom"])}function si(t,e,i){var n=[];var o,r,a,s,l,h;for(o=0,r=t.length;o<r;++o){a=t[o];s=a.box;s.update(a.width||e.w,a.height||e.h,ai(a.horizontal,e));if(oi(e,i,a)){h=true;if(n.length){l=true}}if(!s.fullWidth){n.push(a)}}return l?si(n,e,i)||h:h}function li(t,e,i){var n=i.padding;var o=e.x;var r=e.y;var a,s,l,h;for(a=0,s=t.length;a<s;++a){l=t[a];h=l.box;if(l.horizontal){h.left=h.fullWidth?n.left:e.left;h.right=h.fullWidth?i.outerWidth-n.right:e.left+e.w;h.top=r;h.bottom=r+h.height;h.width=h.right-h.left;r=h.bottom}else{h.left=o;h.right=o+h.width;h.top=e.top;h.bottom=e.top+e.h;h.height=h.bottom-h.top;o=h.right}}e.x=o;e.y=r}dt._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var hi={defaults:{},addBox:function(t,e){if(!t.boxes){t.boxes=[]}e.fullWidth=e.fullWidth||false;e.position=e.position||"top";e.weight=e.weight||0;e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]};t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;if(i!==-1){t.boxes.splice(i,1)}},configure:function(t,e,i){var n=["fullWidth","position","weight"];var o=n.length;var r=0;var a;for(;r<o;++r){a=n[r];if(i.hasOwnProperty(a)){e[a]=i[a]}}},update:function(i,t,e){if(!i){return}var n=i.options.layout||{};var o=kt.options.toPadding(n.padding);var r=t-o.width;var a=e-o.height;var s=ii(i.boxes);var l=s.vertical;var h=s.horizontal;var u=Object.freeze({outerWidth:t,outerHeight:e,padding:o,availableWidth:r,vBoxMaxWidth:r/2/l.length,hBoxMaxHeight:a/2});var c=Xe({maxPadding:Xe({},o),w:r,h:a,x:o.left,y:o.top},o);ei(l.concat(h),u);si(l,c,u);if(si(h,c,u)){si(l,c,u)}ri(c);li(s.leftAndTop,c,u);c.x+=c.w;c.y+=c.h;li(s.rightAndBottom,c,u);i.chartArea={left:c.left,top:c.top,right:c.left+c.w,bottom:c.top+c.h};kt.each(s.chartArea,function(t){var e=t.box;Xe(e,i.chartArea);e.update(c.w,c.h)})}},ui={acquireContext:function(t){if(t&&t.canvas){t=t.canvas}return t&&t.getContext("2d")||null}},ci="/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n",di,pi=e(Object.freeze({__proto__:null,default:ci})),fi="$chartjs",mi="chartjs-",gi=mi+"size-monitor",vi=mi+"render-monitor",_i=mi+"render-animation",yi=["animationstart","webkitAnimationStart"],xi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function bi(t,e){var i=kt.getStyle(t,e);var n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):undefined}function wi(t,e){var i=t.style;var n=t.getAttribute("height");var o=t.getAttribute("width");t[fi]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}};i.display=i.display||"block";if(o===null||o===""){var r=bi(t,"width");if(r!==undefined){t.width=r}}if(n===null||n===""){if(t.style.height===""){t.height=t.width/(e.options.aspectRatio||2)}else{var a=bi(t,"height");if(r!==undefined){t.height=a}}}return t}var Li,ki=function(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("e",null,e)}catch(t){}return t}()?{passive:true}:false;function Mi(t,e,i){t.addEventListener(e,i,ki)}function Ci(t,e,i){t.removeEventListener(e,i,ki)}function Ti(t,e,i,n,o){return{type:t,chart:e,native:o||null,x:i!==undefined?i:null,y:n!==undefined?n:null}}function Pi(t,e){var i=xi[t.type]||t.type;var n=kt.getRelativePosition(t,e);return Ti(i,e,n.x,n.y,t)}function Si(t,e){var i=false;var n=[];return function(){n=Array.prototype.slice.call(arguments);e=e||this;if(!i){i=true;kt.requestAnimFrame.call(window,function(){i=false;t.apply(e,n)})}}}function Ai(t){var e=document.createElement("div");e.className=t||"";return e}function Ii(t){var e=1e6;var i=Ai(gi);var n=Ai(gi+"-expand");var o=Ai(gi+"-shrink");n.appendChild(Ai());o.appendChild(Ai());i.appendChild(n);i.appendChild(o);i._reset=function(){n.scrollLeft=e;n.scrollTop=e;o.scrollLeft=e;o.scrollTop=e};var r=function(){i._reset();t()};Mi(n,"scroll",r.bind(n,"expand"));Mi(o,"scroll",r.bind(o,"shrink"));return i}function Di(e,i){var t=e[fi]||(e[fi]={});var n=t.renderProxy=function(t){if(t.animationName===_i){i()}};kt.each(yi,function(t){Mi(e,t,n)});t.reflow=!!e.offsetParent;e.classList.add(vi)}function Oi(e){var t=e[fi]||{};var i=t.renderProxy;if(i){kt.each(yi,function(t){Ci(e,t,i)});delete t.renderProxy}e.classList.remove(vi)}function zi(i,n,o){var r=i[fi]||(i[fi]={});var e=r.resizer=Ii(Si(function(){if(r.resizer){var t=o.options.maintainAspectRatio&&i.parentNode;var e=t?t.clientWidth:0;n(Ti("resize",o));if(t&&t.clientWidth<e&&o.canvas){n(Ti("resize",o))}}}));Di(i,function(){if(r.resizer){var t=i.parentNode;if(t&&t!==e.parentNode){t.insertBefore(e,t.firstChild)}e._reset()}})}function Ei(t){var e=t[fi]||{};var i=e.resizer;delete e.resizer;Oi(t);if(i&&i.parentNode){i.parentNode.removeChild(i)}}function Bi(t,e){var i=t[fi]||(t[fi]={});if(!i.containsStyles){i.containsStyles=true;e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css");n.appendChild(document.createTextNode(e));t.appendChild(n)}}var Fi={disableCSSInjection:false,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;var i=e.host?e:document.head;Bi(i,pi)}},acquireContext:function(t,e){if(typeof t==="string"){t=document.getElementById(t)}else if(t.length){t=t[0]}if(t&&t.canvas){t=t.canvas}var i=t&&t.getContext&&t.getContext("2d");if(i&&i.canvas===t){this._ensureLoaded(t);wi(t,e);return i}return null},releaseContext:function(t){var i=t.canvas;if(!i[fi]){return}var n=i[fi].initial;["height","width"].forEach(function(t){var e=n[t];if(kt.isNullOrUndef(e)){i.removeAttribute(t)}else{i.setAttribute(t,e)}});kt.each(n.style||{},function(t,e){i.style[e]=t});i.width=i.width;delete i[fi]},addEventListener:function(e,t,i){var n=e.canvas;if(t==="resize"){zi(n,i,e);return}var o=i[fi]||(i[fi]={});var r=o.proxies||(o.proxies={});var a=r[e.id+"_"+t]=function(t){i(Pi(t,e))};Mi(n,t,a)},removeEventListener:function(t,e,i){var n=t.canvas;if(e==="resize"){Ei(n);return}var o=i[fi]||{};var r=o.proxies||{};var a=r[t.id+"_"+e];if(!a){return}Ci(n,e,a)}};kt.addEvent=Mi,kt.removeEvent=Ci;var Ri=Fi._enabled?Fi:ui,Ni=kt.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ri);dt._set("global",{plugins:{}});var Ui={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){if(e.indexOf(t)===-1){e.push(t)}});this._cacheId++},unregister:function(t){var i=this._plugins;[].concat(t).forEach(function(t){var e=i.indexOf(t);if(e!==-1){i.splice(e,1)}});this._cacheId++},clear:function(){this._plugins=[];this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n=this.descriptors(t);var o=n.length;var r,a,s,l,h;for(r=0;r<o;++r){a=n[r];s=a.plugin;h=s[e];if(typeof h==="function"){l=[t].concat(i||[]);l.push(a.options);if(h.apply(s,l)===false){return false}}}return true},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId){return e.descriptors}var o=[];var r=[];var i=t&&t.config||{};var a=i.options&&i.options.plugins||{};this._plugins.concat(i.plugins||[]).forEach(function(t){var e=o.indexOf(t);if(e!==-1){return}var i=t.id;var n=a[i];if(n===false){return}if(n===true){n=kt.clone(dt.global.plugins[i])}o.push(t);r.push({plugin:t,options:n||{}})});e.descriptors=r;e.id=this._cacheId;return r},_invalidate:function(t){delete t.$plugins}},Zi={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e;this.defaults[t]=kt.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:undefined},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?kt.merge({},[dt.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var i=this;if(i.defaults.hasOwnProperty(t)){i.defaults[t]=kt.extend(i.defaults[t],e)}},addScalesToLayout:function(e){kt.each(e.scales,function(t){t.fullWidth=t.options.fullWidth;t.position=t.options.position;t.weight=t.options.weight;hi.addBox(e,t)})}},Wi=kt.valueOrDefault,ji=kt.rtl.getRtlAdapter;dt._set("global",{tooltips:{enabled:true,custom:null,mode:"nearest",position:"average",intersect:true,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:true,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:kt.noop,title:function(t,e){var i="";var n=e.labels;var o=n?n.length:0;if(t.length>0){var r=t[0];if(r.label){i=r.label}else if(r.xLabel){i=r.xLabel}else if(o>0&&r.index<o){i=n[r.index]}}return i},afterTitle:kt.noop,beforeBody:kt.noop,beforeLabel:kt.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";if(i){i+=": "}if(!kt.isNullOrUndef(t.value)){i+=t.value}else{i+=t.yLabel}return i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex);var n=i.data[t.index];var o=n._view;return{borderColor:o.borderColor,backgroundColor:o.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:kt.noop,afterBody:kt.noop,beforeFooter:kt.noop,footer:kt.noop,afterFooter:kt.noop}}});var Hi={average:function(t){if(!t.length){return false}var e,i;var n=0;var o=0;var r=0;for(e=0,i=t.length;e<i;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x;o+=s.y;++r}}return{x:n/r,y:o/r}},nearest:function(t,e){var i=e.x;var n=e.y;var o=Number.POSITIVE_INFINITY;var r,a,s;for(r=0,a=t.length;r<a;++r){var l=t[r];if(l&&l.hasValue()){var h=l.getCenterPoint();var u=kt.distanceBetweenPoints(e,h);if(u<o){o=u;s=l}}}if(s){var c=s.tooltipPosition();i=c.x;n=c.y}return{x:i,y:n}}};function Gi(t,e){if(e){if(kt.isArray(e)){Array.prototype.push.apply(t,e)}else{t.push(e)}}return t}function Vi(t){if((typeof t==="string"||t instanceof String)&&t.indexOf("\n")>-1){return t.split("\n")}return t}function qi(t){var e=t._xScale;var i=t._yScale||t._scale;var n=t._index;var o=t._datasetIndex;var r=t._chart.getDatasetMeta(o).controller;var a=r._getIndexScale();var s=r._getValueScale();return{xLabel:e?e.getLabelForIndex(n,o):"",yLabel:i?i.getLabelForIndex(n,o):"",label:a?""+a.getLabelForIndex(n,o):"",value:s?""+s.getLabelForIndex(n,o):"",index:n,datasetIndex:o,x:t._model.x,y:t._model.y}}function Ki(t){var e=dt.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Wi(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Wi(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Wi(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Wi(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Wi(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Wi(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Wi(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Wi(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Wi(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ji(t,e){var i=t._chart.ctx;var n=e.yPadding*2;var o=0;var r=e.body;var a=r.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length;var l=e.footer.length;var h=e.titleFontSize;var u=e.bodyFontSize;var c=e.footerFontSize;n+=s*h;n+=s?(s-1)*e.titleSpacing:0;n+=s?e.titleMarginBottom:0;n+=a*u;n+=a?(a-1)*e.bodySpacing:0;n+=l?e.footerMarginTop:0;n+=l*c;n+=l?(l-1)*e.footerSpacing:0;var d=0;var p=function(t){o=Math.max(o,i.measureText(t).width+d)};i.font=kt.fontString(h,e._titleFontStyle,e._titleFontFamily);kt.each(e.title,p);i.font=kt.fontString(u,e._bodyFontStyle,e._bodyFontFamily);kt.each(e.beforeBody.concat(e.afterBody),p);d=e.displayColors?u+2:0;kt.each(r,function(t){kt.each(t.before,p);kt.each(t.lines,p);kt.each(t.after,p)});d=0;i.font=kt.fontString(c,e._footerFontStyle,e._footerFontFamily);kt.each(e.footer,p);o+=2*e.xPadding;return{width:o,height:n}}function Yi(t,e){var i=t._model;var n=t._chart;var o=t._chart.chartArea;var r="center";var a="center";if(i.y<e.height){a="top"}else if(i.y>n.height-e.height){a="bottom"}var s,l;var h,u;var c;var d=(o.left+o.right)/2;var p=(o.top+o.bottom)/2;if(a==="center"){s=function(t){return t<=d};l=function(t){return t>d}}else{s=function(t){return t<=e.width/2};l=function(t){return t>=n.width-e.width/2}}h=function(t){return t+e.width+i.caretSize+i.caretPadding>n.width};u=function(t){return t-e.width-i.caretSize-i.caretPadding<0};c=function(t){return t<=p?"top":"bottom"};if(s(i.x)){r="left";if(h(i.x)){r="center";a=c(i.y)}}else if(l(i.x)){r="right";if(u(i.x)){r="center";a=c(i.y)}}var f=t._options;return{xAlign:f.xAlign?f.xAlign:r,yAlign:f.yAlign?f.yAlign:a}}function Xi(t,e,i,n){var o=t.x;var r=t.y;var a=t.caretSize;var s=t.caretPadding;var l=t.cornerRadius;var h=i.xAlign;var u=i.yAlign;var c=a+s;var d=l+s;if(h==="right"){o-=e.width}else if(h==="center"){o-=e.width/2;if(o+e.width>n.width){o=n.width-e.width}if(o<0){o=0}}if(u==="top"){r+=c}else if(u==="bottom"){r-=e.height+c}else{r-=e.height/2}if(u==="center"){if(h==="left"){o+=c}else if(h==="right"){o-=c}}else if(h==="left"){o-=d}else if(h==="right"){o+=d}return{x:o,y:r}}function Qi(t,e){return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-t.xPadding:t.x+t.xPadding}function $i(t){return Gi([],Vi(t))}var tn,en,nn=Dt.extend({initialize:function(){this._model=Ki(this._options);this._lastActive=[]},getTitle:function(){var t=this;var e=t._options;var i=e.callbacks;var n=i.beforeTitle.apply(t,arguments);var o=i.title.apply(t,arguments);var r=i.afterTitle.apply(t,arguments);var a=[];a=Gi(a,Vi(n));a=Gi(a,Vi(o));a=Gi(a,Vi(r));return a},getBeforeBody:function(){return $i(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,i){var n=this;var o=n._options.callbacks;var r=[];kt.each(t,function(t){var e={before:[],lines:[],after:[]};Gi(e.before,Vi(o.beforeLabel.call(n,t,i)));Gi(e.lines,o.label.call(n,t,i));Gi(e.after,Vi(o.afterLabel.call(n,t,i)));r.push(e)});return r},getAfterBody:function(){return $i(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this;var e=t._options.callbacks;var i=e.beforeFooter.apply(t,arguments);var n=e.footer.apply(t,arguments);var o=e.afterFooter.apply(t,arguments);var r=[];r=Gi(r,Vi(i));r=Gi(r,Vi(n));r=Gi(r,Vi(o));return r},update:function(t){var e=this;var i=e._options;var n=e._model;var o=e._model=Ki(i);var r=e._active;var a=e._data;var s={xAlign:n.xAlign,yAlign:n.yAlign};var l={x:n.x,y:n.y};var h={width:n.width,height:n.height};var u={x:n.caretX,y:n.caretY};var c,d;if(r.length){o.opacity=1;var p=[];var f=[];u=Hi[i.position].call(e,r,e._eventPosition);var m=[];for(c=0,d=r.length;c<d;++c){m.push(qi(r[c]))}if(i.filter){m=m.filter(function(t){return i.filter(t,a)})}if(i.itemSort){m=m.sort(function(t,e){return i.itemSort(t,e,a)})}kt.each(m,function(t){p.push(i.callbacks.labelColor.call(e,t,e._chart));f.push(i.callbacks.labelTextColor.call(e,t,e._chart))});o.title=e.getTitle(m,a);o.beforeBody=e.getBeforeBody(m,a);o.body=e.getBody(m,a);o.afterBody=e.getAfterBody(m,a);o.footer=e.getFooter(m,a);o.x=u.x;o.y=u.y;o.caretPadding=i.caretPadding;o.labelColors=p;o.labelTextColors=f;o.dataPoints=m;h=Ji(this,o);s=Yi(this,h);l=Xi(o,h,s,e._chart)}else{o.opacity=0}o.xAlign=s.xAlign;o.yAlign=s.yAlign;o.x=l.x;o.y=l.y;o.width=h.width;o.height=h.height;o.caretX=u.x;o.caretY=u.y;e._model=o;if(t&&i.custom){i.custom.call(e,o)}return e},drawCaret:function(t,e){var i=this._chart.ctx;var n=this._view;var o=this.getCaretPosition(t,e,n);i.lineTo(o.x1,o.y1);i.lineTo(o.x2,o.y2);i.lineTo(o.x3,o.y3)},getCaretPosition:function(t,e,i){var n,o,r,a,s,l;var h=i.caretSize;var u=i.cornerRadius;var c=i.xAlign;var d=i.yAlign;var p=t.x;var f=t.y;var m=e.width;var g=e.height;if(d==="center"){s=f+g/2;if(c==="left"){n=p;o=n-h;r=n;a=s+h;l=s-h}else{n=p+m;o=n+h;r=n;a=s-h;l=s+h}}else{if(c==="left"){o=p+u+h;n=o-h;r=o+h}else if(c==="right"){o=p+m-u-h;n=o-h;r=o+h}else{o=i.caretX;n=o-h;r=o+h}if(d==="top"){a=f;s=a-h;l=a}else{a=f+g;s=a+h;l=a;var v=r;r=n;n=v}}return{x1:n,x2:o,x3:r,y1:a,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;var o=n.length;var r,a,s;if(o){var l=ji(e.rtl,e.x,e.width);t.x=Qi(e,e._titleAlign);i.textAlign=l.textAlign(e._titleAlign);i.textBaseline="middle";r=e.titleFontSize;a=e.titleSpacing;i.fillStyle=e.titleFontColor;i.font=kt.fontString(r,e._titleFontStyle,e._titleFontFamily);for(s=0;s<o;++s){i.fillText(n[s],l.x(t.x),t.y+r/2);t.y+=r+a;if(s+1===o){t.y+=e.titleMarginBottom-a}}}},drawBody:function(e,t,i){var n=t.bodyFontSize;var o=t.bodySpacing;var r=t._bodyAlign;var a=t.body;var s=t.displayColors;var l=0;var h=s?Qi(t,"left"):0;var u=ji(t.rtl,t.x,t.width);var c=function(t){i.fillText(t,u.x(e.x+l),e.y+n/2);e.y+=n+o};var d,p,f,m,g,v,_,y;var x=u.textAlign(r);i.textAlign=r;i.textBaseline="middle";i.font=kt.fontString(n,t._bodyFontStyle,t._bodyFontFamily);e.x=Qi(t,x);i.fillStyle=t.bodyFontColor;kt.each(t.beforeBody,c);l=s&&x!=="right"?r==="center"?n/2+1:n+2:0;for(g=0,_=a.length;g<_;++g){d=a[g];p=t.labelTextColors[g];f=t.labelColors[g];i.fillStyle=p;kt.each(d.before,c);m=d.lines;for(v=0,y=m.length;v<y;++v){if(s){var b=u.x(h);i.fillStyle=t.legendColorBackground;i.fillRect(u.leftForLtr(b,n),e.y,n,n);i.lineWidth=1;i.strokeStyle=f.borderColor;i.strokeRect(u.leftForLtr(b,n),e.y,n,n);i.fillStyle=f.backgroundColor;i.fillRect(u.leftForLtr(u.xPlus(b,1),n-2),e.y+1,n-2,n-2);i.fillStyle=p}c(m[v])}kt.each(d.after,c)}l=0;kt.each(t.afterBody,c);e.y-=o},drawFooter:function(t,e,i){var n=e.footer;var o=n.length;var r,a;if(o){var s=ji(e.rtl,e.x,e.width);t.x=Qi(e,e._footerAlign);t.y+=e.footerMarginTop;i.textAlign=s.textAlign(e._footerAlign);i.textBaseline="middle";r=e.footerFontSize;i.fillStyle=e.footerFontColor;i.font=kt.fontString(r,e._footerFontStyle,e._footerFontFamily);for(a=0;a<o;++a){i.fillText(n[a],s.x(t.x),t.y+r/2);t.y+=r+e.footerSpacing}}},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor;i.strokeStyle=e.borderColor;i.lineWidth=e.borderWidth;var o=e.xAlign;var r=e.yAlign;var a=t.x;var s=t.y;var l=n.width;var h=n.height;var u=e.cornerRadius;i.beginPath();i.moveTo(a+u,s);if(r==="top"){this.drawCaret(t,n)}i.lineTo(a+l-u,s);i.quadraticCurveTo(a+l,s,a+l,s+u);if(r==="center"&&o==="right"){this.drawCaret(t,n)}i.lineTo(a+l,s+h-u);i.quadraticCurveTo(a+l,s+h,a+l-u,s+h);if(r==="bottom"){this.drawCaret(t,n)}i.lineTo(a+u,s+h);i.quadraticCurveTo(a,s+h,a,s+h-u);if(r==="center"&&o==="left"){this.drawCaret(t,n)}i.lineTo(a,s+u);i.quadraticCurveTo(a,s,a+u,s);i.closePath();i.fill();if(e.borderWidth>0){i.stroke()}},draw:function(){var t=this._chart.ctx;var e=this._view;if(e.opacity===0){return}var i={width:e.width,height:e.height};var n={x:e.x,y:e.y};var o=Math.abs(e.opacity<.001)?0:e.opacity;var r=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;if(this._options.enabled&&r){t.save();t.globalAlpha=o;this.drawBackground(n,e,t,i);n.y+=e.yPadding;kt.rtl.overrideTextDirection(t,e.textDirection);this.drawTitle(n,e,t);this.drawBody(n,e,t);this.drawFooter(n,e,t);kt.rtl.restoreTextDirection(t,e.textDirection);t.restore()}},handleEvent:function(t){var e=this;var i=e._options;var n=false;e._lastActive=e._lastActive||[];if(t.type==="mouseout"){e._active=[]}else{e._active=e._chart.getElementsAtEventForMode(t,i.mode,i);if(i.reverse){e._active.reverse()}}n=!kt.arrayEquals(e._active,e._lastActive);if(n){e._lastActive=e._active;if(i.enabled||i.custom){e._eventPosition={x:t.x,y:t.y};e.update(true);e.pivot()}}return n}});nn.positioners=Hi;var on=kt.valueOrDefault;function rn(){return kt.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if(t==="xAxes"||t==="yAxes"){var o=i[t].length;var r,a,s;if(!e[t]){e[t]=[]}for(r=0;r<o;++r){s=i[t][r];a=on(s.type,t==="xAxes"?"category":"linear");if(r>=e[t].length){e[t].push({})}if(!e[t][r].type||s.type&&s.type!==e[t][r].type){kt.merge(e[t][r],[Zi.getScaleDefaults(a),s])}else{kt.merge(e[t][r],s)}}}else{kt._merger(t,e,i,n)}}})}function an(){return kt.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var o=e[t]||{};var r=i[t];if(t==="scales"){e[t]=rn(o,r)}else if(t==="scale"){e[t]=kt.merge(o,[Zi.getScaleDefaults(r.type),r])}else{kt._merger(t,e,i,n)}}})}function sn(t){t=t||{};var e=t.data=t.data||{};e.datasets=e.datasets||[];e.labels=e.labels||[];t.options=an(dt.global,dt[t.type],t.options||{});return t}function ln(e){var t=e.options;kt.each(e.scales,function(t){hi.removeBox(e,t)});t=an(dt.global,dt[e.config.type],t);e.options=e.config.options=t;e.ensureScalesHaveIDs();e.buildOrUpdateScales();e.tooltip._options=t.tooltips;e.tooltip.initialize()}function hn(t,e,i){var n;var o=function(t){return t.id===n};do{n=e+i++}while(kt.findIndex(t,o)>=0);return n}function un(t){return t==="top"||t==="bottom"}function cn(i,n){return function(t,e){return t[i]===e[i]?t[n]-e[n]:t[i]-e[i]}}dt._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:true,animationDuration:400},onClick:null,maintainAspectRatio:true,responsive:true,responsiveAnimationDuration:0});var dn=function(t,e){this.construct(t,e);return this};kt.extend(dn.prototype,{construct:function(t,e){var i=this;e=sn(e);var n=Ni.acquireContext(t,e);var o=n&&n.canvas;var r=o&&o.height;var a=o&&o.width;i.id=kt.uid();i.ctx=n;i.canvas=o;i.config=e;i.width=a;i.height=r;i.aspectRatio=r?a/r:null;i.options=e.options;i._bufferedRender=false;i._layers=[];i.chart=i;i.controller=i;dn.instances[i.id]=i;Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}});if(!n||!o){console.error("Failed to create chart: can't acquire context from the given item");return}i.initialize();i.update()},initialize:function(){var t=this;Ui.notify(t,"beforeInit");kt.retinaScale(t,t.options.devicePixelRatio);t.bindEvents();if(t.options.responsive){t.resize(true)}t.initToolTip();Ui.notify(t,"afterInit");return t},clear:function(){kt.canvas.clear(this);return this},stop:function(){Et.cancelAnimation(this);return this},resize:function(t){var e=this;var i=e.options;var n=e.canvas;var o=i.maintainAspectRatio&&e.aspectRatio||null;var r=Math.max(0,Math.floor(kt.getMaximumWidth(n)));var a=Math.max(0,Math.floor(o?r/o:kt.getMaximumHeight(n)));if(e.width===r&&e.height===a){return}n.width=e.width=r;n.height=e.height=a;n.style.width=r+"px";n.style.height=a+"px";kt.retinaScale(e,i.devicePixelRatio);if(!t){var s={width:r,height:a};Ui.notify(e,"resize",[s]);if(i.onResize){i.onResize(e,s)}e.stop();e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options;var i=t.scales||{};var e=t.scale;kt.each(i.xAxes,function(t,e){if(!t.id){t.id=hn(i.xAxes,"x-axis-",e)}});kt.each(i.yAxes,function(t,e){if(!t.id){t.id=hn(i.yAxes,"y-axis-",e)}});if(e){e.id=e.id||"scale"}},buildOrUpdateScales:function(){var a=this;var t=a.options;var s=a.scales||{};var e=[];var l=Object.keys(s).reduce(function(t,e){t[e]=false;return t},{});if(t.scales){e=e.concat((t.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))}if(t.scale){e.push({options:t.scale,dtype:"radialLinear",isDefault:true,dposition:"chartArea"})}kt.each(e,function(t){var e=t.options;var i=e.id;var n=on(e.type,t.dtype);if(un(e.position)!==un(t.dposition)){e.position=t.dposition}l[i]=true;var o=null;if(i in s&&s[i].type===n){o=s[i];o.options=e;o.ctx=a.ctx;o.chart=a}else{var r=Zi.getScaleConstructor(n);if(!r){return}o=new r({id:i,type:n,options:e,ctx:a.ctx,chart:a});s[o.id]=o}o.mergeTicksOptions();if(t.isDefault){a.scale=o}});kt.each(l,function(t,e){if(!t){delete s[e]}});a.scales=s;Zi.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this;var e=[];var i=t.data.datasets;var n,o;for(n=0,o=i.length;n<o;n++){var r=i[n];var a=t.getDatasetMeta(n);var s=r.type||t.config.type;if(a.type&&a.type!==s){t.destroyDatasetMeta(n);a=t.getDatasetMeta(n)}a.type=s;a.order=r.order||0;a.index=n;if(a.controller){a.controller.updateIndex(n);a.controller.linkScales()}else{var l=je[a.type];if(l===undefined){throw new Error('"'+a.type+'" is not a chart type.')}a.controller=new l(t,n);e.push(a.controller)}}return e},resetElements:function(){var i=this;kt.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.reset()},i)},reset:function(){this.resetElements();this.tooltip.initialize()},update:function(t){var e=this;var i,n;if(!t||typeof t!=="object"){t={duration:t,lazy:arguments[1]}}ln(e);Ui._invalidate(e);if(Ui.notify(e,"beforeUpdate")===false){return}e.tooltip._data=e.data;var o=e.buildOrUpdateControllers();for(i=0,n=e.data.datasets.length;i<n;i++){e.getDatasetMeta(i).controller.buildOrUpdateElements()}e.updateLayout();if(e.options.animation&&e.options.animation.duration){kt.each(o,function(t){t.reset()})}e.updateDatasets();e.tooltip.initialize();e.lastActive=[];Ui.notify(e,"afterUpdate");e._layers.sort(cn("z","_idx"));if(e._bufferedRender){e._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}}else{e.render(t)}},updateLayout:function(){var e=this;if(Ui.notify(e,"beforeLayout")===false){return}hi.update(this,this.width,this.height);e._layers=[];kt.each(e.boxes,function(t){if(t._configure){t._configure()}e._layers.push.apply(e._layers,t._layers())},e);e._layers.forEach(function(t,e){t._idx=e});Ui.notify(e,"afterScaleUpdate");Ui.notify(e,"afterLayout")},updateDatasets:function(){var t=this;if(Ui.notify(t,"beforeDatasetsUpdate")===false){return}for(var e=0,i=t.data.datasets.length;e<i;++e){t.updateDataset(e)}Ui.notify(t,"afterDatasetsUpdate")},updateDataset:function(t){var e=this;var i=e.getDatasetMeta(t);var n={meta:i,index:t};if(Ui.notify(e,"beforeDatasetUpdate",[n])===false){return}i.controller._update();Ui.notify(e,"afterDatasetUpdate",[n])},render:function(t){var e=this;if(!t||typeof t!=="object"){t={duration:t,lazy:arguments[1]}}var i=e.options.animation;var n=on(t.duration,i&&i.duration);var o=t.lazy;if(Ui.notify(e,"beforeRender")===false){return}var r=function(t){Ui.notify(e,"afterRender");kt.callback(i&&i.onComplete,[t],e)};if(i&&n){var a=new zt({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=kt.easing.effects[e.easing];var n=e.currentStep;var o=n/e.numSteps;t.draw(i(o),o,n)},onAnimationProgress:i.onProgress,onAnimationComplete:r});Et.addAnimation(e,a,n,o)}else{e.draw();r(new zt({numSteps:0,chart:e}))}return e},draw:function(t){var e=this;var i,n;e.clear();if(kt.isNullOrUndef(t)){t=1}e.transition(t);if(e.width<=0||e.height<=0){return}if(Ui.notify(e,"beforeDraw",[t])===false){return}n=e._layers;for(i=0;i<n.length&&n[i].z<=0;++i){n[i].draw(e.chartArea)}e.drawDatasets(t);for(;i<n.length;++i){n[i].draw(e.chartArea)}e._drawTooltip(t);Ui.notify(e,"afterDraw",[t])},transition:function(t){var e=this;for(var i=0,n=(e.data.datasets||[]).length;i<n;++i){if(e.isDatasetVisible(i)){e.getDatasetMeta(i).controller.transition(t)}}e.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e=this;var i=e.data.datasets||[];var n=[];var o,r;for(o=0,r=i.length;o<r;++o){if(!t||e.isDatasetVisible(o)){n.push(e.getDatasetMeta(o))}}n.sort(cn("order","index"));return n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(true)},drawDatasets:function(t){var e=this;var i,n;if(Ui.notify(e,"beforeDatasetsDraw",[t])===false){return}i=e._getSortedVisibleDatasetMetas();for(n=i.length-1;n>=0;--n){e.drawDataset(i[n],t)}Ui.notify(e,"afterDatasetsDraw",[t])},drawDataset:function(t,e){var i=this;var n={meta:t,index:t.index,easingValue:e};if(Ui.notify(i,"beforeDatasetDraw",[n])===false){return}t.controller.draw(e);Ui.notify(i,"afterDatasetDraw",[n])},_drawTooltip:function(t){var e=this;var i=e.tooltip;var n={tooltip:i,easingValue:t};if(Ui.notify(e,"beforeTooltipDraw",[n])===false){return}i.draw();Ui.notify(e,"afterTooltipDraw",[n])},getElementAtEvent:function(t){return Ye.modes.single(this,t)},getElementsAtEvent:function(t){return Ye.modes.label(this,t,{intersect:true})},getElementsAtXAxis:function(t){return Ye.modes["x-axis"](this,t,{intersect:true})},getElementsAtEventForMode:function(t,e,i){var n=Ye.modes[e];if(typeof n==="function"){return n(this,t,i)}return[]},getDatasetAtEvent:function(t){return Ye.modes.dataset(this,t,{intersect:true})},getDatasetMeta:function(t){var e=this;var i=e.data.datasets[t];if(!i._meta){i._meta={}}var n=i._meta[e.id];if(!n){n=i._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i.order||0,index:t}}return n},getVisibleDatasetCount:function(){var t=0;for(var e=0,i=this.data.datasets.length;e<i;++e){if(this.isDatasetVisible(e)){t++}}return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id;var i=this.data.datasets[t];var n=i._meta&&i._meta[e];if(n){n.controller.destroy();delete i._meta[e]}},destroy:function(){var t=this;var e=t.canvas;var i,n;t.stop();for(i=0,n=t.data.datasets.length;i<n;++i){t.destroyDatasetMeta(i)}if(e){t.unbindEvents();kt.canvas.clear(t);Ni.releaseContext(t.ctx);t.canvas=null;t.ctx=null}Ui.notify(t,"destroy");delete dn.instances[t.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new nn({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this;var i=e._listeners={};var n=function(){e.eventHandler.apply(e,arguments)};kt.each(e.options.events,function(t){Ni.addEventListener(e,t,n);i[t]=n});if(e.options.responsive){n=function(){e.resize()};Ni.addEventListener(e,"resize",n);i.resize=n}},unbindEvents:function(){var i=this;var t=i._listeners;if(!t){return}delete i._listeners;kt.each(t,function(t,e){Ni.removeEventListener(i,e,t)})},updateHoverStyle:function(t,e,i){var n=i?"set":"remove";var o,r,a;for(r=0,a=t.length;r<a;++r){o=t[r];if(o){this.getDatasetMeta(o._datasetIndex).controller[n+"HoverStyle"](o)}}if(e==="dataset"){this.getDatasetMeta(t[0]._datasetIndex).controller["_"+n+"DatasetHoverStyle"]()}},eventHandler:function(t){var e=this;var i=e.tooltip;if(Ui.notify(e,"beforeEvent",[t])===false){return}e._bufferedRender=true;e._bufferedRequest=null;var n=e.handleEvent(t);if(i){n=i._start?i.handleEvent(t):n|i.handleEvent(t)}Ui.notify(e,"afterEvent",[t]);var o=e._bufferedRequest;if(o){e.render(o)}else if(n&&!e.animating){e.stop();e.render({duration:e.options.hover.animationDuration,lazy:true})}e._bufferedRender=false;e._bufferedRequest=null;return e},handleEvent:function(t){var e=this;var i=e.options||{};var n=i.hover;var o=false;e.lastActive=e.lastActive||[];if(t.type==="mouseout"){e.active=[]}else{e.active=e.getElementsAtEventForMode(t,n.mode,n)}kt.callback(i.onHover||i.hover.onHover,[t.native,e.active],e);if(t.type==="mouseup"||t.type==="click"){if(i.onClick){i.onClick.call(e,t.native,e.active)}}if(e.lastActive.length){e.updateHoverStyle(e.lastActive,n.mode,false)}if(e.active.length&&n.mode){e.updateHoverStyle(e.active,n.mode,true)}o=!kt.arrayEquals(e.active,e.lastActive);e.lastActive=e.active;return o}}),dn.instances={};var pn=dn;(dn.Controller=dn).types={},kt.configMerge=an,kt.scaleMerge=rn;var fn=function(){kt.where=function(t,e){if(kt.isArray(t)&&Array.prototype.filter){return t.filter(e)}var i=[];kt.each(t,function(t){if(e(t)){i.push(t)}});return i};kt.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=i===undefined?t:i;for(var n=0,o=t.length;n<o;++n){if(e.call(i,t[n],n,t)){return n}}return-1};kt.findNextWhere=function(t,e,i){if(kt.isNullOrUndef(i)){i=-1}for(var n=i+1;n<t.length;n++){var o=t[n];if(e(o)){return o}}};kt.findPreviousWhere=function(t,e,i){if(kt.isNullOrUndef(i)){i=t.length}for(var n=i-1;n>=0;n--){var o=t[n];if(e(o)){return o}}};kt.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};kt.almostEquals=function(t,e,i){return Math.abs(t-e)<i};kt.almostWhole=function(t,e){var i=Math.round(t);return i-e<=t&&i+e>=t};kt.max=function(t){return t.reduce(function(t,e){if(!isNaN(e)){return Math.max(t,e)}return t},Number.NEGATIVE_INFINITY)};kt.min=function(t){return t.reduce(function(t,e){if(!isNaN(e)){return Math.min(t,e)}return t},Number.POSITIVE_INFINITY)};kt.sign=Math.sign?function(t){return Math.sign(t)}:function(t){t=+t;if(t===0||isNaN(t)){return t}return t>0?1:-1};kt.toRadians=function(t){return t*(Math.PI/180)};kt.toDegrees=function(t){return t*(180/Math.PI)};kt._decimalPlaces=function(t){if(!kt.isFinite(t)){return}var e=1;var i=0;while(Math.round(t*e)/e!==t){e*=10;i++}return i};kt.getAngleFromPoint=function(t,e){var i=e.x-t.x;var n=e.y-t.y;var o=Math.sqrt(i*i+n*n);var r=Math.atan2(n,i);if(r<-.5*Math.PI){r+=2*Math.PI}return{angle:r,distance:o}};kt.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};kt.aliasPixel=function(t){return t%2===0?0:.5};kt._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio;var o=i/2;return Math.round((e-o)*n)/n+o};kt.splineCurve=function(t,e,i,n){var o=t.skip?e:t;var r=e;var a=i.skip?e:i;var s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2));var l=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));var h=s/(s+l);var u=l/(s+l);h=isNaN(h)?0:h;u=isNaN(u)?0:u;var c=n*h;var d=n*u;return{previous:{x:r.x-c*(a.x-o.x),y:r.y-c*(a.y-o.y)},next:{x:r.x+d*(a.x-o.x),y:r.y+d*(a.y-o.y)}}};kt.EPSILON=Number.EPSILON||1e-14;kt.splineCurveMonotone=function(t){var e=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}});var i=e.length;var n,o,r,a;for(n=0;n<i;++n){r=e[n];if(r.model.skip){continue}o=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(a&&!a.model.skip){var s=a.model.x-r.model.x;r.deltaK=s!==0?(a.model.y-r.model.y)/s:0}if(!o||o.model.skip){r.mK=r.deltaK}else if(!a||a.model.skip){r.mK=o.deltaK}else if(this.sign(o.deltaK)!==this.sign(r.deltaK)){r.mK=0}else{r.mK=(o.deltaK+r.deltaK)/2}}var l,h,u,c;for(n=0;n<i-1;++n){r=e[n];a=e[n+1];if(r.model.skip||a.model.skip){continue}if(kt.almostEquals(r.deltaK,0,this.EPSILON)){r.mK=a.mK=0;continue}l=r.mK/r.deltaK;h=a.mK/r.deltaK;c=Math.pow(l,2)+Math.pow(h,2);if(c<=9){continue}u=3/Math.sqrt(c);r.mK=l*u*r.deltaK;a.mK=h*u*r.deltaK}var d;for(n=0;n<i;++n){r=e[n];if(r.model.skip){continue}o=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(o&&!o.model.skip){d=(r.model.x-o.model.x)/3;r.model.controlPointPreviousX=r.model.x-d;r.model.controlPointPreviousY=r.model.y-d*r.mK}if(a&&!a.model.skip){d=(a.model.x-r.model.x)/3;r.model.controlPointNextX=r.model.x+d;r.model.controlPointNextY=r.model.y+d*r.mK}}};kt.nextItem=function(t,e,i){if(i){return e>=t.length-1?t[0]:t[e+1]}return e>=t.length-1?t[t.length-1]:t[e+1]};kt.previousItem=function(t,e,i){if(i){return e<=0?t[t.length-1]:t[e-1]}return e<=0?t[0]:t[e-1]};kt.niceNum=function(t,e){var i=Math.floor(kt.log10(t));var n=t/Math.pow(10,i);var o;if(e){if(n<1.5){o=1}else if(n<3){o=2}else if(n<7){o=5}else{o=10}}else if(n<=1){o=1}else if(n<=2){o=2}else if(n<=5){o=5}else{o=10}return o*Math.pow(10,i)};kt.requestAnimFrame=function(){if(typeof window==="undefined"){return function(t){t()}}return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}();kt.getRelativePosition=function(t,e){var i,n;var o=t.originalEvent||t;var r=t.target||t.srcElement;var a=r.getBoundingClientRect();var s=o.touches;if(s&&s.length>0){i=s[0].clientX;n=s[0].clientY}else{i=o.clientX;n=o.clientY}var l=parseFloat(kt.getStyle(r,"padding-left"));var h=parseFloat(kt.getStyle(r,"padding-top"));var u=parseFloat(kt.getStyle(r,"padding-right"));var c=parseFloat(kt.getStyle(r,"padding-bottom"));var d=a.right-a.left-l-u;var p=a.bottom-a.top-h-c;i=Math.round((i-a.left-l)/d*r.width/e.currentDevicePixelRatio);n=Math.round((n-a.top-h)/p*r.height/e.currentDevicePixelRatio);return{x:i,y:n}};function u(t,e,i){var n;if(typeof t==="string"){n=parseInt(t,10);if(t.indexOf("%")!==-1){n=n/100*e.parentNode[i]}}else{n=t}return n}function c(t){return t!==undefined&&t!==null&&t!=="none"}function e(t,e,i){var n=document.defaultView;var o=kt._getParentNode(t);var r=n.getComputedStyle(t)[e];var a=n.getComputedStyle(o)[e];var s=c(r);var l=c(a);var h=Number.POSITIVE_INFINITY;if(s||l){return Math.min(s?u(r,t,i):h,l?u(a,o,i):h)}return"none"}kt.getConstraintWidth=function(t){return e(t,"max-width","clientWidth")};kt.getConstraintHeight=function(t){return e(t,"max-height","clientHeight")};kt._calculatePadding=function(t,e,i){e=kt.getStyle(t,e);return e.indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)};kt._getParentNode=function(t){var e=t.parentNode;if(e&&e.toString()==="[object ShadowRoot]"){e=e.host}return e};kt.getMaximumWidth=function(t){var e=kt._getParentNode(t);if(!e){return t.clientWidth}var i=e.clientWidth;var n=kt._calculatePadding(e,"padding-left",i);var o=kt._calculatePadding(e,"padding-right",i);var r=i-n-o;var a=kt.getConstraintWidth(t);return isNaN(a)?r:Math.min(r,a)};kt.getMaximumHeight=function(t){var e=kt._getParentNode(t);if(!e){return t.clientHeight}var i=e.clientHeight;var n=kt._calculatePadding(e,"padding-top",i);var o=kt._calculatePadding(e,"padding-bottom",i);var r=i-n-o;var a=kt.getConstraintHeight(t);return isNaN(a)?r:Math.min(r,a)};kt.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)};kt.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||typeof window!=="undefined"&&window.devicePixelRatio||1;if(i===1){return}var n=t.canvas;var o=t.height;var r=t.width;n.height=o*i;n.width=r*i;t.ctx.scale(i,i);if(!n.style.height&&!n.style.width){n.style.height=o+"px";n.style.width=r+"px"}};kt.fontString=function(t,e,i){return e+" "+t+"px "+i};kt.longestText=function(t,e,i,n){n=n||{};var o=n.data=n.data||{};var r=n.garbageCollect=n.garbageCollect||[];if(n.font!==e){o=n.data={};r=n.garbageCollect=[];n.font=e}t.font=e;var a=0;var s=i.length;var l,h,u,c,d;for(l=0;l<s;l++){c=i[l];if(c!==undefined&&c!==null&&kt.isArray(c)!==true){a=kt.measureText(t,o,r,a,c)}else if(kt.isArray(c)){for(h=0,u=c.length;h<u;h++){d=c[h];if(d!==undefined&&d!==null&&!kt.isArray(d)){a=kt.measureText(t,o,r,a,d)}}}}var p=r.length/2;if(p>i.length){for(l=0;l<p;l++){delete o[r[l]]}r.splice(0,p)}return a};kt.measureText=function(t,e,i,n,o){var r=e[o];if(!r){r=e[o]=t.measureText(o).width;i.push(o)}if(r>n){n=r}return n};kt.numberOfLabelLines=function(t){var e=1;kt.each(t,function(t){if(kt.isArray(t)){if(t.length>e){e=t.length}}});return e};kt.color=!Q?function(t){console.error("Color.js not found!");return t}:function(t){if(t instanceof CanvasGradient){t=dt.global.defaultColor}return Q(t)};kt.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:kt.color(t).saturate(.5).darken(.1).rgbString()}};function mn(){throw new Error("This method is not implemented: either no adapter can "+"be found or an incomplete integration was provided.")}function gn(t){this.options=t||{}}kt.extend(gn.prototype,{formats:mn,parse:mn,format:mn,add:mn,diff:mn,startOf:mn,endOf:mn,_create:function(t){return t}}),gn.override=function(t){kt.extend(gn.prototype,t)};var vn,_n={_date:gn},yn={formatters:{values:function(t){return kt.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];if(Math.abs(n)>1){if(t!==Math.floor(t)){n=t-Math.floor(t)}}var o=kt.log10(Math.abs(n));var r="";if(t!==0){var a=Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]));if(a<1e-4){var s=kt.log10(Math.abs(t));var l=Math.floor(s)-Math.floor(o);l=Math.max(Math.min(l,20),0);r=t.toExponential(l)}else{var h=-1*Math.floor(o);h=Math.max(Math.min(h,20),0);r=t.toFixed(h)}}else{r="0"}return r},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(kt.log10(t)));if(t===0){return"0"}else if(n===1||n===2||n===5||e===0||e===i.length-1){return t.toExponential()}return""}}},xn=kt.isArray,bn=kt.isNullOrUndef,wn=kt.valueOrDefault,Ln=kt.valueAtIndexOrDefault;function kn(t,e){var i=[];var n=t.length/e;var o=0;var r=t.length;for(;o<r;o+=n){i.push(t[Math.floor(o)])}return i}function Mn(t,e,i){var n=t.getTicks().length;var o=Math.min(e,n-1);var r=t.getPixelForTick(o);var a=t._startPixel;var s=t._endPixel;var l=1e-6;var h;if(i){if(n===1){h=Math.max(r-a,s-r)}else if(e===0){h=(t.getPixelForTick(1)-r)/2}else{h=(r-t.getPixelForTick(o-1))/2}r+=o<e?h:-h;if(r<a-l||r>s+l){return}}return r}function Cn(t,o){kt.each(t,function(t){var e=t.gc;var i=e.length/2;var n;if(i>o){for(n=0;n<i;++n){delete t.data[e[n]]}e.splice(0,i)}})}function Tn(t,e,i,n){var o=i.length;var r=[];var a=[];var s=[];var l,h,u,c,d,p,f,m,g,v,_,y,x;for(l=0;l<o;++l){c=i[l].label;d=i[l].major?e.major:e.minor;t.font=p=d.string;f=n[p]=n[p]||{data:{},gc:[]};m=d.lineHeight;g=v=0;if(!bn(c)&&!xn(c)){g=kt.measureText(t,f.data,f.gc,g,c);v=m}else if(xn(c)){for(h=0,u=c.length;h<u;++h){_=c[h];if(!bn(_)&&!xn(_)){g=kt.measureText(t,f.data,f.gc,g,_);v+=m}}}r.push(g);a.push(v);s.push(m/2)}Cn(n,o);y=r.indexOf(Math.max.apply(null,r));x=a.indexOf(Math.max.apply(null,a));function b(t){return{width:r[t]||0,height:a[t]||0,offset:s[t]||0}}return{first:b(0),last:b(o-1),widest:b(y),highest:b(x)}}function Pn(t){return t.drawTicks?t.tickMarkLength:0}function Sn(t){var e,i;if(!t.display){return 0}e=kt.options._parseFont(t);i=kt.options.toPadding(t.padding);return e.lineHeight+i.height}function An(t,e){return kt.extend(kt.options._parseFont({fontFamily:wn(e.fontFamily,t.fontFamily),fontSize:wn(e.fontSize,t.fontSize),fontStyle:wn(e.fontStyle,t.fontStyle),lineHeight:wn(e.lineHeight,t.lineHeight)}),{color:kt.options.resolve([e.fontColor,t.fontColor,dt.global.defaultFontColor])})}function In(t){var e=An(t,t.minor);var i=t.major.enabled?An(t,t.major):e;return{minor:e,major:i}}function Dn(t){var e=[];var i,n,o;for(n=0,o=t.length;n<o;++n){i=t[n];if(typeof i._index!=="undefined"){e.push(i)}}return e}function On(t){var e=t.length;var i,n;if(e<2){return false}for(n=t[0],i=1;i<e;++i){if(t[i]-t[i-1]!==n){return false}}return n}function zn(t,e,i,n){var o=On(t);var r=(e.length-1)/n;var a,s,l,h;if(!o){return Math.max(r,1)}a=kt.math._factorize(o);for(l=0,h=a.length-1;l<h;l++){s=a[l];if(s>r){return s}}return Math.max(r,1)}function En(t){var e=[];var i,n;for(i=0,n=t.length;i<n;i++){if(t[i].major){e.push(i)}}return e}function Bn(t,e,i){var n=0;var o=e[0];var r,a;i=Math.ceil(i);for(r=0;r<t.length;r++){a=t[r];if(r===o){a._index=r;n++;o=e[n*i]}else{delete a.label}}}function Fn(t,e,i,n){var o=wn(i,0);var r=Math.min(wn(n,t.length),t.length);var a=0;var s,l,h,u;e=Math.ceil(e);if(n){s=n-i;e=s/Math.floor(s/e)}u=o;while(u<0){a++;u=Math.round(o+a*e)}for(l=Math.max(o,0);l<r;l++){h=t[l];if(l===u){h._index=l;a++;u=Math.round(o+a*e)}else{delete h.label}}}dt._set("scale",{display:true,position:"left",offset:false,gridLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:false,borderDash:[],borderDashOffset:0},scaleLabel:{display:false,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:0,reverse:false,display:true,autoSkip:true,autoSkipPadding:0,labelOffset:0,callback:yn.formatters.values,minor:{},major:{}}});var Rn=Dt.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){kt.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n=this;var o=n.options.ticks;var r=o.sampleSize;var a,s,l,h,u;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=kt.extend({left:0,right:0,top:0,bottom:0},i);n._ticks=null;n.ticks=null;n._labelSizes=null;n._maxLabelLines=0;n.longestLabelWidth=0;n.longestTextCache=n.longestTextCache||{};n._gridLineItems=null;n._labelItems=null;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeDataLimits();n.determineDataLimits();n.afterDataLimits();n.beforeBuildTicks();h=n.buildTicks()||[];h=n.afterBuildTicks(h)||h;if((!h||!h.length)&&n.ticks){h=[];for(a=0,s=n.ticks.length;a<s;++a){h.push({value:n.ticks[a],major:false})}}n._ticks=h;u=r<h.length;l=n._convertTicksToLabels(u?kn(h,r):h);n._configure();n.beforeCalculateTickRotation();n.calculateTickRotation();n.afterCalculateTickRotation();n.beforeFit();n.fit();n.afterFit();n._ticksToDraw=o.display&&(o.autoSkip||o.source==="auto")?n._autoSkip(h):h;if(u){l=n._convertTicksToLabels(n._ticksToDraw)}n.ticks=l;n.afterUpdate();return n.minSize},_configure:function(){var t=this;var e=t.options.ticks.reverse;var i,n;if(t.isHorizontal()){i=t.left;n=t.right}else{i=t.top;n=t.bottom;e=!e}t._startPixel=i;t._endPixel=n;t._reversePixels=e;t._length=n-i},afterUpdate:function(){kt.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){kt.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0},afterSetDimensions:function(){kt.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){kt.callback(this.options.beforeDataLimits,[this])},determineDataLimits:kt.noop,afterDataLimits:function(){kt.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){kt.callback(this.options.beforeBuildTicks,[this])},buildTicks:kt.noop,afterBuildTicks:function(t){var e=this;if(xn(t)&&t.length){return kt.callback(e.options.afterBuildTicks,[e,t])}e.ticks=kt.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks;return t},beforeTickToLabelConversion:function(){kt.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this;var e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){kt.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){kt.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTicks().length;var o=i.minRotation||0;var r=i.maxRotation;var a=o;var s,l,h,u,c,d,p;if(!t._isVisible()||!i.display||o>=r||n<=1||!t.isHorizontal()){t.labelRotation=o;return}s=t._getLabelSizes();l=s.widest.width;h=s.highest.height-s.highest.offset;u=Math.min(t.maxWidth,t.chart.width-l);c=e.offset?t.maxWidth/n:u/(n-1);if(l+6>c){c=u/(n-(e.offset?.5:1));d=t.maxHeight-Pn(e.gridLines)-i.padding-Sn(e.scaleLabel);p=Math.sqrt(l*l+h*h);a=kt.toDegrees(Math.min(Math.asin(Math.min((s.highest.height+6)/c,1)),Math.asin(Math.min(d/p,1))-Math.asin(h/p)));a=Math.max(o,Math.min(r,a))}t.labelRotation=a},afterCalculateTickRotation:function(){kt.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){kt.callback(this.options.beforeFit,[this])},fit:function(){var t=this;var e=t.minSize={width:0,height:0};var i=t.chart;var n=t.options;var o=n.ticks;var r=n.scaleLabel;var a=n.gridLines;var s=t._isVisible();var l=n.position==="bottom";var h=t.isHorizontal();if(h){e.width=t.maxWidth}else if(s){e.width=Pn(a)+Sn(r)}if(!h){e.height=t.maxHeight}else if(s){e.height=Pn(a)+Sn(r)}if(o.display&&s){var u=In(o);var c=t._getLabelSizes();var d=c.first;var p=c.last;var f=c.widest;var m=c.highest;var g=u.minor.lineHeight*.4;var v=o.padding;if(h){var _=t.labelRotation!==0;var y=kt.toRadians(t.labelRotation);var x=Math.cos(y);var b=Math.sin(y);var w=b*f.width+x*(m.height-(_?m.offset:0))+(_?0:g);e.height=Math.min(t.maxHeight,e.height+w+v);var L=t.getPixelForTick(0)-t.left;var k=t.right-t.getPixelForTick(t.getTicks().length-1);var M,C;if(_){M=l?x*d.width+b*d.offset:b*(d.height-d.offset);C=l?b*(p.height-p.offset):x*p.width+b*p.offset}else{M=d.width/2;C=p.width/2}t.paddingLeft=Math.max((M-L)*t.width/(t.width-L),0)+3;t.paddingRight=Math.max((C-k)*t.width/(t.width-k),0)+3}else{var T=o.mirror?0:f.width+v+g;e.width=Math.min(t.maxWidth,e.width+T);t.paddingTop=d.height/2;t.paddingBottom=p.height/2}}t.handleMargins();if(h){t.width=t._length=i.width-t.margins.left-t.margins.right;t.height=e.height}else{t.width=e.width;t.height=t._length=i.height-t.margins.top-t.margins.bottom}},handleMargins:function(){var t=this;if(t.margins){t.margins.left=Math.max(t.paddingLeft,t.margins.left);t.margins.top=Math.max(t.paddingTop,t.margins.top);t.margins.right=Math.max(t.paddingRight,t.margins.right);t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom)}},afterFit:function(){kt.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(bn(t)){return NaN}if((typeof t==="number"||t instanceof Number)&&!isFinite(t)){return NaN}if(t){if(this.isHorizontal()){if(t.x!==undefined){return this.getRightValue(t.x)}}else if(t.y!==undefined){return this.getRightValue(t.y)}}return t},_convertTicksToLabels:function(t){var e=this;var i,n,o;e.ticks=t.map(function(t){return t.value});e.beforeTickToLabelConversion();i=e.convertTicksToLabels(t)||e.ticks;e.afterTickToLabelConversion();for(n=0,o=t.length;n<o;++n){t[n].label=i[n]}return i},_getLabelSizes:function(){var t=this;var e=t._labelSizes;if(!e){t._labelSizes=e=Tn(t.ctx,In(t.options.ticks),t.getTicks(),t.longestTextCache);t.longestLabelWidth=e.widest.width}return e},_parseValue:function(t){var e,i,n,o;if(xn(t)){e=+this.getRightValue(t[0]);i=+this.getRightValue(t[1]);n=Math.min(e,i);o=Math.max(e,i)}else{t=+this.getRightValue(t);e=undefined;i=t;n=t;o=t}return{min:n,max:o,start:e,end:i}},_getScaleLabel:function(t){var e=this._parseValue(t);if(e.start!==undefined){return"["+e.start+", "+e.end+"]"}return+this.getRightValue(t)},getLabelForIndex:kt.noop,getPixelForValue:kt.noop,getValueForPixel:kt.noop,getPixelForTick:function(t){var e=this;var i=e.options.offset;var n=e._ticks.length;var o=1/Math.max(n-(i?0:1),1);return t<0||t>n-1?null:e.getPixelForDecimal(t*o+(i?o/2:0))},getPixelForDecimal:function(t){var e=this;if(e._reversePixels){t=1-t}return e._startPixel+t*e._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this;var e=t.min;var i=t.max;return t.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0},_autoSkip:function(t){var e=this;var i=e.options.ticks;var n=e._length;var o=i.maxTicksLimit||n/e._tickSize()+1;var r=i.major.enabled?En(t):[];var a=r.length;var s=r[0];var l=r[a-1];var h,u,c,d;if(a>o){Bn(t,r,a/o);return Dn(t)}c=zn(r,t,n,o);if(a>0){for(h=0,u=a-1;h<u;h++){Fn(t,c,r[h],r[h+1])}d=a>1?(l-s)/(a-1):null;Fn(t,c,kt.isNullOrUndef(d)?0:s-d,s);Fn(t,c,l,kt.isNullOrUndef(d)?t.length:l+d);return Dn(t)}Fn(t,c);return Dn(t)},_tickSize:function(){var t=this;var e=t.options.ticks;var i=kt.toRadians(t.labelRotation);var n=Math.abs(Math.cos(i));var o=Math.abs(Math.sin(i));var r=t._getLabelSizes();var a=e.autoSkipPadding||0;var s=r?r.widest.width+a:0;var l=r?r.highest.height+a:0;return t.isHorizontal()?l*n>s*o?s/n:l/o:l*o<s*n?l/n:s/o},_isVisible:function(){var t=this;var e=t.chart;var i=t.options.display;var n,o,r;if(i!=="auto"){return!!i}for(n=0,o=e.data.datasets.length;n<o;++n){if(e.isDatasetVisible(n)){r=e.getDatasetMeta(n);if(r.xAxisID===t.id||r.yAxisID===t.id){return true}}}return false},_computeGridLineItems:function(t){var e=this;var i=e.chart;var n=e.options;var o=n.gridLines;var r=n.position;var a=o.offsetGridLines;var s=e.isHorizontal();var l=e._ticksToDraw;var h=l.length+(a?1:0);var u=Pn(o);var c=[];var d=o.drawBorder?Ln(o.lineWidth,0,0):0;var p=d/2;var f=kt._alignPixel;var m=function(t){return f(i,t,d)};var g,v,_,y,x;var b,w,L,k,M,C,T,P,S,A,I,D;if(r==="top"){g=m(e.bottom);w=e.bottom-u;k=g-p;C=m(t.top)+p;P=t.bottom}else if(r==="bottom"){g=m(e.top);C=t.top;P=m(t.bottom)-p;w=g+p;k=e.top+u}else if(r==="left"){g=m(e.right);b=e.right-u;L=g-p;M=m(t.left)+p;T=t.right}else{g=m(e.left);M=t.left;T=m(t.right)-p;b=g+p;L=e.left+u}for(v=0;v<h;++v){_=l[v]||{};if(bn(_.label)&&v<l.length){continue}if(v===e.zeroLineIndex&&n.offset===a){S=o.zeroLineWidth;A=o.zeroLineColor;I=o.zeroLineBorderDash||[];D=o.zeroLineBorderDashOffset||0}else{S=Ln(o.lineWidth,v,1);A=Ln(o.color,v,"rgba(0,0,0,0.1)");I=o.borderDash||[];D=o.borderDashOffset||0}y=Mn(e,_._index||v,a);if(y===undefined){continue}x=f(i,y,S);if(s){b=L=M=T=x}else{w=k=C=P=x}c.push({tx1:b,ty1:w,tx2:L,ty2:k,x1:M,y1:C,x2:T,y2:P,width:S,color:A,borderDash:I,borderDashOffset:D})}c.ticksLength=h;c.borderValue=g;return c},_computeLabelItems:function(){var t=this;var e=t.options;var i=e.ticks;var n=e.position;var o=i.mirror;var r=t.isHorizontal();var a=t._ticksToDraw;var s=In(i);var l=i.padding;var h=Pn(e.gridLines);var u=-kt.toRadians(t.labelRotation);var c=[];var d,p,f,m,g,v,_,y,x,b,w,L;if(n==="top"){v=t.bottom-h-l;_=!u?"center":"left"}else if(n==="bottom"){v=t.top+h+l;_=!u?"center":"right"}else if(n==="left"){g=t.right-(o?0:h)-l;_=o?"left":"right"}else{g=t.left+(o?0:h)+l;_=o?"right":"left"}for(d=0,p=a.length;d<p;++d){f=a[d];m=f.label;if(bn(m)){continue}y=t.getPixelForTick(f._index||d)+i.labelOffset;x=f.major?s.major:s.minor;b=x.lineHeight;w=xn(m)?m.length:1;if(r){g=y;L=n==="top"?((!u?.5:1)-w)*b:(!u?.5:0)*b}else{v=y;L=(1-w)*b/2}c.push({x:g,y:v,rotation:u,label:m,font:x,textOffset:L,textAlign:_})}return c},_drawGrid:function(t){var e=this;var i=e.options.gridLines;if(!i.display){return}var n=e.ctx;var o=e.chart;var r=kt._alignPixel;var a=i.drawBorder?Ln(i.lineWidth,0,0):0;var s=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));var l,h,u,c,d;for(u=0,c=s.length;u<c;++u){d=s[u];l=d.width;h=d.color;if(l&&h){n.save();n.lineWidth=l;n.strokeStyle=h;if(n.setLineDash){n.setLineDash(d.borderDash);n.lineDashOffset=d.borderDashOffset}n.beginPath();if(i.drawTicks){n.moveTo(d.tx1,d.ty1);n.lineTo(d.tx2,d.ty2)}if(i.drawOnChartArea){n.moveTo(d.x1,d.y1);n.lineTo(d.x2,d.y2)}n.stroke();n.restore()}}if(a){var p=a;var f=Ln(i.lineWidth,s.ticksLength-1,1);var m=s.borderValue;var g,v,_,y;if(e.isHorizontal()){g=r(o,e.left,p)-p/2;v=r(o,e.right,f)+f/2;_=y=m}else{_=r(o,e.top,p)-p/2;y=r(o,e.bottom,f)+f/2;g=v=m}n.lineWidth=a;n.strokeStyle=Ln(i.color,0);n.beginPath();n.moveTo(g,_);n.lineTo(v,y);n.stroke()}},_drawLabels:function(){var t=this;var e=t.options.ticks;if(!e.display){return}var i=t.ctx;var n=t._labelItems||(t._labelItems=t._computeLabelItems());var o,r,a,s,l,h,u,c;for(o=0,a=n.length;o<a;++o){l=n[o];h=l.font;i.save();i.translate(l.x,l.y);i.rotate(l.rotation);i.font=h.string;i.fillStyle=h.color;i.textBaseline="middle";i.textAlign=l.textAlign;u=l.label;c=l.textOffset;if(xn(u)){for(r=0,s=u.length;r<s;++r){i.fillText(""+u[r],0,c);c+=h.lineHeight}}else{i.fillText(u,0,c)}i.restore()}},_drawTitle:function(){var t=this;var e=t.ctx;var i=t.options;var n=i.scaleLabel;if(!n.display){return}var o=wn(n.fontColor,dt.global.defaultFontColor);var r=kt.options._parseFont(n);var a=kt.options.toPadding(n.padding);var s=r.lineHeight/2;var l=i.position;var h=0;var u,c;if(t.isHorizontal()){u=t.left+t.width/2;c=l==="bottom"?t.bottom-s-a.bottom:t.top+s+a.top}else{var d=l==="left";u=d?t.left+s+a.top:t.right-s-a.top;c=t.top+t.height/2;h=d?-.5*Math.PI:.5*Math.PI}e.save();e.translate(u,c);e.rotate(h);e.textAlign="center";e.textBaseline="middle";e.fillStyle=o;e.font=r.string;e.fillText(n.labelString,0,0);e.restore()},draw:function(t){var e=this;if(!e._isVisible()){return}e._drawGrid(t);e._drawTitle();e._drawLabels()},_layers:function(){var t=this;var e=t.options;var i=e.ticks&&e.ticks.z||0;var n=e.gridLines&&e.gridLines.z||0;if(!t._isVisible()||i===n||t.draw!==t._draw){return[{z:i,draw:function(){t.draw.apply(t,arguments)}}]}return[{z:n,draw:function(){t._drawGrid.apply(t,arguments);t._drawTitle.apply(t,arguments)}},{z:i,draw:function(){t._drawLabels.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(e){var i=this;var n=i.isHorizontal();return i.chart._getSortedVisibleDatasetMetas().filter(function(t){return(!e||t.type===e)&&(n?t.xAxisID===i.id:t.yAxisID===i.id)})}});Rn.prototype._draw=Rn.prototype.draw;var Nn=Rn,Un=kt.isNullOrUndef,Zn={position:"bottom"},Wn=Nn.extend({determineDataLimits:function(){var t=this;var e=t._getLabels();var i=t.options.ticks;var n=i.min;var o=i.max;var r=0;var a=e.length-1;var s;if(n!==undefined){s=e.indexOf(n);if(s>=0){r=s}}if(o!==undefined){s=e.indexOf(o);if(s>=0){a=s}}t.minIndex=r;t.maxIndex=a;t.min=e[r];t.max=e[a]},buildTicks:function(){var t=this;var e=t._getLabels();var i=t.minIndex;var n=t.maxIndex;t.ticks=i===0&&n===e.length-1?e:e.slice(i,n+1)},getLabelForIndex:function(t,e){var i=this;var n=i.chart;if(n.getDatasetMeta(e).controller._getValueScaleId()===i.id){return i.getRightValue(n.data.datasets[e].data[t])}return i._getLabels()[t]},_configure:function(){var t=this;var e=t.options.offset;var i=t.ticks;Nn.prototype._configure.call(t);if(!t.isHorizontal()){t._reversePixels=!t._reversePixels}if(!i){return}t._startValue=t.minIndex-(e?.5:0);t._valueRange=Math.max(i.length-(e?0:1),1)},getPixelForValue:function(t,e,i){var n=this;var o,r,a;if(!Un(e)&&!Un(i)){t=n.chart.data.datasets[i].data[e]}if(!Un(t)){o=n.isHorizontal()?t.x:t.y}if(o!==undefined||t!==undefined&&isNaN(e)){r=n._getLabels();t=kt.valueOrDefault(o,t);a=r.indexOf(t);e=a!==-1?a:e;if(isNaN(e)){e=t}}return n.getPixelForDecimal((e-n._startValue)/n._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=this;var i=Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange);return Math.min(Math.max(i,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),jn;Wn._defaults=Zn;var Hn=kt.noop,Gn=kt.isNullOrUndef;function Vn(t,e){var i=[];var n=1e-14;var o=t.stepSize;var r=o||1;var a=t.maxTicks-1;var s=t.min;var l=t.max;var h=t.precision;var u=e.min;var c=e.max;var d=kt.niceNum((c-u)/a/r)*r;var p,f,m,g;if(d<n&&Gn(s)&&Gn(l)){return[u,c]}g=Math.ceil(c/d)-Math.floor(u/d);if(g>a){d=kt.niceNum(g*d/a/r)*r}if(o||Gn(h)){p=Math.pow(10,kt._decimalPlaces(d))}else{p=Math.pow(10,h);d=Math.ceil(d*p)/p}f=Math.floor(u/d)*d;m=Math.ceil(c/d)*d;if(o){if(!Gn(s)&&kt.almostWhole(s/d,d/1e3)){f=s}if(!Gn(l)&&kt.almostWhole(l/d,d/1e3)){m=l}}g=(m-f)/d;if(kt.almostEquals(g,Math.round(g),d/1e3)){g=Math.round(g)}else{g=Math.ceil(g)}f=Math.round(f*p)/p;m=Math.round(m*p)/p;i.push(Gn(s)?f:s);for(var v=1;v<g;++v){i.push(Math.round((f+v*d)*p)/p)}i.push(Gn(l)?m:l);return i}var qn=Nn.extend({getRightValue:function(t){if(typeof t==="string"){return+t}return Nn.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this;var e=t.options;var i=e.ticks;if(i.beginAtZero){var n=kt.sign(t.min);var o=kt.sign(t.max);if(n<0&&o<0){t.max=0}else if(n>0&&o>0){t.min=0}}var r=i.min!==undefined||i.suggestedMin!==undefined;var a=i.max!==undefined||i.suggestedMax!==undefined;if(i.min!==undefined){t.min=i.min}else if(i.suggestedMin!==undefined){if(t.min===null){t.min=i.suggestedMin}else{t.min=Math.min(t.min,i.suggestedMin)}}if(i.max!==undefined){t.max=i.max}else if(i.suggestedMax!==undefined){if(t.max===null){t.max=i.suggestedMax}else{t.max=Math.max(t.max,i.suggestedMax)}}if(r!==a){if(t.min>=t.max){if(r){t.max=t.min+1}else{t.min=t.max-1}}}if(t.min===t.max){t.max++;if(!i.beginAtZero){t.min--}}},getTickLimit:function(){var t=this;var e=t.options.ticks;var i=e.stepSize;var n=e.maxTicksLimit;var o;if(i){o=Math.ceil(t.max/i)-Math.floor(t.min/i)+1}else{o=t._computeTickLimit();n=n||11}if(n){o=Math.min(n,o)}return o},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Hn,buildTicks:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTickLimit();n=Math.max(2,n);var o={maxTicks:n,min:i.min,max:i.max,precision:i.precision,stepSize:kt.valueOrDefault(i.fixedStepSize,i.stepSize)};var r=t.ticks=Vn(o,t);t.handleDirectionalChanges();t.max=kt.max(r);t.min=kt.min(r);if(i.reverse){r.reverse();t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice();t.zeroLineIndex=t.ticks.indexOf(0);Nn.prototype.convertTicksToLabels.call(t)},_configure:function(){var t=this;var e=t.getTicks();var i=t.min;var n=t.max;var o;Nn.prototype._configure.call(t);if(t.options.offset&&e.length){o=(n-i)/Math.max(e.length-1,1)/2;i-=o;n+=o}t._startValue=i;t._endValue=n;t._valueRange=n-i}}),Kn={position:"left",ticks:{callback:yn.formatters.linear}},Jn=0,Yn=1;function Xn(t,e,i){var n=[i.type,e===undefined&&i.stack===undefined?i.index:"",i.stack].join(".");if(t[n]===undefined){t[n]={pos:[],neg:[]}}return t[n]}function Qn(t,e,i,n){var o=t.options;var r=o.stacked;var a=Xn(e,r,i);var s=a.pos;var l=a.neg;var h=n.length;var u,c;for(u=0;u<h;++u){c=t._parseValue(n[u]);if(isNaN(c.min)||isNaN(c.max)||i.data[u].hidden){continue}s[u]=s[u]||0;l[u]=l[u]||0;if(o.relativePoints){s[u]=100}else if(c.min<0||c.max<0){l[u]+=c.min}else{s[u]+=c.max}}}function $n(t,e,i){var n=i.length;var o,r;for(o=0;o<n;++o){r=t._parseValue(i[o]);if(isNaN(r.min)||isNaN(r.max)||e.data[o].hidden){continue}t.min=Math.min(t.min,r.min);t.max=Math.max(t.max,r.max)}}var to=qn.extend({determineDataLimits:function(){var e=this;var t=e.options;var i=e.chart;var n=i.data.datasets;var o=e._getMatchingVisibleMetas();var r=t.stacked;var a={};var s=o.length;var l,h,u,c;e.min=Number.POSITIVE_INFINITY;e.max=Number.NEGATIVE_INFINITY;if(r===undefined){for(l=0;!r&&l<s;++l){h=o[l];r=h.stack!==undefined}}for(l=0;l<s;++l){h=o[l];u=n[h.index].data;if(r){Qn(e,a,h,u)}else{$n(e,h,u)}}kt.each(a,function(t){c=t.pos.concat(t.neg);e.min=Math.min(e.min,kt.min(c));e.max=Math.max(e.max,kt.max(c))});e.min=kt.isFinite(e.min)&&!isNaN(e.min)?e.min:Jn;e.max=kt.isFinite(e.max)&&!isNaN(e.max)?e.max:Yn;e.handleTickRangeOptions()},_computeTickLimit:function(){var t=this;var e;if(t.isHorizontal()){return Math.ceil(t.width/40)}e=kt.options._parseFont(t.options.ticks);return Math.ceil(t.height/e.lineHeight)},handleDirectionalChanges:function(){if(!this.isHorizontal()){this.ticks.reverse()}},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this;return e.getPixelForDecimal((+e.getRightValue(t)-e._startValue)/e._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;if(t<0||t>e.length-1){return null}return this.getPixelForValue(e[t])}}),eo;to._defaults=Kn;var io=kt.valueOrDefault,no=kt.math.log10;function oo(t,e){var i=[];var n=io(t.min,Math.pow(10,Math.floor(no(e.min))));var o=Math.floor(no(e.max));var r=Math.ceil(e.max/Math.pow(10,o));var a,s;if(n===0){a=Math.floor(no(e.minNotZero));s=Math.floor(e.minNotZero/Math.pow(10,a));i.push(n);n=s*Math.pow(10,a)}else{a=Math.floor(no(n));s=Math.floor(n/Math.pow(10,a))}var l=a<0?Math.pow(10,Math.abs(a)):1;do{i.push(n);++s;if(s===10){s=1;++a;l=a>=0?1:l}n=Math.round(s*Math.pow(10,a)*l)/l}while(a<o||a===o&&s<r);var h=io(t.max,n);i.push(h);return i}var ro={position:"left",ticks:{callback:yn.formatters.logarithmic}};function ao(t,e){return kt.isFinite(t)&&t>=0?t:e}var so=Nn.extend({determineDataLimits:function(){var n=this;var t=n.options;var e=n.chart;var i=e.data.datasets;var o=n.isHorizontal();function r(t){return o?t.xAxisID===n.id:t.yAxisID===n.id}var a,s,l,h,u,c;n.min=Number.POSITIVE_INFINITY;n.max=Number.NEGATIVE_INFINITY;n.minNotZero=Number.POSITIVE_INFINITY;var d=t.stacked;if(d===undefined){for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&r(s)&&s.stack!==undefined){d=true;break}}}if(t.stacked||d){var p={};for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);var f=[s.type,t.stacked===undefined&&s.stack===undefined?a:"",s.stack].join(".");if(e.isDatasetVisible(a)&&r(s)){if(p[f]===undefined){p[f]=[]}h=i[a].data;for(u=0,c=h.length;u<c;u++){var m=p[f];l=n._parseValue(h[u]);if(isNaN(l.min)||isNaN(l.max)||s.data[u].hidden||l.min<0||l.max<0){continue}m[u]=m[u]||0;m[u]+=l.max}}}kt.each(p,function(t){if(t.length>0){var e=kt.min(t);var i=kt.max(t);n.min=Math.min(n.min,e);n.max=Math.max(n.max,i)}})}else{for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&r(s)){h=i[a].data;for(u=0,c=h.length;u<c;u++){l=n._parseValue(h[u]);if(isNaN(l.min)||isNaN(l.max)||s.data[u].hidden||l.min<0||l.max<0){continue}n.min=Math.min(l.min,n.min);n.max=Math.max(l.max,n.max);if(l.min!==0){n.minNotZero=Math.min(l.min,n.minNotZero)}}}}}n.min=kt.isFinite(n.min)?n.min:null;n.max=kt.isFinite(n.max)?n.max:null;n.minNotZero=kt.isFinite(n.minNotZero)?n.minNotZero:null;this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this;var e=t.options.ticks;var i=1;var n=10;t.min=ao(e.min,t.min);t.max=ao(e.max,t.max);if(t.min===t.max){if(t.min!==0&&t.min!==null){t.min=Math.pow(10,Math.floor(no(t.min))-1);t.max=Math.pow(10,Math.floor(no(t.max))+1)}else{t.min=i;t.max=n}}if(t.min===null){t.min=Math.pow(10,Math.floor(no(t.max))-1)}if(t.max===null){t.max=t.min!==0?Math.pow(10,Math.floor(no(t.min))+1):n}if(t.minNotZero===null){if(t.min>0){t.minNotZero=t.min}else if(t.max<1){t.minNotZero=Math.pow(10,Math.floor(no(t.max)))}else{t.minNotZero=i}}},buildTicks:function(){var t=this;var e=t.options.ticks;var i=!t.isHorizontal();var n={min:ao(e.min),max:ao(e.max)};var o=t.ticks=oo(n,t);t.max=kt.max(o);t.min=kt.min(o);if(e.reverse){i=!i;t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}if(i){o.reverse()}},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();Nn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;if(t<0||t>e.length-1){return null}return this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(no(t));var i=Math.floor(t/Math.pow(10,e));return i*Math.pow(10,e)},_configure:function(){var t=this;var e=t.min;var i=0;Nn.prototype._configure.call(t);if(e===0){e=t._getFirstTickValue(t.minNotZero);i=io(t.options.ticks.fontSize,dt.global.defaultFontSize)/t._length}t._startValue=no(e);t._valueOffset=i;t._valueRange=(no(t.max)-no(e))/(1-i)},getPixelForValue:function(t){var e=this;var i=0;t=+e.getRightValue(t);if(t>e.min&&t>0){i=(no(t)-e._startValue)/e._valueRange+e._valueOffset}return e.getPixelForDecimal(i)},getValueForPixel:function(t){var e=this;var i=e.getDecimalForPixel(t);return i===0&&e.min===0?0:Math.pow(10,e._startValue+(i-e._valueOffset)*e._valueRange)}}),lo;so._defaults=ro;var ho=kt.valueOrDefault,uo=kt.valueAtIndexOrDefault,co=kt.options.resolve,po={display:true,animate:true,position:"chartArea",angleLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:false},ticks:{showLabelBackdrop:true,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:yn.formatters.linear},pointLabels:{display:true,fontSize:10,callback:function(t){return t}}};function fo(t){var e=t.ticks;if(e.display&&t.display){return ho(e.fontSize,dt.global.defaultFontSize)+e.backdropPaddingY*2}return 0}function mo(t,e,i){if(kt.isArray(i)){return{w:kt.longestText(t,t.font,i),h:i.length*e}}return{w:t.measureText(i).width,h:e}}function go(t,e,i,n,o){if(t===n||t===o){return{start:e-i/2,end:e+i/2}}else if(t<n||t>o){return{start:e-i,end:e}}return{start:e,end:e+i}}function vo(t){var e=kt.options._parseFont(t.options.pointLabels);var i={l:0,r:t.width,t:0,b:t.height-t.paddingTop};var n={};var o,r,a;t.ctx.font=e.string;t._pointLabelSizes=[];var s=t.chart.data.labels.length;for(o=0;o<s;o++){a=t.getPointPosition(o,t.drawingArea+5);r=mo(t.ctx,e.lineHeight,t.pointLabels[o]);t._pointLabelSizes[o]=r;var l=t.getIndexAngle(o);var h=kt.toDegrees(l)%360;var u=go(h,a.x,r.w,0,180);var c=go(h,a.y,r.h,90,270);if(u.start<i.l){i.l=u.start;n.l=l}if(u.end>i.r){i.r=u.end;n.r=l}if(c.start<i.t){i.t=c.start;n.t=l}if(c.end>i.b){i.b=c.end;n.b=l}}t.setReductions(t.drawingArea,i,n)}function _o(t){if(t===0||t===180){return"center"}else if(t<180){return"left"}return"right"}function yo(t,e,i,n){var o=i.y+n/2;var r,a;if(kt.isArray(e)){for(r=0,a=e.length;r<a;++r){t.fillText(e[r],i.x,o);o+=n}}else{t.fillText(e,i.x,o)}}function xo(t,e,i){if(t===90||t===270){i.y-=e.h/2}else if(t>270||t<90){i.y-=e.h}}function bo(t){var e=t.ctx;var i=t.options;var n=i.pointLabels;var o=fo(i);var r=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max);var a=kt.options._parseFont(n);e.save();e.font=a.string;e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=s===0?o/2:0;var h=t.getPointPosition(s,r+l+5);var u=uo(n.fontColor,s,dt.global.defaultFontColor);e.fillStyle=u;var c=t.getIndexAngle(s);var d=kt.toDegrees(c);e.textAlign=_o(d);xo(d,t._pointLabelSizes[s],h);yo(e,t.pointLabels[s],h,a.lineHeight)}e.restore()}function wo(t,e,i,n){var o=t.ctx;var r=e.circular;var a=t.chart.data.labels.length;var s=uo(e.color,n-1);var l=uo(e.lineWidth,n-1);var h;if(!r&&!a||!s||!l){return}o.save();o.strokeStyle=s;o.lineWidth=l;if(o.setLineDash){o.setLineDash(e.borderDash||[]);o.lineDashOffset=e.borderDashOffset||0}o.beginPath();if(r){o.arc(t.xCenter,t.yCenter,i,0,Math.PI*2)}else{h=t.getPointPosition(0,i);o.moveTo(h.x,h.y);for(var u=1;u<a;u++){h=t.getPointPosition(u,i);o.lineTo(h.x,h.y)}}o.closePath();o.stroke();o.restore()}function Lo(t){return kt.isNumber(t)?t:0}var ko=qn.extend({setDimensions:function(){var t=this;t.width=t.maxWidth;t.height=t.maxHeight;t.paddingTop=fo(t.options)/2;t.xCenter=Math.floor(t.width/2);t.yCenter=Math.floor((t.height-t.paddingTop)/2);t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var o=this;var i=o.chart;var r=Number.POSITIVE_INFINITY;var a=Number.NEGATIVE_INFINITY;kt.each(i.data.datasets,function(t,e){if(i.isDatasetVisible(e)){var n=i.getDatasetMeta(e);kt.each(t.data,function(t,e){var i=+o.getRightValue(t);if(isNaN(i)||n.data[e].hidden){return}r=Math.min(i,r);a=Math.max(i,a)})}});o.min=r===Number.POSITIVE_INFINITY?0:r;o.max=a===Number.NEGATIVE_INFINITY?0:a;o.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/fo(this.options))},convertTicksToLabels:function(){var e=this;qn.prototype.convertTicksToLabels.call(e);e.pointLabels=e.chart.data.labels.map(function(){var t=kt.callback(e.options.pointLabels.callback,arguments,e);return t||t===0?t:""})},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this;var e=t.options;if(e.display&&e.pointLabels.display){vo(t)}else{t.setCenterPoint(0,0,0,0)}},setReductions:function(t,e,i){var n=this;var o=e.l/Math.sin(i.l);var r=Math.max(e.r-n.width,0)/Math.sin(i.r);var a=-e.t/Math.cos(i.t);var s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=Lo(o);r=Lo(r);a=Lo(a);s=Lo(s);n.drawingArea=Math.min(Math.floor(t-(o+r)/2),Math.floor(t-(a+s)/2));n.setCenterPoint(o,r,a,s)},setCenterPoint:function(t,e,i,n){var o=this;var r=o.width-e-o.drawingArea;var a=t+o.drawingArea;var s=i+o.drawingArea;var l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((a+r)/2+o.left);o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)},getIndexAngle:function(t){var e=this.chart;var i=360/e.data.labels.length;var n=e.options||{};var o=n.startAngle||0;var r=(t*i+o)%360;return(r<0?r+360:r)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(kt.isNullOrUndef(t)){return NaN}var i=e.drawingArea/(e.max-e.min);if(e.options.ticks.reverse){return(e.max-t)*i}return(t-e.min)*i},getPointPosition:function(t,e){var i=this;var n=i.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+i.xCenter,y:Math.sin(n)*e+i.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this;var i=e.min;var n=e.max;return e.getPointPositionForValue(t||0,e.beginAtZero?0:i<0&&n<0?n:i>0&&n>0?i:0)},_drawGrid:function(){var i=this;var t=i.ctx;var e=i.options;var n=e.gridLines;var o=e.angleLines;var r=ho(o.lineWidth,n.lineWidth);var a=ho(o.color,n.color);var s,l,h;if(e.pointLabels.display){bo(i)}if(n.display){kt.each(i.ticks,function(t,e){if(e!==0){l=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);wo(i,n,l,e)}})}if(o.display&&r&&a){t.save();t.lineWidth=r;t.strokeStyle=a;if(t.setLineDash){t.setLineDash(co([o.borderDash,n.borderDash,[]]));t.lineDashOffset=co([o.borderDashOffset,n.borderDashOffset,0])}for(s=i.chart.data.labels.length-1;s>=0;s--){l=i.getDistanceFromCenterForValue(e.ticks.reverse?i.min:i.max);h=i.getPointPosition(s,l);t.beginPath();t.moveTo(i.xCenter,i.yCenter);t.lineTo(h.x,h.y);t.stroke()}t.restore()}},_drawLabels:function(){var i=this;var n=i.ctx;var t=i.options;var o=t.ticks;if(!o.display){return}var e=i.getIndexAngle(0);var r=kt.options._parseFont(o);var a=ho(o.fontColor,dt.global.defaultFontColor);var s,l;n.save();n.font=r.string;n.translate(i.xCenter,i.yCenter);n.rotate(e);n.textAlign="center";n.textBaseline="middle";kt.each(i.ticks,function(t,e){if(e===0&&!o.reverse){return}s=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);if(o.showLabelBackdrop){l=n.measureText(t).width;n.fillStyle=o.backdropColor;n.fillRect(-l/2-o.backdropPaddingX,-s-r.size/2-o.backdropPaddingY,l+o.backdropPaddingX*2,r.size+o.backdropPaddingY*2)}n.fillStyle=a;n.fillText(t,0,-s)});n.restore()},_drawTitle:kt.noop}),Mo;ko._defaults=po;var Co=kt._deprecated,To=kt.options.resolve,Po=kt.valueOrDefault,So=Number.MIN_SAFE_INTEGER||-9007199254740991,Ao=Number.MAX_SAFE_INTEGER||9007199254740991,Io={millisecond:{common:true,size:1,steps:1e3},second:{common:true,size:1e3,steps:60},minute:{common:true,size:6e4,steps:60},hour:{common:true,size:36e5,steps:24},day:{common:true,size:864e5,steps:30},week:{common:false,size:6048e5,steps:4},month:{common:true,size:2628e6,steps:12},quarter:{common:false,size:7884e6,steps:4},year:{common:true,size:3154e7}},Do=Object.keys(Io);function Oo(t,e){return t-e}function zo(t){var e={};var i=[];var n,o,r;for(n=0,o=t.length;n<o;++n){r=t[n];if(!e[r]){e[r]=true;i.push(r)}}return i}function Eo(t){return kt.valueOrDefault(t.time.min,t.ticks.min)}function Bo(t){return kt.valueOrDefault(t.time.max,t.ticks.max)}function Fo(t,e,i,n){if(n==="linear"||!t.length){return[{time:e,pos:0},{time:i,pos:1}]}var o=[];var r=[e];var a,s,l,h,u;for(a=0,s=t.length;a<s;++a){h=t[a];if(h>e&&h<i){r.push(h)}}r.push(i);for(a=0,s=r.length;a<s;++a){u=r[a+1];l=r[a-1];h=r[a];if(l===undefined||u===undefined||Math.round((u+l)/2)!==h){o.push({time:h,pos:a/(s-1)})}}return o}function Ro(t,e,i){var n=0;var o=t.length-1;var r,a,s;while(n>=0&&n<=o){r=n+o>>1;a=t[r-1]||null;s=t[r];if(!a){return{lo:null,hi:s}}else if(s[e]<i){n=r+1}else if(a[e]>i){o=r-1}else{return{lo:a,hi:s}}}return{lo:s,hi:null}}function No(t,e,i,n){var o=Ro(t,e,i);var r=!o.lo?t[0]:!o.hi?t[t.length-2]:o.lo;var a=!o.lo?t[1]:!o.hi?t[t.length-1]:o.hi;var s=a[e]-r[e];var l=s?(i-r[e])/s:0;var h=(a[n]-r[n])*l;return r[n]+h}function Uo(t,e){var i=t._adapter;var n=t.options.time;var o=n.parser;var r=o||n.format;var a=e;if(typeof o==="function"){a=o(a)}if(!kt.isFinite(a)){a=typeof r==="string"?i.parse(a,r):i.parse(a)}if(a!==null){return+a}if(!o&&typeof r==="function"){a=r(e);if(!kt.isFinite(a)){a=i.parse(a)}}return a}function Zo(t,e){if(kt.isNullOrUndef(e)){return null}var i=t.options.time;var n=Uo(t,t.getRightValue(e));if(n===null){return n}if(i.round){n=+t._adapter.startOf(n,i.round)}return n}function Wo(t,e,i,n){var o=Do.length;var r,a,s;for(r=Do.indexOf(t);r<o-1;++r){a=Io[Do[r]];s=a.steps?a.steps:Ao;if(a.common&&Math.ceil((i-e)/(s*a.size))<=n){return Do[r]}}return Do[o-1]}function jo(t,e,i,n,o){var r,a;for(r=Do.length-1;r>=Do.indexOf(i);r--){a=Do[r];if(Io[a].common&&t._adapter.diff(o,n,a)>=e-1){return a}}return Do[i?Do.indexOf(i):0]}function Ho(t){for(var e=Do.indexOf(t)+1,i=Do.length;e<i;++e){if(Io[Do[e]].common){return Do[e]}}}function Go(t,e,i,n){var o=t._adapter;var r=t.options;var a=r.time;var s=a.unit||Wo(a.minUnit,e,i,n);var l=To([a.stepSize,a.unitStepSize,1]);var h=s==="week"?a.isoWeekday:false;var u=e;var c=[];var d;if(h){u=+o.startOf(u,"isoWeek",h)}u=+o.startOf(u,h?"day":s);if(o.diff(i,e,s)>1e5*l){throw e+" and "+i+" are too far apart with stepSize of "+l+" "+s}for(d=u;d<i;d=+o.add(d,l,s)){c.push(d)}if(d===i||r.bounds==="ticks"){c.push(d)}return c}function Vo(t,e,i,n,o){var r=0;var a=0;var s,l;if(o.offset&&e.length){s=No(t,"time",e[0],"pos");if(e.length===1){r=1-s}else{r=(No(t,"time",e[1],"pos")-s)/2}l=No(t,"time",e[e.length-1],"pos");if(e.length===1){a=l}else{a=(l-No(t,"time",e[e.length-2],"pos"))/2}}return{start:r,end:a,factor:1/(r+1+a)}}function qo(t,e,i,n){var o=t._adapter;var r=+o.startOf(e[0].value,n);var a=e[e.length-1].value;var s,l;for(s=r;s<=a;s=+o.add(s,1,n)){l=i[s];if(l>=0){e[l].major=true}}return e}function Ko(t,e,i){var n=[];var o={};var r=e.length;var a,s;for(a=0;a<r;++a){s=e[a];o[s]=a;n.push({value:s,major:false})}return r===0||!i?n:qo(t,n,o,i)}var Jo={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:false,unit:false,round:false,displayFormat:false,isoWeekday:false,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:false,source:"auto",major:{enabled:false}}},Yo=Nn.extend({initialize:function(){this.mergeTicksOptions();Nn.prototype.initialize.call(this)},update:function(){var t=this;var e=t.options;var i=e.time||(e.time={});var n=t._adapter=new _n._date(e.adapters.date);Co("time scale",i.format,"time.format","time.parser");Co("time scale",i.min,"time.min","ticks.min");Co("time scale",i.max,"time.max","ticks.max");kt.mergeIf(i.displayFormats,n.formats());return Nn.prototype.update.apply(t,arguments)},getRightValue:function(t){if(t&&t.t!==undefined){t=t.t}return Nn.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t=this;var e=t.chart;var i=t._adapter;var n=t.options;var o=n.time.unit||"day";var r=Ao;var a=So;var s=[];var l=[];var h=[];var u,c,d,p,f,m,g;var v=t._getLabels();for(u=0,d=v.length;u<d;++u){h.push(Zo(t,v[u]))}for(u=0,d=(e.data.datasets||[]).length;u<d;++u){if(e.isDatasetVisible(u)){f=e.data.datasets[u].data;if(kt.isObject(f[0])){l[u]=[];for(c=0,p=f.length;c<p;++c){m=Zo(t,f[c]);s.push(m);l[u][c]=m}}else{l[u]=h.slice(0);if(!g){s=s.concat(h);g=true}}}else{l[u]=[]}}if(h.length){r=Math.min(r,h[0]);a=Math.max(a,h[h.length-1])}if(s.length){s=d>1?zo(s).sort(Oo):s.sort(Oo);r=Math.min(r,s[0]);a=Math.max(a,s[s.length-1])}r=Zo(t,Eo(n))||r;a=Zo(t,Bo(n))||a;r=r===Ao?+i.startOf(Date.now(),o):r;a=a===So?+i.endOf(Date.now(),o)+1:a;t.min=Math.min(r,a);t.max=Math.max(r+1,a);t._table=[];t._timestamps={data:s,datasets:l,labels:h}},buildTicks:function(){var t=this;var e=t.min;var i=t.max;var n=t.options;var o=n.ticks;var r=n.time;var a=t._timestamps;var s=[];var l=t.getLabelCapacity(e);var h=o.source;var u=n.distribution;var c,d,p;if(h==="data"||h==="auto"&&u==="series"){a=a.data}else if(h==="labels"){a=a.labels}else{a=Go(t,e,i,l)}if(n.bounds==="ticks"&&a.length){e=a[0];i=a[a.length-1]}e=Zo(t,Eo(n))||e;i=Zo(t,Bo(n))||i;for(c=0,d=a.length;c<d;++c){p=a[c];if(p>=e&&p<=i){s.push(p)}}t.min=e;t.max=i;t._unit=r.unit||(o.autoSkip?Wo(r.minUnit,t.min,t.max,l):jo(t,s.length,r.minUnit,t.min,t.max));t._majorUnit=!o.major.enabled||t._unit==="year"?undefined:Ho(t._unit);t._table=Fo(t._timestamps.data,e,i,u);t._offsets=Vo(t._table,s,e,i,n);if(o.reverse){s.reverse()}return Ko(t,s,t._majorUnit)},getLabelForIndex:function(t,e){var i=this;var n=i._adapter;var o=i.chart.data;var r=i.options.time;var a=o.labels&&t<o.labels.length?o.labels[t]:"";var s=o.datasets[e].data[t];if(kt.isObject(s)){a=i.getRightValue(s)}if(r.tooltipFormat){return n.format(Uo(i,a),r.tooltipFormat)}if(typeof a==="string"){return a}return n.format(Uo(i,a),r.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var o=this;var r=o._adapter;var a=o.options;var s=a.time.displayFormats;var l=s[o._unit];var h=o._majorUnit;var u=s[h];var c=i[e];var d=a.ticks;var p=h&&u&&c&&c.major;var f=r.format(t,n?n:p?u:l);var m=p?d.major:d.minor;var g=To([m.callback,m.userCallback,d.callback,d.userCallback]);return g?g(f,e,i):f},convertTicksToLabels:function(t){var e=[];var i,n;for(i=0,n=t.length;i<n;++i){e.push(this.tickFormatFunction(t[i].value,i,t))}return e},getPixelForOffset:function(t){var e=this;var i=e._offsets;var n=No(e._table,"time",t,"pos");return e.getPixelForDecimal((i.start+n)*i.factor)},getPixelForValue:function(t,e,i){var n=this;var o=null;if(e!==undefined&&i!==undefined){o=n._timestamps.datasets[i][e]}if(o===null){o=Zo(n,t)}if(o!==null){return n.getPixelForOffset(o)}},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this;var i=e._offsets;var n=e.getDecimalForPixel(t)/i.factor-i.end;var o=No(e._table,"pos",n,"time");return e._adapter._create(o)},_getLabelSize:function(t){var e=this;var i=e.options.ticks;var n=e.ctx.measureText(t).width;var o=kt.toRadians(e.isHorizontal()?i.maxRotation:i.minRotation);var r=Math.cos(o);var a=Math.sin(o);var s=Po(i.fontSize,dt.global.defaultFontSize);return{w:n*r+s*a,h:n*a+s*r}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this;var i=e.options.time;var n=i.displayFormats;var o=n[i.unit]||n.millisecond;var r=e.tickFormatFunction(t,0,Ko(e,[t],e._majorUnit),o);var a=e._getLabelSize(r);var s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);if(e.options.offset){s--}return s>0?s:1}}),Xo;Yo._defaults=Jo;var Qo={category:Wn,linear:to,logarithmic:so,radialLinear:ko,time:Yo},$o={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};_n._date.override(typeof n==="function"?{_id:"moment",formats:function(){return $o},parse:function(t,e){if(typeof t==="string"&&typeof e==="string"){t=n(t,e)}else if(!(t instanceof n)){t=n(t)}return t.isValid()?t.valueOf():null},format:function(t,e){return n(t).format(e)},add:function(t,e,i){return n(t).add(e,i).valueOf()},diff:function(t,e,i){return n(t).diff(n(e),i)},startOf:function(t,e,i){t=n(t);if(e==="isoWeek"){return t.isoWeekday(i).valueOf()}return t.startOf(e).valueOf()},endOf:function(t,e){return n(t).endOf(e).valueOf()},_create:function(t){return n(t)}}:{}),dt._set("global",{plugins:{filler:{propagate:true}}});var tr={dataset:function(t){var e=t.fill;var i=t.chart;var n=i.getDatasetMeta(e);var o=n&&i.isDatasetVisible(e);var r=o&&n.dataset._children||[];var a=r.length||0;return!a?null:function(t,e){return e<a&&r[e]._view||null}},boundary:function(t){var i=t.boundary;var e=i?i.x:null;var n=i?i.y:null;if(kt.isArray(i)){return function(t,e){return i[e]}}return function(t){return{x:e===null?t.x:e,y:n===null?t.y:n}}}};function er(t,e,i){var n=t._model||{};var o=n.fill;var r;if(o===undefined){o=!!n.backgroundColor}if(o===false||o===null){return false}if(o===true){return"origin"}r=parseFloat(o,10);if(isFinite(r)&&Math.floor(r)===r){if(o[0]==="-"||o[0]==="+"){r=e+r}if(r===e||r<0||r>=i){return false}return r}switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return false}}function ir(t){var e=t.el._model||{};var i=t.el._scale||{};var n=t.fill;var o=null;var r;if(isFinite(n)){return null}if(n==="start"){o=e.scaleBottom===undefined?i.bottom:e.scaleBottom}else if(n==="end"){o=e.scaleTop===undefined?i.top:e.scaleTop}else if(e.scaleZero!==undefined){o=e.scaleZero}else if(i.getBasePixel){o=i.getBasePixel()}if(o!==undefined&&o!==null){if(o.x!==undefined&&o.y!==undefined){return o}if(kt.isFinite(o)){r=i.isHorizontal();return{x:r?o:null,y:r?null:o}}}return null}function nr(t){var e=t.el._scale;var i=e.options;var n=e.chart.data.labels.length;var o=t.fill;var r=[];var a,s,l,h,u;if(!n){return null}a=i.ticks.reverse?e.max:e.min;s=i.ticks.reverse?e.min:e.max;l=e.getPointPositionForValue(0,a);for(h=0;h<n;++h){u=o==="start"||o==="end"?e.getPointPositionForValue(h,o==="start"?a:s):e.getBasePosition(h);if(i.gridLines.circular){u.cx=l.x;u.cy=l.y;u.angle=e.getIndexAngle(h)-Math.PI/2}r.push(u)}return r}function or(t){var e=t.el._scale||{};if(e.getPointPositionForValue){return nr(t)}return ir(t)}function rr(t,e,i){var n=t[e];var o=n.fill;var r=[e];var a;if(!i){return o}while(o!==false&&r.indexOf(o)===-1){if(!isFinite(o)){return o}a=t[o];if(!a){return false}if(a.visible){return o}r.push(o);o=a.fill}return false}function ar(t){var e=t.fill;var i="dataset";if(e===false){return null}if(!isFinite(e)){i="boundary"}return tr[i](t)}function sr(t){return t&&!t.skip}function lr(t,e,i,n,o){var r,a,s,l;if(!n||!o){return}t.moveTo(e[0].x,e[0].y);for(r=1;r<n;++r){kt.canvas.lineTo(t,e[r-1],e[r])}if(i[0].angle!==undefined){a=i[0].cx;s=i[0].cy;l=Math.sqrt(Math.pow(i[0].x-a,2)+Math.pow(i[0].y-s,2));for(r=o-1;r>0;--r){t.arc(a,s,l,i[r].angle,i[r-1].angle,true)}return}t.lineTo(i[o-1].x,i[o-1].y);for(r=o-1;r>0;--r){kt.canvas.lineTo(t,i[r],i[r-1],true)}}function hr(t,e,i,n,o,r){var a=e.length;var s=n.spanGaps;var l=[];var h=[];var u=0;var c=0;var d,p,f,m,g,v,_,y;t.beginPath();for(d=0,p=a;d<p;++d){f=d%a;m=e[f]._view;g=i(m,f,n);v=sr(m);_=sr(g);if(r&&y===undefined&&v){y=d+1;p=a+y}if(v&&_){u=l.push(m);c=h.push(g)}else if(u&&c){if(!s){lr(t,l,h,u,c);u=c=0;l=[];h=[]}else{if(v){l.push(m)}if(_){h.push(g)}}}}lr(t,l,h,u,c);t.closePath();t.fillStyle=o;t.fill()}var ur={id:"filler",afterDatasetsUpdate:function(t,e){var i=(t.data.datasets||[]).length;var n=e.propagate;var o=[];var r,a,s,l;for(a=0;a<i;++a){r=t.getDatasetMeta(a);s=r.dataset;l=null;if(s&&s._model&&s instanceof ue.Line){l={visible:t.isDatasetVisible(a),fill:er(s,a,i),chart:t,el:s}}r.$filler=l;o.push(l)}for(a=0;a<i;++a){l=o[a];if(!l){continue}l.fill=rr(o,a,n);l.boundary=or(l);l.mapper=ar(l)}},beforeDatasetsDraw:function(t){var e=t._getSortedVisibleDatasetMetas();var i=t.ctx;var n,o,r,a,s,l,h;for(o=e.length-1;o>=0;--o){n=e[o].$filler;if(!n||!n.visible){continue}r=n.el;a=r._view;s=r._children||[];l=n.mapper;h=a.backgroundColor||dt.global.defaultColor;if(l&&h&&s.length){kt.canvas.clipArea(i,t.chartArea);hr(i,s,l,a,h,r._loop);kt.canvas.unclipArea(i)}}}},cr=kt.rtl.getRtlAdapter,dr=kt.noop,pr=kt.valueOrDefault;function fr(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}dt._set("global",{legend:{display:true,position:"top",align:"center",fullWidth:true,reverse:false,weight:1e3,onClick:function(t,e){var i=e.datasetIndex;var n=this.chart;var o=n.getDatasetMeta(i);o.hidden=o.hidden===null?!n.data.datasets[i].hidden:null;n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(i){var n=i.data.datasets;var t=i.options.legend||{};var o=t.labels&&t.labels.usePointStyle;return i._getSortedDatasetMetas().map(function(t){var e=t.controller.getStyle(o?0:undefined);return{text:n[t.index].label,fillStyle:e.backgroundColor,hidden:!i.isDatasetVisible(t.index),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,rotation:e.rotation,datasetIndex:t.index}},this)}}},legendCallback:function(t){var e=document.createElement("ul");var i=t.data.datasets;var n,o,r,a;e.setAttribute("class",t.id+"-legend");for(n=0,o=i.length;n<o;n++){r=e.appendChild(document.createElement("li"));a=r.appendChild(document.createElement("span"));a.style.backgroundColor=i[n].backgroundColor;if(i[n].label){r.appendChild(document.createTextNode(i[n].label))}}return e.outerHTML}});var mr=Dt.extend({initialize:function(t){var e=this;kt.extend(e,t);e.legendHitBoxes=[];e._hoveredItem=null;e.doughnutMode=false},beforeUpdate:dr,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:dr,beforeSetDimensions:dr,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:dr,beforeBuildLabels:dr,buildLabels:function(){var e=this;var i=e.options.labels||{};var t=kt.callback(i.generateLabels,[e.chart],e)||[];if(i.filter){t=t.filter(function(t){return i.filter(t,e.chart.data)})}if(e.options.reverse){t.reverse()}e.legendItems=t},afterBuildLabels:dr,beforeFit:dr,fit:function(){var t=this;var e=t.options;var o=e.labels;var i=e.display;var r=t.ctx;var n=kt.options._parseFont(o);var a=n.size;var s=t.legendHitBoxes=[];var l=t.minSize;var h=t.isHorizontal();if(h){l.width=t.maxWidth;l.height=i?10:0}else{l.width=i?10:0;l.height=t.maxHeight}if(!i){t.width=l.width=t.height=l.height=0;return}r.font=n.string;if(h){var u=t.lineWidths=[0];var c=0;r.textAlign="left";r.textBaseline="middle";kt.each(t.legendItems,function(t,e){var i=fr(o,a);var n=i+a/2+r.measureText(t.text).width;if(e===0||u[u.length-1]+n+2*o.padding>l.width){c+=a+o.padding;u[u.length-(e>0?0:1)]=0}s[e]={left:0,top:0,width:n,height:a};u[u.length-1]+=n+o.padding});l.height+=c}else{var d=o.padding;var p=t.columnWidths=[];var f=t.columnHeights=[];var m=o.padding;var g=0;var v=0;kt.each(t.legendItems,function(t,e){var i=fr(o,a);var n=i+a/2+r.measureText(t.text).width;if(e>0&&v+a+2*d>l.height){m+=g+o.padding;p.push(g);f.push(v);g=0;v=0}g=Math.max(g,n);v+=a+d;s[e]={left:0,top:0,width:n,height:a}});m+=g;p.push(g);f.push(v);l.width+=m}t.width=l.width;t.height=l.height},afterFit:dr,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var s=this;var i=s.options;var l=i.labels;var t=dt.global;var h=t.defaultColor;var u=t.elements.line;var c=s.height;var d=s.columnHeights;var p=s.width;var f=s.lineWidths;if(!i.display){return}var m=cr(i.rtl,s.left,s.minSize.width);var g=s.ctx;var e=pr(l.fontColor,t.defaultFontColor);var n=kt.options._parseFont(l);var v=n.size;var _;g.textAlign=m.textAlign("left");g.textBaseline="middle";g.lineWidth=.5;g.strokeStyle=e;g.fillStyle=e;g.font=n.string;var y=fr(l,v);var x=s.legendHitBoxes;var b=function(t,e,i){if(isNaN(y)||y<=0){return}g.save();var n=pr(i.lineWidth,u.borderWidth);g.fillStyle=pr(i.fillStyle,h);g.lineCap=pr(i.lineCap,u.borderCapStyle);g.lineDashOffset=pr(i.lineDashOffset,u.borderDashOffset);g.lineJoin=pr(i.lineJoin,u.borderJoinStyle);g.lineWidth=n;g.strokeStyle=pr(i.strokeStyle,h);if(g.setLineDash){g.setLineDash(pr(i.lineDash,u.borderDash))}if(l&&l.usePointStyle){var o=y*Math.SQRT2/2;var r=m.xPlus(t,y/2);var a=e+v/2;kt.canvas.drawPoint(g,i.pointStyle,o,r,a,i.rotation)}else{g.fillRect(m.leftForLtr(t,y),e,y,v);if(n!==0){g.strokeRect(m.leftForLtr(t,y),e,y,v)}}g.restore()};var w=function(t,e,i,n){var o=v/2;var r=m.xPlus(t,y+o);var a=e+o;g.fillText(i.text,r,a);if(i.hidden){g.beginPath();g.lineWidth=2;g.moveTo(r,a);g.lineTo(m.xPlus(r,n),a);g.stroke()}};var L=function(t,e){switch(i.align){case"start":return l.padding;case"end":return t-e;default:return(t-e+l.padding)/2}};var k=s.isHorizontal();if(k){_={x:s.left+L(p,f[0]),y:s.top+l.padding,line:0}}else{_={x:s.left+l.padding,y:s.top+L(c,d[0]),line:0}}kt.rtl.overrideTextDirection(s.ctx,i.textDirection);var M=v+l.padding;kt.each(s.legendItems,function(t,e){var i=g.measureText(t.text).width;var n=y+v/2+i;var o=_.x;var r=_.y;m.setWidth(s.minSize.width);if(k){if(e>0&&o+n+l.padding>s.left+s.minSize.width){r=_.y+=M;_.line++;o=_.x=s.left+L(p,f[_.line])}}else if(e>0&&r+M>s.top+s.minSize.height){o=_.x=o+s.columnWidths[_.line]+l.padding;_.line++;r=_.y=s.top+L(c,d[_.line])}var a=m.x(o);b(a,r,t);x[e].left=m.leftForLtr(a,x[e].width);x[e].top=r;w(a,r,t,i);if(k){_.x+=n+l.padding}else{_.y+=M}});kt.rtl.restoreTextDirection(s.ctx,i.textDirection)},_getLegendItemAt:function(t,e){var i=this;var n,o,r;if(t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom){r=i.legendHitBoxes;for(n=0;n<r.length;++n){o=r[n];if(t>=o.left&&t<=o.left+o.width&&e>=o.top&&e<=o.top+o.height){return i.legendItems[n]}}}return null},handleEvent:function(t){var e=this;var i=e.options;var n=t.type==="mouseup"?"click":t.type;var o;if(n==="mousemove"){if(!i.onHover&&!i.onLeave){return}}else if(n==="click"){if(!i.onClick){return}}else{return}o=e._getLegendItemAt(t.x,t.y);if(n==="click"){if(o&&i.onClick){i.onClick.call(e,t.native,o)}}else{if(i.onLeave&&o!==e._hoveredItem){if(e._hoveredItem){i.onLeave.call(e,t.native,e._hoveredItem)}e._hoveredItem=o}if(i.onHover&&o){i.onHover.call(e,t.native,o)}}}});function gr(t,e){var i=new mr({ctx:t.ctx,options:e,chart:t});hi.configure(t,i,e);hi.addBox(t,i);t.legend=i}var vr={id:"legend",_element:mr,beforeInit:function(t){var e=t.options.legend;if(e){gr(t,e)}},beforeUpdate:function(t){var e=t.options.legend;var i=t.legend;if(e){kt.mergeIf(e,dt.global.legend);if(i){hi.configure(t,i,e);i.options=e}else{gr(t,e)}}else if(i){hi.removeBox(t,i);delete t.legend}},afterEvent:function(t,e){var i=t.legend;if(i){i.handleEvent(e)}}},_r=kt.noop;dt._set("global",{title:{display:false,fontStyle:"bold",fullWidth:true,padding:10,position:"top",text:"",weight:2e3}});var yr=Dt.extend({initialize:function(t){var e=this;kt.extend(e,t);e.legendHitBoxes=[]},beforeUpdate:_r,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:_r,beforeSetDimensions:_r,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:_r,beforeBuildLabels:_r,buildLabels:_r,afterBuildLabels:_r,beforeFit:_r,fit:function(){var t=this;var e=t.options;var i=t.minSize={};var n=t.isHorizontal();var o,r;if(!e.display){t.width=i.width=t.height=i.height=0;return}o=kt.isArray(e.text)?e.text.length:1;r=o*kt.options._parseFont(e).lineHeight+e.padding*2;t.width=i.width=n?t.maxWidth:r;t.height=i.height=n?r:t.maxHeight},afterFit:_r,isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},draw:function(){var t=this;var e=t.ctx;var i=t.options;if(!i.display){return}var n=kt.options._parseFont(i);var o=n.lineHeight;var r=o/2+i.padding;var a=0;var s=t.top;var l=t.left;var h=t.bottom;var u=t.right;var c,d,p;e.fillStyle=kt.valueOrDefault(i.fontColor,dt.global.defaultFontColor);e.font=n.string;if(t.isHorizontal()){d=l+(u-l)/2;p=s+r;c=u-l}else{d=i.position==="left"?l+r:u-r;p=s+(h-s)/2;c=h-s;a=Math.PI*(i.position==="left"?-.5:.5)}e.save();e.translate(d,p);e.rotate(a);e.textAlign="center";e.textBaseline="middle";var f=i.text;if(kt.isArray(f)){var m=0;for(var g=0;g<f.length;++g){e.fillText(f[g],0,m,c);m+=o}}else{e.fillText(f,0,0,c)}e.restore()}});function xr(t,e){var i=new yr({ctx:t.ctx,options:e,chart:t});hi.configure(t,i,e);hi.addBox(t,i);t.titleBlock=i}var br,wr={},Lr=ur,kr=vr,Mr={id:"title",_element:yr,beforeInit:function(t){var e=t.options.title;if(e){xr(t,e)}},beforeUpdate:function(t){var e=t.options.title;var i=t.titleBlock;if(e){kt.mergeIf(e,dt.global.title);if(i){hi.configure(t,i,e);i.options=e}else{xr(t,e)}}else if(i){hi.removeBox(t,i);delete t.titleBlock}}};for(var Cr in wr.filler=Lr,wr.legend=kr,wr.title=Mr,pn.helpers=kt,fn(),pn._adapters=_n,pn.Animation=zt,pn.animationService=Et,pn.controllers=je,pn.DatasetController=Zt,pn.defaults=dt,pn.Element=Dt,pn.elements=ue,pn.Interaction=Ye,pn.layouts=hi,pn.platform=Ni,pn.plugins=Ui,pn.Scale=Nn,pn.scaleService=Zi,pn.Ticks=yn,pn.Tooltip=nn,pn.helpers.each(Qo,function(t,e){pn.scaleService.registerScaleType(e,t,t._defaults)}),wr){if(wr.hasOwnProperty(Cr)){pn.plugins.register(wr[Cr])}}pn.platform.initialize();var Tr=pn;if(typeof window!=="undefined"){window.Chart=pn}return(pn.Chart=pn).Legend=wr.legend._element,pn.Title=wr.title._element,pn.pluginService=pn.plugins,pn.PluginBase=pn.Element.extend({}),pn.canvasHelpers=pn.helpers.canvas,pn.layoutService=pn.layouts,pn.LinearScaleBase=qn,pn.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(i){pn[i]=function(t,e){return new pn(t,pn.helpers.merge(e||{},{type:i.charAt(0).toLowerCase()+i.slice(1)}))}}),Tr}(function(){try{return i(14)}catch(t){}}())},function(t){t.exports=JSON.parse("{}")},,function(t,e,i){"use strict";function n(t){t=t||{},this.settings={timeMovingThreshold:t.timeMovingThreshold||15e3,eleGainThreshold:t.eleGainThreshold||5},this.xml=null,this.metadata={},this.waypoints=[],this.routes=[],this.tracks=[]}n.prototype.parse=function(t){var e=this,i=new DOMParser;this.xml=i.parseFromString(t,"text/xml");var n=this.xml.querySelector("metadata");null!==n&&(this.metadata=this.parseMetadataType(n));for(var o=[].slice.call(this.xml.querySelectorAll("wpt")),r=0;r<o.length;r++){var a=o[r],s=e.parseWptType(a,!0);e.waypoints.push(s)}for(var l=[].slice.call(this.xml.querySelectorAll("rte")),r=0;r<l.length;r++){var h=l[r],u=e.parseRteType(h);u.time=e.calcTime(u.points),u.distance=e.calcDistance(u.points),u.elevation=e.calcElevation(u.points),u.heartRate=e.calcHeartRate(u.points),e.routes.push(u)}for(var c=[].slice.call(this.xml.querySelectorAll("trk")),r=0;r<c.length;r++){var d=c[r],p=e.parseTrkType(d);p.time=e.calcTime(p.points),p.distance=e.calcDistance(p.points),p.elevation=e.calcElevation(p.points),p.heartRate=e.calcHeartRate(p.points),e.tracks.push(p)}},n.prototype.getFirstTagValue=function(t,e){var i=t.querySelectorAll(e);return i.length?i[0].textContent:null},n.prototype.getFirstTagValueNs=function(t,e,i){var n=t.getElementsByTagNameNS(e,i);return n.length?n[0].textContent:null},n.prototype.getTpxValue=function(t,e){var i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v1",e);return null===i&&(i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v2",e)),i},n.prototype.parseLinks=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("link")),n=0;n<i.length;n++){var o=i[n],r=this.parseLinkType(o);e.push(r)}return e},n.prototype.parseRtepts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("rtept")),n=0;n<i.length;n++){var o=i[n],r=this.parseWptType(o,!1);e.push(r)}return e},n.prototype.parseTrkpts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkpt")),n=0;n<i.length;n++){var o=i[n],r=this.parseWptType(o,!1);e.push(r)}return e},n.prototype.parseTrksegs=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkseg")),n=0;n<i.length;n++){var o=i[n],r=this.parseTrksegType(o,!1);r.time=this.calcTime(r.points),r.distance=this.calcDistance(r.points),r.elevation=this.calcElevation(r.points),r.heartRate=this.calcHeartRate(r.points),e.push(r)}return e},n.prototype.parseWptTypeExtensions=function(t){return{tpx:this.parseTrackPointExtensionType(t)}},n.prototype.parseLinkType=function(t){return{href:t.getAttribute("href"),text:this.getFirstTagValue(t,"text"),type:this.getFirstTagValue(t,"type")}},n.prototype.parseMetadataType=function(t){return{name:this.getFirstTagValue(t,"name"),desc:this.getFirstTagValue(t,"desc"),time:Date.parse(this.getFirstTagValue(t,"time")),links:this.parseLinks(t)}},n.prototype.parseWptType=function(t,e){var i={lat:parseFloat(t.getAttribute("lat")),lon:parseFloat(t.getAttribute("lon")),ele:parseFloat(this.getFirstTagValue(t,"ele")),time:Date.parse(this.getFirstTagValue(t,"time")),extension:this.parseWptTypeExtensions(t)};return e&&(i.name=this.getFirstTagValue(t,"name"),i.cmt=this.getFirstTagValue(t,"cmt"),i.desc=this.getFirstTagValue(t,"desc"),i.links=this.parseLinks(t)),i},n.prototype.parseRteType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseRtepts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrkType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseTrkpts(t),segments:this.parseTrksegs(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrksegType=function(t){return{points:this.parseTrkpts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseMmpExtensionType=function(t,e){var i=t.querySelector("extensions");if(null===i)return{};for(var n={},o=0;o<e.length;o++){var r=e[o];n[r]=this.getFirstTagValueNs(i,"https://www.mapsmarker.com/GPX/1/",r)}return n},n.prototype.parseTrackPointExtensionType=function(t){var e=t.querySelector("TrackPointExtension");return null===e?{}:{atemp:parseFloat(this.getTpxValue(e,"atemp")),wtemp:parseFloat(this.getTpxValue(e,"wtemp")),depth:parseFloat(this.getTpxValue(e,"depth")),hr:parseInt(this.getTpxValue(e,"hr")),cad:parseInt(this.getTpxValue(e,"cad")),speed:parseFloat(this.getTpxValue(e,"speed")),course:parseFloat(this.getTpxValue(e,"course")),bearing:parseFloat(this.getTpxValue(e,"bearing"))}},n.prototype.calcTime=function(t){var e=0,i=0;t[0].elapsed=e;for(var n=0;n<t.length-1;n++){var o=t[n+1].time-t[n].time;isNaN(o)||(e+=o,o<this.settings.timeMovingThreshold&&(i+=o)),t[n+1].elapsed=e}return{start:t[0].time,end:t[t.length-1].time,total:e,moving:i}},n.prototype.calcDistance=function(t){var e=0;t[0].dist=e;for(var i=0;i<t.length-1;i++){e+=this.calcDistanceBetween(t[i],t[i+1]),t[i+1].dist=e}return{total:e}},n.prototype.calcDistanceBetween=function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lon-t.lon)*i/2),s=r*r+Math.cos(n)*Math.cos(o)*a*a;return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},n.prototype.calcElevation=function(t){for(var e=[],i=0,n=0,o=null,r=0;r<t.length;r++){var a,s=t[r].ele;isNaN(s)?(t[r].gain=Math.abs(i),t[r].loss=Math.abs(n)):(null!==o?(a=s-o,5<=Math.abs(a)&&(0<a?i+=a:a<0&&(n+=a),o=s,e.push(s))):(e.push(s),o=s),t[r].gain=Math.abs(i),t[r].loss=Math.abs(n))}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),gain:Math.abs(i),loss:Math.abs(n),avg:e.reduce(function(t,e){return t+e},0)/e.length}},n.prototype.calcHeartRate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].extension;void 0!==n.tpx&&n.tpx.hr&&e.push(n.tpx.hr)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),avg:e.reduce(function(t,e){return t+e},0)/e.length}};var o=n,r=i(2),h=i.n(r),a=i(0),Y=i.n(a),s=i(1);i(15),i(6),i(7),i(8),i(9),i(18),i(19),i(20),i(21),i(22);Y.a.Control.ResetView=Y.a.Control.extend({options:{position:"topleft",onDemand:!1,coordinates:null,zoom:null,title:""},onAdd:function(t){var e=Y.a.DomUtil.create("div","leaflet-bar"),i=this.options;return i.onDemand&&(e.style.display="none",t.on("movestart",function(){e.style.display="block"})),null===i.coordinates&&(i.coordinates=t.getCenter()),null===i.zoom&&(i.zoom=t.getZoom()),this._createButton("",i.title,"mmp-control-resetview",e,this._resetView),e},_createButton:function(t,e,i,n,o){var r=Y.a.DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e,Y.a.DomEvent.disableClickPropagation(r),Y.a.DomEvent.on(r,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(r,"click",o,this),Y.a.DomEvent.on(r,"click",this._refocusOnMap,this)},_resetView:function(){this._map.stop(),this.options.onDemand&&this._map.once("moveend",function(){this._container.style.display="none"},this),this._map.setView(this.options.coordinates,this.options.zoom,{animate:!0})}}),Y.a.control.resetView=function(t){return new Y.a.Control.ResetView(t)},Y.a.Control.Filters=Y.a.Control.extend({options:{mmp:null,collapsed:!0,position:"topright",buttons:!0,allText:"All",noneText:"None"},initialize:function(t){Y.a.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-filters",o=this._container=Y.a.DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),Y.a.DomEvent.disableClickPropagation(o),Y.a.DomEvent.disableScrollPropagation(o),i&&(this._map.on("click",this.collapse,this),Y.a.Browser.android||Y.a.DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=Y.a.DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Filters",Y.a.Browser.touch?(Y.a.DomEvent.on(r,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(r,"click",this.expand,this)):Y.a.DomEvent.on(r,"focus",this.expand,this);var a,s,l,h=this._form=Y.a.DomUtil.create("form",n+"-list",o);this.options.buttons&&(a=Y.a.DomUtil.create("div","mmp-control-filters-buttons",h),(s=Y.a.DomUtil.create("a",null,a)).innerHTML=this.options.allText,s.href="#",s.title=this.options.allText,Y.a.DomEvent.disableClickPropagation(s),Y.a.DomEvent.on(s,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(s,"click",function(){this._batchSelect(!0)},this),(l=Y.a.DomUtil.create("a",null,a)).innerHTML=this.options.noneText,l.href="#",l.title=this.options.noneText,Y.a.DomEvent.disableClickPropagation(l),Y.a.DomEvent.on(l,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(l,"click",function(){this._batchSelect(!1)},this));var u=[];Object.keys(e.settings.filtersDetails).forEach(function(t){void 0!==e.groups[t]&&u.push({index:e.settings.filtersDetails[t].index,id:t,icon:e.settings.filtersDetails[t].icon,name:e.settings.filtersDetails[t].name,count:Object.keys(e.groups[t].markers).length})}),u="id"==e.settings.filtersOrderBy?e.sortArray(u,"id",e.settings.filtersSortOrder,!0):"name"==e.settings.filtersOrderBy?e.sortArray(u,"name",e.settings.filtersSortOrder,!1):"count"==e.settings.filtersOrderBy?e.sortArray(u,"count",e.settings.filtersSortOrder,!0):e.sortArray(u,"index",e.settings.filtersSortOrder,!0);for(var c=0;c<u.length;c++){var d=Y.a.DomUtil.create("label",null,h),p=Y.a.DomUtil.create("input",n+"-selector",d);p.type="checkbox",p.value=u[c].id,void 0!==e.groups[u[c].id]&&e.groups[u[c].id].active&&(p.checked=!0);var f=Y.a.DomUtil.create("span",null,d),m="";e.settings.filtersIcon&&(m+='<img class="mmp-filter-icon" src="'+(u[c].icon?mmpVars.iconsUrl+u[c].icon:mmpVars.pluginUrl+"images/leaflet/marker.png")+'" />'),e.settings.filtersName&&(m+=u[c].name),e.settings.filtersCount&&(m+=" [ "+u[c].count+" ]"),f.innerHTML=m,Y.a.DomEvent.on(p,"click",function(){void 0!==e.groups[this.value]&&(e.groups[this.value].active=this.checked),e.drawMarkers(),e.drawGeoJson(),t.fire("filterclick")},p)}return i||this.expand(),o},expand:function(){Y.a.DomUtil.addClass(this._container,"mmp-control-filters-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Y.a.DomUtil.addClass(this._form,"mmp-control-filters-scrollbar"),this._form.style.height=t+"px"):Y.a.DomUtil.removeClass(this._form,"mmp-control-filters-scrollbar"),this},collapse:function(){return Y.a.DomUtil.removeClass(this._container,"mmp-control-filters-expanded"),this},_batchSelect:function(t){for(var e=this.options.mmp,i=this._container.getElementsByClassName("mmp-control-filters-selector"),n=i.length-1;0<=n;n--)i[n].checked=t,void 0!==e.groups[i[n].value]&&(e.groups[i[n].value].active=t);e.drawMarkers(),e.drawGeoJson(),this._map.fire("filterclick")}}),Y.a.control.filters=function(t){return new Y.a.Control.Filters(t)},Y.a.Control.Gpx=Y.a.Control.extend({options:{mmp:null,collapsed:!0,position:"topleft"},initialize:function(t){Y.a.Util.setOptions(this,t)},onAdd:function(e){this._map=e;var i=this.options.mmp,t=this.options.collapsed,n="mmp-control-tracks",o=this._container=Y.a.DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),Y.a.DomEvent.disableClickPropagation(o),Y.a.DomEvent.disableScrollPropagation(o),t&&(this._map.on("click",this.collapse,this),Y.a.Browser.android||Y.a.DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=Y.a.DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Tracks",Y.a.Browser.touch?(Y.a.DomEvent.on(r,"click",Y.a.DomEvent.stop),Y.a.DomEvent.on(r,"click",this.expand,this)):Y.a.DomEvent.on(r,"focus",this.expand,this);for(var a=this._form=Y.a.DomUtil.create("form",n+"-list",o),s=0;s<i.gpx.tracks.length;s++){var l=Y.a.DomUtil.create("label",null,a),h=Y.a.DomUtil.create("input",n+"-selector",l);h.type="radio",h.name="mmp-gpx-tracks",0==(h.value=s)&&(h.checked=!0),Y.a.DomUtil.create("span",null,l).innerHTML=i.gpx.tracks[s].name?i.gpx.tracks[s].name:"Unnamed Track",Y.a.DomEvent.on(h,"click",function(){var t=parseInt(this.value);e._activeTrack=t,e.fitBounds(i.gpxTracks[t].getBounds(),{padding:[10,10]}),i.updateElevationChart(!0)},h)}return t||this.expand(),o},expand:function(){Y.a.DomUtil.addClass(this._container,"mmp-control-tracks-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Y.a.DomUtil.addClass(this._form,"mmp-control-tracks-scrollbar"),this._form.style.height=t+"px"):Y.a.DomUtil.removeClass(this._form,"mmp-control-tracks-scrollbar"),this},collapse:function(){return Y.a.DomUtil.removeClass(this._container,"mmp-control-tracks-expanded"),this}}),Y.a.control.gpx=function(t){return new Y.a.Control.Gpx(t)};i(23);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){var J=this;this.uid=t.uid,this.type=t.type,this.id=t.id,this.lazy=t.lazy,this.customMarkers=t.markers,this.settings=t.overrides||{},this.language=t.language||null,this.highlight=t.highlight||null,this.fullscreen=t.fullscreen||!1,this.chartContainer=t.chart||null,this.page=t.page||null,this.containers={},this.map={},this.groups={},this.markers={},this.markerGroup={},this.geoJson={},this.geoJsonGroup={},this.tooltips={},this.basemaps={},this.minimaps={},this.overlays={},this.controls={},this.gpx={},this.gpxChart={},this.gpxTracks={},this.gpxWaypoints={},this.chartLayers={},this.location={},this.listeners={},this.on=function(t,e){J.listeners[t]instanceof Array||(J.listeners[t]=[]),-1===J.listeners[t].indexOf(e)&&J.listeners[t].push(e)},this.off=function(t,e){var i;J.listeners[t]instanceof Array&&(-1!==(i=J.listeners[t].indexOf(e))&&J.listeners[t].splice(i,1))},this.fire=function(t,e){if(J.listeners[t]instanceof Array)for(var i=0;i<J.listeners[t].length;i++)J.listeners[t][i].call(J,e)},this.isVisible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},this.isInViewport=function(t){var e=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;return e.left<=n&&0<=e.right&&e.top<=i&&0<=e.bottom},this.checkInvalidateSize=function(){var t=J.isVisible(J.containers.main);!J.mapVisible&&t&&(J.map.invalidateSize(),void 0!==J.controls.minimap&&J.controls.minimap._miniMap.invalidateSize()),J.mapVisible=t},this.sortArray=function(t,o,r,a){return t.sort(function(t,e){var i,n="desc"==r?(i=e[o],t[o]):(i=t[o],e[o]);return a?i-n:i.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}),t},this.hasString=function(t,e,i,n){return n&&(t=t.replace(/<\/?[^>]+(>|$)/g,"")),i?-1!==t.indexOf(e):-1!==t.toUpperCase().indexOf(e.toUpperCase())},this.strToBounds=function(t){return 4!==(t=(t=t.replace(/[^0-9.,-]/g,"")).split(",")).length?null:(t.map(parseFloat),[[t[0],t[1]],[t[2],t[3]]])},this.boundsToStr=function(t){return[t.getSouth(),t.getWest(),t.getNorth(),t.getEast()].join(",")},this.checkJson=function(t){try{var e=JSON.parse(t);if(e&&"object"===l(e))return e}catch(t){}return!1},this.msToPrime=function(t,e){var i=Math.floor(t),n=i%1e3,o=(i=Math.floor(i/1e3))%60,r=(i=Math.floor(i/60))%60,a=(i=Math.floor(i/60))%24,s=Math.floor(i/24);return e?(n="",o+='"'):(n+='"',o+="."),6e4<t?r+="'":r="",36e5<t?a+=":":a="",864e5<t?s+=".":s="",s+a+r+o+n},this.roundToDec=function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},this.formatGpxValue=function(t,e,i){if(isNaN(t))return"N/A";var n,o,r="dist"===e?(n=1.609344,o=" km"," mi"):(n=.3048,o=" m"," ft"),a="imperial"===i||"imperial-metric"===i?(s=t*n,t):(s=t)/n,s=J.roundToDec(s,2)+o;switch(a=J.roundToDec(a,2)+r,i){case"imperial":return a;case"metric-imperial":return s+" ("+a+")";case"imperial-metric":return a+" ("+s+")";default:return s}},this.addLoading=function(t){if(!t.getElementsByClassName("mmp-loading-spinner").length){var e=document.createElement("div");e.className="mmp-loading-spinner";var i=document.createElement("div");i.className="rect-wrap",e.appendChild(i);for(var n=1;n<=5;n++){var o=document.createElement("div");o.className="rect"+n,i.appendChild(o)}t.appendChild(e)}},this.removeLoading=function(t){for(var e=t.getElementsByClassName("mmp-loading-spinner"),i=0;i<e.length;i++)e[i].remove()},this.showMapModal=function(t,e){void 0!==J.containers.mapModal&&J.containers.mapModal.remove(),J.containers.mapModal=Y.a.DomUtil.create("div","mmp-map-modal"),J.containers.mapModal.addEventListener("click",function(t){t.target===this&&this.remove()});var i=Y.a.DomUtil.create("div","mmp-map-modal-content",J.containers.mapModal),n=Y.a.DomUtil.create("span","mmp-map-modal-close",i);n.innerHTML="&times;",n.addEventListener("click",function(t){t.target===this&&J.containers.mapModal.remove()});var o=Y.a.DomUtil.create("div","mmp-map-modal-header",i);Y.a.DomUtil.create("p","mmp-map-modal-title",o).innerHTML=t;var r=Y.a.DomUtil.create("div","mmp-map-modal-body",i);"string"==typeof e?Y.a.DomUtil.create("p","mmp-map-modal-message",r).innerHTML=e:r.appendChild(e),J.containers.map.appendChild(J.containers.mapModal)},this.getDirectionsLink=function(t,e,i,n){var o=J.settings,r="";switch(t){case"googlemaps":r="https://www.google.com/maps?daddr="+(n||e+","+i),r+="&t="+o.directionsGoogleType,r+="&layer="+(o.directionsGoogleTraffic?"1":"0"),r+="&doflg="+o.directionsGoogleUnits,o.directionsGoogleAvoidHighways&&(r+="&dirflg=h"),o.directionsGoogleAvoidTolls&&(r+="&dirflg=t"),o.directionsGooglePublicTransport&&(r+="&dirflg=r"),o.directionsGoogleWalking&&(r+="&dirflg=w"),o.directionsGoogleLanguage&&(r+="&hl="+o.directionsGoogleLanguage),r+="&om="+(o.directionsGoogleOverview?"1":"0");break;case"yours":r="http://www.yournavigation.org/?tlat="+e+"&tlon="+i,r+="&v="+o.directionsYoursType,r+="&fast="+("fastest"===o.directionsYoursRoute?"1":"0"),r+="&layer="+o.directionsYoursLayer;break;case"ors":r="https://maps.openrouteservice.org/directions?a=null,null,"+e+","+i,r+="&b="+("Bicycle"===o.directionsOrsType?"1a":"Pedestrian"===o.directionsOrsType?"2":"HeavyVehicle"===o.directionsOrsType?"4a":"0"),r+="&c="+("Shortest"===o.directionsOrsRoute?"1":"Recommended"===o.directionsOrsRoute?"2":"0");break;case"bingmaps":r="https://www.bing.com/maps/default.aspx?v=2&rtp=pos___e_~pos."+e+"_"+i+(n?"_"+n:"")}return r},this.getApiLink=function(t,e,i){i=i||{};var n=J.settings,o=mmpVars.apiUrl;switch(n.language&&(i.lang=n.language),t){case"editMap":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e;break;case"editMarker":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+e;break;case"fs":o+="fullscreen/"+e+"/";break;case"gpx":o=mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+n.gpxUrl;break;case"geojson":o+="export/geojson/"+e+"/";break;case"kml":o+="export/kml/"+e+"/";break;case"georss":o+="export/georss/"+e+"/"}return Object.keys(i).length&&(o+="?",Object.keys(i).forEach(function(t){o+=t+"="+i[t]+"&"}),o=o.slice(0,-1)),o},this.addApiLink=function(t,e,i,n){var o=Y.a.DomUtil.create("a",null,n);o.href=t,o.rel="nofollow",o.target="_blank",o.title=e;var r=Y.a.DomUtil.create("img",null,o);r.src=mmpVars.pluginUrl+"images/icons/"+i,r.title=e,r.style.width=14,r.style.height=14},this.addShareLink=function(t,e){var i=Y.a.DomUtil.create("img","mmp-share-icon",e);i.src=mmpVars.pluginUrl+"images/icons/share.png",i.title=mmpL10n.api.share,i.addEventListener("click",function(){J.containers.main.scrollIntoView(),J.openShareModal(t)})},this.openShareModal=function(t){var e=J.settings,i=e.apiFullscreen&&"fs"===e.shareUrl?J.getApiLink("fs",J.id,{marker:t}):J.page+"?markerid="+t,n=Y.a.DomUtil.create("div",null);e.shareFacebook&&n.appendChild(J.getShareLink("facebook",i,e.shareText)),e.shareTwitter&&n.appendChild(J.getShareLink("twitter",i,e.shareText)),e.shareLinkedIn&&n.appendChild(J.getShareLink("linkedin",i,e.shareText)),e.shareWhatsApp&&n.appendChild(J.getShareLink("whatsapp",i,e.shareText)),e.shareEmail&&n.appendChild(J.getShareLink("email",i,e.shareText));var o=Y.a.DomUtil.create("div","mmp-share-modal-url",n),r=Y.a.DomUtil.create("input",null,o);r.setAttribute("type","text"),r.setAttribute("value",i),r.addEventListener("click",function(){this.select()}),J.showMapModal(mmpL10n.api.share,n)},this.getShareLink=function(t,e,i){e=encodeURIComponent(e),i=encodeURIComponent(i);var n=Y.a.DomUtil.create("a","mmp-share-button-link");n.setAttribute("target","_blank"),n.setAttribute("rel","noopener");var o=Y.a.DomUtil.create("div","mmp-share-button",n),r=Y.a.DomUtil.create("div","mmp-share-button-icon",o),a=Y.a.SVG.create("svg");a.setAttribute("viewBox","0 0 24 24"),r.appendChild(a);var s=Y.a.SVG.create("path");switch(a.appendChild(s),t){case"facebook":n.setAttribute("href","https://www.facebook.com/sharer.php?u="+e),Y.a.DomUtil.addClass(o,"mmp-share-button-facebook"),s.setAttribute("d","M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z");break;case"twitter":n.setAttribute("href","https://twitter.com/share?text="+i+"&url="+e+"&via=mapsmarker"),Y.a.DomUtil.addClass(o,"mmp-share-button-twitter"),s.setAttribute("d","M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z");break;case"linkedin":n.setAttribute("href","https://www.linkedin.com/shareArticle?title="+i+"&url="+e),Y.a.DomUtil.addClass(o,"mmp-share-button-linkedin"),s.setAttribute("d","M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z");break;case"whatsapp":Y.a.Browser.mobile?n.setAttribute("href","whatsapp://send?text="+i+" "+e):n.setAttribute("href","https://api.whatsapp.com/send?text="+i+" "+e),Y.a.DomUtil.addClass(o,"mmp-share-button-whatsapp"),s.setAttribute("d","M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z");break;case"email":i?n.setAttribute("href","mailto:?subject="+i+"&body="+e):n.setAttribute("href","mailto:?body="+e),n.setAttribute("target","_self"),Y.a.DomUtil.addClass(o,"mmp-share-button-email"),s.setAttribute("d","M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z");break;default:return null}return n},this.checkPopupSize=function(t){var e=J.settings;J.containers.map.offsetWidth<e.popupMaxWidth?(t.options.minWidth=J.containers.map.offsetWidth-50,t.options.maxWidth=J.containers.map.offsetWidth-50):(t.options.minWidth=e.popupMinWidth,t.options.maxWidth=e.popupMaxWidth),J.containers.map.offsetHeight<e.popupMaxHeight?t.options.maxHeight=J.containers.map.offsetHeight-50:t.options.maxHeight=e.popupMaxHeight,t.update()},this.loadPopup=function(s,l){return new Promise(function(t,e){var i,n,o,r,a=s.getPopup();void 0!==a?l||!a.getContent()?(i=Y.a.DomUtil.create("div","mmp-popup"),Y.a.DomUtil.create("img","mmp-popup-loading",i).src=mmpVars.pluginUrl+"images/paging-ajax-loader.gif",a.setContent(i),n="",s instanceof Y.a.Marker?n=J.getMarkerPopup(s):s instanceof Y.a.Path&&(n=J.getGeoJsonPopup(s)),o=n.getElementsByTagName("img"),r=Array.prototype.slice.call(o),Promise.all(r.map(J.imgLoaded)).then(function(){a.setContent(n),t(a)})):t(a):e()})},this.getMarkerPopup=function(t){var e,i,n,o,r,a,s=J.settings,l=Y.a.DomUtil.create("div","mmp-popup");return l.id="mmp-popup-"+t.id,s.popupMarkername&&t.name&&((e=Y.a.DomUtil.create("div","mmp-popup-name",l)).innerHTML=t.name,e.style.borderBottom="1px solid #f0f0e7"),t.popup&&(Y.a.DomUtil.create("div","mmp-popup-text",l).innerHTML=t.popup),(t.address&&s.popupAddress||s.popupCoordinates||s.popupDirections||s.popupShare)&&((i=Y.a.DomUtil.create("div","mmp-popup-location",l)).style.borderTop="1px solid #f0f0e7",s.popupShare&&(n=Y.a.DomUtil.create("i","mmp-popup-share",i),J.addShareLink(t.id,n)),t.address&&s.popupAddress&&(Y.a.DomUtil.create("span","mmp-popup-location-address",i).innerHTML+=t.address),s.popupCoordinates&&(o=Y.a.DomUtil.create("span","mmp-popup-location-coordinates",i),t.address&&s.popupAddress?o.innerHTML+=" ("+t.getLatLng().lat+", "+t.getLatLng().lng+")":o.innerHTML+=t.getLatLng().lat+", "+t.getLatLng().lng),s.popupDirections&&(r=Y.a.DomUtil.create("span","mmp-popup-location-directions",i),(t.address&&s.popupAddress||s.popupCoordinates)&&(r.innerHTML+=" "),(a=Y.a.DomUtil.create("a",null,r)).href=J.getDirectionsLink(s.directionsProvider,t.getLatLng().lat,t.getLatLng().lng,t.address),a.target="_blank",a.title=mmpL10n.api.dir,a.innerHTML="("+mmpL10n.popup.directions+")")),l},this.getGeoJsonPopup=function(t){var e,i=J.settings,n=Y.a.DomUtil.create("div","mmp-popup");return i.popupMarkername&&t.options.name&&((e=Y.a.DomUtil.create("div","mmp-popup-name",n)).innerHTML=t.options.name,e.style.borderBottom="1px solid #f0f0e7"),t.options.popup&&(Y.a.DomUtil.create("div","mmp-popup-text",n).innerHTML=t.options.popup),n},this.imgLoaded=function(e){return new Promise(function(t){e.addEventListener("load",t),e.addEventListener("error",t)})},this.updatePopups=function(){var n=J.settings;Object.keys(J.markers).forEach(function(t){var e=J.markers[t],i=e.getPopup();void 0!==i&&(i.setContent(""),i.options.minWidth=n.popupMinWidth,i.options.maxWidth=n.popupMaxWidth,i.options.maxHeight=n.popupMaxHeight,i.isOpen()&&J.updatePopup(e))})},this.updatePopup=function(t,e){var i=J.settings,n=t.getPopup();!n&&t.options.popup?t.bindPopup("",J.popup):n&&!t.options.popup&&(t.closePopup(),t.unbindPopup()),J.loadPopup(t,e).then(function(t){J.checkPopupSize(t),i.popupCenterOnMap&&J.centerPopup(t)}).catch(function(){})},this.centerPopup=function(t){var e,i,n,o;t.isOpen()&&(e=t.getLatLng(),i=J.map.project(e),n=t._container.clientHeight,i.y-=n/2,o=J.map.unproject(i),J.map.panTo(o,{animate:!0}))},this.highlightMarker=function(t,e,i){var n;t.link?J.openLink(t.link,t.blank):(e&&J.containers.main.scrollIntoView(),n=function(t,e){var i;e?t.isPopupOpen()?J.updatePopup(t):t.openPopup():(i=t.getLatLng(),J.map.setView(i))},J.settings.clustering?J.markerGroup.zoomToShowLayer(t,function(){n(t,i)}):n(t,i))},this.openLink=function(t,e){var i="1"===e?"_blank":"_self";window.open(t,i)},this.editMarker=function(t){var e;void 0!==t.relatedTarget.id&&(e=J.getApiLink("editMarker",t.relatedTarget.id),J.openLink(e,"1"))},this.logError=function(t){console.error("[Maps Marker Pro] "+t)},this.xhr=function(o){return new Promise(function(t,e){var i,n=new XMLHttpRequest;n.open(o.type,o.url,!0),n.onload=function(){200===n.status?t(n.responseText):e(n.statusText)},o.data?(i=new FormData,Object.keys(o.data).forEach(function(t){i.append(t,o.data[t])}),n.send(i)):n.send(null)})},this.main=function(){var t=document.getElementById("maps-marker-pro-"+J.uid);t?((mapsMarkerPro[J.uid]=J).containers.main=t,J.lazy?"function"==typeof IntersectionObserver?new IntersectionObserver(J.lazyLoadHandler,{root:null,rootMargin:"0px",threshold:0}).observe(J.containers.main):J.lazyLoadHandlerFallback():J.load()):"function"==typeof MutationObserver?new MutationObserver(J.deferredLoadHandler).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):J.logError("Unable to find map container")},this.load=function(){var t,e,i;"function"==typeof URL&&(t=new URL(window.location.href),e=parseInt(t.searchParams.get("marker")),isNaN(e)||(J.urlHighlight=e),i=parseInt(t.searchParams.get("markerid")),isNaN(i)||(J.urlHighlight=i));for(var n=document.getElementsByClassName("mmp-highlight"),o=0;o<n.length;o++){var r=n[o].dataset;r.uid&&r.uid!==J.uid||r.map&&r.map!==J.id||n[o].addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset,i=e.marker||null,n=!e.scroll||"false"!==e.scroll,o=!e.open||"false"!==e.open;i&&void 0!==J.markers[i]&&J.highlightMarker(J.markers[i],n,o)})}for(o=0;o<mapsMarkerPro.callbacks.length;o++){var a=mapsMarkerPro.callbacks[o];"function"==typeof a&&a(J)}J.xhr({type:"POST",url:ajaxurl,data:{action:"mmp_map_settings",type:J.type,id:J.id,lang:J.language}}).then(function(t){if(!(t=JSON.parse(t)).success)return J.containers.main.innerHTML=t.response,void Y.a.DomUtil.addClass(J.containers.main,"mmp-map-error");var e=t.response;for(Object.keys(J.settings).forEach(function(t){e[t]=J.settings[t]}),(J.settings=e).callback&&"function"==typeof window[e.callback]&&window[e.callback](J);J.containers.main.hasChildNodes();)J.containers.main.removeChild(J.containers.main.firstChild);J.fire("settingsloaded",J.settings),J.init()}).catch(function(t){J.containers.main.innerHTML="Error: the map with ID "+J.id+" could not be loaded. Please contact the site owner.",Y.a.DomUtil.addClass(J.containers.main,"mmp-map-error"),J.logError("Error loading settings ("+t+")")})},this.init=function(){J.containers.rowWrap=Y.a.DomUtil.create("div","mmp-row-wrap",J.containers.main),J.containers.colWrap=Y.a.DomUtil.create("div","mmp-col-wrap",J.containers.rowWrap),J.loadPanel(),J.loadMap(),J.loadChart(),J.loadList(),J.setLayout(),window.addEventListener("resize",J.setLayoutThrottled),"function"==typeof IntersectionObserver?new IntersectionObserver(J.visibilityDetectionHandler,{root:null,rootMargin:"0px",threshold:0}).observe(J.containers.main):J.visibilityDetectionHandlerFallback(),J.loadBasemaps(),J.loadOverlays(),J.loadResources()},this.setLayout=function(){var t,e=J.settings;if(J.fullscreen)return Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-below"),Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-right"),Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-left"),Y.a.DomUtil.addClass(J.containers.main,"mmp-fullscreen"),void J.map.invalidateSize();Y.a.DomUtil.removeClass(J.containers.main,"mmp-fullscreen"),J.containers.main.style.width=e.width+e.widthUnit,J.containers.map.style.height=e.height+e.heightUnit,e.responsive&&"px"==e.widthUnit&&(t=e.width,1<e.list&&(t+=e.listWidth),"100%"!=J.containers.main.style.width&&J.containers.main.parentNode.offsetWidth<t?J.containers.main.style.width="100%":"100%"==J.containers.main.style.width&&J.containers.main.parentNode.offsetWidth>t&&(J.containers.main.style.width=e.width+"px")),void 0!==J.containers.list&&(0<e.list?1==e.list||-1===J.containers.main.style.width.indexOf("px")&&J.containers.main.offsetWidth<e.listWidth+e.listBreakpoint?(Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-right"),Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-left"),Y.a.DomUtil.addClass(J.containers.main,"mmp-list-below")):(Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-below"),J.containers.list.style.flex="0 0 "+e.listWidth+"px",2==e.list?(Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-left"),Y.a.DomUtil.addClass(J.containers.main,"mmp-list-right")):3==e.list&&(Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-right"),Y.a.DomUtil.addClass(J.containers.main,"mmp-list-left"))):(Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-below"),Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-right"),Y.a.DomUtil.removeClass(J.containers.main,"mmp-list-left"))),J.map.invalidateSize()},this.setLayoutThrottled=Y.a.Util.throttle(J.setLayout,200,this),this.loadPanel=function(){var t,e=J.settings;void 0!==J.containers.panel&&J.containers.panel.remove(),e.panel&&(J.containers.panel=Y.a.DomUtil.create("div","mmp-panel"),J.containers.panel.id="mmp-panel-"+J.uid,J.containers.panel.style.backgroundColor=e.panelColor,Y.a.DomUtil.create("div","mmp-panel-text",J.containers.panel).innerHTML=e.name,t=Y.a.DomUtil.create("div","mmp-panel-api",J.containers.panel),"map"===J.type&&(e.panelEdit&&J.addApiLink(J.getApiLink("editMap",J.id),mmpL10n.api.editMap,"map-edit.png",t),e.apiFullscreen&&e.panelFs&&J.addApiLink(J.getApiLink("fs",J.id),mmpL10n.api.fs,"fullscreen.png",t),e.panelGpx&&e.gpxUrl&&J.addApiLink(J.getApiLink("gpx",J.id),mmpL10n.gpx.metaDownload,"gpx.png",t),e.apiExport&&e.panelGeoJson&&J.addApiLink(J.getApiLink("geojson",J.id),mmpL10n.api.geoJson,"geojson.png",t),e.apiExport&&e.panelKml&&J.addApiLink(J.getApiLink("kml",J.id),mmpL10n.api.kml,"kml.png",t),e.apiExport&&e.panelGeoRss&&J.addApiLink(J.getApiLink("georss",J.id),mmpL10n.api.geoRss,"georss.png",t)),J.containers.main.insertBefore(J.containers.panel,J.containers.rowWrap),J.fire("panelloaded",J.map))},this.loadMap=function(){var t=J.settings;"function"==typeof J.map.remove&&J.map.remove(),J.map={},void 0!==J.containers.map&&J.containers.map.remove(),J.containers.map=Y.a.DomUtil.create("div","mmp-map"),J.containers.map.id="mmp-map-"+J.uid,J.map=Y.a.map(J.containers.map,{center:[t.lat,t.lng],zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:t.zoomStep,zoomDelta:t.zoomStep,maxBounds:J.strToBounds(t.maxBounds),maxBoundsViscosity:1,gestureHandling:!J.fullscreen&&t.gestureHandling,dragging:t.dragging,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,keyboard:t.keyboard,keyboardPanDelta:t.keyboardPanDelta,scrollWheelZoom:t.scrollWheelZoom,doubleClickZoom:t.doubleClickZoom,touchZoom:t.touchZoom,boxzoom:t.boxzoom,bounceAtZoomLimits:t.bounceAtZoomLimits,worldCopyJump:t.worldCopyJump,attributionControl:!1,zoomControl:!1,closePopupOnClick:t.popupAutoClose,contextmenu:!0}),J.map._activeTrack=0,J.containers.colWrap.insertBefore(J.containers.map,J.containers.chartWrap),J.fire("maploaded",J.map)},this.loadChart=function(){var t=J.settings;"function"==typeof J.gpxChart.destroy&&J.gpxChart.destroy(),J.gpxChart={},void 0!==J.containers.chartWrap&&J.containers.chartWrap.remove(),t.gpxUrl&&t.gpxChart&&void 0!==J.gpx.tracks&&J.gpx.tracks.length&&(J.chartContainer&&(J.containers.chartWrap=document.getElementById(J.chartContainer)),J.chartContainer&&J.containers.chartWrap||(J.chartContainer=null,J.containers.chartWrap=Y.a.DomUtil.create("div","mmp-gpx-chart-wrap"),J.containers.chartWrap.style.height=t.gpxChartHeight+"px"),J.containers.chartWrap.style.position="relative",J.containers.chartWrap.style.minWidth=0,J.containers.chart=Y.a.DomUtil.create("canvas","mmp-gpx-chart"),J.containers.chart.id="mmp-gpx-chart-"+J.uid,J.containers.chartWrap.appendChild(J.containers.chart),J.chartContainer||J.containers.colWrap.appendChild(J.containers.chartWrap),J.fire("chartloaded",J.gpxChart))},this.loadList=function(){var t=J.settings;void 0!==J.containers.list&&J.containers.list.remove(),"map"!==J.type&&"custom"!==J.type||J.fullscreen||!t.list||(J.containers.list=Y.a.DomUtil.create("div","mmp-list"),J.containers.list.id="mmp-list-"+J.uid,J.containers.rowWrap.appendChild(J.containers.list))},this.loadBasemaps=function(){var n=J.settings;Object.keys(J.basemaps).forEach(function(t){J.map.removeLayer(J.basemaps[t])}),J.basemaps={},J.minimaps={},Object.keys(n.basemaps).forEach(function(t){if(void 0!==n.availableBasemaps[n.basemaps[t]]){var e,i=n.availableBasemaps[n.basemaps[t]];if(1==i.type)i.options.bounds&&"string"==typeof i.options.bounds&&(e=J.strToBounds(i.options.bounds),i.options.rasterTiles?i.options.bounds=[J.map.unproject(Y.a.point(e[0][1],e[0][0]),i.options.maxNativeZoom),J.map.unproject(Y.a.point(e[1][1],e[1][0]),i.options.maxNativeZoom)]:i.options.bounds=e),i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=void 0===i.options.errorTiles&&n.errorTiles||i.options.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,i.wms?(J.basemaps[i.name]=Y.a.tileLayer.wms(i.url,i.options),J.minimaps[i.name]=Y.a.tileLayer.wms(i.url,i.options)):(J.basemaps[i.name]=Y.a.tileLayer(i.url,i.options),J.minimaps[i.name]=Y.a.tileLayer(i.url,i.options));else if(2==i.type&&n.googleApiKey)i.options.styles=n.basemapGoogleStyles,i.options.edgeBufferTiles=0,J.basemaps[i.name]=new Y.a.gridLayer.googleMutant(i.options),J.minimaps[i.name]=new Y.a.gridLayer.googleMutant(i.options);else if(3==i.type&&n.bingApiKey)i.options.bingMapsKey=n.bingApiKey,i.options.culture=n.basemapBingCulture,i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=n.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,J.basemaps[i.name]=Y.a.tileLayer.bing(i.options),J.minimaps[i.name]=Y.a.tileLayer.bing(i.options);else if(4==i.type&&(n.hereApiKey||n.hereAppId&&n.hereAppCode))i.options.apiKey=n.hereApiKey,i.options.appId=n.hereAppId,i.options.appCode=n.hereAppCode,i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=n.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,J.basemaps[i.name]=Y.a.tileLayer.here(i.options),J.minimaps[i.name]=Y.a.tileLayer.here(i.options);else if(5==i.type&&n.tomApiKey)i.options.apiKey=n.tomApiKey,i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=n.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,J.basemaps[i.name]=Y.a.tileLayer.tomTom(i.options),J.minimaps[i.name]=Y.a.tileLayer.tomTom(i.options);else{if(6!=i.type)return;i.options.minZoom=n.minZoom,i.options.maxZoom=n.maxZoom,i.options.errorTileUrl=void 0===i.options.errorTiles&&n.errorTiles||i.options.errorTiles?n.errorTileUrl:null,i.options.edgeBufferTiles=n.basemapEdgeBufferTiles,i.labels?(J.basemaps[i.name]=Y.a.layerGroup([s.c(i.key,i.options),s.c(i.labels,i.options)]),J.minimaps[i.name]=Y.a.layerGroup([s.c(i.key,i.options),s.c(i.labels,i.options)])):(J.basemaps[i.name]=s.c(i.key,i.options),J.minimaps[i.name]=s.c(i.key,i.options))}}});var t,e=Object.keys(J.basemaps);void 0!==n.availableBasemaps[n.basemapDefault]?(t=n.availableBasemaps[n.basemapDefault].name,void 0!==J.basemaps[t]?J.basemaps[t].addTo(J.map):e.length&&J.basemaps[e[0]].addTo(J.map)):e.length&&J.basemaps[e[0]].addTo(J.map),J.fire("basemapsloaded",J.basemaps)},this.loadOverlays=function(){var n=J.settings;Object.keys(J.overlays).forEach(function(t){J.map.removeLayer(J.overlays[t])}),J.overlays={},Object.keys(n.overlays).forEach(function(t){var e,i;void 0!==n.availableOverlays[n.overlays[t]]&&((e=n.availableOverlays[n.overlays[t]]).options.bounds&&"string"==typeof e.options.bounds&&(i=J.strToBounds(e.options.bounds),e.options.rasterTiles?e.options.bounds=[J.map.unproject(Y.a.point(i[0][1],i[0][0]),e.options.maxNativeZoom),J.map.unproject(Y.a.point(i[1][1],i[1][0]),e.options.maxNativeZoom)]:e.options.bounds=i),e.options.minZoom=n.minZoom,e.options.maxZoom=n.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles||e.options.errorTiles?n.errorTileUrl:null,e.options.edgeBufferTiles=n.basemapEdgeBufferTiles,e.wms?J.overlays[e.name]=Y.a.tileLayer.wms(e.url,e.options):J.overlays[e.name]=Y.a.tileLayer(e.url,e.options),-1!==n.overlaysActive.indexOf(n.overlays[t])&&J.overlays[e.name].addTo(J.map))}),J.fire("overlaysloaded",J.overlays)},this.loadResources=function(){var e=J.settings;return J.groups={},J.groups[J.id]={active:!0,markers:{}},Object.keys(e.filtersDetails).forEach(function(t){J.groups[t]={active:e.filtersDetails[t].active,markers:{}}}),Promise.all([J.getMarkers(),J.getGeoJson(),J.getGpx()]).then(function(t){J.loadControls()}).catch(function(t){J.logError("Error loading map")})},this.drawMarkers=function(i){var t=J.settings;if("function"==typeof J.markerGroup.remove&&J.markerGroup.remove(),J.markerGroup={},t.clustering?J.markerGroup=Y.a.markerClusterGroup({showCoverageOnHover:t.showCoverageOnHover,disableClusteringAtZoom:t.disableClusteringAtZoom||null,maxClusterRadius:t.maxClusterRadius,singleMarkerMode:t.singleMarkerMode,spiderfyDistanceMultiplier:t.spiderfyDistanceMultiplier,chunkedLoading:!1}):J.markerGroup=Y.a.featureGroup(),J.markerGroup.addTo(J.map),i||(i=[],Object.keys(J.groups).forEach(function(e){J.groups[e].active&&Object.keys(J.groups[e].markers).forEach(function(t){i.push(J.groups[e].markers[t])})})),t.clustering)J.markerGroup.addLayers(i);else for(var e=0;e<i.length;e++)J.markerGroup.hasLayer(i[e])||J.markerGroup.addLayer(i[e])},this.getMarkers=function(){var e=[J.id];return Object.keys(J.settings.filtersDetails).forEach(function(t){e.push(t)}),J.addLoading(J.containers.map),J.xhr({type:"POST",url:ajaxurl,data:{action:"mmp_map_markers",type:J.type,id:e,custom:J.customMarkers,all:J.settings.filtersAllMarkers,lang:J.language}}).then(function(t){var e=JSON.parse(t);return J.addMarkers(e),J.removeLoading(J.containers.map),!0}).catch(function(t){return J.logError("Error loading markers ("+t+")"),!1})},this.addMarkers=function(t){var e=J.settings;"function"==typeof J.markerGroup.remove&&J.markerGroup.remove(),J.markers={},J.markerGroup={},J.tooltip={direction:e.tooltipDirection,permanent:e.tooltipPermanent,sticky:e.tooltipSticky,opacity:e.tooltipOpacity},J.popup={minWidth:e.popupMinWidth,maxWidth:e.popupMaxWidth,maxHeight:e.popupMaxHeight,autoPan:!e.popupCenterOnMap,closeButton:e.popupCloseButton,autoClose:e.popupAutoClose};for(var i=0;i<t.length;i++){var n=t[i];if(J.markers[n.id]=Y.a.marker([n.lat,n.lng],{pmIgnore:!0,contextmenu:e.listEdit,contextmenuItems:[{text:mmpL10n.api.editMarker,icon:mmpVars.pluginUrl+"images/icons/map-edit.png",callback:J.editMarker}],icon:Y.a.icon({iconUrl:n.icon?mmpVars.iconsUrl+n.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:e.iconSize,iconAnchor:e.iconAnchor,popupAnchor:e.popupAnchor,shadowUrl:e.shadowUrl,shadowSize:e.shadowSize,shadowAnchor:e.shadowAnchor,className:"mmp-marker-icon mmp-marker-icon-"+n.id}),opacity:e.markerOpacity}),J.markers[n.id].id=n.id,J.markers[n.id].name=n.name,J.markers[n.id].address=n.address,J.markers[n.id].popup=n.popup,J.markers[n.id].link=n.link,J.markers[n.id].blank=n.blank,J.markers[n.id].icon=n.icon,J.markers[n.id].created=n.created,J.markers[n.id].updated=n.updated,J.markers[n.id].edit=n.edit,n.name&&(J.tooltips[n.id]=n.name,!e.tooltip||!e.tooltipPermanent&&Y.a.Browser.mobile||J.markers[n.id].bindTooltip(J.tooltips[n.id],J.tooltip)),n.link?(J.markers[n.id].on("click",function(){J.openLink(this.link,this.blank)}),J.markers[n.id].on("keypress",function(t){13==t.which&&J.openLink(this.link,this.blank)})):(n.popup||n.address&&e.popupAddress||e.popupCoordinates||e.popupDirections)&&J.markers[n.id].bindPopup("",J.popup),J.markers[n.id].on("popupopen",J.openPopupHandler),e.popupOpenOnHover?J.markers[n.id].on("mouseover",J.openOnHoverHandler):J.markers[n.id].off("mouseover",J.openOnHoverHandler),"map"!==J.type||e.filtersAllMarkers)J.groups[J.id].markers[n.id]=J.markers[n.id];else for(var o=0;o<n.maps.length;o++)void 0!==J.groups[n.maps[o]]&&(J.groups[n.maps[o]].markers[n.id]=J.markers[n.id])}J.drawMarkers(),"map"===J.type&&!J.fullscreen&&0<e.list?J.map.on("filterclick",J.updateListHandler):J.map.off("filterclick",J.updateListHandler),J.fire("markersloaded",J.markers)},this.getGeoJson=function(){var e=[J.id];return!J.settings.filtersAllMarkers&&J.settings.filtersGeoJson&&Object.keys(J.settings.filtersDetails).forEach(function(t){e.push(t)}),J.addLoading(J.containers.map),J.xhr({type:"POST",url:ajaxurl,data:{action:"mmp_map_geojson",type:J.type,id:e,lang:J.language}}).then(function(t){var e=JSON.parse(t);return J.addGeoJson(e),J.removeLoading(J.containers.map),!0}).catch(function(t){return J.logError("Error loading GeoJSON ("+t+")"),!1})},this.parseGeoJson=function(t){return Y.a.geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return Y.a.circle(e,t.properties.radius)},style:function(e){var i={};return Object.keys(e.properties).forEach(function(t){switch(t){case"weight":i[t]=parseInt(e.properties[t]);break;case"opacity":case"fillOpacity":i[t]=parseFloat(e.properties[t]);break;default:i[t]=e.properties[t]}}),i},onEachFeature:function(t,e){e.options.popup&&e.bindPopup("",J.popup),e.on("popupopen",J.openPopupHandler)}})},this.addGeoJson=function(e){"function"==typeof J.geoJsonGroup.remove&&J.geoJsonGroup.remove(),J.geoJson={},J.geoJsonGroup={},J.geoJson[J.id]=Y.a.geoJSON(),e&&(Object.keys(e).forEach(function(t){void 0===e[t].features?J.geoJson[t]=Y.a.geoJSON():J.geoJson[t]=J.parseGeoJson(e[t])}),J.drawGeoJson(),J.fire("geojsonloaded",J.geoJson))},this.drawGeoJson=function(){"function"==typeof J.geoJsonGroup.remove&&J.geoJsonGroup.remove(),J.geoJsonGroup=Y.a.featureGroup(),J.geoJsonGroup.addTo(J.map),Object.keys(J.groups).forEach(function(t){J.groups[t].active&&void 0!==J.geoJson[t]&&J.geoJsonGroup.addLayer(J.geoJson[t])})},this.getList=function(e,n,i,o,r){var a=J.settings;if(!("map"!==J.type&&"custom"!==J.type||J.fullscreen)&&a.list){e=e||1,n=n||"",i=i||a.listOrderBy,o=o||a.listSortOrder,r=r||0;var s,l,h=[];if("distance"==i)if(void 0===J.controls.locate)i="distance"!==a.listOrderBy?a.listOrderBy:a.listOrderById?"id":a.listOrderByName?"name":a.listOrderByAddress?"address":a.listOrderByIcon?"icon":a.listOrderByCreated?"created":a.listOrderByUpdated?"updated":"id";else if(void 0===J.location.latlng)return J.map.once("locationfound",function(){J.getList(1,n,i,o,r)}),J.map.once("locationerror",function(){i="distance"!==a.listOrderBy?a.listOrderBy:a.listOrderById?"id":a.listOrderByName?"name":a.listOrderByAddress?"address":a.listOrderByIcon?"icon":a.listOrderByCreated?"created":a.listOrderByUpdated?"updated":"id","distance"===a.listOrderBy&&(a.listOrderBy=i),J.getList(1,n,i,o,r)}),void J.controls.locate.start();if(Object.keys(J.groups).forEach(function(i){J.groups[i].active&&Object.keys(J.groups[i].markers).forEach(function(t){var e=J.groups[i].markers[t];-1===h.indexOf(e)&&(!n||J.hasString(e.name,n)||J.hasString(e.address,n)||J.hasString(e.popup,n))&&(void 0!==J.location.latlng?(void 0===e.distance&&(s=J.location.latlng,l=e.getLatLng(),e.distance=Y.a.latLng(s).distanceTo(l)),void 0!==e.distance&&0<r?"imperial"==a.listDistanceUnit||"imperial-metric"==a.listDistanceUnit?e.distance/1609.344<=r&&h.push(e):e.distance/1e3<=r&&h.push(e):h.push(e)):h.push(e))})}),"id"==i?h=J.sortArray(h,"id",o,!0):"name"==i?h=J.sortArray(h,"name",o,!1):"address"==i?h=J.sortArray(h,"address",o,!1):"distance"==i?h=J.sortArray(h,"distance",o,!0):"icon"==i?h=J.sortArray(h,"icon",o,!1):"created"===i?h=J.sortArray(h,"created",o,!0):"updated"===i&&(h=J.sortArray(h,"updated",o,!0)),J.containers.list.innerHTML="",a.listSearch){var t,u=Y.a.DomUtil.create("div","mmp-list-header",J.containers.list),c=Y.a.DomUtil.create("div","mmp-list-header-left",u),d=Y.a.DomUtil.create("div","mmp-list-search-wrap",c),p=Y.a.DomUtil.create("input","mmp-list-search",d);if(p.type="text",p.value=n,p.placeholder=mmpL10n.list.search,n&&((t=Y.a.DomUtil.create("div","mmp-list-search-clear",d)).src=mmpVars.pluginUrl+"images/leaflet/search.png",t.addEventListener("click",function(){J.getList(1,null,i,o,r)})),void 0!==J.location.latlng){for(var f=Y.a.DomUtil.create("select","mmp-list-radius",c),m=[0,5,10,15,20,25,50,100,200,500],g=0;g<m.length;g++){var v=Y.a.DomUtil.create("option",null,f);v.value=m[g],m[g]==r&&(v.defaultSelected=!0),m[g]<=0?v.innerHTML=mmpL10n.list.everywhere:"imperial"==a.listDistanceUnit?v.innerHTML=m[g]+" mi":"metric-imperial"==a.listDistanceUnit?v.innerHTML=m[g]+" km ("+(m[g]/1.609344).toFixed(a.listDistancePrecision)+" mi)":"imperial-metric"==a.listDistanceUnit?v.innerHTML=m[g]+" mi ("+(1.609344*m[g]).toFixed(a.listDistancePrecision)+" km)":v.innerHTML=m[g]+" km"}f.addEventListener("change",function(){J.getList(1,n,y.value,o,f.value)})}var _=Y.a.DomUtil.create("div","mmp-list-header-right",u),y=Y.a.DomUtil.create("select","mmp-list-sort",_),x=Y.a.DomUtil.create("a","mmp-list-order mmp-"+o,_);x.href="#";var b=[];for(a.listOrderById&&b.push("id"),a.listOrderByName&&b.push("name"),a.listOrderByAddress&&b.push("address"),a.listOrderByDistance&&void 0!==J.controls.locate&&b.push("distance"),a.listOrderByIcon&&b.push("icon"),a.listOrderByCreated&&b.push("created"),a.listOrderByUpdated&&b.push("updated"),g=0;g<b.length;g++){var w=Y.a.DomUtil.create("option",null,y);w.value=b[g],b[g]==i&&(w.defaultSelected=!0),w.innerHTML=mmpL10n.list[b[g]]}p.addEventListener("keyup",function(t){13==t.which&&J.getList(1,p.value,i,o,r)}),y.addEventListener("change",function(){J.getList(1,n,y.value,o,r)}),x.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),J.getList(1,n,i,"asc"===o?"desc":"asc",r)})}J.containers.listBody=Y.a.DomUtil.create("div","mmp-list-body",J.containers.list);var L=h.length>a.listLimit?a.listLimit:h.length,k=Math.ceil(h.length/a.listLimit),M=(e=k<e?k:e)==k?h.length:L*e;for(g=(e-1)*L;g<M;g++){var C,T,P,S=Y.a.DomUtil.create("div","mmp-list-row",J.containers.listBody);a.listIcon&&(C=Y.a.DomUtil.create("div","mmp-list-row-icon",S),T=Y.a.DomUtil.create("div","mmp-list-icon",C),P=Y.a.DomUtil.create("img",null,T),h[g].icon?P.src=mmpVars.iconsUrl+h[g].icon:P.src=mmpVars.pluginUrl+"images/leaflet/marker.png");var A,I=Y.a.DomUtil.create("div","mmp-list-row-info",S),D=Y.a.DomUtil.create("div","mmp-list-row-header",I);a.listName&&((A=Y.a.DomUtil.create("div","mmp-list-name",D)).innerHTML=h[g].name,"none"!==a.listAction&&(A.tabIndex=0,function(e){var i="popup"===a.listAction;Y.a.DomEvent.on(A,"click",function(){J.highlightMarker(h[e],J.containers.main.getBoundingClientRect().top<0,i)}),Y.a.DomEvent.on(A,"keypress",function(t){13===t.which&&J.highlightMarker(h[e],J.containers.main.getBoundingClientRect().top<0,i)})}(g)));var O,z,E,B=Y.a.DomUtil.create("div","mmp-list-api",D);h[g].edit&&J.addApiLink(J.getApiLink("editMarker",h[g].id),mmpL10n.api.editMarker,"map-edit.png",B),a.listDir&&(z=J.getDirectionsLink(a.directionsProvider,h[g].getLatLng().lat,h[g].getLatLng().lng,h[g].address),"googlemaps"==a.directionsProvider?O=a.directionsGoogleWalking?"walk.png":"car.png":"yours"==a.directionsProvider?O="bicycle"==a.directionsYoursType?"bicycle.png":"foot"==a.directionsYoursType?"walk.png":"car.png":"ors"==a.directionsProvider?O="Bicycle"==a.directionsOrsType?"bicycle.png":"Pedestrian"==a.directionsOrsType?"walk.png":"car.png":"bingmaps"==a.directionsProvider&&(O="car.png"),J.addApiLink(z,mmpL10n.api.dir,O,B)),a.apiFullscreen&&a.listFs&&J.addApiLink(J.getApiLink("fs",J.id,{marker:h[g].id}),mmpL10n.api.fs,"fullscreen.png",B),a.listShare&&(E=Y.a.DomUtil.create("i","mmp-list-share",B),J.addShareLink(h[g].id,E));var F=Y.a.DomUtil.create("div","mmp-list-row-body",I);a.listPopup&&(Y.a.DomUtil.create("div","mmp-list-popup",F).innerHTML=h[g].popup);var R,N=Y.a.DomUtil.create("div","mmp-list-row-footer",I);a.listAddress&&h[g].address&&(Y.a.DomUtil.create("div","mmp-list-address",N).innerHTML=h[g].address),a.listDistance&&void 0!==h[g].distance&&(R=Y.a.DomUtil.create("div","mmp-list-distance",B),"imperial"==a.listDistanceUnit?R.innerHTML=(h[g].distance/1609.344).toFixed(a.listDistancePrecision)+" mi":"metric-imperial"==a.listDistanceUnit?R.innerHTML=(h[g].distance/1e3).toFixed(a.listDistancePrecision)+" km ("+(h[g].distance/1609.344).toFixed(a.listDistancePrecision)+" mi)":"imperial-metric"==a.listDistanceUnit?R.innerHTML=(h[g].distance/1609.344).toFixed(a.listDistancePrecision)+" mi ("+(h[g].distance/1e3).toFixed(a.listDistancePrecision)+" km)":R.innerHTML=(h[g].distance/1e3).toFixed(a.listDistancePrecision)+" km")}var U,Z,W,j,H,G,V,q=Y.a.DomUtil.create("div","mmp-list-footer",J.containers.list),K=Y.a.DomUtil.create("div","mmp-list-count",q);0===h.length?K.innerHTML=mmpL10n.list.noResults:1===h.length?K.innerHTML=mmpL10n.list.oneResult:K.innerHTML=h.length+" "+mmpL10n.list.results,h.length>a.listLimit&&(U=Y.a.DomUtil.create("div","mmp-list-nav",q),(Z=Y.a.DomUtil.create("button",null,U)).innerHTML="&laquo;",Z.addEventListener("click",function(){J.getList(1,n,i,o,r)}),(W=Y.a.DomUtil.create("button",null,U)).innerHTML="&lsaquo;",W.addEventListener("click",function(){var t=1===e?1:e-1;J.getList(t,n,i,o,r)}),(j=Y.a.DomUtil.create("button",null,U)).innerHTML="&rsaquo;",j.addEventListener("click",function(){var t=e===k?k:e+1;J.getList(t,n,i,o,r)}),(H=Y.a.DomUtil.create("button",null,U)).innerHTML="&raquo;",H.addEventListener("click",function(){J.getList(k,n,i,o,r)}),G=Y.a.DomUtil.create("div","mmp-list-page",q),(V=Y.a.DomUtil.create("input",null,G)).type="text",V.value=e,G.appendChild(document.createTextNode(" / "+k)),G.addEventListener("keyup",function(t){13==t.which&&J.getList(Math.abs(parseInt(V.value)),n,i,o,r)})),J.drawMarkers(h)}},this.loadControls=function(){var e,t=J.settings;void 0!==J.controls.locate&&J.controls.locate.stop(),Object.keys(J.controls).forEach(function(t){J.controls[t].remove()}),J.controls={},J.controls.attribution=Y.a.control.attribution({position:t.attributionPosition,prefix:t.attributionPrefix}),J.controls.attribution._esriAttributionAdded=!0,"hidden"!=t.zoomControlPosition&&(J.controls.zoom=Y.a.control.zoom({position:t.zoomControlPosition,zoomInTitle:mmpL10n.control.zoomIn,zoomOutTitle:mmpL10n.control.zoomOut})),"hidden"!=t.fullscreenPosition&&(J.controls.fullscreen=Y.a.control.fullscreen({position:t.fullscreenPosition,title:{false:mmpL10n.control.fullscreenFalse,true:mmpL10n.control.fullscreenTrue}})),"hidden"!=t.resetPosition&&(J.controls.reset=Y.a.control.resetView({position:t.resetPosition,onDemand:t.resetOnDemand,title:mmpL10n.control.reset})),"hidden"!=t.locatePosition&&(J.controls.locate=Y.a.control.locate({locateOptions:{enableHighAccuracy:!0},position:t.locatePosition,drawCircle:t.locateDrawCircle,drawMarker:t.locateDrawMarker,setView:t.locateSetView,keepCurrentZoomLevel:t.locateKeepCurrentZoomLevel,clickBehavior:{inView:t.locateClickBehaviorInView,outOfView:t.locateClickBehaviorOutOfView},icon:t.locateIcon,iconLoading:"icon-spinner",metric:t.locateMetric,showPopup:t.locateShowPopup,strings:{title:mmpL10n.control.locateTitle,metersUnit:mmpL10n.control.locateMetersUnit,feetUnit:mmpL10n.control.locateFeetUnit,popup:mmpL10n.control.locatePopup,outsideMapBoundsMsg:mmpL10n.control.locateOutsideMapBoundsMsg},onLocationError:function(t){var e=mmpL10n.control.locateErrorUnknown;1===t.code?e=mmpL10n.control.locateErrorDenied:2===t.code?e=mmpL10n.control.locateErrorUnavailable:3===t.code&&(e=mmpL10n.control.locateErrorTimeout),J.showMapModal(mmpL10n.control.locateError,e)},onLocationOutsideMapBounds:function(t){t.stop(),J.showMapModal(mmpL10n.control.locateError,t.options.strings.outsideMapBoundsMsg)}})),"hidden"!=t.scalePosition&&(J.controls.scale=Y.a.control.scale({position:t.scalePosition,maxWidth:t.scaleMaxWidth,metric:t.scaleMetric,imperial:t.scaleImperial})),"hidden"!=t.layersPosition&&(Object.keys(J.basemaps).length||Object.keys(J.overlays).length)&&(J.controls.layers=Y.a.control.layers(null,null,{position:t.layersPosition,collapsed:"collapsed"==t.layersCollapsed||"collapsed-mobile"==t.layersCollapsed&&Y.a.Browser.mobile}),Object.keys(J.basemaps).forEach(function(t){J.controls.layers.addBaseLayer(J.basemaps[t],t)}),Object.keys(J.overlays).forEach(function(t){J.controls.layers.addOverlay(J.overlays[t],t)})),"hidden"!=t.filtersPosition&&"map"===J.type&&Object.keys(t.filtersDetails).length&&!t.filtersAllMarkers&&(J.controls.filters=Y.a.control.filters({mmp:J,position:t.filtersPosition,collapsed:"collapsed"==t.filtersCollapsed||"collapsed-mobile"==t.filtersCollapsed&&Y.a.Browser.mobile,buttons:t.filtersButtons,allText:mmpL10n.control.filtersAll,noneText:mmpL10n.control.filtersNone})),"hidden"!=t.gpxControlPosition&&void 0!==J.gpx.tracks&&1<J.gpx.tracks.length&&(J.controls.gpx=Y.a.control.gpx({mmp:J,collapsed:"collapsed"==t.gpxControlCollapsed||"collapsed-mobile"==t.gpxControlCollapsed&&Y.a.Browser.mobile,position:t.gpxControlPosition})),"hidden"!=t.minimapPosition&&Object.keys(J.minimaps).length&&(e=Y.a.tileLayer(""),Object.keys(J.basemaps).forEach(function(t){J.map.hasLayer(J.basemaps[t])&&(e=J.minimaps[t])}),J.controls.minimap=new Y.a.Control.MiniMap(e,{position:t.minimapPosition,width:t.minimapWidth,height:t.minimapHeight,collapsedWidth:t.minimapCollapsedWidth,collapsedHeight:t.minimapCollapsedHeight,zoomLevelOffset:t.minimapZoomLevelOffset,zoomLevelFixed:t.minimapZoomLevelFixed||null,toggleDisplay:!0,autoToggleDisplay:!1,minimized:"collapsed"==t.minimapMinimized||"collapsed-mobile"==t.minimapMinimized&&Y.a.Browser.mobile,strings:{hideText:mmpL10n.control.minimapHideText,showText:mmpL10n.control.minimapShowText},mapOptions:{attributionControl:!1}})),Object.keys(J.controls).forEach(function(t){J.controls[t].addTo(J.map)}),Object.keys(J.basemaps).forEach(function(t){var e=J.basemaps[t];J.map.hasLayer(e)&&(e instanceof Y.a.TileLayer.HERE?e._findCopyrightBBox():e instanceof Y.a.TileLayer.TomTom?e._addAttribution():e instanceof s.a&&s.b._updateMapAttribution({target:J.map}))}),t.attributionCondensed&&(Y.a.DomUtil.removeClass(J.controls.attribution.getContainer(),"leaflet-control-attribution"),Y.a.DomUtil.addClass(J.controls.attribution.getContainer(),"mmp-control-attribution")),void 0!==J.controls.minimap?J.map.on("baselayerchange",J.updateMinimapHandler):J.map.off("baselayerchange",J.updateMinimapHandler),void 0!==J.controls.locate?(J.map.on("locationfound",J.updateLocationHandler),J.map.once("locationfound",J.updateListHandler),!J.settings.locateAutostart||J.urlHighlight||J.highlight||J.controls.locate.start()):(J.map.off("locationfound",J.updateLocationHandler),J.map.off("locationfound",J.updateListHandler)),J.fire("controlsloaded",J.controls),setTimeout(function(){J.urlHighlight&&void 0!==J.markers[J.urlHighlight]?J.highlightMarker(J.markers[J.urlHighlight],!0,!0):J.highlight&&void 0!==J.markers[J.highlight]&&J.highlightMarker(J.markers[J.highlight],!1,!0)},100),J.getList()},this.getGpx=function(){var t=J.settings;return t.gpxUrl?(void 0!==J.containers.chartWrap&&J.addLoading(J.containers.chartWrap),J.xhr({type:"GET",url:t.gpxUrl}).then(function(t){if(J.gpx=new o,J.gpx.parse(t),!J.gpx.tracks.length){for(var e=0;e<J.gpx.routes.length;e++){var i=J.gpx.routes[e];i.segments=[{points:i.points,extensions:i.extensions,time:i.time,distance:i.distance,elevation:i.elevation}],J.gpx.tracks.push(i)}J.gpx.routes=[]}return J.addGpx(),void 0!==J.containers.chartWrap&&J.removeLoading(J.containers.chartWrap),!0}).catch(function(t){return J.logError("Error loading GPX ("+t+")"),!1})):Promise.resolve()},this.addGpx=function(){var t=J.settings;if(void 0!==J.gpxGroup&&"function"==typeof J.gpxGroup.remove&&J.gpxGroup.remove(),J.gpxGroup=Y.a.featureGroup(),J.gpxTracks={},void 0!==J.gpx.tracks&&J.gpx.tracks.length){for(var e=[],i=0;i<J.gpx.tracks.length;i++)for(var n=J.gpx.tracks[i],o=0;o<n.segments.length;o++){var r=n.segments[o];e[i]=Y.a.polyline([],{pmIgnore:!0,interactive:!0,smoothFactor:t.gpxTrackSmoothFactor,color:n.extensions.color||r.extensions.color||t.gpxTrackColor,weight:parseInt(n.extensions.weight||r.extensions.weight||t.gpxTrackWeight),opacity:parseFloat(n.extensions.opacity||r.extensions.opacity||t.gpxTrackOpacity)});for(var a=0;a<r.points.length;a++){var s=r.points[a].lat,l=r.points[a].lon;e[i].addLatLng([s,l])}e[i].addTo(J.gpxGroup)}J.gpxTracks=e}J.setTrackIcons(),J.setIntervalMarkers(),J.setTrackMeta(),J.setWaypoints(),J.gpxGroup.addTo(J.map),J.fire("gpxloaded",J.gpxTracks),J.loadChart(),J.addElevationChart()},this.getGpxName=function(t){return!(void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].name)&&J.gpx.tracks[t].name},this.getGpxStartTime=function(t){return!(void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].time.start)&&new Date(J.gpx.tracks[t].time.start).toUTCString()},this.getGpxEndTime=function(t){return!(void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].time.end)&&new Date(J.gpx.tracks[t].time.end).toUTCString()},this.getGpxTimeTotal=function(t,e){return!(void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].time.total)&&J.msToPrime(J.gpx.tracks[t].time.total,e)},this.getGpxTimeMoving=function(t,e){return!(void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].time.moving)&&J.msToPrime(J.gpx.tracks[t].time.moving,e)},this.getGpxDistance=function(t,e){if(e=e||"metric",void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return(J.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi";case"metric-imperial":return(J.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km ("+(J.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi)";case"imperial-metric":return(J.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi ("+(J.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km)";default:return(J.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km"}},this.getGpxPace=function(t,e,i){if(e=e||"metric",void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].time.moving||!J.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return J.msToPrime(J.gpx.tracks[t].time.moving/(J.gpx.tracks[t].distance.total/1609.344),i)+"/mi";case"metric-imperial":return J.msToPrime(J.gpx.tracks[t].time.moving/(J.gpx.tracks[t].distance.total/1e3),i)+"/km ("+J.msToPrime(J.gpx.tracks[t].time.moving/(J.gpx.tracks[t].distance.total/1609.344),i)+"/mi)";case"imperial-metric":return J.msToPrime(J.gpx.tracks[t].time.moving/(J.gpx.tracks[t].distance.total/1609.344),i)+"/mi ("+J.msToPrime(J.gpx.tracks[t].time.moving/(J.gpx.tracks[t].distance.total/1e3),i)+"/km)";default:return J.msToPrime(J.gpx.tracks[t].time.moving/(J.gpx.tracks[t].distance.total/1e3),i)+"/km"}},this.getGpxHeartRate=function(t){return!(void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].heartRate.avg)&&J.gpx.tracks[t].heartRate.avg.toFixed(0)+" bpm"},this.getGpxElevation=function(t,e){if(e=e||"metric",void 0===J.gpx.tracks[t]||!J.gpx.tracks[t].elevation.gain&&!J.gpx.tracks[t].elevation.loss)return!1;var i=J.gpx.tracks[t].elevation.gain-J.gpx.tracks[t].elevation.loss;switch(e){case"imperial":return"+"+(J.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(J.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft";case"metric-imperial":return"+"+J.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+J.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m (+"+(J.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(J.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft)";case"imperial-metric":return"+"+(J.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(J.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft (+"+J.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+J.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m)";default:return"+"+J.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+J.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m"}},this.setTrackStyle=function(){var e=J.settings;Object.keys(J.gpxTracks).forEach(function(t){J.gpxTracks[t].setStyle({color:e.gpxTrackColor,weight:e.gpxTrackWeight,opacity:e.gpxTrackOpacity})})},this.setTrackIcons=function(){var i=J.settings;void 0!==J.gpx.tracks&&Object.keys(J.gpx.tracks).forEach(function(t){var e;void 0!==J.gpx.tracks[t].startIcon&&J.gpx.tracks[t].startIcon&&J.gpx.tracks[t].startIcon.remove(),void 0!==J.gpx.tracks[t].endIcon&&J.gpx.tracks[t].endIcon&&J.gpx.tracks[t].endIcon.remove(),i.gpxShowStartIcon&&(J.gpx.tracks[t].startIcon=Y.a.marker([J.gpx.tracks[t].points[0].lat,J.gpx.tracks[t].points[0].lon],{pmIgnore:!0,interactive:!1,icon:Y.a.icon({iconUrl:i.gpxStartIcon?mmpVars.iconsUrl+i.gpxStartIcon:mmpVars.pluginUrl+"images/leaflet/gpx-start.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-start"})}).addTo(J.gpxGroup)),i.gpxShowEndIcon&&(e=J.gpx.tracks[t].points.length-1,J.gpx.tracks[t].endIcon=Y.a.marker([J.gpx.tracks[t].points[e].lat,J.gpx.tracks[t].points[e].lon],{pmIgnore:!0,interactive:!1,icon:Y.a.icon({iconUrl:i.gpxEndIcon?mmpVars.iconsUrl+i.gpxEndIcon:mmpVars.pluginUrl+"images/leaflet/gpx-end.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-end"})}).addTo(J.gpxGroup))})},this.setIntervalMarkers=function(){var t=J.settings;if(void 0!==J.gpx.tracks&&(Object.keys(J.gpx.tracks).forEach(function(t){if(void 0!==J.gpx.tracks[t].intervalMarkers&&J.gpx.tracks[t].intervalMarkers.length)for(var e=J.gpx.tracks[t].intervalMarkers,i=0;i<e.length;i++)e[i].remove()}),t.gpxIntervalMarkers))for(var e="imperial"===t.gpxMetaUnits||"imperial-metric"===t.gpxMetaUnits?1609.344:1e3,i=J.gpx.tracks,n=0;n<i.length;n++){i[n].intervalMarkers=[];for(var o=1,r=i[n].points,a=0;a<r.length;a++){var s,l=r[a];l.dist>=o*e&&(s=Y.a.marker([l.lat,l.lon],{pmIgnore:!0,interactive:!1,icon:Y.a.divIcon({className:"mmp-interval-marker",html:"<span>"+o+"</span>"})}).addTo(J.map),i[n].intervalMarkers.push(s),o++)}}},this.setTrackMeta=function(){var o=J.settings;Object.keys(J.gpxTracks).forEach(function(t){if(!o.gpxMeta)return J.gpxTracks[t].closePopup(),void J.gpxTracks[t].unbindPopup();for(var e=Y.a.DomUtil.create("div","mmp-gpx-meta"),i=[{show:o.gpxMetaName,title:mmpL10n.gpx.metaName,value:J.getGpxName(t)},{show:o.gpxMetaStart,title:mmpL10n.gpx.metaStart,value:J.getGpxStartTime(t)},{show:o.gpxMetaEnd,title:mmpL10n.gpx.metaEnd,value:J.getGpxEndTime(t)},{show:o.gpxMetaTotal,title:mmpL10n.gpx.metaTotal,value:J.getGpxTimeTotal(t)},{show:o.gpxMetaMoving,title:mmpL10n.gpx.metaMoving,value:J.getGpxTimeMoving(t)},{show:o.gpxMetaDistance,title:mmpL10n.gpx.metaDistance,value:J.getGpxDistance(t,o.gpxMetaUnits)},{show:o.gpxMetaPace,title:mmpL10n.gpx.metaPace,value:J.getGpxPace(t,o.gpxMetaUnits)},{show:o.gpxMetaHeartRate,title:mmpL10n.gpx.metaHeartRate,value:J.getGpxHeartRate(t)},{show:o.gpxMetaElevation,title:mmpL10n.gpx.metaElevation,value:J.getGpxElevation(t,o.gpxMetaUnits)}],n=0;n<i.length;n++)!i[n].show||o.gpxMetaHideMissing&&!1===i[n].value||(!1===i[n].value&&(i[n].value="N/A"),e.innerHTML+="<strong>"+i[n].title+":</strong> "+i[n].value+"<br />");o.gpxMetaDownload&&(e.innerHTML+='<a href="'+mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+J.settings.gpxUrl+'"><img src="'+mmpVars.pluginUrl+'images/icons/download-gpx.png" /> '+mmpL10n.gpx.metaDownload+"</a><br />"),o.gpxMetaDesc&&J.gpx.tracks[t].desc&&(e.innerHTML&&(e.innerHTML+="<br />"),e.innerHTML+=J.gpx.tracks[t].desc),void 0!==J.gpxTracks[t].getPopup()&&J.gpxTracks[t].getPopup()?J.gpxTracks[t].setPopupContent(e):J.gpxTracks[t].bindPopup(e)})},this.setWaypoints=function(){for(var t=J.settings,e=0;e<J.gpxWaypoints.length;e++)J.gpxWaypoints[e].remove();if(J.gpxWaypoints=[],t.gpxWaypoints&&void 0!==J.gpx.waypoints)for(e=0;e<J.gpx.waypoints.length;e++){var i,n=Y.a.circleMarker([J.gpx.waypoints[e].lat,J.gpx.waypoints[e].lon],{interactive:!0,radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity}).addTo(J.gpxGroup);J.gpx.waypoints[e].name&&n.bindTooltip(J.gpx.waypoints[e].name),J.gpx.waypoints[e].desc&&((i=Y.a.DomUtil.create("div","mmp-gpx-waypoint")).innerHTML=J.gpx.waypoints[e].desc,n.bindPopup(i)),J.gpxWaypoints.push(n)}},this.setWaypointStyle=function(){for(var t=J.settings,e=0;e<J.gpxWaypoints.length;e++)J.gpxWaypoints[e].setStyle({radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity})},this.generateChartData=function(){var e,i="imperial"===J.settings.gpxChartUnits||"imperial-metric"===J.settings.gpxChartUnits?(e=1609.433,.3048):(e=1e3,1),n=isNaN(parseFloat(J.settings.gpxChartYOffset))?0:parseFloat(J.settings.gpxChartYOffset);return J.gpx.tracks[J.map._activeTrack].points.map(function(t){return{x:t.dist/e,y:t.ele/i+n}})},this.updateElevationChart=function(t){var e,i=J.settings;J.gpxChart instanceof h.a&&(t&&(e=J.generateChartData(),J.gpxChart.data.datasets[0].data=e,J.gpxChart.options.scales.xAxes[0].ticks.max=e[e.length-1].x),J.gpxChart.data.datasets[0].borderWidth=i.gpxChartLineWidth,J.gpxChart.data.datasets[0].borderColor=i.gpxChartLineColor,J.gpxChart.data.datasets[0].fill=i.gpxChartFill,J.gpxChart.data.datasets[0].backgroundColor=i.gpxChartFillColor,J.gpxChart.options.scales.yAxes[0].gridLines.color=i.gpxChartGridLinesColor,J.gpxChart.options.scales.yAxes[0].ticks.min=isNaN(parseInt(i.gpxChartYMin))?void 0:parseInt(i.gpxChartYMin),J.gpxChart.options.scales.yAxes[0].ticks.max=isNaN(parseInt(i.gpxChartYMax))?void 0:parseInt(i.gpxChartYMax),J.gpxChart.options.scales.yAxes[0].ticks.reverse=i.gpxChartReverseY,J.gpxChart.options.scales.yAxes[0].ticks.minor.fontColor=i.gpxChartTicksFontColor,J.gpxChart.options.scales.xAxes[0].gridLines.color=i.gpxChartGridLinesColor,J.gpxChart.options.scales.xAxes[0].ticks.reverse=i.gpxChartReverseX,J.gpxChart.options.scales.xAxes[0].ticks.minor.fontColor=i.gpxChartTicksFontColor,J.gpxChart.options.chartArea.backgroundColor=i.gpxChartBgColor,J.gpxChart.options.tooltips.backgroundColor=i.gpxChartTooltipBgColor,J.gpxChart.options.tooltips.bodyFontColor=i.gpxChartTooltipFontColor,J.gpxChart.options.indicator.lineWidth=i.gpxChartIndicatorLineWidth,J.gpxChart.options.indicator.lineColor=i.gpxChartIndicatorLineColor,J.gpxChart.update())},this.updateElevationChartThrottled=Y.a.Util.throttle(J.updateElevationChart,100,this),this.addElevationChart=function(){var t,e,l=J.settings;J.settings.gpxChart&&void 0!==J.gpx.tracks&&J.gpx.tracks.length&&(void 0===J.containers.chartWrap&&J.loadChart(),t=J.generateChartData(),e=document.getElementById("mmp-gpx-chart-"+J.uid).getContext("2d"),h.a.platform.disableCSSInjection=!0,h.a.defaults.scatterIndicator=h.a.defaults.scatter,h.a.controllers.scatterIndicator=h.a.controllers.scatter.extend({draw:function(t){var e,i,n,o,r,a,s;h.a.controllers.scatter.prototype.draw.call(this,t),this.chart.tooltip._active&&this.chart.tooltip._active.length&&void 0!==this.chart.scales["y-axis-1"]?(e=this.chart.ctx,i=J.map._activeTrack,o=(n=this.chart.tooltip._active[0])._index,r=n.tooltipPosition().x,a=this.chart.scales["y-axis-1"].top,s=this.chart.scales["y-axis-1"].bottom,this.chart.config.options.indicator&&this.chart.config.options.indicator.lineWidth&&this.chart.config.options.indicator.lineColor&&(e.save(),e.beginPath(),e.moveTo(r,a),e.lineTo(r,s),e.lineWidth=this.chart.config.options.indicator.lineWidth,e.strokeStyle=this.chart.config.options.indicator.lineColor,e.stroke(),e.restore()),l.gpxChartLocator&&void 0!==J.chartLayers.locator&&(J.chartLayers.locator.setLatLng([J.gpx.tracks[i].points[o].lat,J.gpx.tracks[i].points[o].lon]),J.map.hasLayer(J.chartLayers.locator)||J.chartLayers.locator.addTo(J.map))):void 0!==J.chartLayers.locator&&J.map.hasLayer(J.chartLayers.locator)&&J.chartLayers.locator.remove()}}),J.gpxChart=new h.a(e,{plugins:[{beforeDraw:function(t){var e,i;t.config.options.chartArea&&t.config.options.chartArea.backgroundColor&&(e=t.chart.ctx,i=t.chartArea,e.save(),e.fillStyle=t.config.options.chartArea.backgroundColor,e.fillRect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.restore())}},{afterDraw:function(t){var e,i,n;t.data.datasets[0].data.filter(function(t){return!isNaN(t.y)}).length||(e=t.chart.ctx,i=t.chart.width,n=t.chart.height,t.clear(),e.save(),e.fillStyle="rgba(0, 0, 0, 1)",e.textAlign="center",e.textBaseline="middle",e.fillText(mmpL10n.gpx.noElevationData,i/2,n/2),e.restore())}}],type:"scatterIndicator",data:{datasets:[{data:t,pointRadius:0,showLine:!0,spanGaps:!0,borderCapStyle:"round",borderWidth:l.gpxChartLineWidth,borderColor:l.gpxChartLineColor,fill:l.gpxChartFill,backgroundColor:l.gpxChartFillColor}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},layout:{padding:{top:10}},scales:{yAxes:[{gridLines:{color:l.gpxChartGridLinesColor},ticks:{callback:function(t){return J.formatGpxValue(t,"ele",l.gpxChartUnits)},min:isNaN(parseInt(l.gpxChartYMin))?void 0:parseInt(l.gpxChartYMin),max:isNaN(parseInt(l.gpxChartYMax))?void 0:parseInt(l.gpxChartYMax),reverse:l.gpxChartReverseY,fontColor:l.gpxChartTicksFontColor}}],xAxes:[{afterBuildTicks:function(t){var e=t.ticks.length;2<e&&(t.ticks[e-2]=null)},gridLines:{color:l.gpxChartGridLinesColor},ticks:{callback:function(t){if(null!==t)return J.formatGpxValue(t,"dist",l.gpxChartUnits)},min:0,max:t[t.length-1].x,reverse:l.gpxChartReverseX,autoSkip:!1,fontColor:l.gpxChartTicksFontColor}}]},legend:{display:!1},chartArea:{backgroundColor:l.gpxChartBgColor},tooltips:{callbacks:{label:function(t,e){var i=t.datasetIndex,n=t.index,o=e.datasets[i].data[n].y,r=e.datasets[i].data[n].x;return[mmpL10n.gpx.metaElevation+": "+J.formatGpxValue(o,"ele",l.gpxChartUnits),mmpL10n.gpx.metaDistance+": "+J.formatGpxValue(r,"dist",l.gpxChartUnits)]}},mode:"index",intersect:!1,displayColors:!1,backgroundColor:l.gpxChartTooltipBgColor,bodyFontColor:l.gpxChartTooltipFontColor},indicator:{lineWidth:l.gpxChartIndicatorLineWidth,lineColor:l.gpxChartIndicatorLineColor},hover:{animationDuration:250}}}),void 0!==J.chartLayers&&Object.keys(J.chartLayers).forEach(function(t){J.chartLayers[t].remove()}),J.chartLayers={},J.chartLayers.locator=Y.a.circleMarker([0,0]),J.setChartStyle())},this.setChartStyle=function(){var t=J.settings;t.gpxChart&&void 0!==J.chartLayers&&(Object.keys(J.chartLayers).forEach(function(t){J.chartLayers[t].remove()}),J.chartLayers.locator.setStyle({interactive:!1,radius:t.gpxChartLocatorRadius,stroke:t.gpxChartLocatorStroke,color:t.gpxChartLocatorColor,weight:t.gpxChartLocatorWeight,fillColor:t.gpxChartLocatorFillColor,fillOpacity:t.gpxChartLocatorFillOpacity}))},this.fitVisibleMarkers=function(){var t=J.markerGroup.getBounds();t.isValid()&&J.map.fitBounds(t)},this.fitGeoJson=function(t){var e,i=J.geoJson.getLayer(t);void 0===i||(e=i.getBounds()).isValid()&&J.map.fitBounds(e)},this.deferredLoadHandler=function(t,i){t.forEach(function(t){if("childList"===t.type&&t.addedNodes.length)for(var e=0;e<t.addedNodes.length;e++){if(t.addedNodes[e].id==="maps-marker-pro-"+J.uid)return i.disconnect(),void J.main()}})},this.lazyLoadHandler=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.target===J.containers.main&&n.isIntersecting&&(e.disconnect(),J.load())}},this.lazyLoadHandlerFallback=function(){if(!J.isVisible(J.containers.main)||!J.isInViewport(J.containers.main))return setTimeout(J.lazyLoadHandlerFallback,250);J.load()},this.visibilityDetectionHandler=function(t,e){for(var i=0;i<t.length;i++){t[i].target===J.containers.main&&J.checkInvalidateSize()}},this.visibilityDetectionHandlerFallback=function(){J.checkInvalidateSize(),setTimeout(J.visibilityDetectionHandlerFallback,250)},this.openPopupHandler=function(t){var e=J.settings,i=t.target.getPopup();void 0!==i&&J.loadPopup(t.target).then(function(){J.checkPopupSize(i),e.popupCenterOnMap&&J.centerPopup(i),J.fire("popupopen",i)}).catch(function(){})},this.openOnHoverHandler=function(t){t.target.openPopup()},this.updateListHandler=function(){J.getList()},this.updateMinimapHandler=function(t){J.controls.minimap.changeLayer(J.minimaps[t.name])},this.updateLocationHandler=function(t){J.location=t},this.main()}},function(t,e){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:21,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._isMounted=!0,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise(function(t,e){var i=0,n=null,n=setInterval(function(){return 10<=i?(clearInterval(n),e(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(n),t(window.google)):void++i},500)}),this.once("spawned",function(){if(this._subLayers)for(var t in this._subLayers)this._subLayers[t].setMap(this._mutant)}),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(e){L.GridLayer.prototype.onAdd.call(this,e),this._initMutantContainer(),this._GAPIPromise.then(function(){var t;this._isMounted&&(this._ready=!0,this._initMutant(),(e=this._map)&&(t=this.options.updateWhenIdle?"moveend":"move",e.on(t,this._update,this),this.once("remove",function(){this._map.off(t,this._update,this)}),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}.bind(this)),e._controlCorners.bottomright.style.marginBottom="20px",e._controlCorners.bottomleft.style.marginBottom="20px",this._update()))}.bind(this))},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),google.maps.event.clearListeners(t,"idle"),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle"),t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("moveend",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners&&(t._controlCorners.bottomright.style.marginBottom=0,t._controlCorners.bottomleft.style.marginBottom=0),this._isMounted=!1},addGoogleLayer:function(e,i){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var t=new google.maps[e](i);this._mutant&&t.setMap(this._mutant),this._subLayers[e]=t}.bind(this)),this},removeGoogleLayer:function(e){return this._GAPIPromise.then(function(){var t=this._subLayers&&this._subLayers[e];t&&(t.setMap(null),delete this._subLayers[e])}.bind(this)),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex=800,this._mutantContainer.style.pointerEvents="none",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var t=this._mutantContainer.style;t.width="100%",t.height="100%",this._attachObserver(this._mutantContainer)},_initMutant:function(){var t;this._mutant||(t=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"}),this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=this._mutantContainer.querySelectorAll("a"),e=0;e<t.length;++e)t[e].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:t}))},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var o=i.addedNodes[n];o instanceof HTMLImageElement?this._onMutatedImage(o):o instanceof HTMLElement&&(Array.prototype.forEach.call(o.querySelectorAll("img"),this._boundOnMutatedImage),"white"===o.style.backgroundColor&&L.DomUtil.remove(o),0===o.textContent.indexOf("For development purposes only")&&L.DomUtil.remove(o),Array.prototype.forEach.call(o.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,i,n,o,r,a,s=t.src.match(this._roadRegexp),l=0;s?(e={z:s[1],x:s[2],y:s[3]},1<this._imagesPerTile&&(l=t.style.zIndex=1)):((s=t.src.match(this._satRegexp))&&(e={x:s[1],y:s[2],z:s[3]}),l=0),e?(i=this._tileCoordsToKey(e),t.style.position="absolute",t.style.visibility="hidden",n=i+"/"+l,this._freshTiles[n]=t,n in this._tileCallbacks&&this._tileCallbacks[n]?(this._tileCallbacks[n].pop()(t),this._tileCallbacks[n].length||delete this._tileCallbacks[n]):this._tiles[i]&&(o=this._tiles[i].el,r=0===l?o.firstChild:o.firstChild.nextSibling,a=this._clone(t),o.replaceChild(a,r))):t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,i){var e=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.dataset.pending=this._imagesPerTile,i=i.bind(this,null,n);for(var o=0;o<this._imagesPerTile;++o){var r,a=e+"/"+o;a in this._freshTiles?(r=this._freshTiles[a],n.appendChild(this._clone(r)),--n.dataset.pending):(this._tileCallbacks[a]=this._tileCallbacks[a]||[],this._tileCallbacks[a].push(function(e){return function(t){e.appendChild(this._clone(t)),--e.dataset.pending,parseInt(e.dataset.pending)||i()}.bind(this)}.bind(this)(n)))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(i),n},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(){var t,e,i,n,o;this._mutant&&(t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng),this._mutant.setCenter(e),n=(i=this._map.getZoom())!==Math.round(i),o=this._mutant.getZoom(),n||i===o||(this._mutant.setZoom(i),this._mutantIsReady&&this._checkZoomLevels())),L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()));var i=this._mutant.getZoom();for(var n in Object.keys(this._freshTiles))i!==n.split(":")[2]&&delete this._freshTiles[n]}},_removeTile:function(t){if(this._mutant)return setTimeout(this._pruneTile.bind(this,t),1e3),L.GridLayer.prototype._removeTile.call(this,t)},_getLargeGMapBound:function(t){var e=t.getSouthWest(),i=t.getNorthEast(),n=e.lat(),o=e.lng(),r=i.lat(),a=i.lng(),s=Math.abs(r-n),l=Math.abs(a-o);return L.latLngBounds([[n-s,o-l],[r+s,a+l]])},_pruneTile:function(t){var e=this._mutant.getZoom(),i=t.split(":")[2],n=this._mutant.getBounds(),o=this._getLargeGMapBound(n);if(n)for(var r=0;r<this._imagesPerTile;++r){var a,s=t+"/"+r;s in this._freshTiles&&(a=this._map&&this._keyToBounds(t),this._map&&a.overlaps(o)&&i===e||delete this._freshTiles[s])}}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},function(t,e,i){var n=i(0),o=i(16),r=i(17);var a=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],s=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if("string"==typeof t&&(t={bingMapsKey:t}),t&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&s.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+s.join(", "));var e=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=o(e,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){console.error(t),e(t)}),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",o=i;0<o;o--){var r=0,a=1<<o-1;0!=(t&a)&&r++,0!=(e&a)&&(r+=2),n+=r.toString()}return n}(t.x,t.y,t.z),i=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture});return"string"==typeof this.options.style&&(i+="&st="+this.options.style),i},onAdd:function(e){e.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,e),this._attributions.forEach(function(t){e.attributionControl.addAttribution(t)})},onRemove:function(e){e.off("moveend",this._updateAttribution,this),this._attributions.forEach(function(t){e.attributionControl.removeAttribution(t)}),n.TileLayer.prototype.onRemove.call(this,e)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();var i=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return o(i,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));var e=t.resourceSets[0].resources[0];return this._url=e.imageUrl,this._imageryProviders=e.imageryProviders||[],this.options.subdomains=e.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t,n,e,i,o=this._map;o&&o.attributionControl&&(t=o.getZoom(),e=o.getBounds().toBBoxString(),n=[(i=e.split(","))[1],i[0],i[3],i[2]],this._fetch.then(function(){var e=this._getAttributions(n,t),i=this._attributions;e.forEach(function(t){-1<i.indexOf(t)||o.attributionControl.addAttribution(t)}),i.filter(function(t){-1<e.indexOf(t)||o.attributionControl.removeAttribution(t)}),this._attributions=e}.bind(this)))},_getAttributions:function(n,o){return this._imageryProviders.reduce(function(t,e){for(var i=0;i<e.coverageAreas.length;i++)if(r(n,e.coverageAreas[i].bbox)&&o>=e.coverageAreas[i].zoomMin&&o<=e.coverageAreas[i].zoomMax)return t.push(e.attribution),t;return t},[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},t.exports=n.TileLayer.Bing},function(t,e,i){"use strict";var n=i(0),s=i.n(n);s.a.TileLayer.HERE=s.a.TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",apiKey:"",appId:"",appCode:""},initialize:function(t){var e,i,n,o=(t=s.a.setOptions(this,t)).scheme.split(".")[0];t.tileResolution=256,s.a.Browser.retina&&(t.tileResolution=512),n=t.apiKey?(e=".maps.ls.hereapi.com",i="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?apiKey={apiKey}","/maptile/2.1/copyright/{mapId}?apiKey={apiKey}"):(e=".maps.api.here.com",i="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}","/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}");var r="satellite"!=o&&"terrain"!=o&&"hybrid"!=o?"base":"aerial";-1!==t.scheme.indexOf(".traffic.")&&(r="traffic");var a="https://{s}."+r+e+i;this._attributionUrl=s.a.Util.template("https://1."+r+e+n,this.options),s.a.TileLayer.prototype.initialize.call(this,a,t),this._attributionText=""},onAdd:function(t){s.a.TileLayer.prototype.onAdd.call(this,t),this._attributionText="",this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){s.a.TileLayer.prototype.onRemove.call(this,t),void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText),this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=s.a.bind(function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))},this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,i=0;i<e.length;i++)if(e[i].boxes)for(var n=0;n<e[i].boxes.length;n++){var o=e[i].boxes[n];e[i].boxes[n]=s.a.latLngBounds([[o[0],o[1]],[o[2],o[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],i=this._map.getZoom(),n=this._map.getBounds(),o=0;o<t.length;o++){if(t[o].minLevel<i&&t[o].maxLevel>i&&!t[o].boxes){e.push(t[o]);break}for(var r=0;r<t[o].boxes.length;r++){var a=t[o].boxes[r];if(n.overlaps(a)){e.push(t[o]);break}}}for(var s=['<a href="https://legal.here.com/terms/serviceterms/gb/">HERE maps</a>'],o=0;o<e.length;o++){var l=e[o];s.push('<abbr title="'+l.alt+'">'+l.label+"</abbr>")}var h="© "+s.join(", ")+". ";h!==this._attributionText&&void 0!==this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=h))}}}),s.a.tileLayer.here=function(t){return new s.a.TileLayer.HERE(t)}},function(t,e,i){"use strict";var n=i(0),u=i.n(n);u.a.TileLayer.TomTom=u.a.TileLayer.extend({options:{apiKey:"",style:"main",subdomains:"abcd",minNativeZoom:0,maxNativeZoom:22},initialize:function(t){var e="https://{s}.api.tomtom.com/map/1/tile/basic/"+(t=u.a.setOptions(this,t)).style+"/{z}/{x}/{y}.png?key="+t.apiKey;u.a.TileLayer.prototype.initialize.call(this,e,t),this._copyright=u.a.DomUtil.create("div","tomtom-copyright"),this._copyrightClose=u.a.DomUtil.create("button","tomtom-copyright-close",this._copyright),this._copyrightContent=u.a.DomUtil.create("div","tomtom-copyright-content",this._copyright),u.a.DomEvent.on(this._copyrightClose,"click",function(t){t.preventDefault(),t.stopPropagation(),this._hideCopyright()},this),this._attributionText='<a class="tomtom-attribution" href="#">&copy; 1992 - '+(new Date).getFullYear()+" TomTom.</a>"},onAdd:function(t){u.a.TileLayer.prototype.onAdd.call(this,t),this._addAttribution(),this._map.on("click",this._hideCopyright,this)},onRemove:function(t){u.a.TileLayer.prototype.onRemove.call(this,t),this._hideCopyright(),this._removeAttribution(),this._map.off("click",this._hideCopyright,this)},_addAttribution:function(){var t;void 0!==this._map.attributionControl&&(this._map.attributionControl.addAttribution(this._attributionText),null!==(t=this._map.attributionControl.getContainer().querySelector(".tomtom-attribution"))&&u.a.DomEvent.on(t,"click",function(t){t.preventDefault(),t.stopPropagation(),this._showCopyright()},this))},_removeAttribution:function(){void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText)},_showCopyright:function(){var t=this._map.getContainer();null===t.querySelector(".tomtom-copyright")&&t.appendChild(this._copyright);var e,i,n=this._map.getBounds(),o=n.getNorthEast().wrap(),r=n.getSouthWest().wrap(),a=r.lng<o.lng?(e=r.lng,o.lng):(e=o.lng,r.lng),s=r.lat<o.lat?(i=r.lat,o.lat):(i=o.lat,r.lat),l="https://api.tomtom.com/map/1/copyrights/"+e+"/"+i+"/"+a+"/"+s+".json?key="+this.options.apiKey,h=new XMLHttpRequest;h.onreadystatechange=u.a.bind(function(){if(h.readyState===XMLHttpRequest.DONE&&200===h.status){for(var t=JSON.parse(h.responseText),e="<h4>General Copyrights:</h4>",i=0;i<t.generalCopyrights.length;i++)e+="<p>"+t.generalCopyrights[i]+"</p>";for(i=0;i<t.regions.length;i++){var n=t.regions[i];e+="<h4>"+n.country.label+":</h4>";for(var o=0;o<n.copyrights.length;o++)e+="<p>"+n.copyrights[o]+"</p>"}this._copyrightContent.innerHTML=e}},this),h.open("GET",l,!0),h.send()},_hideCopyright:function(){this._copyright.remove()}}),u.a.tileLayer.tomTom=function(t,e){return new u.a.TileLayer.TomTom(t,e)}},function(t,e,i){"use strict";t.exports=i(11).polyfill()},function(t,e,i){(function(nt,ot){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
t.exports=function(){"use strict";function n(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function l(t){return typeof t==="function"}var t=void 0;if(Array.isArray){t=Array.isArray}else{t=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}var i=t,o=0,e=void 0,r=void 0,a=function t(e,i){x[o]=e;x[o+1]=i;o+=2;if(o===2){if(r){r(b)}else{L()}}};function s(t){r=t}function h(t){a=t}var u=typeof window!=="undefined"?window:undefined,c=u||{},d=c.MutationObserver||c.WebKitMutationObserver,p=typeof self==="undefined"&&typeof nt!=="undefined"&&{}.toString.call(nt)==="[object process]",f=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return nt.nextTick(b)}}function g(){if(typeof e!=="undefined"){return function(){e(b)}}return y()}function v(){var t=0;var e=new d(b);var i=document.createTextNode("");e.observe(i,{characterData:true});return function(){i.data=t=++t%2}}function _(){var t=new MessageChannel;t.port1.onmessage=b;return function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(b,1)}}var x=new Array(1e3);function b(){for(var t=0;t<o;t+=2){var e=x[t];var i=x[t+1];e(i);x[t]=undefined;x[t+1]=undefined}o=0}function w(){try{var t=Function("return this")().require("vertx");e=t.runOnLoop||t.runOnContext;return g()}catch(t){return y()}}var L=void 0;if(p){L=m()}else if(d){L=v()}else if(f){L=_()}else if(u===undefined&&"function"==="function"){L=w()}else{L=y()}function k(t,e){var i=this;var n=new this.constructor(T);if(n[C]===undefined){q(n)}var o=i._state;if(o){var r=arguments[o-1];a(function(){return j(o,n,r,i._result)})}else{Z(i,n,t,e)}return n}function M(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e){return t}var i=new e(T);F(i,t);return i}var C=Math.random().toString(36).substring(2);function T(){}var P=void 0,S=1,A=2;function I(){return new TypeError("You cannot resolve a promise with itself")}function D(){return new TypeError("A promises callback cannot return that same promise.")}function O(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function z(t,n,o){a(function(e){var i=false;var t=O(o,n,function(t){if(i){return}i=true;if(n!==t){F(e,t)}else{N(e,t)}},function(t){if(i){return}i=true;U(e,t)},"Settle: "+(e._label||" unknown promise"));if(!i&&t){i=true;U(e,t)}},t)}function E(e,t){if(t._state===S){N(e,t._result)}else if(t._state===A){U(e,t._result)}else{Z(t,undefined,function(t){return F(e,t)},function(t){return U(e,t)})}}function B(t,e,i){if(e.constructor===t.constructor&&i===k&&e.constructor.resolve===M){E(t,e)}else{if(i===undefined){N(t,e)}else if(l(i)){z(t,e,i)}else{N(t,e)}}}function F(e,t){if(e===t){U(e,I())}else if(n(t)){var i=void 0;try{i=t.then}catch(t){U(e,t);return}B(e,t,i)}else{N(e,t)}}function R(t){if(t._onerror){t._onerror(t._result)}W(t)}function N(t,e){if(t._state!==P){return}t._result=e;t._state=S;if(t._subscribers.length!==0){a(W,t)}}function U(t,e){if(t._state!==P){return}t._state=A;t._result=e;a(R,t)}function Z(t,e,i,n){var o=t._subscribers;var r=o.length;t._onerror=null;o[r]=e;o[r+S]=i;o[r+A]=n;if(r===0&&t._state){a(W,t)}}function W(t){var e=t._subscribers;var i=t._state;if(e.length===0){return}var n=void 0,o=void 0,r=t._result;for(var a=0;a<e.length;a+=3){n=e[a];o=e[a+i];if(n){j(i,n,o,r)}else{o(r)}}t._subscribers.length=0}function j(t,e,i,n){var o=l(i),r=void 0,a=void 0,s=true;if(o){try{r=i(n)}catch(t){s=false;a=t}if(e===r){U(e,D());return}}else{r=n}if(e._state!==P){}else if(o&&s){F(e,r)}else if(s===false){U(e,a)}else if(t===S){N(e,r)}else if(t===A){U(e,r)}}function H(i,t){try{t(function t(e){F(i,e)},function t(e){U(i,e)})}catch(t){U(i,t)}}var G=0;function V(){return G++}function q(t){t[C]=G++;t._state=undefined;t._result=undefined;t._subscribers=[]}function K(){return new Error("Array Methods must be provided an Array")}var J=function(){function t(t,e){this._instanceConstructor=t;this.promise=new t(T);if(!this.promise[C]){q(this.promise)}if(i(e)){this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0){N(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(e);if(this._remaining===0){N(this.promise,this._result)}}}else{U(this.promise,K())}}t.prototype._enumerate=function t(e){for(var i=0;this._state===P&&i<e.length;i++){this._eachEntry(e[i],i)}};t.prototype._eachEntry=function t(e,i){var n=this._instanceConstructor;var o=n.resolve;if(o===M){var r=void 0;var a=void 0;var s=false;try{r=e.then}catch(t){s=true;a=t}if(r===k&&e._state!==P){this._settledAt(e._state,i,e._result)}else if(typeof r!=="function"){this._remaining--;this._result[i]=e}else if(n===et){var l=new n(T);if(s){U(l,a)}else{B(l,e,r)}this._willSettleAt(l,i)}else{this._willSettleAt(new n(function(t){return t(e)}),i)}}else{this._willSettleAt(o(e),i)}};t.prototype._settledAt=function t(e,i,n){var o=this.promise;if(o._state===P){this._remaining--;if(e===A){U(o,n)}else{this._result[i]=n}}if(this._remaining===0){N(o,this._result)}};t.prototype._willSettleAt=function t(e,i){var n=this;Z(e,undefined,function(t){return n._settledAt(S,i,t)},function(t){return n._settledAt(A,i,t)})};return t}();function Y(t){return new J(this,t).promise}function X(o){var r=this;if(i(o))return new r(function(t,e){for(var i=o.length,n=0;n<i;n++)r.resolve(o[n]).then(t,e)});else return new r(function(t,e){return e(new TypeError("You must pass an array to race."))})}function Q(t){var e=new this(T);return U(e,t),e}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function e(t){this[C]=V();this._result=this._state=undefined;this._subscribers=[];if(T!==t){typeof t!=="function"&&$();this instanceof e?H(this,t):tt()}}e.prototype.catch=function t(e){return this.then(null,e)};e.prototype.finally=function t(e){var i=this;var n=i.constructor;if(l(e)){return i.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}return i.then(e,e)};return e}();function it(){var t=void 0;if(void 0!==ot)t=ot;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et}return et.prototype.then=k,et.all=function(t){return new J(this,t).promise},et.race=function(o){var r=this;return i(o)?new r(function(t,e){for(var i=o.length,n=0;n<i;n++)r.resolve(o[n]).then(t,e)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},et.resolve=M,et.reject=function(t){var e=new this(T);return U(e,t),e},et._setScheduler=function(t){r=t},et._setAsap=function(t){a=t},et._asap=a,et.polyfill=function(){var t=void 0;if(void 0!==ot)t=ot;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et},et.Promise=et}()}).call(this,i(12),i(13))},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,h=[],u=!1,c=-1;function d(){u&&l&&(u=!1,l.length?h=l.concat(h):c=-1,h.length&&p())}function p(){if(!u){var t=s(d);u=!0;for(var e=h.length;e;){for(l=h,h=[];++c<e;)l&&l[c].run();c=-1,e=h.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){if("undefined"==typeof moment){var i=new Error("Cannot find module 'moment'");throw i.code="MODULE_NOT_FOUND",i}t.exports=moment},function(t,e,i){!function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:true,showCoverageOnHover:true,zoomToBoundsOnClick:true,singleMarkerMode:false,disableClusteringAtZoom:null,removeOutsideVisibleBounds:true,animate:true,animateAddingMarkers:false,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:false,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t);if(!this.options.iconCreateFunction){this.options.iconCreateFunction=this._defaultIconCreateFunction}this._featureGroup=L.featureGroup();this._featureGroup.addEventParent(this);this._nonPointGroup=L.featureGroup();this._nonPointGroup.addEventParent(this);this._inZoomAnimation=0;this._needsClustering=[];this._needsRemoving=[];this._currentShownBounds=null;this._queue=[];this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation);this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup){return this.addLayers([t])}if(!t.getLatLng){this._nonPointGroup.addLayer(t);this.fire("layeradd",{layer:t});return this}if(!this._map){this._needsClustering.push(t);this.fire("layeradd",{layer:t});return this}if(this.hasLayer(t)){return this}if(this._unspiderfy){this._unspiderfy()}this._addLayer(t,this._maxZoom);this.fire("layeradd",{layer:t});this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent){while(e.__parent._zoom>=i){e=e.__parent}}if(this._currentShownBounds.contains(e.getLatLng())){if(this.options.animateAddingMarkers){this._animationAddLayer(t,e)}else{this._animationAddLayerNonAnimated(t,e)}}return this},removeLayer:function(t){if(t instanceof L.LayerGroup){return this.removeLayers([t])}if(!t.getLatLng){this._nonPointGroup.removeLayer(t);this.fire("layerremove",{layer:t});return this}if(!this._map){if(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)){this._needsRemoving.push({layer:t,latlng:t._latlng})}this.fire("layerremove",{layer:t});return this}if(!t.__parent){return this}if(this._unspiderfy){this._unspiderfy();this._unspiderfyLayer(t)}this._removeLayer(t,true);this.fire("layerremove",{layer:t});this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();t.off(this._childMarkerEventHandlers,this);if(this._featureGroup.hasLayer(t)){this._featureGroup.removeLayer(t);if(t.clusterShow){t.clusterShow()}}return this},addLayers:function(o,r){if(!L.Util.isArray(o)){return this.addLayer(o)}var a=this._featureGroup,s=this._nonPointGroup,l=this.options.chunkedLoading,h=this.options.chunkInterval,u=this.options.chunkProgress,c=o.length,d=0,p=true,f;if(this._map){var m=(new Date).getTime();var g=L.bind(function(){var t=(new Date).getTime();for(;d<c;d++){if(l&&d%200===0){var e=(new Date).getTime()-t;if(e>h){break}}f=o[d];if(f instanceof L.LayerGroup){if(p){o=o.slice();p=false}this._extractNonGroupLayers(f,o);c=o.length;continue}if(!f.getLatLng){s.addLayer(f);if(!r){this.fire("layeradd",{layer:f})}continue}if(this.hasLayer(f)){continue}this._addLayer(f,this._maxZoom);if(!r){this.fire("layeradd",{layer:f})}if(f.__parent){if(f.__parent.getChildCount()===2){var i=f.__parent.getAllChildMarkers(),n=i[0]===f?i[1]:i[0];a.removeLayer(n)}}}if(u){u(d,c,(new Date).getTime()-m)}if(d===c){this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)}else{setTimeout(g,this.options.chunkDelay)}},this);g()}else{var t=this._needsClustering;for(;d<c;d++){f=o[d];if(f instanceof L.LayerGroup){if(p){o=o.slice();p=false}this._extractNonGroupLayers(f,o);c=o.length;continue}if(!f.getLatLng){s.addLayer(f);continue}if(this.hasLayer(f)){continue}t.push(f)}}return this},removeLayers:function(t){var e,i,n=t.length,o=this._featureGroup,r=this._nonPointGroup,a=true;if(!this._map){for(e=0;e<n;e++){i=t[e];if(i instanceof L.LayerGroup){if(a){t=t.slice();a=false}this._extractNonGroupLayers(i,t);n=t.length;continue}this._arraySplice(this._needsClustering,i);r.removeLayer(i);if(this.hasLayer(i)){this._needsRemoving.push({layer:i,latlng:i._latlng})}this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=n;for(e=0;e<l;e++){i=s[e];if(i instanceof L.LayerGroup){this._extractNonGroupLayers(i,s);l=s.length;continue}this._unspiderfyLayer(i)}}for(e=0;e<n;e++){i=t[e];if(i instanceof L.LayerGroup){if(a){t=t.slice();a=false}this._extractNonGroupLayers(i,t);n=t.length;continue}if(!i.__parent){r.removeLayer(i);this.fire("layerremove",{layer:i});continue}this._removeLayer(i,true,true);this.fire("layerremove",{layer:i});if(o.hasLayer(i)){o.removeLayer(i);if(i.clusterShow){i.clusterShow()}}}this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds);return this},clearLayers:function(){if(!this._map){this._needsClustering=[];this._needsRemoving=[];delete this._gridClusters;delete this._gridUnclustered}if(this._noanimationUnspiderfy){this._noanimationUnspiderfy()}this._featureGroup.clearLayers();this._nonPointGroup.clearLayers();this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this);delete t.__parent},this);if(this._map){this._generateInitialClusters()}return this},getBounds:function(){var t=new L.LatLngBounds;if(this._topClusterLevel){t.extend(this._topClusterLevel._bounds)}for(var e=this._needsClustering.length-1;e>=0;e--){t.extend(this._needsClustering[e].getLatLng())}t.extend(this._nonPointGroup.getBounds());return t},eachLayer:function(t,e){var i=this._needsClustering.slice(),n=this._needsRemoving,o,r,a;if(this._topClusterLevel){this._topClusterLevel.getAllChildMarkers(i)}for(r=i.length-1;r>=0;r--){o=true;for(a=n.length-1;a>=0;a--){if(n[a].layer===i[r]){o=false;break}}if(o){t.call(e,i[r])}}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var e=[];this.eachLayer(function(t){e.push(t)});return e},getLayer:function(e){var i=null;e=parseInt(e,10);this.eachLayer(function(t){if(L.stamp(t)===e){i=t}});return i},hasLayer:function(t){if(!t){return false}var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--){if(i[e]===t){return true}}i=this._needsRemoving;for(e=i.length-1;e>=0;e--){if(i[e].layer===t){return false}}return!!(t.__parent&&t.__parent._group===this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){if(typeof e!=="function"){e=function(){}}var i=function(){if((t._icon||t.__parent._icon)&&!this._inZoomAnimation){this._map.off("moveend",i,this);this.off("animationend",i,this);if(t._icon){e()}else if(t.__parent._icon){this.once("spiderfied",e,this);t.__parent.spiderfy()}}};if(t._icon&&this._map.getBounds().contains(t.getLatLng())){e()}else if(t.__parent._zoom<Math.round(this._map._zoom)){this._map.on("moveend",i,this);this._map.panTo(t.getLatLng())}else{this._map.on("moveend",i,this);this.on("animationend",i,this);t.__parent.zoomToBounds()}},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom())){throw"Map has no maxZoom specified"}this._featureGroup.addTo(t);this._nonPointGroup.addTo(t);if(!this._gridClusters){this._generateInitialClusters()}this._maxLat=t.options.crs.projection.MAX_LATITUDE;for(e=0,i=this._needsRemoving.length;e<i;e++){n=this._needsRemoving[e];n.newlatlng=n.layer._latlng;n.layer._latlng=n.latlng}for(e=0,i=this._needsRemoving.length;e<i;e++){n=this._needsRemoving[e];this._removeLayer(n.layer,true);n.layer._latlng=n.newlatlng}this._needsRemoving=[];this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds();this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);if(this._spiderfierOnAdd){this._spiderfierOnAdd()}this._bindEvents();i=this._needsClustering;this._needsClustering=[];this.addLayers(i,true)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this);t.off("moveend",this._moveEnd,this);this._unbindEvents();this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","");if(this._spiderfierOnRemove){this._spiderfierOnRemove()}delete this._maxLat;this._hideCoverage();this._featureGroup.remove();this._nonPointGroup.remove();this._featureGroup.clearLayers();this._map=null},getVisibleParent:function(t){var e=t;while(e&&!e._icon){e=e.__parent}return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--){if(t[i]===e){t.splice(i,1);return true}}},_removeFromGridUnclustered:function(t,e){var i=this._map,n=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(;e>=o;e--){if(!n[e].removeObject(t,i.project(t.getLatLng(),e))){break}}},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng);if(e){t.target.openPopup()}}},_moveChild:function(t,e,i){t._latlng=e;this.removeLayer(t);t._latlng=i;this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart;if(e){this._moveChild(t.target,e,t.target._latlng)}},_removeLayer:function(t,e,i){var n=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());if(e){this._removeFromGridUnclustered(t,this._maxZoom)}var l=t.__parent,h=l._markers,u;this._arraySplice(h,t);while(l){l._childCount--;l._boundsNeedUpdate=true;if(l._zoom<s){break}else if(e&&l._childCount<=1){u=l._markers[0]===t?l._markers[1]:l._markers[0];n[l._zoom].removeObject(l,a.project(l._cLatLng,l._zoom));o[l._zoom].addObject(u,a.project(u.getLatLng(),l._zoom));this._arraySplice(l.__parent._childClusters,l);l.__parent._markers.push(u);u.__parent=l.__parent;if(l._icon){r.removeLayer(l);if(!i){r.addLayer(u)}}}else{l._iconNeedsUpdate=true}l=l.__parent}delete t.__parent},_isOrIsParent:function(t,e){while(e){if(t===e){return true}e=e.parentNode}return false},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget)){return}t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount();var i=" marker-cluster-";if(e<10){i+="small"}else if(e<100){i+="medium"}else{i+="large"}return new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;if(e||n){this.on("clusterclick",this._zoomOrSpiderfy,this)}if(i){this.on("clustermouseover",this._showCoverage,this);this.on("clustermouseout",this._hideCoverage,this);t.on("zoomend",this._hideCoverage,this)}},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;while(i._childClusters.length===1){i=i._childClusters[0]}if(i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom){e.spiderfy()}else if(this.options.zoomToBoundsOnClick){e.zoomToBounds()}if(t.originalEvent&&t.originalEvent.keyCode===13){this._map._container.focus()}},_showCoverage:function(t){var e=this._map;if(this._inZoomAnimation){return}if(this._shownPolygon){e.removeLayer(this._shownPolygon)}if(t.layer.getChildCount()>2&&t.layer!==this._spiderfied){this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions);e.addLayer(this._shownPolygon)}},_hideCoverage:function(){if(this._shownPolygon){this._map.removeLayer(this._shownPolygon);this._shownPolygon=null}},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;if(t||i){this.off("clusterclick",this._zoomOrSpiderfy,this)}if(e){this.off("clustermouseover",this._showCoverage,this);this.off("clustermouseout",this._hideCoverage,this);n.off("zoomend",this._hideCoverage,this)}},_zoomEnd:function(){if(!this._map){return}this._mergeSplitClusters();this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds()},_moveEnd:function(){if(this._inZoomAnimation){return}var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t);this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t);this._currentShownBounds=t;return},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;if(typeof i!=="function"){n=function(){return i}}if(this.options.disableClusteringAtZoom!==null){t=this.options.disableClusteringAtZoom-1}this._maxZoom=t;this._gridClusters={};this._gridUnclustered={};for(var o=t;o>=e;o--){this._gridClusters[o]=new L.DistanceGrid(n(o));this._gridUnclustered[o]=new L.DistanceGrid(n(o))}this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i=this._gridClusters,n=this._gridUnclustered,o=Math.floor(this._map.getMinZoom()),r,a;if(this.options.singleMarkerMode){this._overrideMarkerIcon(t)}t.on(this._childMarkerEventHandlers,this);for(;e>=o;e--){r=this._map.project(t.getLatLng(),e);var s=i[e].getNearObject(r);if(s){s._addChild(t);t.__parent=s;return}s=n[e].getNearObject(r);if(s){var l=s.__parent;if(l){this._removeLayer(s,false)}var h=new this._markerCluster(this,e,s,t);i[e].addObject(h,this._map.project(h._cLatLng,e));s.__parent=h;t.__parent=h;var u=h;for(a=e-1;a>l._zoom;a--){u=new this._markerCluster(this,a,u);i[a].addObject(u,this._map.project(s.getLatLng(),a))}l._addChild(u);this._removeFromGridUnclustered(s,e);return}n[e].addObject(t,r)}this._topClusterLevel._addChild(t);t.__parent=this._topClusterLevel;return},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){if(t instanceof L.MarkerCluster&&t._iconNeedsUpdate){t._updateIcon()}})},_enqueue:function(t){this._queue.push(t);if(!this._queueTimeout){this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300)}},_processQueue:function(){for(var t=0;t<this._queue.length;t++){this._queue[t].call(this)}this._queue.length=0;clearTimeout(this._queueTimeout);this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue();if(this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())){this._animationStart();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds());this._animationZoomIn(this._zoom,t)}else if(this._zoom>t){this._animationStart();this._animationZoomOut(this._zoom,t)}else{this._moveEnd()}},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds){return this._mapBoundsInfinite}else if(L.Browser.mobile){return this._checkBoundsMaxLat(this._map.getBounds())}return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(t){var e=this._maxLat;if(e!==undefined){if(t.getNorth()>=e){t._northEast.lat=Infinity}if(t.getSouth()<=-e){t._southWest.lat=-Infinity}}return t},_animationAddLayerNonAnimated:function(t,e){if(e===t){this._featureGroup.addLayer(t)}else if(e._childCount===2){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]);this._featureGroup.removeLayer(i[1])}else{e._updateIcon()}},_extractNonGroupLayers:function(t,e){var i=t.getLayers(),n=0,o;e=e||[];for(;n<i.length;n++){o=i[n];if(o instanceof L.LayerGroup){this._extractNonGroupLayers(o,e);continue}e.push(o)}return e},_overrideMarkerIcon:function(t){var e=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-Infinity,-Infinity),new L.LatLng(Infinity,Infinity))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t);this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds());this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t);this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds());this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationZoomIn:function(o,r){var a=this._getExpandedVisibleBounds(),s=this._featureGroup,t=Math.floor(this._map.getMinZoom()),l;this._ignoreMove=true;this._topClusterLevel._recursively(a,o,t,function(t){var e=t._latlng,i=t._markers,n;if(!a.contains(e)){e=null}if(t._isSingleParent()&&o+1===r){s.removeLayer(t);t._recursivelyAddChildrenToMap(null,r,a)}else{t.clusterHide();t._recursivelyAddChildrenToMap(e,r,a)}for(l=i.length-1;l>=0;l--){n=i[l];if(!a.contains(n._latlng)){s.removeLayer(n)}}});this._forceLayout();this._topClusterLevel._recursivelyBecomeVisible(a,r);s.eachLayer(function(t){if(!(t instanceof L.MarkerCluster)&&t._icon){t.clusterShow()}});this._topClusterLevel._recursively(a,o,r,function(t){t._recursivelyRestoreChildPositions(r)});this._ignoreMove=false;this._enqueue(function(){this._topClusterLevel._recursively(a,o,t,function(t){s.removeLayer(t);t.clusterShow()});this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e);this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds());this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t);if(e!==t){if(e._childCount>2){e._updateIcon();this._forceLayout();this._animationStart();t._setPos(this._map.latLngToLayerPoint(e.getLatLng()));t.clusterHide();this._enqueue(function(){n.removeLayer(t);t.clusterShow();i._animationEnd()})}else{this._forceLayout();i._animationStart();i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)}}}},_animationZoomOutSingle:function(e,i,n){var o=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,r,i+1,n);var a=this;this._forceLayout();e._recursivelyBecomeVisible(o,n);this._enqueue(function(){if(e._childCount===1){var t=e._markers[0];this._ignoreMove=true;t.setLatLng(t.getLatLng());this._ignoreMove=false;if(t.clusterShow){t.clusterShow()}}else{e._recursively(o,n,r,function(t){t._recursivelyRemoveChildrenFromMap(o,r,i+1)})}a._animationEnd()})},_animationEnd:function(){if(this._map){this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")}this._inZoomAnimation--;this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane});this._group=t;this._zoom=e;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._bounds=new L.LatLngBounds;if(i){this._addChild(i)}if(n){this._addChild(n)}},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--){this._childClusters[i].getAllChildMarkers(t)}for(var n=this._markers.length-1;n>=0;n--){if(e&&this._markers[n].__dragStart){continue}t.push(this._markers[n])}return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){var e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),o=this._zoom+1,r=i.getZoom(),a;while(e.length>0&&n>o){o++;var s=[];for(a=0;a<e.length;a++){s=s.concat(e[a]._childClusters)}e=s}if(n>o){this._group._map.setView(this._latlng,o)}else if(n<=r){this._group._map.setView(this._latlng,r+1)}else{this._group._map.fitBounds(this._bounds,t)}},getBounds:function(){var t=new L.LatLngBounds;t.extend(this._bounds);return t},_updateIcon:function(){this._iconNeedsUpdate=true;if(this._icon){this.setIcon(this)}},createIcon:function(){if(this._iconNeedsUpdate){this._iconObj=this._group.options.iconCreateFunction(this);this._iconNeedsUpdate=false}return this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._setClusterCenter(t);if(t instanceof L.MarkerCluster){if(!e){this._childClusters.push(t);t.__parent=this}this._childCount+=t._childCount}else{if(!e){this._markers.push(t)}this._childCount++}if(this.__parent){this.__parent._addChild(t,true)}},_setClusterCenter:function(t){if(!this._cLatLng){this._cLatLng=t._cLatLng||t._latlng}},_resetBounds:function(){var t=this._bounds;if(t._southWest){t._southWest.lat=Infinity;t._southWest.lng=Infinity}if(t._northEast){t._northEast.lat=-Infinity;t._northEast.lng=-Infinity}},_recalculateBounds:function(){var t=this._markers,e=this._childClusters,i=0,n=0,o=this._childCount,r,a,s,l;if(o===0){return}this._resetBounds();for(r=0;r<t.length;r++){s=t[r]._latlng;this._bounds.extend(s);i+=s.lat;n+=s.lng}for(r=0;r<e.length;r++){a=e[r];if(a._boundsNeedUpdate){a._recalculateBounds()}this._bounds.extend(a._bounds);s=a._wLatLng;l=a._childCount;i+=s.lat*l;n+=s.lng*l}this._latlng=this._wLatLng=new L.LatLng(i/o,n/o);this._boundsNeedUpdate=false},_addToMap:function(t){if(t){this._backupLatlng=this._latlng;this.setLatLng(t)}this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,o,e){this._recursively(t,this._group._map.getMinZoom(),e-1,function(t){var e=t._markers,i,n;for(i=e.length-1;i>=0;i--){n=e[i];if(n._icon){n._setPos(o);n.clusterHide()}}},function(t){var e=t._childClusters,i,n;for(i=e.length-1;i>=0;i--){n=e[i];if(n._icon){n._setPos(o);n.clusterHide()}}})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,i,n,o){this._recursively(e,o,i,function(t){t._recursivelyAnimateChildrenIn(e,t._group._map.latLngToLayerPoint(t.getLatLng()).round(),n);if(t._isSingleParent()&&n-1===o){t.clusterShow();t._recursivelyRemoveChildrenFromMap(e,i,n)}else{t.clusterHide()}t._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(n,o,r){this._recursively(r,this._group._map.getMinZoom()-1,o,function(t){if(o===t._zoom){return}for(var e=t._markers.length-1;e>=0;e--){var i=t._markers[e];if(!r.contains(i._latlng)){continue}if(n){i._backupLatlng=i.getLatLng();i.setLatLng(n);if(i.clusterHide){i.clusterHide()}}t._group._featureGroup.addLayer(i)}},function(t){t._addToMap(n)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];if(i._backupLatlng){i.setLatLng(i._backupLatlng);delete i._backupLatlng}}if(t-1===this._zoom){for(var n=this._childClusters.length-1;n>=0;n--){this._childClusters[n]._restorePosition()}}else{for(var o=this._childClusters.length-1;o>=0;o--){this._childClusters[o]._recursivelyRestoreChildPositions(t)}}},_restorePosition:function(){if(this._backupLatlng){this.setLatLng(this._backupLatlng);delete this._backupLatlng}},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var o,r;this._recursively(t,e-1,i-1,function(t){for(r=t._markers.length-1;r>=0;r--){o=t._markers[r];if(!n||!n.contains(o._latlng)){t._group._featureGroup.removeLayer(o);if(o.clusterShow){o.clusterShow()}}}},function(t){for(r=t._childClusters.length-1;r>=0;r--){o=t._childClusters[r];if(!n||!n.contains(o._latlng)){t._group._featureGroup.removeLayer(o);if(o.clusterShow){o.clusterShow()}}}})},_recursively:function(t,e,i,n,o){var r=this._childClusters,a=this._zoom,s,l;if(e<=a){if(n){n(this)}if(o&&a===i){o(this)}}if(a<e||a<i){for(s=r.length-1;s>=0;s--){l=r[s];if(l._boundsNeedUpdate){l._recalculateBounds()}if(t.intersects(l._bounds)){l._recursively(t,e,i,n,o)}}}},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;this.setOpacity(0);this.options.opacity=t;return this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t;this._sqCellSize=t*t;this._grid={};this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,r=o[n]=o[n]||{},a=r[i]=r[i]||[],s=L.Util.stamp(t);this._objectPoint[s]=e;a.push(t)},updateObject:function(t,e){this.removeObject(t);this.addObject(t,e)},removeObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,r=o[n]=o[n]||{},a=r[i]=r[i]||[],s,l;delete this._objectPoint[L.Util.stamp(t)];for(s=0,l=a.length;s<l;s++){if(a[s]===t){a.splice(s,1);if(l===1){delete r[i]}return true}}},eachObject:function(t,e){var i,n,o,r,a,s,l,h=this._grid;for(i in h){a=h[i];for(n in a){s=a[n];for(o=0,r=s.length;o<r;o++){l=t.call(e,s[o]);if(l){o--;r--}}}}},getNearObject:function(t){var e=this._getCoord(t.x),i=this._getCoord(t.y),n,o,r,a,s,l,h,u,c=this._objectPoint,d=this._sqCellSize,p=null;for(n=i-1;n<=i+1;n++){a=this._grid[n];if(a){for(o=e-1;o<=e+1;o++){s=a[o];if(s){for(r=0,l=s.length;r<l;r++){h=s[r];u=this._sqDist(c[L.Util.stamp(h)],t);if(u<d||u<=d&&p===null){d=u;p=h}}}}}}return p},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i=0,n=null,o=[],r,a,s;for(r=e.length-1;r>=0;r--){a=e[r];s=this.getDistant(a,t);if(s>0){o.push(a)}else{continue}if(s>i){i=s;n=a}}return{maxPoint:n,newPoints:o}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);if(n.maxPoint){i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints));i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints));return i}else{return[t[0]]}},getConvexHull:function(t){var e=false,i=false,n=false,o=false,r=null,a=null,s=null,l=null,h=null,u=null,c;for(c=t.length-1;c>=0;c--){var d=t[c];if(e===false||d.lat>e){r=d;e=d.lat}if(i===false||d.lat<i){a=d;i=d.lat}if(n===false||d.lng>n){s=d;n=d.lng}if(o===false||d.lng<o){l=d;o=d.lng}}if(i!==e){u=a;h=r}else{u=l;h=s}var p=[].concat(this.buildConvexHull([u,h],t),this.buildConvexHull([h,u],t));return p}}}(),L.MarkerCluster.include({getConvexHull:function(){var t=this.getAllChildMarkers(),e=[],i,n;for(n=t.length-1;n>=0;n--){i=t[n].getLatLng();e.push(i)}return L.QuickHull.getConvexHull(e)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied===this||this._group._inZoomAnimation){return}var t=this.getAllChildMarkers(null,true),e=this._group,i=e._map,n=i.latLngToLayerPoint(this._latlng),o;this._group._unspiderfy();this._group._spiderfied=this;if(t.length>=this._circleSpiralSwitchover){o=this._generatePointsSpiral(t.length,n)}else{n.y+=10;o=this._generatePointsCircle(t.length,n)}this._animationSpiderfy(t,o)},unspiderfy:function(t){if(this._group._inZoomAnimation){return}this._animationUnspiderfy(t);this._group._spiderfied=null},_generatePointsCircle:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),n=i/this._2PI,o=this._2PI/t,r=[],a,s;n=Math.max(n,35);r.length=t;for(a=0;a<t;a++){s=this._circleStartAngle+a*o;r[a]=new L.Point(e.x+n*Math.cos(s),e.y+n*Math.sin(s))._round()}return r},_generatePointsSpiral:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier,n=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,r=i*this._spiralLengthFactor*this._2PI,a=0,s=[],l;s.length=t;for(l=t;l>=0;l--){if(l<t){s[l]=new L.Point(e.x+n*Math.cos(a),e.y+n*Math.sin(a))._round()}a+=o/n+l*5e-4;n+=r/a}return s},_noanimationUnspiderfy:function(){var t=this._group,e=t._map,i=t._featureGroup,n=this.getAllChildMarkers(null,true),o,r;t._ignoreMove=true;this.setOpacity(1);for(r=n.length-1;r>=0;r--){o=n[r];i.removeLayer(o);if(o._preSpiderfyLatlng){o.setLatLng(o._preSpiderfyLatlng);delete o._preSpiderfyLatlng}if(o.setZIndexOffset){o.setZIndexOffset(0)}if(o._spiderLeg){e.removeLayer(o._spiderLeg);delete o._spiderLeg}}t.fire("unspiderfied",{cluster:this,markers:n});t._ignoreMove=false;t._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i=this._group,n=i._map,o=i._featureGroup,r=this._group.options.spiderLegPolylineOptions,a,s,l,h;i._ignoreMove=true;for(a=0;a<t.length;a++){h=n.layerPointToLatLng(e[a]);s=t[a];l=new L.Polyline([this._latlng,h],r);n.addLayer(l);s._spiderLeg=l;s._preSpiderfyLatlng=s._latlng;s.setLatLng(h);if(s.setZIndexOffset){s.setZIndexOffset(1e6)}o.addLayer(s)}this.setOpacity(.3);i._ignoreMove=false;i.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i=this,n=this._group,o=n._map,r=n._featureGroup,a=this._latlng,s=o.latLngToLayerPoint(a),l=L.Path.SVG,h=L.extend({},this._group.options.spiderLegPolylineOptions),u=h.opacity,c,d,p,f,m,g;if(u===undefined){u=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity}if(l){h.opacity=0;h.className=(h.className||"")+" leaflet-cluster-spider-leg"}else{h.opacity=u}n._ignoreMove=true;for(c=0;c<t.length;c++){d=t[c];g=o.layerPointToLatLng(e[c]);p=new L.Polyline([a,g],h);o.addLayer(p);d._spiderLeg=p;if(l){f=p._path;m=f.getTotalLength()+.1;f.style.strokeDasharray=m;f.style.strokeDashoffset=m}if(d.setZIndexOffset){d.setZIndexOffset(1e6)}if(d.clusterHide){d.clusterHide()}r.addLayer(d);if(d._setPos){d._setPos(s)}}n._forceLayout();n._animationStart();for(c=t.length-1;c>=0;c--){g=o.layerPointToLatLng(e[c]);d=t[c];d._preSpiderfyLatlng=d._latlng;d.setLatLng(g);if(d.clusterShow){d.clusterShow()}if(l){p=d._spiderLeg;f=p._path;f.style.strokeDashoffset=0;p.setStyle({opacity:u})}}this.setOpacity(.3);n._ignoreMove=false;setTimeout(function(){n._animationEnd();n.fire("spiderfied",{cluster:i,markers:t})},200)},_animationUnspiderfy:function(t){var e=this,i=this._group,n=i._map,o=i._featureGroup,r=t?n._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):n.latLngToLayerPoint(this._latlng),a=this.getAllChildMarkers(null,true),s=L.Path.SVG,l,h,u,c,d,p;i._ignoreMove=true;i._animationStart();this.setOpacity(1);for(h=a.length-1;h>=0;h--){l=a[h];if(!l._preSpiderfyLatlng){continue}l.closePopup();l.setLatLng(l._preSpiderfyLatlng);delete l._preSpiderfyLatlng;p=true;if(l._setPos){l._setPos(r);p=false}if(l.clusterHide){l.clusterHide();p=false}if(p){o.removeLayer(l)}if(s){u=l._spiderLeg;c=u._path;d=c.getTotalLength()+.1;c.style.strokeDashoffset=d;u.setStyle({opacity:0})}}i._ignoreMove=false;setTimeout(function(){var t=0;for(h=a.length-1;h>=0;h--){l=a[h];if(l._spiderLeg){t++}}for(h=a.length-1;h>=0;h--){l=a[h];if(!l._spiderLeg){continue}if(l.clusterShow){l.clusterShow()}if(l.setZIndexOffset){l.setZIndexOffset(0)}if(t>1){o.removeLayer(l)}n.removeLayer(l._spiderLeg);delete l._spiderLeg}i._animationEnd();i.fire("unspiderfied",{cluster:e,markers:a})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation){this._map.on("zoomstart",this._unspiderfyZoomStart,this)}this._map.on("zoomend",this._noanimationUnspiderfy,this);if(!L.Browser.touch){this._map.getRenderer(this)}},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._map.off("zoomend",this._noanimationUnspiderfy,this);this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){if(!this._map){return}this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){if(L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")){return}this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._unspiderfy(t)},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){if(this._spiderfied){this._spiderfied.unspiderfy(t)}},_noanimationUnspiderfy:function(){if(this._spiderfied){this._spiderfied._noanimationUnspiderfy()}},_unspiderfyLayer:function(t){if(t._spiderLeg){this._featureGroup.removeLayer(t);if(t.clusterShow){t.clusterShow()}if(t.setZIndexOffset){t.setZIndexOffset(0)}this._map.removeLayer(t._spiderLeg);delete t._spiderLeg}}}),L.MarkerClusterGroup.include({refreshClusters:function(t){if(!t){t=this._topClusterLevel.getAllChildMarkers()}else if(t instanceof L.MarkerClusterGroup){t=t._topClusterLevel.getAllChildMarkers()}else if(t instanceof L.LayerGroup){t=t._layers}else if(t instanceof L.MarkerCluster){t=t.getAllChildMarkers()}else if(t instanceof L.Marker){t=[t]}this._flagParentsIconsNeedUpdate(t);this._refreshClustersIcons();if(this.options.singleMarkerMode){this._refreshSingleMarkerModeMarkers(t)}return this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t){i=t[e].__parent;while(i){i._iconNeedsUpdate=true;i=i.__parent}}},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t){i=t[e];if(this.hasLayer(i)){i.setIcon(this._overrideMarkerIcon(i))}}}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;L.setOptions(i,t);this.setIcon(i);if(e&&this.__parent){this.__parent._group.refreshClusters(this)}return this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i}(e)},function(t,e,i){var n,o,r;o=[e,t],void 0===(r="function"==typeof(n=function(t,e){"use strict";var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function c(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function d(e){try{delete window[e]}catch(t){window[e]=undefined}}function p(t){var e=document.getElementById(t);if(e){document.getElementsByTagName("head")[0].removeChild(e)}}function n(r){var a=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var s=r;var l=a.timeout||i.timeout;var h=a.jsonpCallback||i.jsonpCallback;var u=undefined;return new Promise(function(t,e){var i=a.jsonpCallbackFunction||c();var n=h+"_"+i;window[i]=function(e){t({ok:true,json:function t(){return Promise.resolve(e)}});if(u)clearTimeout(u);p(n);d(i)};s+=s.indexOf("?")===-1?"?":"&";var o=document.createElement("script");o.setAttribute("src",""+s+h+"="+i);if(a.charset){o.setAttribute("charset",a.charset)}o.id=n;document.getElementsByTagName("head")[0].appendChild(o);u=setTimeout(function(){e(new Error("JSONP request to "+r+" timed out"));d(i);p(n);window[i]=function(){d(i)}},l);o.onerror=function(){e(new Error("JSONP request to "+r+" failed"));d(i);p(n);if(u)clearTimeout(u)}})}e.exports=n})?n.apply(e,o):n)||(t.exports=r)},function(t,e){t.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},function(t,e,i){var n,o,r,a,s;a=function(a){a.EdgeBuffer={previousMethods:{getTiledPixelBounds:a.GridLayer.prototype._getTiledPixelBounds}},a.GridLayer.include({_getTiledPixelBounds:function(t,e,i){var n,o=a.EdgeBuffer.previousMethods.getTiledPixelBounds.call(this,t,e,i),r=1;return void 0!==this.options.edgeBufferTiles&&null!==this.options.edgeBufferTiles&&(r=this.options.edgeBufferTiles),0<r&&(n=a.GridLayer.prototype.getTileSize.call(this).multiplyBy(r),o=new a.Bounds(o.min.subtract(n),o.max.add(n))),o}})},s=window,o=[i(0)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&!s.L.EdgeBuffer&&a(s.L)},function(t,e,i){!function(t){"use strict";var o={ar:{touch:"استخدم إصبعين لتحريك الخريطة",scroll:"‏استخدم ctrl + scroll لتصغير/تكبير الخريطة",scrollMac:"يمكنك استخدام ⌘ + التمرير لتكبير/تصغير الخريطة"},bg:{touch:"Използвайте два пръста, за да преместите картата",scroll:"Задръжте бутона Ctrl натиснат, докато превъртате, за да промените мащаба на картата",scrollMac:"Задръжте бутона ⌘ натиснат, докато превъртате, за да промените мащаба на картата"},bn:{touch:"মানচিত্রটিকে সরাতে দুটি আঙ্গুল ব্যবহার করুন",scroll:"ম্যাপ জুম করতে ctrl + scroll ব্যবহার করুন",scrollMac:"ম্যাপে জুম করতে ⌘ বোতাম টিপে স্ক্রল করুন"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla ⌘ mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K posunutí mapy použijte dva prsty",scroll:"Velikost zobrazení mapy změňte podržením klávesy Ctrl a posouváním kolečka myši",scrollMac:"Velikost zobrazení mapy změníte podržením klávesy ⌘ a posunutím kolečka myši / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud på kortet",scrollMac:"Brug ⌘ + rullefunktionen til at zoome ind og ud på kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"⌘"},el:{touch:"Χρησιμοποιήστε δύο δάχτυλα για μετακίνηση στον χάρτη",scroll:"Χρησιμοποιήστε το πλήκτρο Ctrl και κύλιση, για να μεγεθύνετε τον χάρτη",scrollMac:"Χρησιμοποιήστε το πλήκτρο ⌘ + κύλιση για εστίαση στον χάρτη"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantén pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantén pulsada la tecla ⌘ mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta ⌘ eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"برای حرکت دادن نقشه از دو انگشت استفاده کنید.",scroll:"‏برای بزرگ‌نمایی نقشه از ctrl + scroll استفاده کنید",scrollMac:"برای بزرگ‌نمایی نقشه، از ⌘ + پیمایش استفاده کنید."},fi:{touch:"Siirrä karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittämällä.",scrollMac:"Zoomaa karttaa pitämällä painike ⌘ painettuna ja vierittämällä."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de CTRL+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme ⌘ e desprázate para ampliar o mapa"},gu:{touch:"નકશો ખસેડવા બે આંગળીઓનો ઉપયોગ કરો",scroll:"નકશાને ઝૂમ કરવા માટે ctrl + સ્ક્રોલનો ઉપયોગ કરો",scrollMac:"નકશાને ઝૂમ કરવા ⌘ + સ્ક્રોલનો ઉપયોગ કરો"},hi:{touch:"मैप एक जगह से दूसरी जगह ले जाने के लिए दो उंगलियों का इस्तेमाल करें",scroll:"मैप को ज़ूम करने के लिए ctrl + स्क्रोल का उपयोग करें",scrollMac:"मैप को ज़ूम करने के लिए ⌘ + स्क्रोल का उपयोग करें"},hr:{touch:"Pomičite kartu pomoću dva prsta",scroll:"Upotrijebite Ctrl i klizač miša da biste zumirali kartu",scrollMac:"Upotrijebite gumb ⌘ dok se pomičete za zumiranje karte"},hu:{touch:"Két ujjal mozgassa a térképet",scroll:"A térkép a ctrl + görgetés használatával nagyítható",scrollMac:"A térkép a ⌘ + görgetés használatával nagyítható"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan ⌘ + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza ⌘ + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"הזז את המפה באמצעות שתי אצבעות",scroll:"‏אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ctrl וגלילה",scrollMac:"אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ⌘ וגלילה"},ja:{touch:"地図を移動させるには指 2 本で操作します",scroll:"地図をズームするには、Ctrl キーを押しながらスクロールしてください",scrollMac:"地図をズームするには、⌘ キーを押しながらスクロールしてください"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},ko:{touch:"지도를 움직이려면 두 손가락을 사용하세요.",scroll:"지도를 확대/축소하려면 Ctrl을 누른 채 스크롤하세요.",scrollMac:"지도를 확대하려면 ⌘ + 스크롤 사용"},lt:{touch:"Perkelkite žemėlapį dviem pirštais",scroll:"Slinkite nuspaudę klavišą „Ctrl“, kad pakeistumėte žemėlapio mastelį",scrollMac:"Paspauskite klavišą ⌘ ir slinkite, kad priartintumėte žemėlapį"},lv:{touch:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem",scroll:"Kartes tālummaiņai izmantojiet ctrl + ritināšanu",scrollMac:"Lai veiktu kartes tālummaiņu, izmantojiet ⌘ + ritināšanu"},ml:{touch:"മാപ്പ് നീക്കാൻ രണ്ട് വിരലുകൾ ഉപയോഗിക്കുക",scroll:"കൺട്രോൾ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക",scrollMac:"⌘ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക"},mr:{touch:"नकाशा हलविण्यासाठी दोन बोटे वापरा",scroll:"नकाशा झूम करण्यासाठी ctrl + scroll वापरा",scrollMac:"नकाशावर झूम करण्यासाठी ⌘ + स्क्रोल वापरा"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik ⌘ + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for å flytte kartet",scroll:"Hold ctrl-tasten inne og rull for å zoome på kartet",scrollMac:"Hold inne ⌘-tasten og rull for å zoome på kartet"},pl:{touch:"Przesuń mapę dwoma palcami",scroll:"Naciśnij CTRL i przewiń, by przybliżyć mapę",scrollMac:"Naciśnij ⌘ i przewiń, by przybliżyć mapę"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize ⌘ + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosiți două degete pentru a deplasa harta",scroll:"Apăsați tasta ctrl și derulați simultan pentru a mări harta",scrollMac:"Folosiți ⌘ și derulați pentru a mări/micșora harta"},ru:{touch:"Чтобы переместить карту, проведите по ней двумя пальцами",scroll:"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.",scrollMac:"Чтобы изменить масштаб, нажмите ⌘ + прокрутка"},sk:{touch:"Mapu môžete posunúť dvoma prstami",scroll:"Ak chcete priblížiť mapu, stlačte kláves ctrl a posúvajte",scrollMac:"Ak chcete priblížiť mapu, stlačte kláves ⌘ a posúvajte kolieskom myši"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid povečate tako, da držite tipko Ctrl in vrtite kolesce na miški",scrollMac:"Uporabite ⌘ + funkcijo pomika, da povečate ali pomanjšate zemljevid"},sr:{touch:"Мапу померајте помоћу два прста",scroll:"Притисните ctrl тастер док померате да бисте зумирали мапу",scrollMac:"Притисните тастер ⌘ док померате да бисте зумирали мапу"},sv:{touch:"Använd två fingrar för att flytta kartan",scroll:"Använd ctrl + rulla för att zooma kartan",scrollMac:"Använd ⌘ + rulla för att zooma på kartan"},ta:{touch:"மேப்பை நகர்த்த இரண்டு விரல்களைப் பயன்படுத்தவும்",scroll:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ctrl பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்",scrollMac:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ⌘ பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்"},te:{touch:"మ్యాప్‌ని తరలించడం కోసం రెండు వేళ్లను ఉపయోగించండి",scroll:"మ్యాప్‌ని జూమ్ చేయడానికి ctrl బటన్‌ను నొక్కి ఉంచి, స్క్రోల్ చేయండి",scrollMac:"మ్యాప్ జూమ్ చేయాలంటే ⌘ + స్క్రోల్ ఉపయోగించండి"},th:{touch:"ใช้ 2 นิ้วเพื่อเลื่อนแผนที่",scroll:"กด Ctrl ค้างไว้ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่",scrollMac:"กด ⌘ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek için iki parmağınızı kullanın",scroll:"Haritayı yakınlaştırmak için ctrl + kaydırma kombinasyonunu kullanın",scrollMac:"Haritayı yakınlaştırmak için ⌘ tuşuna basıp ekranı kaydırın"},uk:{touch:"Переміщуйте карту двома пальцями",scroll:"Щоб змінювати масштаб карти, прокручуйте коліщатко миші, утримуючи клавішу Ctrl",scrollMac:"Щоб змінити масштаб карти, використовуйте ⌘ + прокручування"},vi:{touch:"Sử dụng hai ngón tay để di chuyển bản đồ",scroll:"Sử dụng ctrl + cuộn để thu phóng bản đồ",scrollMac:"Sử dụng ⌘ + cuộn để thu phóng bản đồ"},"zh-CN":{touch:"使用双指移动地图",scroll:"按住 Ctrl 并滚动鼠标滚轮才可缩放地图",scrollMac:"按住 ⌘ 并滚动鼠标滚轮才可缩放地图"},"zh-TW":{touch:"同時以兩指移動地圖",scroll:"按住 ctrl 鍵加上捲動滑鼠可以縮放地圖",scrollMac:"按 ⌘ 加上滾動捲軸可以縮放地圖"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var e=!1,i=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?e=!0:"moveend"==t.type&&(e=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)t=this._map.options.gestureHandlingOptions.text;else{var e=this._getUserLanguage();e||(e="en"),o[e]&&(t=o[e]),t||-1===e.indexOf("-")||(e=e.split("-")[0],t=o[e]),t||(t=o[e="en"])}var i=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(i=!0);var n=t.scroll;i&&(n=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",n)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){e||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",i),t.GestureHandling=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){var t,e;this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t&&(e=L.bind(this._onFullscreenChange,this),this.whenReady(function(){L.DomEvent.on(document,t,e)}),this.on("unload",function(){L.DomEvent.off(document,t,e)}))}),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},function(t,e,i){var n,o,r,a,s;a=function(l){var t=l.Control.extend({includes:l.Evented?l.Evented.prototype:l.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(t,e){l.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=t},onAdd:function(t){this._mainMap=t,this._container=l.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",l.DomEvent.disableClickPropagation(this._container),l.DomEvent.on(this._container,"mousewheel",l.DomEvent.stopPropagation);var e={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs},e=l.Util.extend(this.options.mapOptions,e);return this._miniMap=new l.Map(this._container,e),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(l.Util.bind(function(){this._aimingRect=l.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=l.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){l.Control.prototype.addTo.call(this,t);var e=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(t,e,i,n,o,r){var a=l.DomUtil.create("a",i,n);a.innerHTML=t,a.href="#",a.title=e;var s=l.DomEvent.stopPropagation;return l.DomEvent.on(a,"click",s).on(a,"mousedown",s).on(a,"dblclick",s).on(a,"click",l.DomEvent.preventDefault).on(a,"click",o,r),a},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){var e;this._miniMapMoving?this._miniMapMoving=!1:(e=this.options.centerFixed||this._mainMap.getCenter(),this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())),this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){var e,i,n;this.options.centerFixed||(e=this._aimingRect.getBounds(),i=this._miniMap.latLngToContainerPoint(e.getSouthWest()),n=this._miniMap.latLngToContainerPoint(e.getNorthEast()),this._lastAimingRectPosition={sw:i,ne:n})},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new l.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),n=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=n,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return!this._userToggledDisplay&&this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){l.Util.requestAnimFrame(function(){l.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),l.Browser.any3d||l.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){l.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var t={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",t),this.fire("toggle",t)}});return l.Map.mergeOptions({miniMapControl:!1}),l.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new t).addTo(this))}),t},s=window,o=[i(0)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&(s.L.Control.MiniMap=a(L),s.L.control.minimap=function(t,e){return new s.L.Control.MiniMap(t,e)})},function(t,e,i){var n,o,r,a,s;
/*!
Copyright (c) 2016 Dominik Moritz

This file is part of the leaflet locate control. It is licensed under the MIT license.
You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
*/
a=function(l){function i(e,i,t){(t=t.split(" ")).forEach(function(t){l.DomUtil[e].call(this,i,t)})}function e(t,e){i("addClass",t,e)}function n(t,e){i("removeClass",t,e)}var t=l.Marker.extend({initialize:function(t,e){l.Util.setOptions(this,e),this._latlng=t,this.createIcon()},createIcon:function(){var t=this.options,e="";void 0!==t.color&&(e+="stroke:"+t.color+";"),void 0!==t.weight&&(e+="stroke-width:"+t.weight+";"),void 0!==t.fillColor&&(e+="fill:"+t.fillColor+";"),void 0!==t.fillOpacity&&(e+="fill-opacity:"+t.fillOpacity+";"),void 0!==t.opacity&&(e+="opacity:"+t.opacity+";");var i=this._getIconSVG(t,e);this._locationIcon=l.divIcon({className:i.className,html:i.svg,iconSize:[i.w,i.h]}),this.setIcon(this._locationIcon)},_getIconSVG:function(t,e){var i=t.radius,n=i+t.weight,o=2*n;return{className:"leaflet-control-locate-location",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+o+'" version="1.1" viewBox="-'+n+" -"+n+" "+o+" "+o+'"><circle r="'+i+'" style="'+e+'" /></svg>',w:o,h:o}},setStyle:function(t){l.Util.setOptions(this,t),this.createIcon()}}),o=t.extend({initialize:function(t,e,i){l.Util.setOptions(this,i),this._latlng=t,this._heading=e,this.createIcon()},setHeading:function(t){this._heading=t},_getIconSVG:function(t,e){var i=t.radius,n=t.width+t.weight,o=2*(i+t.depth+t.weight),r="M0,0 l"+t.width/2+","+t.depth+" l-"+n+",0 z";return{className:"leaflet-control-locate-heading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+o+'" version="1.1" viewBox="-'+n/2+" 0 "+n+" "+o+'" style="'+("transform: rotate("+this._heading+"deg)")+'"><path d="'+r+'" style="'+e+'" /></svg>',w:n,h:o}}}),r=l.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds:function(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:t,compassClass:o,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,createButtonCallback:function(t,e){var i=l.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",t);return i.title=e.strings.title,i.role="button",i.href="#",{link:i,icon:l.DomUtil.create(e.iconElementTag,e.icon,i)}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(t){for(var e in t)"object"==typeof this.options[e]?l.extend(this.options[e],t[e]):this.options[e]=t[e];this.options.followMarkerStyle=l.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=l.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=l.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd:function(t){var e=l.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=e,this._map=t,this._layer=this.options.layer||new l.LayerGroup,this._layer.addTo(t),this._event=void 0,this._compassHeading=null,this._prevBounds=null;var i=this.options.createButtonCallback(e,this.options);return this._link=i.link,this._icon=i.icon,l.DomEvent.on(this._link,"click",l.DomEvent.stopPropagation).on(this._link,"click",l.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",l.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),e},_onClick:function(){this._justClicked=!0;var t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active&&void 0!==this._event){var e=this.options.clickBehavior,i=e.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(i=t?e.inView:e.inViewNotFollowing),e[i]&&(i=e[i]),i){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing:function(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate:function(){var t,e,i;this._active||(this._map.locate(this.options.locateOptions),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),!this.options.showCompass||((t="ondeviceorientationabsolute"in window)||"ondeviceorientation"in window)&&(e=this,i=function(){l.DomEvent.on(window,t?"deviceorientationabsolute":"deviceorientation",e._onDeviceOrientation,e)},DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t&&i()}):i()))},_deactivate:function(){this._map.stopLocate(),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?l.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&l.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView:function(){var t;this._drawMarker(),this._isOutsideMapBounds()?(this._event=void 0,this.options.onLocationOutsideMapBounds(this)):this._justClicked&&!1!==this.options.initialZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel):this.options.keepCurrentZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]):(t=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds,this._ignoreEvent=!0,t.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom}),l.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this))},_drawCompass:function(){var t,e;this._event&&(t=this._event.latlng,this.options.showCompass&&t&&null!==this._compassHeading&&(e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle,this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)),!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null))},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var t,e,i,n,o=this._event.accuracy,r=this._event.latlng;this.options.drawCircle&&(t=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle,this._circle?this._circle.setLatLng(r).setRadius(o).setStyle(t):this._circle=l.circle(r,o,t).addTo(this._layer)),i=this.options.metric?(e=o.toFixed(0),this.options.strings.metersUnit):(e=(3.2808399*o).toFixed(0),this.options.strings.feetUnit),this.options.drawMarker&&(n=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle,this._marker?(this._marker.setLatLng(r),this._marker.setStyle&&this._marker.setStyle(n)):this._marker=new this.options.markerClass(r,n).addTo(this._layer)),this._drawCompass();var a=this.options.strings.popup;function s(){return"string"==typeof a?l.Util.template(a,{distance:e,unit:i}):"function"==typeof a?a({distance:e,unit:i}):a}this.options.showPopup&&a&&this._marker&&this._marker.bindPopup(s())._popup.setLatLng(r),this.options.showPopup&&a&&this._compass&&this._compass.bindPopup(s())._popup.setLatLng(r)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading:function(t){!isNaN(parseFloat(t))&&isFinite(t)?(t=Math.round(t),this._compassHeading=t,l.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration:function(){this._setCompassHeading()},_onDeviceOrientation:function(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom:function(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd:function(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(n(this._container,"active following"),e(this._container,"requesting"),n(this._icon,this.options.icon),e(this._icon,this.options.iconLoading)):"active"==t?(n(this._container,"requesting following"),e(this._container,"active"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)):"following"==t&&(n(this._container,"requesting"),e(this._container,"active following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon))},_cleanClasses:function(){l.DomUtil.removeClass(this._container,"requesting"),l.DomUtil.removeClass(this._container,"active"),l.DomUtil.removeClass(this._container,"following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return l.control.locate=function(t){return new l.Control.Locate(t)},r},s=window,o=[i(0)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&(s.L.Control.Locate=a(L))},function(t,e,i){var n,o,r;o=[i(0)],void 0===(r="function"==typeof(n=function(u){u.Map.mergeOptions({contextmenuItems:[]}),u.Map.ContextMenu=u.Handler.extend({_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(t){u.Handler.prototype.initialize.call(this,t);this._items=[];this._visible=false;var e=this._container=u.DomUtil.create("div",u.Map.ContextMenu.BASE_CLS,t._container);e.style.zIndex=1e4;e.style.position="absolute";if(t.options.contextmenuWidth){e.style.width=t.options.contextmenuWidth+"px"}this._createItems();u.DomEvent.on(e,"click",u.DomEvent.stop).on(e,"mousedown",u.DomEvent.stop).on(e,"dblclick",u.DomEvent.stop).on(e,"contextmenu",u.DomEvent.stop)},addHooks:function(){var t=this._map.getContainer();u.DomEvent.on(t,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this);if(u.Browser.touch){u.DomEvent.on(document,this._touchstart,this._hide,this)}this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var t=this._map.getContainer();u.DomEvent.off(t,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this);if(u.Browser.touch){u.DomEvent.off(document,this._touchstart,this._hide,this)}this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(t,e){if(t instanceof u.LatLng){t=this._map.latLngToContainerPoint(t)}this._showAtPoint(t,e)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=e!==undefined?e:this._items.length;var i=this._createItem(this._container,t,e);this._items.push(i);this._sizeChanged=true;this._map.fire("contextmenu.additem",{contextmenu:this,el:i.el,index:e});return i.el},removeItem:function(t){var e=this._container;if(!isNaN(t)){t=e.children[t]}if(t){this._removeItem(u.Util.stamp(t));this._sizeChanged=true;this._map.fire("contextmenu.removeitem",{contextmenu:this,el:t});return t}return null},removeAllItems:function(){var t=this._container.children,e;while(t.length){e=t[0];this._removeItem(u.Util.stamp(e))}return t},hideAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display="none"}},showAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display=""}},setDisabled:function(t,e){var i=this._container,n=u.Map.ContextMenu.BASE_CLS+"-item";if(!isNaN(t)){t=i.children[t]}if(t&&u.DomUtil.hasClass(t,n)){if(e){u.DomUtil.addClass(t,n+"-disabled");this._map.fire("contextmenu.disableitem",{contextmenu:this,el:t})}else{u.DomUtil.removeClass(t,n+"-disabled");this._map.fire("contextmenu.enableitem",{contextmenu:this,el:t})}}},isVisible:function(){return this._visible},_createItems:function(){var t=this._map.options.contextmenuItems,e,i,n;for(i=0,n=t.length;i<n;i++){this._items.push(this._createItem(this._container,t[i]))}},_createItem:function(t,e,i){if(e.separator||e==="-"){return this._createSeparator(t,i)}var n=u.Map.ContextMenu.BASE_CLS+"-item",o=e.disabled?n+" "+n+"-disabled":n,r=this._insertElementAt("a",o,t,i),a=this._createEventHandler(r,e.callback,e.context,e.hideOnSelect),s=this._getIcon(e),l=this._getIconCls(e),h="";if(s){h='<img class="'+u.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>'}else if(l){h='<span class="'+u.Map.ContextMenu.BASE_CLS+"-icon "+l+'"></span>'}r.innerHTML=h+e.text;r.href="#";u.DomEvent.on(r,"mouseover",this._onItemMouseOver,this).on(r,"mouseout",this._onItemMouseOut,this).on(r,"mousedown",u.DomEvent.stopPropagation).on(r,"click",a);if(u.Browser.touch){u.DomEvent.on(r,this._touchstart,u.DomEvent.stopPropagation)}if(!u.Browser.pointer){u.DomEvent.on(r,"click",this._onItemMouseOut,this)}return{id:u.Util.stamp(r),el:r,callback:a}},_removeItem:function(t){var e,i,n,o,r;for(n=0,o=this._items.length;n<o;n++){e=this._items[n];if(e.id===t){i=e.el;r=e.callback;if(r){u.DomEvent.off(i,"mouseover",this._onItemMouseOver,this).off(i,"mouseover",this._onItemMouseOut,this).off(i,"mousedown",u.DomEvent.stopPropagation).off(i,"click",r);if(u.Browser.touch){u.DomEvent.off(i,this._touchstart,u.DomEvent.stopPropagation)}if(!u.Browser.pointer){u.DomEvent.on(i,"click",this._onItemMouseOut,this)}}this._container.removeChild(i);this._items.splice(n,1);return e}}return null},_createSeparator:function(t,e){var i=this._insertElementAt("div",u.Map.ContextMenu.BASE_CLS+"-separator",t,e);return{id:u.Util.stamp(i),el:i}},_createEventHandler:function(e,i,n,o){var r=this,a=this._map,s=u.Map.ContextMenu.BASE_CLS+"-item-disabled",o=o!==undefined?o:true;return function(t){if(u.DomUtil.hasClass(e,s)){return}if(o){r._hide()}if(i){i.call(n||a,r._showLocation)}r._map.fire("contextmenu.select",{contextmenu:r,el:e})}},_insertElementAt:function(t,e,i,n){var o,r=document.createElement(t);r.className=e;if(n!==undefined){o=i.children[n]}if(o){i.insertBefore(r,o)}else{i.appendChild(r)}return r},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(t,e){if(this._items.length){var i=this._map,n=i.containerPointToLayerPoint(t),o=i.layerPointToLatLng(n),r=u.extend(e||{},{contextmenu:this});this._showLocation={latlng:o,layerPoint:n,containerPoint:t};if(e&&e.relatedTarget){this._showLocation.relatedTarget=e.relatedTarget}this._setPosition(t);if(!this._visible){this._container.style.display="block";this._visible=true}this._map.fire("contextmenu.show",r)}},_hide:function(){if(this._visible){this._visible=false;this._container.style.display="none";this._map.fire("contextmenu.hide",{contextmenu:this})}},_getIcon:function(t){return u.Browser.retina&&t.retinaIcon||t.icon},_getIconCls:function(t){return u.Browser.retina&&t.retinaIconCls||t.iconCls},_setPosition:function(t){var e=this._map.getSize(),i=this._container,n=this._getElementSize(i),o;if(this._map.options.contextmenuAnchor){o=u.point(this._map.options.contextmenuAnchor);t=t.add(o)}i._leaflet_pos=t;if(t.x+n.x>e.x){i.style.left="auto";i.style.right=Math.min(Math.max(e.x-t.x,0),e.x-n.x-1)+"px"}else{i.style.left=Math.max(t.x,0)+"px";i.style.right="auto"}if(t.y+n.y>e.y){i.style.top="auto";i.style.bottom=Math.min(Math.max(e.y-t.y,0),e.y-n.y-1)+"px"}else{i.style.top=Math.max(t.y,0)+"px";i.style.bottom="auto"}},_getElementSize:function(t){var e=this._size,i=t.style.display;if(!e||this._sizeChanged){e={};t.style.left="-999999px";t.style.right="auto";t.style.display="block";e.x=t.offsetWidth;e.y=t.offsetHeight;t.style.left="auto";t.style.display=i;this._sizeChanged=false}return e},_onKeyDown:function(t){var e=t.keyCode;if(e===27){this._hide()}},_onItemMouseOver:function(t){u.DomUtil.addClass(t.target||t.srcElement,"over")},_onItemMouseOut:function(t){u.DomUtil.removeClass(t.target||t.srcElement,"over")}}),u.Map.addInitHook("addHandler","contextmenu",u.Map.ContextMenu),u.Mixin.ContextMenu={bindContextMenu:function(t){u.setOptions(this,t);this._initContextMenu();return this},unbindContextMenu:function(){this.off("contextmenu",this._showContextMenu,this);return this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){var e=[];for(var i=0;i<this.options.contextmenuItems.length;i++){if(this.options.contextmenuItems[i].index==t){e.push(i)}}var n=e.pop();while(n!==undefined){this.options.contextmenuItems.splice(n,1);n=e.pop()}},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index);this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[];this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(t){var e,i,n,o,r;if(this._map.contextmenu){i=u.extend({relatedTarget:this},t);n=this._map.mouseEventToContainerPoint(t.originalEvent);if(!this.options.contextmenuInheritItems){this._map.contextmenu.hideAllItems()}for(o=0,r=this.options.contextmenuItems.length;o<r;o++){e=this.options.contextmenuItems[o];this._items.push(this._map.contextmenu.insertItem(e,e.index))}this._map.once("contextmenu.hide",this._hideContextMenu,this);this._map.contextmenu.showAt(n,i)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++){this._map.contextmenu.removeItem(this._items[t])}this._items.length=0;if(!this.options.contextmenuInheritItems){this._map.contextmenu.showAllItems()}}};var t=[u.Marker,u.Path],e={contextmenu:false,contextmenuItems:[],contextmenuInheritItems:true},i,n,o;for(n=0,o=t.length;n<o;n++){i=t[n];if(!i.prototype.options){i.prototype.options=e}else{i.mergeOptions(e)}i.addInitHook(function(){if(this.options.contextmenu){this._initContextMenu()}});i.include(u.Mixin.ContextMenu)}return u.Map.ContextMenu})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},,,,,function(t,e,i){i(44),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(36),i(37),t.exports=i(38)},function(t,e,i){"use strict";i.r(e);i(10);var n=i(5);window.mapsMarkerPro={callbacks:[]},window.MapsMarkerPro=n.a}]);